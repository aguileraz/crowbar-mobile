ðŸ—ï¸  Building Docker images...
ðŸ“¦ Building Android base image first...
docker compose -f docker-compose.android.yml build android-base
time="2025-08-04T16:14:47-03:00" level=warning msg="/mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/docker-compose.android.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 626B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile.base
#2 transferring dockerfile: 2.55kB done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/ubuntu:22.04
#3 DONE 1.2s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [ 1/11] FROM docker.io/library/ubuntu:22.04@sha256:1ec65b2719518e27d4d25f104d93f9fac60dc437f81452302406825c46fcc9cb
#5 DONE 0.0s

#6 [ 7/11] RUN curl -fsSL https://deb.nodesource.com/setup_18.x | bash - &&     apt-get install -y nodejs &&     rm -rf /var/lib/apt/lists/*
#6 CACHED

#7 [ 6/11] RUN sdkmanager --update &&     sdkmanager     "platform-tools"     "emulator"     "tools"     > /dev/null 2>&1
#7 CACHED

#8 [ 9/11] RUN appium driver install uiautomator2 &&     appium driver install espresso
#8 CACHED

#9 [ 2/11] RUN apt-get update && apt-get install -y     curl     wget     unzip     git     openjdk-17-jdk     build-essential     libssl-dev     libffi-dev     python3-dev     python3-pip     qemu-kvm     libvirt-daemon-system     libvirt-clients     bridge-utils     libpulse0     libgl1-mesa-glx     libglu1-mesa     libxi6     libxrender1     libxtst6     libnss3     libxss1     libasound2     libatk-bridge2.0-0     libgtk-3-0     libx11-xcb1     libxcb-dri3-0     libdrm2     libgbm1     libxcomposite1     libxcursor1     libxdamage1     libxfixes3     libxrandr2     socat     && rm -rf /var/lib/apt/lists/*
#9 CACHED

#10 [ 3/11] RUN mkdir -p /opt/android-sdk/cmdline-tools
#10 CACHED

#11 [ 8/11] RUN npm install -g     appium@2.0.1     appium-doctor     @wdio/cli     @wdio/local-runner     @wdio/mocha-framework     @wdio/spec-reporter
#11 CACHED

#12 [10/11] WORKDIR /workspace
#12 CACHED

#13 [ 4/11] RUN wget -q https://dl.google.com/android/repository/commandlinetools-linux-9477386_latest.zip -O /tmp/cmdline-tools.zip &&     unzip -q /tmp/cmdline-tools.zip -d /opt/android-sdk/cmdline-tools &&     mv /opt/android-sdk/cmdline-tools/cmdline-tools /opt/android-sdk/cmdline-tools/latest &&     rm /tmp/cmdline-tools.zip
#13 CACHED

#14 [ 5/11] RUN yes | sdkmanager --licenses > /dev/null 2>&1
#14 CACHED

#15 [11/11] RUN echo '#!/bin/bash\necho "Base image ready"' > /entrypoint.sh &&     chmod +x /entrypoint.sh
#15 CACHED

#16 exporting to image
#16 exporting layers done
#16 writing image sha256:f60381c0c8c1252e77b5d42acc4a1301ae5582f5d11e8de9fe195f2139406b5d done
#16 naming to docker.io/library/crowbar-android-base:latest done
#16 DONE 0.0s

#17 resolving provenance for metadata file
#17 DONE 0.0s
 crowbar-android-base:latest  Built
ðŸ“¦ Building specific Android API images...
docker compose -f docker-compose.android.yml build android-api-21 android-api-26 android-api-31
time="2025-08-04T16:14:48-03:00" level=warning msg="/mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/docker-compose.android.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 2.27kB done
#1 DONE 0.0s

#2 [android-api-21 internal] load build definition from Dockerfile
#2 transferring dockerfile: 2.94kB done
#2 DONE 0.0s

#3 [android-api-26 internal] load build definition from Dockerfile
#3 transferring dockerfile: 3.23kB done
#3 DONE 0.0s

#4 [android-api-31 internal] load build definition from Dockerfile
#4 transferring dockerfile: 3.33kB done
#4 DONE 0.0s

#5 [android-api-31 internal] load metadata for docker.io/library/crowbar-android-base:latest
#5 DONE 0.0s

#6 [android-api-21 internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [android-api-26 internal] load .dockerignore
#7 transferring context: 2B done
#7 DONE 0.0s

#8 [android-api-21 1/5] FROM docker.io/library/crowbar-android-base:latest
#8 DONE 0.0s

#9 [android-api-31 internal] load .dockerignore
#9 transferring context: 2B done
#9 DONE 0.0s

#10 [android-api-21 2/5] RUN sdkmanager     "platforms;android-21"     "system-images;android-21;google_apis;x86"     "build-tools;30.0.3"     > /dev/null 2>&1
#10 CACHED

#11 [android-api-21 internal] preparing inline document
#11 CACHED

#12 [android-api-31 internal] preparing inline document
#12 CACHED

#13 [android-api-31 2/5] RUN sdkmanager     "platforms;android-31"     "system-images;android-31;google_apis;x86_64"     "build-tools;31.0.0"     > /dev/null 2>&1
#13 CACHED

#14 [android-api-26 internal] preparing inline document
#14 CACHED

#8 [android-api-31 1/5] FROM docker.io/library/crowbar-android-base:latest
#8 CACHED

#15 [android-api-26 2/5] RUN sdkmanager     "platforms;android-26"     "system-images;android-26;google_apis;x86_64"     "build-tools;30.0.3"     > /dev/null 2>&1
#15 ...

#16 [android-api-31 3/5] RUN echo "no" | avdmanager create avd     --name test_device_31     --package "system-images;android-31;google_apis;x86_64"     --force
#16 0.663 Loading local repository...                                                     [=========                              ] 25% Loading local repository...       [=========                              ] 25% Fetch remote repository...        [=======================================] 100% Fetch remote repository...       
#16 1.262 Auto-selecting single ABI x86_64
#16 1.262 Do you wish to create a custom hardware profile? [no] 
#16 DONE 1.8s

#17 [android-api-31 4/5] RUN echo "hw.lcd.density=440" >> ~/.android/avd/test_device_31.avd/config.ini &&     echo "hw.keyboard=yes" >> ~/.android/avd/test_device_31.avd/config.ini &&     echo "hw.cpu.ncore=4" >> ~/.android/avd/test_device_31.avd/config.ini &&     echo "hw.gpu.enabled=yes" >> ~/.android/avd/test_device_31.avd/config.ini &&     echo "hw.gpu.mode=swiftshader_indirect" >> ~/.android/avd/test_device_31.avd/config.ini &&     echo "hw.ramSize=4096" >> ~/.android/avd/test_device_31.avd/config.ini &&     echo "vm.heapSize=512" >> ~/.android/avd/test_device_31.avd/config.ini &&     echo "disk.dataPartition.size=6G" >> ~/.android/avd/test_device_31.avd/config.ini
#17 DONE 0.3s

#18 [android-api-21 3/5] RUN echo "no" | avdmanager create avd     --name test_device_21     --package "system-images;android-21;google_apis;x86"     --force
#18 0.691 Loading local repository...                                                     [=========                              ] 25% Loading local repository...       [=========                              ] 25% Fetch remote repository...        [=======================================] 100% Fetch remote repository...       
#18 1.283 Auto-selecting single ABI x86
#18 1.283 Do you wish to create a custom hardware profile? [no] 
#18 ...

#19 [android-api-31 5/5] COPY --chmod=755 <<EOF /start-emulator.sh
#19 DONE 0.1s

#20 [android-api-31] exporting to image
#20 exporting layers 0.1s done
#20 writing image sha256:2abe70296338dcfd72f5c639128bf58dc9bbf9104f09785cb2ffc5fb20064fe2
#20 writing image sha256:2abe70296338dcfd72f5c639128bf58dc9bbf9104f09785cb2ffc5fb20064fe2 done
#20 naming to docker.io/library/crowbar-android-api-31:latest done
#20 DONE 0.1s

#21 [android-api-31] resolving provenance for metadata file
#21 DONE 0.0s

#18 [android-api-21 3/5] RUN echo "no" | avdmanager create avd     --name test_device_21     --package "system-images;android-21;google_apis;x86"     --force
#18 1.283 Do you wish to create a custom hardware profile? [no] 
#18 DONE 11.6s

#15 [android-api-26 2/5] RUN sdkmanager     "platforms;android-26"     "system-images;android-26;google_apis;x86_64"     "build-tools;30.0.3"     > /dev/null 2>&1
#15 ...

#22 [android-api-21 4/5] RUN echo "hw.lcd.density=480" >> ~/.android/avd/test_device_21.avd/config.ini &&     echo "hw.keyboard=yes" >> ~/.android/avd/test_device_21.avd/config.ini &&     echo "hw.cpu.ncore=2" >> ~/.android/avd/test_device_21.avd/config.ini &&     echo "hw.gpu.enabled=yes" >> ~/.android/avd/test_device_21.avd/config.ini &&     echo "hw.gpu.mode=swiftshader_indirect" >> ~/.android/avd/test_device_21.avd/config.ini &&     echo "hw.ramSize=2048" >> ~/.android/avd/test_device_21.avd/config.ini &&     echo "vm.heapSize=256" >> ~/.android/avd/test_device_21.avd/config.ini &&     echo "disk.dataPartition.size=2G" >> ~/.android/avd/test_device_21.avd/config.ini
#22 DONE 5.8s

#15 [android-api-26 2/5] RUN sdkmanager     "platforms;android-26"     "system-images;android-26;google_apis;x86_64"     "build-tools;30.0.3"     > /dev/null 2>&1
#15 ...

#23 [android-api-21 5/5] COPY --chmod=755 <<EOF /start-emulator.sh
#23 DONE 5.0s

#15 [android-api-26 2/5] RUN sdkmanager     "platforms;android-26"     "system-images;android-26;google_apis;x86_64"     "build-tools;30.0.3"     > /dev/null 2>&1
#15 ...

#24 [android-api-21] exporting to image
#24 exporting layers
#24 exporting layers 23.3s done
#24 writing image sha256:098a095d56b213c31f3f9735dd083abac4c87d15150684d38f2cbd18f9ecc7b7 done
#24 naming to docker.io/library/crowbar-android-api-21:latest done
#24 DONE 23.3s

#25 [android-api-21] resolving provenance for metadata file
#25 DONE 0.0s

#15 [android-api-26 2/5] RUN sdkmanager     "platforms;android-26"     "system-images;android-26;google_apis;x86_64"     "build-tools;30.0.3"     > /dev/null 2>&1
#15 DONE 87.9s

#26 [android-api-26 3/5] RUN echo "no" | avdmanager create avd     --name test_device_26     --package "system-images;android-26;google_apis;x86_64"     --force
#26 0.563 Loading local repository...                                                     [=========                              ] 25% Loading local repository...       [=========                              ] 25% Fetch remote repository...        [=======================================] 100% Fetch remote repository...       
#26 1.076 Auto-selecting single ABI x86_64
#26 1.076 Do you wish to create a custom hardware profile? [no] 
#26 DONE 1.8s

#27 [android-api-26 4/5] RUN echo "hw.lcd.density=420" >> ~/.android/avd/test_device_26.avd/config.ini &&     echo "hw.keyboard=yes" >> ~/.android/avd/test_device_26.avd/config.ini &&     echo "hw.cpu.ncore=4" >> ~/.android/avd/test_device_26.avd/config.ini &&     echo "hw.gpu.enabled=yes" >> ~/.android/avd/test_device_26.avd/config.ini &&     echo "hw.gpu.mode=swiftshader_indirect" >> ~/.android/avd/test_device_26.avd/config.ini &&     echo "hw.ramSize=3072" >> ~/.android/avd/test_device_26.avd/config.ini &&     echo "vm.heapSize=384" >> ~/.android/avd/test_device_26.avd/config.ini &&     echo "disk.dataPartition.size=4G" >> ~/.android/avd/test_device_26.avd/config.ini
#27 DONE 0.3s

#28 [android-api-26 5/5] COPY --chmod=755 <<EOF /start-emulator.sh
#28 DONE 5.1s

#29 [android-api-26] exporting to image
#29 exporting layers
#29 exporting layers 20.5s done
#29 writing image sha256:b9da6c5264513d652457b338385c8e0cd2114b6937b99c32ea6af4e032041fde done
#29 naming to docker.io/library/crowbar-android-api-26:latest done
#29 DONE 20.5s

#30 [android-api-26] resolving provenance for metadata file
#30 DONE 0.0s
 crowbar-android-api-26:latest  Built
 crowbar-android-api-31:latest  Built
 crowbar-android-api-21:latest  Built
ðŸ“¦ Building Appium and test runner...
docker compose -f docker-compose.android.yml build appium-server test-runner
time="2025-08-04T16:16:44-03:00" level=warning msg="/mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/docker-compose.android.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 3.26kB done
#1 DONE 0.0s

#2 [test-runner internal] load build definition from Dockerfile
#2 transferring dockerfile: 8.38kB done
#2 DONE 0.0s

#3 [appium-server internal] load build definition from Dockerfile
#3 transferring dockerfile: 2.37kB done
#3 DONE 0.0s

#4 [appium-server internal] load metadata for docker.io/library/node:18-slim
#4 ...

#5 [test-runner internal] load metadata for docker.io/library/node:18
#5 DONE 1.1s

#6 [test-runner internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [test-runner internal] preparing inline document
#7 DONE 0.0s

#8 [test-runner 1/7] FROM docker.io/library/node:18@sha256:c6ae79e38498325db67193d391e6ec1d224d96c693a8a4d943498556716d3783
#8 DONE 0.0s

#9 [test-runner internal] preparing inline document
#9 DONE 0.0s

#10 [test-runner 3/7] RUN mkdir -p /opt/android-sdk &&     wget -q https://dl.google.com/android/repository/platform-tools-latest-linux.zip &&     unzip -q platform-tools-latest-linux.zip -d /opt/android-sdk &&     rm platform-tools-latest-linux.zip
#10 CACHED

#11 [test-runner 2/7] RUN apt-get update && apt-get install -y     wget     curl     git     build-essential     python3     python3-pip     imagemagick     graphicsmagick     && rm -rf /var/lib/apt/lists/*
#11 CACHED

#12 [test-runner 4/7] WORKDIR /workspace
#12 CACHED

#13 [test-runner 5/7] RUN npm install -g     @wdio/cli     @wdio/local-runner     @wdio/mocha-framework     @wdio/spec-reporter     @wdio/allure-reporter     @percy/cli     @percy/appium-app     jest     jest-html-reporter     allure-commandline
#13 CACHED

#14 [test-runner 6/7] COPY --chmod=644 <<EOF /workspace/wdio.docker.conf.js
#14 CACHED

#15 [test-runner 7/7] COPY --chmod=755 <<EOF /workspace/run-tests.sh
#15 CACHED

#4 [appium-server internal] load metadata for docker.io/library/node:18-slim
#4 DONE 1.2s

#16 [test-runner] exporting to image
#16 exporting layers done
#16 writing image sha256:b51083e2c119311458f05d2f8965fe80e4d2e8c793eeffe689b698733a2a1057 done
#16 naming to docker.io/library/crowbar-test-runner:latest done
#16 DONE 0.0s

#17 [appium-server internal] load .dockerignore
#17 transferring context: 2B done
#17 DONE 0.0s

#18 [appium-server  1/10] FROM docker.io/library/node:18-slim@sha256:f9ab18e354e6855ae56ef2b290dd225c1e51a564f87584b9bd21dd651838830e
#18 DONE 0.0s

#19 [appium-server internal] preparing inline document
#19 CACHED

#20 [appium-server  4/10] RUN npm install -g     appium@2.0.1     appium-doctor
#20 CACHED

#21 [appium-server  3/10] RUN mkdir -p /opt/android-sdk &&     wget -q https://dl.google.com/android/repository/platform-tools-latest-linux.zip &&     unzip -q platform-tools-latest-linux.zip -d /opt/android-sdk &&     rm platform-tools-latest-linux.zip
#21 CACHED

#22 [appium-server  2/10] RUN apt-get update && apt-get install -y     wget     curl     unzip     git     build-essential     python3     python3-pip     openjdk-17-jre-headless     && rm -rf /var/lib/apt/lists/*
#22 CACHED

#23 [appium-server internal] preparing inline document
#23 CACHED

#24 [appium-server internal] preparing inline document
#24 CACHED

#25 [appium-server  5/10] RUN appium driver install uiautomator2 &&     appium driver install espresso
#25 CACHED

#26 [test-runner] resolving provenance for metadata file
#26 DONE 0.0s

#27 [appium-server  6/10] RUN appium plugin install images &&     appium plugin install execute-driver
#27 5.165 WARN Appium Appium encountered 2 warnings while validating drivers found in manifest /root/.appium/node_modules/.cache/appium/extensions.yaml
#27 5.165 WARN Appium Driver "uiautomator2" has 1 potential problem: 
#27 5.165 WARN Appium   - Driver "uiautomator2" (package `appium-uiautomator2-driver`) may be incompatible with the current version of Appium (v2.0.1) due to its peer dependency on older Appium v^2.4.1 || ^3.0.0-beta.0. Please ask the developer of `appium-uiautomator2-driver` to update the peer dependency on Appium to v2.0.1.
#27 5.166 WARN Appium Driver "espresso" has 1 potential problem: 
#27 5.166 WARN Appium   - Driver "espresso" (package `appium-espresso-driver`) may be incompatible with the current version of Appium (v2.0.1) due to its peer dependency on older Appium v^2.4.1. Please ask the developer of `appium-espresso-driver` to update the peer dependency on Appium to v2.0.1.
#27 5.243 - Installing 'images' using NPM install spec '@appium/images-plugin'
#27 29.24 âœ” Installing 'images' using NPM install spec '@appium/images-plugin'
#27 29.27 â„¹ [32mPlugin images@3.1.3 successfully installed[39m
#27 33.19 WARN Appium Appium encountered 2 warnings while validating drivers found in manifest /root/.appium/node_modules/.cache/appium/extensions.yaml
#27 33.19 WARN Appium Driver "uiautomator2" has 1 potential problem: 
#27 33.19 WARN Appium   - Driver "uiautomator2" (package `appium-uiautomator2-driver`) may be incompatible with the current version of Appium (v2.0.1) due to its peer dependency on older Appium v^2.4.1 || ^3.0.0-beta.0. Please ask the developer of `appium-uiautomator2-driver` to update the peer dependency on Appium to v2.0.1.
#27 33.19 WARN Appium Driver "espresso" has 1 potential problem: 
#27 33.19 WARN Appium   - Driver "espresso" (package `appium-espresso-driver`) may be incompatible with the current version of Appium (v2.0.1) due to its peer dependency on older Appium v^2.4.1. Please ask the developer of `appium-espresso-driver` to update the peer dependency on Appium to v2.0.1.
#27 33.26 - Installing 'execute-driver' using NPM install spec '@appium/execute-driver-plugin'
#27 50.14 âœ” Installing 'execute-driver' using NPM install spec '@appium/execute-driver-plugin'
#27 50.15 â„¹ [32mPlugin execute-driver@4.0.6 successfully installed[39m
#27 DONE 55.2s

#28 [appium-server  7/10] WORKDIR /workspace
#28 DONE 5.1s

#29 [appium-server  8/10] COPY --chmod=644 <<EOF /workspace/.appiumrc.json
#29 DONE 5.1s

#30 [appium-server  9/10] COPY --chmod=755 <<EOF /healthcheck.sh
#30 DONE 5.1s

#31 [appium-server 10/10] COPY --chmod=755 <<EOF /start-appium.sh
#31 DONE 5.1s

#32 [appium-server] exporting to image
#32 exporting layers
#32 exporting layers 6.1s done
#32 writing image sha256:2172ec16d8a0b050278125bb7f55d1812991cfb632f781a8b85aa38792f1f53b done
#32 naming to docker.io/library/crowbar-appium:latest done
#32 DONE 6.1s

#33 [appium-server] resolving provenance for metadata file
#33 DONE 0.0s
 crowbar-appium:latest  Built
 crowbar-test-runner:latest  Built
