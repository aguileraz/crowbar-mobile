PASS src/hooks/__tests__/useAnalytics.test.ts
  useAnalytics
    Main Hook - Initialization
      âœ“ deve inicializar analytics automaticamente quando autoInitialize Ã© true (37 ms)
      âœ“ nÃ£o deve inicializar automaticamente quando autoInitialize Ã© false (2 ms)
      âœ“ nÃ£o deve inicializar se jÃ¡ estiver inicializado (1 ms)
      âœ“ deve permitir inicializaÃ§Ã£o manual (3 ms)
      âœ“ deve logar erro ao falhar na inicializaÃ§Ã£o (4 ms)
    Main Hook - Event Tracking
      âœ“ deve rastrear evento customizado (3 ms)
      âœ“ deve rastrear evento sem parÃ¢metros (2 ms)
      âœ“ nÃ£o deve rastrear evento quando analytics estÃ¡ desabilitado (2 ms)
      âœ“ deve rastrear mÃºltiplos eventos (4 ms)
      âœ“ deve logar erro ao falhar no tracking de evento (3 ms)
      âœ“ deve rastrear evento com parÃ¢metros complexos (3 ms)
      âœ“ deve rastrear evento com parÃ¢metros vazios (3 ms)
      âœ“ deve rastrear evento com nome vazio (2 ms)
    Main Hook - Screen View Tracking
      âœ“ deve rastrear visualizaÃ§Ã£o de tela (3 ms)
      âœ“ deve rastrear visualizaÃ§Ã£o de tela com screenClass (3 ms)
      âœ“ nÃ£o deve rastrear tela quando trackScreenViews Ã© false (2 ms)
      âœ“ nÃ£o deve rastrear tela quando analytics estÃ¡ desabilitado (1 ms)
      âœ“ deve logar erro ao falhar no tracking de tela (3 ms)
    Main Hook - User Management
      âœ“ deve definir ID do usuÃ¡rio (2 ms)
      âœ“ deve definir propriedades do usuÃ¡rio (2 ms)
      âœ“ deve limpar ID do usuÃ¡rio (logout) (2 ms)
      âœ“ nÃ£o deve definir propriedades quando analytics estÃ¡ desabilitado (1 ms)
      âœ“ deve logar erro ao falhar ao definir ID do usuÃ¡rio (2 ms)
    Main Hook - Conversion Tracking
      âœ“ deve rastrear evento de conversÃ£o (3 ms)
      âœ“ deve rastrear conversÃ£o sem valor (4 ms)
      âœ“ nÃ£o deve rastrear conversÃ£o quando analytics estÃ¡ desabilitado (2 ms)
      âœ“ deve logar erro ao falhar no tracking de conversÃ£o (2 ms)
    Main Hook - Error & Engagement Tracking
      âœ“ deve rastrear erro (2 ms)
      âœ“ deve rastrear engagement (1 ms)
      âœ“ nÃ£o deve rastrear erro quando analytics estÃ¡ desabilitado (1 ms)
      âœ“ nÃ£o deve rastrear engagement quando analytics estÃ¡ desabilitado (5 ms)
      âœ“ deve logar erro ao falhar no tracking de engagement (1 ms)
    Main Hook - Return Values
      âœ“ deve retornar todos os valores de state (2 ms)
      âœ“ deve calcular isReady corretamente quando inicializado e habilitado (1 ms)
      âœ“ deve calcular isReady como false quando nÃ£o inicializado (1 ms)
      âœ“ deve calcular isReady como false quando desabilitado (1 ms)
    useScreenTracking
      âœ“ deve rastrear tela automaticamente quando isReady (3 ms)
      âœ“ nÃ£o deve rastrear tela quando analytics nÃ£o estÃ¡ pronto (32 ms)
      âœ“ deve rastrear tela sem screenClass (2 ms)
      âœ“ deve retornar screenName (5 ms)
      âœ“ deve atualizar tracking quando screenName muda (4 ms)
      âœ“ deve rastrear mÃºltiplas telas (10 ms)
    usePerformanceTracking
      âœ“ deve rastrear chamada de API (4 ms)
      âœ“ nÃ£o deve rastrear API quando analytics estÃ¡ desabilitado (5 ms)
      âœ“ deve rastrear tempo de carregamento de tela (3 ms)
      âœ“ nÃ£o deve rastrear tempo de tela quando analytics estÃ¡ desabilitado (2 ms)
      âœ“ deve rastrear mÃºltiplas chamadas de API (4 ms)
      âœ“ deve rastrear diferentes mÃ©todos HTTP (5 ms)
    useEcommerceTracking
      âœ“ deve rastrear compra completa (3 ms)
      âœ“ deve rastrear adiÃ§Ã£o ao carrinho (2 ms)
      âœ“ deve usar BRL como moeda padrÃ£o (3 ms)
      âœ“ deve rastrear remoÃ§Ã£o do carrinho (7 ms)
      âœ“ deve rastrear abertura de caixa (3 ms)
      âœ“ nÃ£o deve rastrear compra quando analytics estÃ¡ desabilitado (2 ms)
      âœ“ nÃ£o deve rastrear adiÃ§Ã£o ao carrinho quando analytics estÃ¡ desabilitado (2 ms)
      âœ“ nÃ£o deve rastrear abertura de caixa quando analytics estÃ¡ desabilitado (2 ms)
      âœ“ deve logar erro ao falhar no tracking de compra (2 ms)
      âœ“ deve logar erro ao falhar no tracking de abertura de caixa (2 ms)
    useEngagementTracking
      âœ“ deve rastrear clique em botÃ£o (5 ms)
      âœ“ deve rastrear busca (4 ms)
      âœ“ deve rastrear compartilhamento (4 ms)
      âœ“ deve rastrear tempo gasto (4 ms)
      âœ“ nÃ£o deve rastrear clique quando analytics estÃ¡ desabilitado (4 ms)
      âœ“ nÃ£o deve rastrear busca quando analytics estÃ¡ desabilitado (7 ms)
      âœ“ nÃ£o deve rastrear compartilhamento quando analytics estÃ¡ desabilitado (5 ms)
      âœ“ nÃ£o deve rastrear tempo gasto quando analytics estÃ¡ desabilitado (4 ms)
      âœ“ deve rastrear mÃºltiplos cliques em sequÃªncia (4 ms)
      âœ“ deve rastrear buscas sem resultados (4 ms)

PASS src/hooks/__tests__/useNotifications.test.ts
  useNotifications
    Main Hook - Initialization
      âœ“ deve inicializar automaticamente quando autoInitialize Ã© true (8 ms)
      âœ“ nÃ£o deve inicializar automaticamente quando autoInitialize Ã© false (1 ms)
      âœ“ nÃ£o deve inicializar novamente se jÃ¡ estiver inicializado (1 ms)
      âœ“ deve permitir inicializaÃ§Ã£o manual (2 ms)
      âœ“ deve logar erro ao falhar na inicializaÃ§Ã£o (3 ms)
    Main Hook - Loading Notifications
      âœ“ deve carregar notificaÃ§Ãµes com paginaÃ§Ã£o padrÃ£o (2 ms)
      âœ“ deve carregar notificaÃ§Ãµes com pÃ¡gina especÃ­fica (2 ms)
      âœ“ deve permitir reset das notificaÃ§Ãµes (1 ms)
      âœ“ deve logar erro ao falhar no carregamento (2 ms)
    Main Hook - Mark as Read
      âœ“ deve marcar notificaÃ§Ã£o individual como lida (2 ms)
      âœ“ deve marcar todas as notificaÃ§Ãµes como lidas (2 ms)
      âœ“ deve logar erro ao falhar em marcar como lida (2 ms)
    Main Hook - Delete
      âœ“ deve deletar notificaÃ§Ã£o por ID (2 ms)
      âœ“ deve logar erro ao falhar na deleÃ§Ã£o (2 ms)
    Main Hook - Settings
      âœ“ deve atualizar configuraÃ§Ãµes (2 ms)
      âœ“ deve logar erro ao falhar na atualizaÃ§Ã£o de settings (2 ms)
    Main Hook - Permissions
      âœ“ deve solicitar permissÃ£o e retornar resultado (2 ms)
      âœ“ deve retornar granted: false ao falhar na solicitaÃ§Ã£o (2 ms)
    Main Hook - Real-time Listeners
      âœ“ deve configurar listeners quando enableRealtime Ã© true e inicializado (1 ms)
      âœ“ nÃ£o deve configurar listeners quando enableRealtime Ã© false (2 ms)
      âœ“ nÃ£o deve configurar listeners quando nÃ£o inicializado (5 ms)
      âœ“ deve adicionar notificaÃ§Ã£o ao receber mensagem em foreground (3 ms)
      âœ“ deve logar mensagem em background (2 ms)
      âœ“ deve logar refresh de token (1 ms)
    Main Hook - Cleanup
      âœ“ deve desinscrever listeners ao desmontar (52 ms)
      âœ“ deve lidar com cleanup mesmo se listeners nÃ£o foram configurados (2 ms)
    Main Hook - Return Values
      âœ“ deve retornar todos os valores de state (2 ms)
      âœ“ deve retornar todas as actions (2 ms)
      âœ“ deve retornar utilities calculados corretamente (1 ms)
      âœ“ deve calcular hasUnreadNotifications como false quando count Ã© zero (1 ms)
      âœ“ deve calcular isReady como false quando permissÃ£o nÃ£o concedida (2 ms)
    useNotificationBadge
      âœ“ deve retornar count correto (1 ms)
      âœ“ deve retornar shouldShow true quando hÃ¡ notificaÃ§Ãµes e permissÃ£o concedida (1 ms)
      âœ“ deve retornar shouldShow false quando nÃ£o hÃ¡ notificaÃ§Ãµes (1 ms)
      âœ“ deve retornar shouldShow false quando permissÃ£o nÃ£o concedida (1 ms)
      âœ“ deve formatar count como nÃºmero quando <= 99 (1 ms)
      âœ“ deve formatar count como 99+ quando > 99 (1 ms)
      âœ“ deve formatar count como 99+ exatamente quando count Ã© 100 (1 ms)
    useNotificationSettings
      âœ“ deve retornar settings do hook principal (6 ms)
      âœ“ deve retornar isLoading do hook principal (4 ms)
      âœ“ deve atualizar setting individual (6 ms)
      âœ“ nÃ£o deve atualizar se settings for null (2 ms)
      âœ“ deve atualizar quiet hours (3 ms)
      âœ“ nÃ£o deve atualizar quiet hours se settings for null (2 ms)
      âœ“ deve preservar outros campos de quietHours ao atualizar (3 ms)
    useNotificationPermissions
      âœ“ deve retornar isGranted true quando permissÃ£o concedida (1 ms)
      âœ“ deve retornar isGranted false quando permissÃ£o negada (1 ms)
      âœ“ deve retornar hasToken true quando token existe (2 ms)
      âœ“ deve retornar hasToken false quando token Ã© null (4 ms)
      âœ“ deve retornar isReady baseado em isInitialized (1 ms)
      âœ“ deve verificar permissÃ£o via service (2 ms)
      âœ“ deve retornar denied ao falhar na verificaÃ§Ã£o (2 ms)
      âœ“ deve abrir configuraÃ§Ãµes do app (2 ms)
      âœ“ deve logar erro ao falhar em abrir settings (2 ms)
    useNotificationFilters
      âœ“ deve filtrar notificaÃ§Ãµes por tipo (2 ms)
      âœ“ deve filtrar notificaÃ§Ãµes por status de leitura (1 ms)
      âœ“ deve filtrar notificaÃ§Ãµes por data (Ãºltimos N dias) (2 ms)
      âœ“ deve agrupar notificaÃ§Ãµes por tipo (2 ms)
      âœ“ deve retornar unreadNotifications como computed value (1 ms)
      âœ“ deve retornar recentNotifications (Ãºltimos 7 dias) (2 ms)
      âœ“ deve retornar array vazio ao filtrar tipo inexistente (1 ms)
      âœ“ deve lidar com lista vazia de notificaÃ§Ãµes (1 ms)
      âœ“ deve recalcular filtros quando notificaÃ§Ãµes mudam (2 ms)

PASS src/hooks/__tests__/useLiveNotifications.test.ts
  useLiveNotifications
    Main Hook - Initialization
      âœ“ deve inicializar com estado padrÃ£o (9 ms)
      âœ“ deve retornar isEnabled false quando settings disabled (2 ms)
      âœ“ deve retornar isEnabled false quando nÃ£o conectado (1 ms)
      âœ“ deve aceitar options customizadas (2 ms)
    Main Hook - Event Conversion
      âœ“ deve converter order_status_changed para notificaÃ§Ã£o (3 ms)
      âœ“ deve converter new_box para notificaÃ§Ã£o (3 ms)
      âœ“ deve converter promotion_started para notificaÃ§Ã£o (2 ms)
      âœ“ deve converter friend_opened_box para notificaÃ§Ã£o (2 ms)
      âœ“ deve converter system_maintenance para notificaÃ§Ã£o (2 ms)
      âœ“ deve converter low_stock_alert para notificaÃ§Ã£o (2 ms)
      âœ“ nÃ£o deve converter eventos desconhecidos (1 ms)
      âœ“ deve incluir dados do evento na notificaÃ§Ã£o (2 ms)
    Main Hook - Toast Queue Management
      âœ“ deve adicionar notificaÃ§Ã£o com showToast ao queue (3 ms)
      âœ“ nÃ£o deve adicionar notificaÃ§Ã£o social ao queue (showToast: false) (3 ms)
      âœ“ deve retornar prÃ³ximo toast da fila (3 ms)
      âœ“ deve limpar toast queue (1 ms)
      âœ“ deve retornar null quando queue vazio (1 ms)
      âœ“ deve respeitar enableToasts option (2 ms)
    Main Hook - Type Filtering
      âœ“ deve filtrar eventos por tipo (2 ms)
      âœ“ deve processar todos os eventos quando filterTypes vazio (2 ms)
      âœ“ deve filtrar mÃºltiplos tipos (3 ms)
      âœ“ nÃ£o deve processar eventos quando tipo nÃ£o estÃ¡ em filterTypes (1 ms)
    Main Hook - Settings Filtering
      âœ“ nÃ£o deve processar eventos quando settings disabled (1 ms)
      âœ“ nÃ£o deve processar quando nÃ£o conectado (1 ms)
      âœ“ deve respeitar settings de tipo de notificaÃ§Ã£o (2 ms)
    Main Hook - Navigation Handling
      âœ“ deve logar navegaÃ§Ã£o para order (1 ms)
      âœ“ deve logar navegaÃ§Ã£o para box (2 ms)
      âœ“ deve logar navegaÃ§Ã£o para promotion (4 ms)
      âœ“ deve logar navegaÃ§Ã£o para social (1 ms)
      âœ“ deve logar system message (1 ms)
    Main Hook - Sound & Badge
      âœ“ deve logar som quando enabled e notification permite (2 ms)
      âœ“ nÃ£o deve tocar som quando enableSounds false (1 ms)
      âœ“ nÃ£o deve tocar som quando notification.playSound false (1 ms)
      âœ“ deve logar badge update (1 ms)
      âœ“ nÃ£o deve atualizar badge quando disabled (1 ms)
    Main Hook - Cleanup
      âœ“ deve processar eventos apenas uma vez (2 ms)
    Main Hook - Return Values
      âœ“ deve retornar todos os valores de state (2 ms)
      âœ“ deve retornar todas as actions (1 ms)
      âœ“ deve calcular hasToasts corretamente (3 ms)
    Main Hook - Statistics
      âœ“ deve retornar estatÃ­sticas de notificaÃ§Ãµes (3 ms)
      âœ“ deve agrupar estatÃ­sticas por tipo (3 ms)
      âœ“ deve filtrar eventos das Ãºltimas 24 horas (2 ms)
    useOrderNotifications
      âœ“ deve filtrar apenas eventos de orders (2 ms)
      âœ“ deve habilitar toasts (1 ms)
      âœ“ deve habilitar sons (1 ms)
    usePromotionNotifications
      âœ“ deve filtrar apenas eventos de promoÃ§Ãµes (2 ms)
      âœ“ deve habilitar toasts (1 ms)
      âœ“ deve desabilitar sons (1 ms)
    useSocialNotifications
      âœ“ deve filtrar apenas eventos sociais (2 ms)
      âœ“ deve desabilitar toasts (1 ms)
      âœ“ deve desabilitar sons (1 ms)

PASS src/services/__tests__/secureStorage.test.ts
  SecureStorageService
    Armazenamento de Auth Token
      âœ“ deve armazenar auth token com sucesso no Keychain (1 ms)
      âœ“ deve recuperar auth token armazenado corretamente
      âœ“ deve retornar null quando nenhum auth token estÃ¡ armazenado
      âœ“ deve retornar null quando username do token nÃ£o corresponde (1 ms)
      âœ“ deve lidar com erros ao armazenar auth token
      âœ“ deve lidar com erros ao recuperar auth token (1 ms)
    Armazenamento de Refresh Token
      âœ“ deve armazenar refresh token com sucesso (1 ms)
      âœ“ deve recuperar refresh token armazenado
      âœ“ deve retornar null quando nenhum refresh token estÃ¡ armazenado (1 ms)
      âœ“ deve usar sufixo correto do service name para refresh token
      âœ“ deve lidar com erros ao armazenar refresh token (1 ms)
    Armazenamento de Credenciais de UsuÃ¡rio
      âœ“ deve armazenar credenciais de email/senha com sucesso
      âœ“ deve recuperar credenciais armazenadas com ambos os campos (1 ms)
      âœ“ deve retornar null quando nenhuma credencial estÃ¡ armazenada
      âœ“ deve usar nÃ­vel de acessibilidade WHEN_UNLOCKED_THIS_DEVICE_ONLY (mais seguro)
      âœ“ deve lidar com erros ao armazenar credenciais
    Armazenamento de Dados GenÃ©ricos Seguros
      âœ“ deve armazenar dados genÃ©ricos com chave customizada (1 ms)
      âœ“ deve recuperar dados genÃ©ricos armazenados (1 ms)
      âœ“ deve retornar null quando chave nÃ£o foi encontrada
      âœ“ deve lidar com mÃºltiplas chaves diferentes simultaneamente (1 ms)
    RemoÃ§Ã£o de Tokens
      âœ“ deve remover auth token com sucesso (1 ms)
      âœ“ deve remover refresh token com sucesso (1 ms)
      âœ“ deve remover credenciais de usuÃ¡rio com sucesso
      âœ“ deve lidar com erros durante remoÃ§Ã£o de forma graciosa (1 ms)
      âœ“ deve verificar logging de remoÃ§Ãµes bem-sucedidas
    Limpeza de Todos os Dados
      âœ“ deve limpar todos os dados seguros (auth + refresh + credentials)
      âœ“ deve lidar com erros durante clearAll
      âœ“ deve verificar que todos os mÃ©todos de remoÃ§Ã£o foram chamados (1 ms)
    Suporte Ã  Biometria
      âœ“ deve verificar se armazenamento seguro Ã© suportado (1 ms)
      âœ“ deve retornar false quando armazenamento nÃ£o Ã© suportado
      âœ“ deve obter tipo de biometria (FaceID, TouchID, Fingerprint) (1 ms)
      âœ“ deve lidar com dispositivos nÃ£o suportados (1 ms)
    MigraÃ§Ã£o do AsyncStorage
      âœ“ deve migrar auth token do AsyncStorage para Keychain (1 ms)
      âœ“ deve migrar refresh token do AsyncStorage (1 ms)
      âœ“ deve migrar credenciais de usuÃ¡rio parseando JSON corretamente
      âœ“ deve pular migraÃ§Ã£o quando nÃ£o hÃ¡ dados no AsyncStorage
      âœ“ deve lidar com JSON malformado de credenciais de forma graciosa (1 ms)
      âœ“ deve lidar com credenciais incompletas (sem email ou password)
      âœ“ deve remover dados do AsyncStorage apÃ³s transferÃªncia bem-sucedida (1 ms)
      âœ“ deve lidar com erro geral durante migraÃ§Ã£o
    ValidaÃ§Ã£o de SeguranÃ§a
      âœ“ deve verificar que WHEN_UNLOCKED Ã© usado para tokens (menos restritivo) (1 ms)
      âœ“ deve verificar que service names sÃ£o Ãºnicos por tipo de dado (1 ms)
      âœ“ deve verificar que erros nÃ£o vazam dados sensÃ­veis nos logs

PASS src/services/__tests__/authService.test.ts
  AuthService - Keycloak OAuth2 Migration
    Deprecated Firebase Methods
      âœ“ should throw error when calling deprecated register() (72 ms)
      âœ“ should throw error when calling deprecated login() (2 ms)
      âœ“ should throw error when calling deprecated resetPassword() (2 ms)
      âœ“ should return null when calling deprecated getCurrentUser() (1 ms)
    âœ… TEST 1: Login OAuth2 - should login successfully with OAuth2 flow
      âœ“ deve fazer login OAuth2 com sucesso (2 ms)
    âœ… TEST 2: Login Failure - should fail login with invalid credentials
      âœ“ deve falhar login OAuth2 com erro de autorizaÃ§Ã£o (1 ms)
      âœ“ deve falhar login com erro de rede (2 ms)
    âœ… TEST 3: Token Storage - should store tokens after successful login
      âœ“ deve armazenar tokens no Keychain apÃ³s login bem-sucedido
    âœ… TEST 4: Logout - should clear tokens on logout
      âœ“ deve tratar erro durante logout (1 ms)
      â—‹ skipped deve fazer logout e limpar tokens
    âœ… TEST 5: Token Refresh - should refresh expired token
      âœ“ deve obter access token vÃ¡lido (1 ms)
      âœ“ deve retornar null quando nÃ£o houver token (1 ms)
      âœ“ deve tratar erro ao obter token
    âœ… TEST 6: Network Errors - should handle network errors gracefully
      âœ“ deve tratar erro de timeout no login (2 ms)
      âœ“ deve tratar erro de conexÃ£o no login (1 ms)
    âœ… TEST 7: Token Validation - should validate token format
      âœ“ deve validar formato do JWT token (1 ms)
      âœ“ deve tratar token invÃ¡lido
    âœ… TEST 8: User Profile - should parse user profile from ID token
      âœ“ deve obter informaÃ§Ãµes do usuÃ¡rio do ID token (1 ms)
      âœ“ deve retornar null quando nÃ£o houver user info (1 ms)
      âœ“ deve tratar erro ao obter user info
    âœ… TEST 9: Concurrent Login - should handle concurrent login attempts
      âœ“ deve permitir apenas uma tentativa de login por vez (101 ms)
    âœ… TEST 10: Session State - should maintain session state
      âœ“ deve verificar se usuÃ¡rio estÃ¡ autenticado (1 ms)
      âœ“ deve retornar false quando nÃ£o autenticado (1 ms)
      âœ“ deve manter estado de sessÃ£o apÃ³s login (1 ms)
    âœ… TEST 11-20: Social Auth Providers
      âœ… TEST 11: Google OAuth2 Login - should login with Google
        âœ“ deve fazer login com Google OAuth2 com sucesso (2 ms)
        âœ“ deve incluir scopes corretos para Google (1 ms)
      âœ… TEST 12: Facebook OAuth2 Login - should login with Facebook
        âœ“ deve fazer login com Facebook OAuth2 com sucesso (2 ms)
      âœ… TEST 13: Apple OAuth2 Login - should login with Apple
        âœ“ deve fazer login com Apple OAuth2 com sucesso (1 ms)
        âœ“ deve suportar Sign in with Apple privacy features (1 ms)
      âœ… TEST 14: Social Auth Cancellation - should handle user cancellation
        âœ“ deve tratar cancelamento de login do Google pelo usuÃ¡rio
        âœ“ deve tratar cancelamento de login do Facebook pelo usuÃ¡rio
        âœ“ deve tratar cancelamento de login do Apple pelo usuÃ¡rio (1 ms)
      âœ… TEST 15: Social Profile Sync - should sync social profile with Keycloak
        âœ“ deve sincronizar perfil do Google com Keycloak (6 ms)
        âœ“ deve sincronizar perfil do Facebook com Keycloak
      âœ… TEST 16: Social Account Linking - should link social accounts
        âœ“ deve permitir vincular conta Google a conta existente (1 ms)
        âœ“ deve permitir vincular conta Facebook a conta existente
      âœ… TEST 17: Social Account Unlinking - should unlink social accounts
        âœ“ deve permitir desvincular conta Google (2 ms)
      âœ… TEST 18: Multiple Social Providers - should handle multiple providers
        âœ“ deve permitir mÃºltiplos provedores sociais vinculados (1 ms)
      âœ… TEST 19: Social Profile Updates - should update social profiles
        âœ“ deve atualizar perfil quando dados do Google mudarem (1 ms)
      âœ… TEST 20: Social Token Refresh - should refresh social provider tokens
        âœ“ deve renovar token social do Google quando expirado (1 ms)
        âœ“ deve manter refresh token para renovaÃ§Ãµes futuras
    âœ… TEST 21-30: Token Expiration Edge Cases
      âœ… TEST 21: Token Expiration Detection - should detect expired tokens
        âœ“ deve detectar quando access token estÃ¡ expirado
        âœ“ deve detectar quando token Ã© vÃ¡lido (nÃ£o expirado) (1 ms)
      âœ… TEST 22: Automatic Token Refresh - should refresh before expiration
        âœ“ deve identificar token prestes a expirar (< 5 minutos) (1 ms)
        âœ“ deve renovar token automaticamente quando prÃ³ximo da expiraÃ§Ã£o
        âœ“ nÃ£o deve renovar se token ainda vÃ¡lido por muito tempo
      âœ… TEST 23: Invalid Token Cleanup - should clean invalid tokens
        âœ“ deve validar formato JWT do token (1 ms)
        â—‹ skipped deve limpar token com formato invÃ¡lido
        â—‹ skipped deve remover tokens expirados do storage
      âœ… TEST 24: Expired Refresh Token - should handle refresh token expiration
        âœ“ deve detectar refresh token expirado (1 ms)
        â—‹ skipped deve tratar erro de refresh token expirado gracefully
      âœ… TEST 25: Force Re-login - should force re-login when refresh fails
        âœ“ deve forÃ§ar re-login quando refresh falhar permanentemente (1 ms)
        â—‹ skipped deve limpar tokens antes de forÃ§ar re-login
      âœ… TEST 26: Token Refresh Race Conditions - should handle concurrent refresh attempts
        âœ“ deve reutilizar refresh em andamento para chamadas concorrentes (1 ms)
        â—‹ skipped deve permitir apenas uma renovaÃ§Ã£o por vez
      âœ… TEST 27: Expired Token Retry Logic - should retry with exponential backoff
        âœ“ deve usar exponential backoff entre tentativas (303 ms)
        â—‹ skipped deve tentar renovar token atÃ© 3 vezes antes de falhar
      âœ… TEST 28: Token Expiration Notifications - should notify about expiration
        âœ“ deve emitir evento quando token expirar (1 ms)
        â—‹ skipped deve notificar usuÃ¡rio quando token prÃ³ximo de expirar
      âœ… TEST 29: Background Token Refresh - should refresh in background
        âœ“ deve agendar prÃ³ximo refresh automaticamente (1 ms)
        â—‹ skipped deve renovar token em background sem bloquear UI
      âœ… TEST 30: Token Lifecycle Logging - should log token lifecycle events
        âœ“ deve logar quando token Ã© criado (1 ms)
    âœ… TEST 32: OTP Code Validation (Correct) - should validate correct OTP
      âœ“ deve validar cÃ³digo OTP correto (1 ms)
      âœ“ deve completar autenticaÃ§Ã£o apÃ³s OTP vÃ¡lido (1 ms)
    âœ… TEST 33: OTP Code Validation (Incorrect) - should reject invalid OTP
      âœ“ deve rejeitar cÃ³digo OTP invÃ¡lido (1 ms)
      âœ“ deve bloquear apÃ³s mÃºltiplas tentativas falhadas (1 ms)
    âœ… TEST 34: SMS Recovery Flow - should allow SMS recovery
      âœ“ deve permitir recuperaÃ§Ã£o via SMS (1 ms)
    âœ… TEST 35: Email Recovery Flow - should allow email recovery
      âœ“ deve permitir recuperaÃ§Ã£o via email (1 ms)
    âœ… TEST 36: MFA Setup - should setup MFA successfully
      âœ“ deve configurar MFA OTP e retornar secret/QR code (1 ms)
      âœ“ deve configurar MFA SMS sem retornar secret (1 ms)
    âœ… TEST 37: Backup Code Validation - should validate backup code
      âœ“ deve retornar true para backup code vÃ¡lido (8 chars)
      âœ“ deve lanÃ§ar erro para backup code invÃ¡lido (< 8 chars) (1 ms)
    âœ… TEST 38: Generate New Backup Codes - should regenerate codes
      âœ“ deve gerar array de 10 backup codes de 8 caracteres (1 ms)
    âœ… TEST 39: Disable MFA - should disable MFA successfully
      âœ“ deve desabilitar MFA com cÃ³digo de verificaÃ§Ã£o vÃ¡lido (1 ms)
      âœ“ deve lanÃ§ar erro ao tentar desabilitar MFA sem cÃ³digo (1 ms)
    âœ… TEST 61: Multi-Device Login - should allow login on multiple devices
      âœ“ deve fazer login em dispositivo especÃ­fico (1 ms)
    âœ… TEST 62: List Active Devices - should list active devices
      âœ“ deve listar dispositivos ativos do usuÃ¡rio autenticado (2 ms)
      âœ“ deve retornar array vazio se usuÃ¡rio nÃ£o autenticado (1 ms)
    âœ… TEST 63: Invalidate Old Session - should invalidate session
      âœ“ deve invalidar sessÃ£o antiga de dispositivo (1 ms)
    âœ… TEST 64: Remote Logout - should logout remote device
      âœ“ deve fazer logout remoto de dispositivo (1 ms)
    âœ… TEST 65: Session Conflict Resolution - should resolve conflicts
      âœ“ deve resolver conflito de sessÃ£o (1 ms)

FAIL src/store/slices/__tests__/ordersSlice.test.ts
  ordersSlice
    Estado Inicial
      âœ“ deve retornar o estado inicial correto (2 ms)
      âœ“ deve ter orders como array vazio no estado inicial
      âœ“ deve ter currentOrder como null no estado inicial (1 ms)
      âœ“ deve ter pagination inicializado corretamente
    Buscar Pedidos (fetchOrders)
      âœ“ deve definir isLoading como true quando fetch estÃ¡ pendente (1 ms)
      âœ• deve substituir orders quando page Ã© 1 (9 ms)
      âœ“ deve anexar orders quando page > 1 (2 ms)
      âœ“ deve aplicar filtros ao buscar pedidos (1 ms)
      âœ“ deve definir erro quando fetch falha (2 ms)
      âœ“ deve usar mensagem padrÃ£o quando erro nÃ£o tem mensagem (1 ms)
    Buscar Detalhes do Pedido (fetchOrderDetails)
      âœ“ deve definir isLoading como true quando fetch details estÃ¡ pendente
      âœ“ deve atualizar currentOrder quando fetch Ã© bem-sucedido (2 ms)
      âœ“ deve atualizar pedido na lista se existir (2 ms)
      âœ“ deve definir erro quando fetch details falha (1 ms)
    Cancelar Pedido (cancelOrder)
      âœ“ deve definir isUpdating como true quando cancel estÃ¡ pendente (1 ms)
      âœ“ deve atualizar status do pedido na lista quando cancel Ã© bem-sucedido (2 ms)
      âœ“ deve atualizar currentOrder se for o mesmo pedido (1 ms)
      âœ“ deve definir erro quando cancel falha (2 ms)
    Recomprar Pedido (reorderOrder)
      âœ“ deve definir isUpdating como true quando reorder estÃ¡ pendente (3 ms)
      âœ“ deve completar reorder sem modificar orders (1 ms)
      âœ“ deve definir erro quando reorder falha (2 ms)
    Rastrear Pedido (trackOrder)
      âœ“ deve atualizar tracking info no pedido da lista (1 ms)
      âœ“ deve atualizar tracking info no currentOrder se for o mesmo (2 ms)
      âœ“ nÃ£o deve falhar quando pedido nÃ£o estÃ¡ na lista (2 ms)
    Avaliar Pedido (rateOrder)
      âœ“ deve definir isUpdating como true quando rate estÃ¡ pendente
      âœ“ deve atualizar pedido com avaliaÃ§Ã£o na lista (2 ms)
      âœ“ deve atualizar currentOrder se for o mesmo pedido (2 ms)
      âœ“ deve definir erro quando rate falha (1 ms)
    Reducers SÃ­ncronos
      clearError
        âœ“ deve limpar erro do estado (1 ms)
      setFilters
        âœ“ deve definir filtros
        âœ“ deve sobrescrever filtros existentes (1 ms)
      clearFilters
        âœ“ deve limpar filtros
      clearCurrentOrder
        âœ“ deve limpar pedido atual (1 ms)
      resetOrders
        âœ“ deve resetar para o estado inicial
    Selectors
      âœ“ selectOrders deve retornar lista de pedidos
      âœ“ selectCurrentOrder deve retornar pedido atual (1 ms)
      âœ“ selectOrdersLoading deve retornar status de loading
      âœ“ selectOrdersUpdating deve retornar status de updating
      âœ“ selectOrdersError deve retornar erro (1 ms)
      âœ“ selectOrdersFilters deve retornar filtros
      âœ“ selectOrdersPagination deve retornar paginaÃ§Ã£o
      âœ“ selectCurrentOrder deve retornar null quando nÃ£o hÃ¡ pedido atual (1 ms)
      âœ“ selectOrders deve retornar array vazio quando nÃ£o hÃ¡ pedidos

  â— ordersSlice â€º Buscar Pedidos (fetchOrders) â€º deve substituir orders quando page Ã© 1

    expect(received).toEqual(expected) // deep equality

    - Expected  - 3
    + Received  + 3

      Object {
        "currentPage": 1,
    -   "hasNextPage": true,
    -   "totalItems": 50,
    -   "totalPages": 3,
    +   "hasNextPage": false,
    +   "totalItems": 0,
    +   "totalPages": 1,
      }

      197 |       expect(state.orders).toEqual(mockOrders);
      198 |       expect(state.orders).toHaveLength(2);
    > 199 |       expect(state.pagination).toEqual(mockPagination);
          |                                ^
      200 |       expect(state.lastUpdated).not.toBeNull();
      201 |     });
      202 |

      at Object.toEqual (src/store/slices/__tests__/ordersSlice.test.ts:199:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/api.test.ts
  ApiClient
    1. InicializaÃ§Ã£o e ConfiguraÃ§Ã£o
      âœ• deve criar instÃ¢ncia do Axios com baseURL correto (2 ms)
      âœ• deve configurar headers padrÃ£o corretamente (1 ms)
      âœ• deve configurar timeout corretamente (1 ms)
      âœ• deve configurar interceptors no construtor (1 ms)
    2. MÃ©todos HTTP
      âœ• deve executar GET request com sucesso (7 ms)
      âœ• deve executar POST request com dados (1 ms)
      âœ• deve executar PUT request com dados (2 ms)
      âœ• deve executar PATCH request com dados (1 ms)
      âœ• deve executar DELETE request com sucesso (2 ms)
      âœ• deve retornar response.data de todos os mÃ©todos (1 ms)
      âœ• deve passar config customizado para Axios em GET (1 ms)
      âœ• deve passar config customizado para Axios em POST (1 ms)
      âœ• deve tratar erros em requisiÃ§Ãµes (1 ms)
    3. Request Interceptor
      âœ• deve adicionar token de autorizaÃ§Ã£o quando token estÃ¡ definido
      âœ• nÃ£o deve adicionar Authorization header quando token nÃ£o estÃ¡ definido
      âœ• deve logar requisiÃ§Ã£o em modo desenvolvimento
      âœ• nÃ£o deve logar requisiÃ§Ã£o em modo produÃ§Ã£o (1 ms)
      âœ• deve tratar erro no request interceptor (1 ms)
    4. Response Interceptor
      âœ• deve logar resposta em modo desenvolvimento (1 ms)
      âœ• nÃ£o deve logar resposta em modo produÃ§Ã£o (1 ms)
      âœ• deve limpar token de autenticaÃ§Ã£o em erro 401 (1 ms)
      âœ• deve formatar erro com resposta do servidor (2 ms)
      âœ• deve formatar erro de rede (sem resposta) (2 ms)
      âœ• deve formatar erro de timeout (1 ms)
      âœ• deve logar erro antes de formatÃ¡-lo (1 ms)
      âœ• deve usar mensagem padrÃ£o se resposta nÃ£o tiver message (3 ms)
    5. Gerenciamento de Token
      âœ• deve definir token de autenticaÃ§Ã£o (1 ms)
      âœ• deve limpar token de autenticaÃ§Ã£o
      âœ• deve adicionar token a requisiÃ§Ãµes subsequentes
      âœ• nÃ£o deve adicionar token apÃ³s limpeza
    6. Upload e Download
      âœ• deve fazer upload de arquivo com FormData (1 ms)
      âœ• deve definir Content-Type multipart/form-data no upload (1 ms)
      âœ• deve fazer download de arquivo como Blob (1 ms)
      âœ• deve retornar Blob do download (1 ms)
      âœ• deve mesclar config customizado no upload (1 ms)
    7. UtilitÃ¡rios
      âœ• deve verificar conectividade com sucesso
      âœ• deve verificar conectividade com falha
      âœ• deve retornar instÃ¢ncia do Axios
      âœ• deve cancelar requisiÃ§Ãµes pendentes e logar (1 ms)
    8. ApiErrorUtils - Verificadores de Tipo de Erro
      âœ• deve identificar erro de validaÃ§Ã£o (422) (1 ms)
      âœ• deve identificar erro de autenticaÃ§Ã£o (401)
      âœ• deve identificar erro de autorizaÃ§Ã£o (403)
      âœ• deve identificar erro de nÃ£o encontrado (404)
      âœ• deve identificar erro de servidor (500+) (1 ms)
      âœ• deve identificar erro de rede (status 0) (1 ms)
      âœ• nÃ£o deve identificar falsamente tipos de erro
    9. ApiErrorUtils - Mensagens AmigÃ¡veis
      âœ• deve retornar mensagem amigÃ¡vel para erro de rede
      âœ• deve retornar mensagem amigÃ¡vel para erro de servidor
      âœ• deve retornar mensagem amigÃ¡vel para erro nÃ£o encontrado
      âœ• deve retornar mensagem amigÃ¡vel para erro de autenticaÃ§Ã£o (1 ms)
      âœ• deve retornar mensagem amigÃ¡vel para erro de autorizaÃ§Ã£o
      âœ• deve retornar mensagem do erro para outros casos
      âœ• deve retornar mensagem padrÃ£o quando erro nÃ£o tem mensagem
    10. ApiErrorUtils - Erros de ValidaÃ§Ã£o Formatados
      âœ• deve formatar erros de validaÃ§Ã£o corretamente (1 ms)
      âœ• deve retornar primeira mensagem de array de erros (1 ms)
      âœ• deve retornar objeto vazio para erro nÃ£o-validaÃ§Ã£o
      âœ• deve lidar com erros vazios
      âœ• deve lidar com mensagens de erro que nÃ£o sÃ£o arrays

  â— ApiClient â€º 1. InicializaÃ§Ã£o e ConfiguraÃ§Ã£o â€º deve criar instÃ¢ncia do Axios com baseURL correto

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"baseURL": "https://api.test.com", "headers": {"Accept": "application/json", "Content-Type": "application/json", "X-Requested-With": "XMLHttpRequest"}, "timeout": 10000}

    Number of calls: 0

      88 |     it('deve criar instÃ¢ncia do Axios com baseURL correto', () => {
      89 |       // Verificar
    > 90 |       expect(mockedAxios.create).toHaveBeenCalledWith({
         |                                  ^
      91 |         baseURL: 'https://api.test.com',
      92 |         timeout: 10000,
      93 |         headers: {

      at Object.toHaveBeenCalledWith (src/services/__tests__/api.test.ts:90:34)

  â— ApiClient â€º 1. InicializaÃ§Ã£o e ConfiguraÃ§Ã£o â€º deve configurar headers padrÃ£o corretamente

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"headers": {"Accept": "application/json", "Content-Type": "application/json", "X-Requested-With": "XMLHttpRequest"}}

    Number of calls: 0

      101 |     it('deve configurar headers padrÃ£o corretamente', () => {
      102 |       // Verificar
    > 103 |       expect(mockedAxios.create).toHaveBeenCalledWith(
          |                                  ^
      104 |         expect.objectContaining({
      105 |           headers: {
      106 |             'Content-Type': 'application/json',

      at Object.toHaveBeenCalledWith (src/services/__tests__/api.test.ts:103:34)

  â— ApiClient â€º 1. InicializaÃ§Ã£o e ConfiguraÃ§Ã£o â€º deve configurar timeout corretamente

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"timeout": 10000}

    Number of calls: 0

      114 |     it('deve configurar timeout corretamente', () => {
      115 |       // Verificar
    > 116 |       expect(mockedAxios.create).toHaveBeenCalledWith(
          |                                  ^
      117 |         expect.objectContaining({
      118 |           timeout: 10000,
      119 |         })

      at Object.toHaveBeenCalledWith (src/services/__tests__/api.test.ts:116:34)

  â— ApiClient â€º 1. InicializaÃ§Ã£o e ConfiguraÃ§Ã£o â€º deve configurar interceptors no construtor

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      123 |     it('deve configurar interceptors no construtor', () => {
      124 |       // Verificar
    > 125 |       expect(mockAxiosInstance.interceptors.request.use).toHaveBeenCalled();
          |                                                          ^
      126 |       expect(mockAxiosInstance.interceptors.response.use).toHaveBeenCalled();
      127 |     });
      128 |   });

      at Object.toHaveBeenCalled (src/services/__tests__/api.test.ts:125:58)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve executar GET request com sucesso

    expect(received).toEqual(expected) // deep equality

    - Expected  -  2
    + Received  + 67

      Object {
        "data": Object {
    -     "id": "123",
    -     "name": "Test Box",
    +     "data": Object {
    +       "category": "tech",
    +       "categoryName": "Tecnologia",
    +       "contents": Array [
    +         Object {
    +           "name": "Item Surpresa 1",
    +           "probability": 30,
    +         },
    +         Object {
    +           "name": "Item Surpresa 2",
    +           "probability": 25,
    +         },
    +         Object {
    +           "name": "Item Surpresa 3",
    +           "probability": 20,
    +         },
    +         Object {
    +           "name": "Item Raro",
    +           "probability": 15,
    +         },
    +         Object {
    +           "name": "Item Super Raro",
    +           "probability": 10,
    +         },
    +       ],
    +       "createdAt": "2025-01-01T10:00:00Z",
    +       "description": "Caixa com produtos de tecnologia surpresa",
    +       "discount": 37,
    +       "featured": true,
    +       "id": "box-123",
    +       "image": "https://example.com/box-tech.jpg",
    +       "images": Array [
    +         "https://example.com/box-tech-1.jpg",
    +         "https://example.com/box-tech-2.jpg",
    +       ],
    +       "name": "Caixa Misteriosa Tech",
    +       "originalPrice": 79.9,
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "rating": 4.5,
    +       "reviewCount": 128,
    +       "sold": 250,
    +       "specifications": Object {
    +         "dimensions": "20x15x10cm",
    +         "maxValue": "150.00",
    +         "minValue": "30.00",
    +         "weight": "500g",
    +       },
    +       "stock": 50,
    +       "tags": Array [
    +         "eletrÃ´nicos",
    +         "gadgets",
    +         "surpresa",
    +       ],
    +       "updatedAt": "2025-01-01T10:00:00Z",
    +       "vendor": Object {
    +         "id": "vendor-123",
    +         "name": "TechStore Brasil",
    +         "rating": 4.7,
    +         "reviewCount": 1250,
    +         "since": "2023-01-01",
    +         "verified": true,
            },
    +       "vendorId": "vendor-123",
    +       "vendorName": "TechStore Brasil",
    +       "verified": true,
    +     },
          "success": true,
    +   },
      }

      143 |
      144 |       // Assert
    > 145 |       expect(result).toEqual(mockResponse.data);
          |                      ^
      146 |       expect(mockAxiosInstance.get).toHaveBeenCalledWith('/boxes/123', undefined);
      147 |     });
      148 |

      at Object.toEqual (src/services/__tests__/api.test.ts:145:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve executar POST request com dados

    expect(received).toEqual(expected) // deep equality

    - Expected  - 6
    + Received  + 3

      Object {
    -   "data": Object {
    -     "id": "456",
    -     "name": "New Box",
    -     "price": 99.99,
    -   },
    -   "success": true,
    +   "data": Object {},
    +   "status": 200,
    +   "statusText": "OK",
      }

      162 |
      163 |       // Assert
    > 164 |       expect(result).toEqual(mockResponse.data);
          |                      ^
      165 |       expect(mockAxiosInstance.post).toHaveBeenCalledWith('/boxes', mockData, undefined);
      166 |     });
      167 |

      at Object.toEqual (src/services/__tests__/api.test.ts:164:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve executar PUT request com dados

    expect(received).toEqual(expected) // deep equality

    - Expected  - 6
    + Received  + 3

      Object {
    -   "data": Object {
    -     "id": "123",
    -     "name": "Updated Box",
    -     "price": 149.99,
    -   },
    -   "success": true,
    +   "data": Object {},
    +   "status": 200,
    +   "statusText": "OK",
      }

      181 |
      182 |       // Assert
    > 183 |       expect(result).toEqual(mockResponse.data);
          |                      ^
      184 |       expect(mockAxiosInstance.put).toHaveBeenCalledWith('/boxes/123', mockData, undefined);
      185 |     });
      186 |

      at Object.toEqual (src/services/__tests__/api.test.ts:183:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve executar PATCH request com dados

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 3

      Object {
    -   "data": Object {
    -     "id": "123",
    -     "price": 129.99,
    -   },
    -   "success": true,
    +   "data": Object {},
    +   "status": 200,
    +   "statusText": "OK",
      }

      200 |
      201 |       // Assert
    > 202 |       expect(result).toEqual(mockResponse.data);
          |                      ^
      203 |       expect(mockAxiosInstance.patch).toHaveBeenCalledWith('/boxes/123', mockData, undefined);
      204 |     });
      205 |

      at Object.toEqual (src/services/__tests__/api.test.ts:202:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve executar DELETE request com sucesso

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 3

      Object {
    -   "message": "Box deleted successfully",
    -   "success": true,
    +   "data": Object {},
    +   "status": 200,
    +   "statusText": "OK",
      }

      218 |
      219 |       // Assert
    > 220 |       expect(result).toEqual(mockResponse.data);
          |                      ^
      221 |       expect(mockAxiosInstance.delete).toHaveBeenCalledWith('/boxes/123', undefined);
      222 |     });
      223 |

      at Object.toEqual (src/services/__tests__/api.test.ts:220:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve retornar response.data de todos os mÃ©todos

    expect(received).toEqual(expected) // deep equality

    - Expected  - 4
    + Received  + 3

      Object {
    -   "data": Object {
    -     "test": "value",
    -   },
    -   "success": true,
    +   "data": Object {},
    +   "status": 200,
    +   "statusText": "OK",
      }

      239 |
      240 |       // Act & Assert
    > 241 |       expect(await apiClient.get('/test')).toEqual(mockResponse.data);
          |                                            ^
      242 |       expect(await apiClient.post('/test', {})).toEqual(mockResponse.data);
      243 |       expect(await apiClient.put('/test', {})).toEqual(mockResponse.data);
      244 |       expect(await apiClient.patch('/test', {})).toEqual(mockResponse.data);

      at Object.toEqual (src/services/__tests__/api.test.ts:241:44)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve passar config customizado para Axios em GET

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/test", {"headers": {"Custom-Header": "value"}, "timeout": 5000}

    Number of calls: 0

      260 |
      261 |       // Assert
    > 262 |       expect(mockAxiosInstance.get).toHaveBeenCalledWith('/test', customConfig);
          |                                     ^
      263 |     });
      264 |
      265 |     it('deve passar config customizado para Axios em POST', async () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/api.test.ts:262:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve passar config customizado para Axios em POST

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/test", {}, {"headers": {"Custom-Header": "value"}}

    Number of calls: 0

      276 |
      277 |       // Assert
    > 278 |       expect(mockAxiosInstance.post).toHaveBeenCalledWith('/test', {}, customConfig);
          |                                      ^
      279 |     });
      280 |
      281 |     it('deve tratar erros em requisiÃ§Ãµes', async () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/api.test.ts:278:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve tratar erros em requisiÃ§Ãµes

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {}, "status": 200, "statusText": "OK"}

      285 |
      286 |       // Act & Assert
    > 287 |       await expect(apiClient.get('/test')).rejects.toThrow();
          |             ^
      288 |     });
      289 |   });
      290 |

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/api.test.ts:287:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 3. Request Interceptor â€º deve adicionar token de autorizaÃ§Ã£o quando token estÃ¡ definido

    TypeError: requestInterceptorOnFulfilled is not a function

      299 |
      300 |       // Act
    > 301 |       const result = await requestInterceptorOnFulfilled(mockConfig);
          |                            ^
      302 |
      303 |       // Assert
      304 |       expect(result.headers.Authorization).toBe('Bearer test-token-123');

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:301:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 3. Request Interceptor â€º nÃ£o deve adicionar Authorization header quando token nÃ£o estÃ¡ definido

    TypeError: requestInterceptorOnFulfilled is not a function

      314 |
      315 |       // Act
    > 316 |       const result = await requestInterceptorOnFulfilled(mockConfig);
          |                            ^
      317 |
      318 |       // Assert
      319 |       expect(result.headers.Authorization).toBeUndefined();

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:316:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 3. Request Interceptor â€º deve logar requisiÃ§Ã£o em modo desenvolvimento

    TypeError: requestInterceptorOnFulfilled is not a function

      337 |
      338 |       // Act
    > 339 |       await requestInterceptorOnFulfilled(mockConfig);
          |             ^
      340 |
      341 |       // Assert
      342 |       expect(logger.debug).toHaveBeenCalledWith('ğŸŒ API Request:', {

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:339:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 3. Request Interceptor â€º nÃ£o deve logar requisiÃ§Ã£o em modo produÃ§Ã£o

    TypeError: requestInterceptorOnFulfilled is not a function

      364 |
      365 |       // Act
    > 366 |       await requestInterceptorOnFulfilled(mockConfig);
          |             ^
      367 |
      368 |       // Assert
      369 |       expect(logger.debug).not.toHaveBeenCalled();

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:366:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 3. Request Interceptor â€º deve tratar erro no request interceptor

    TypeError: requestInterceptorOnRejected is not a function

      375 |
      376 |       // Act
    > 377 |       const result = requestInterceptorOnRejected(mockError);
          |                      ^
      378 |
      379 |       // Assert
      380 |       expect(logger.error).toHaveBeenCalledWith('âŒ Request Error:', mockError);

      at Object.requestInterceptorOnRejected (src/services/__tests__/api.test.ts:377:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve logar resposta em modo desenvolvimento

    TypeError: responseInterceptorOnFulfilled is not a function

      399 |
      400 |       // Act
    > 401 |       await responseInterceptorOnFulfilled(mockResponse);
          |             ^
      402 |
      403 |       // Assert
      404 |       expect(logger.debug).toHaveBeenCalledWith('âœ… API Response:', {

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/api.test.ts:401:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º nÃ£o deve logar resposta em modo produÃ§Ã£o

    TypeError: responseInterceptorOnFulfilled is not a function

      424 |
      425 |       // Act
    > 426 |       await responseInterceptorOnFulfilled(mockResponse);
          |             ^
      427 |
      428 |       // Assert
      429 |       expect(logger.debug).not.toHaveBeenCalled();

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/api.test.ts:426:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve limpar token de autenticaÃ§Ã£o em erro 401

    TypeError: requestInterceptorOnFulfilled is not a function

      451 |       // Assert - verifica que o token foi limpo
      452 |       const testConfig = { headers: {} };
    > 453 |       await requestInterceptorOnFulfilled(testConfig);
          |             ^
      454 |       expect(testConfig.headers.Authorization).toBeUndefined();
      455 |     });
      456 |

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:453:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve formatar erro com resposta do servidor

    expect(received).toEqual(expected) // deep equality

    - Expected  - 17
    + Received  +  1

    - Object {
    -   "data": Object {
    -     "errors": Object {
    -       "email": Array [
    -         "Email is required",
    -       ],
    -     },
    -     "message": "Validation error",
    -   },
    -   "errors": Object {
    -     "email": Array [
    -       "Email is required",
    -     ],
    -   },
    -   "message": "Validation error",
    -   "status": 422,
    - }
    + [TypeError: responseInterceptorOnRejected is not a function]

      478 |
      479 |       // Assert
    > 480 |       expect(formattedError).toEqual({
          |                              ^
      481 |         status: 422,
      482 |         message: 'Validation error',
      483 |         errors: { email: ['Email is required'] },

      at Object.toEqual (src/services/__tests__/api.test.ts:480:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve formatar erro de rede (sem resposta)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 6
    + Received  + 1

    - Object {
    -   "data": null,
    -   "errors": Object {},
    -   "message": "Network Error",
    -   "status": 0,
    - }
    + [TypeError: responseInterceptorOnRejected is not a function]

      502 |
      503 |       // Assert
    > 504 |       expect(formattedError).toEqual({
          |                              ^
      505 |         status: 0,
      506 |         message: 'Network Error',
      507 |         errors: {},

      at Object.toEqual (src/services/__tests__/api.test.ts:504:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve formatar erro de timeout

    expect(received).toEqual(expected) // deep equality

    - Expected  - 6
    + Received  + 1

    - Object {
    -   "data": null,
    -   "errors": Object {},
    -   "message": "timeout of 10000ms exceeded",
    -   "status": 0,
    - }
    + [TypeError: responseInterceptorOnRejected is not a function]

      527 |
      528 |       // Assert
    > 529 |       expect(formattedError).toEqual({
          |                              ^
      530 |         status: 0,
      531 |         message: 'timeout of 10000ms exceeded',
      532 |         errors: {},

      at Object.toEqual (src/services/__tests__/api.test.ts:529:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve logar erro antes de formatÃ¡-lo

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ API Error:", {"data": {"message": "Internal Server Error"}, "message": "Server error", "status": 500, "url": "/error"}

    Number of calls: 0

      554 |
      555 |       // Assert
    > 556 |       expect(logger.error).toHaveBeenCalledWith('âŒ API Error:', {
          |                            ^
      557 |         status: 500,
      558 |         url: '/error',
      559 |         message: 'Server error',

      at Object.toHaveBeenCalledWith (src/services/__tests__/api.test.ts:556:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve usar mensagem padrÃ£o se resposta nÃ£o tiver message

    expect(received).toBe(expected) // Object.is equality

    Expected: "Erro na requisiÃ§Ã£o"
    Received: "responseInterceptorOnRejected is not a function"

      582 |
      583 |       // Assert
    > 584 |       expect(formattedError?.message).toBe('Erro na requisiÃ§Ã£o');
          |                                       ^
      585 |     });
      586 |   });
      587 |

      at Object.toBe (src/services/__tests__/api.test.ts:584:39)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 5. Gerenciamento de Token â€º deve definir token de autenticaÃ§Ã£o

    TypeError: requestInterceptorOnFulfilled is not a function

      593 |       // Assert
      594 |       const testConfig = { headers: {} };
    > 595 |       requestInterceptorOnFulfilled(testConfig);
          |       ^
      596 |       expect(testConfig.headers.Authorization).toBe('Bearer new-token-456');
      597 |     });
      598 |

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:595:7)

  â— ApiClient â€º 5. Gerenciamento de Token â€º deve limpar token de autenticaÃ§Ã£o

    TypeError: requestInterceptorOnFulfilled is not a function

      606 |       // Assert
      607 |       const testConfig = { headers: {} };
    > 608 |       requestInterceptorOnFulfilled(testConfig);
          |       ^
      609 |       expect(testConfig.headers.Authorization).toBeUndefined();
      610 |     });
      611 |

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:608:7)

  â— ApiClient â€º 5. Gerenciamento de Token â€º deve adicionar token a requisiÃ§Ãµes subsequentes

    TypeError: requestInterceptorOnFulfilled is not a function

      619 |
      620 |       // Act
    > 621 |       await requestInterceptorOnFulfilled(testConfig);
          |             ^
      622 |
      623 |       // Assert
      624 |       expect(testConfig.headers.Authorization).toBe('Bearer persistent-token');

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:621:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 5. Gerenciamento de Token â€º nÃ£o deve adicionar token apÃ³s limpeza

    TypeError: requestInterceptorOnFulfilled is not a function

      632 |       // Act
      633 |       const testConfig = { headers: {} };
    > 634 |       await requestInterceptorOnFulfilled(testConfig);
          |             ^
      635 |
      636 |       // Assert
      637 |       expect(testConfig.headers.Authorization).toBeUndefined();

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:634:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 6. Upload e Download â€º deve fazer upload de arquivo com FormData

    expect(received).toEqual(expected) // deep equality

    - Expected  - 4
    + Received  + 1

      Object {
    -   "data": Object {
    -     "url": "https://cdn.example.com/file.jpg",
    -   },
    -   "success": true,
    +   "data": Object {},
      }

      656 |
      657 |       // Assert
    > 658 |       expect(result).toEqual(mockResponse.data);
          |                      ^
      659 |       expect(mockAxiosInstance.post).toHaveBeenCalledWith(
      660 |         '/upload',
      661 |         formData,

      at Object.toEqual (src/services/__tests__/api.test.ts:658:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 6. Upload e Download â€º deve definir Content-Type multipart/form-data no upload

    TypeError: Cannot read properties of undefined (reading '2')

      678 |
      679 |       // Assert
    > 680 |       const callConfig = mockAxiosInstance.post.mock.calls[0][2];
          |                                                              ^
      681 |       expect(callConfig.headers['Content-Type']).toBe('multipart/form-data');
      682 |     });
      683 |

      at Object.<anonymous> (src/services/__tests__/api.test.ts:680:62)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 6. Upload e Download â€º deve fazer download de arquivo como Blob

    TypeError: apiClient.download is not a function

      689 |
      690 |       // Act
    > 691 |       const result = await apiClient.download('/download/file.pdf');
          |                                      ^
      692 |
      693 |       // Assert
      694 |       expect(result).toBe(mockBlob);

      at Object.download (src/services/__tests__/api.test.ts:691:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 6. Upload e Download â€º deve retornar Blob do download

    TypeError: apiClient.download is not a function

      708 |
      709 |       // Act
    > 710 |       const result = await apiClient.download('/file.pdf');
          |                                      ^
      711 |
      712 |       // Assert
      713 |       expect(result).toBeInstanceOf(Blob);

      at Object.download (src/services/__tests__/api.test.ts:710:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 6. Upload e Download â€º deve mesclar config customizado no upload

    TypeError: Cannot read properties of undefined (reading '2')

      729 |
      730 |       // Assert
    > 731 |       const callConfig = mockAxiosInstance.post.mock.calls[0][2];
          |                                                              ^
      732 |       expect(callConfig.headers['Content-Type']).toBe('multipart/form-data');
      733 |       expect(callConfig.headers['X-Custom']).toBe('value');
      734 |       expect(callConfig.timeout).toBe(30000);

      at Object.<anonymous> (src/services/__tests__/api.test.ts:731:62)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 7. UtilitÃ¡rios â€º deve verificar conectividade com sucesso

    TypeError: apiClient.checkConnectivity is not a function

      742 |
      743 |       // Act
    > 744 |       const result = await apiClient.checkConnectivity();
          |                                      ^
      745 |
      746 |       // Assert
      747 |       expect(result).toBe(true);

      at Object.checkConnectivity (src/services/__tests__/api.test.ts:744:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 7. UtilitÃ¡rios â€º deve verificar conectividade com falha

    TypeError: apiClient.checkConnectivity is not a function

      754 |
      755 |       // Act
    > 756 |       const result = await apiClient.checkConnectivity();
          |                                      ^
      757 |
      758 |       // Assert
      759 |       expect(result).toBe(false);

      at Object.checkConnectivity (src/services/__tests__/api.test.ts:756:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 7. UtilitÃ¡rios â€º deve retornar instÃ¢ncia do Axios

    TypeError: apiClient.getAxiosInstance is not a function

      762 |     it('deve retornar instÃ¢ncia do Axios', () => {
      763 |       // Act
    > 764 |       const axiosInstance = apiClient.getAxiosInstance();
          |                                       ^
      765 |
      766 |       // Assert
      767 |       expect(axiosInstance).toBe(mockAxiosInstance);

      at Object.getAxiosInstance (src/services/__tests__/api.test.ts:764:39)

  â— ApiClient â€º 7. UtilitÃ¡rios â€º deve cancelar requisiÃ§Ãµes pendentes e logar

    TypeError: apiClient.cancelPendingRequests is not a function

      770 |     it('deve cancelar requisiÃ§Ãµes pendentes e logar', () => {
      771 |       // Act
    > 772 |       apiClient.cancelPendingRequests();
          |                 ^
      773 |
      774 |       // Assert
      775 |       expect(logger.debug).toHaveBeenCalledWith('ğŸš« Cancelling pending requests...');

      at Object.cancelPendingRequests (src/services/__tests__/api.test.ts:772:17)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º deve identificar erro de validaÃ§Ã£o (422)

    TypeError: Cannot read properties of undefined (reading 'isValidationError')

      788 |
      789 |       // Act & Assert
    > 790 |       expect(ApiErrorUtils.isValidationError(validationError)).toBe(true);
          |                            ^
      791 |     });
      792 |
      793 |     it('deve identificar erro de autenticaÃ§Ã£o (401)', () => {

      at Object.isValidationError (src/services/__tests__/api.test.ts:790:28)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º deve identificar erro de autenticaÃ§Ã£o (401)

    TypeError: Cannot read properties of undefined (reading 'isAuthError')

      801 |
      802 |       // Act & Assert
    > 803 |       expect(ApiErrorUtils.isAuthError(authError)).toBe(true);
          |                            ^
      804 |     });
      805 |
      806 |     it('deve identificar erro de autorizaÃ§Ã£o (403)', () => {

      at Object.isAuthError (src/services/__tests__/api.test.ts:803:28)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º deve identificar erro de autorizaÃ§Ã£o (403)

    TypeError: Cannot read properties of undefined (reading 'isAuthorizationError')

      814 |
      815 |       // Act & Assert
    > 816 |       expect(ApiErrorUtils.isAuthorizationError(authorizationError)).toBe(true);
          |                            ^
      817 |     });
      818 |
      819 |     it('deve identificar erro de nÃ£o encontrado (404)', () => {

      at Object.isAuthorizationError (src/services/__tests__/api.test.ts:816:28)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º deve identificar erro de nÃ£o encontrado (404)

    TypeError: Cannot read properties of undefined (reading 'isNotFoundError')

      827 |
      828 |       // Act & Assert
    > 829 |       expect(ApiErrorUtils.isNotFoundError(notFoundError)).toBe(true);
          |                            ^
      830 |     });
      831 |
      832 |     it('deve identificar erro de servidor (500+)', () => {

      at Object.isNotFoundError (src/services/__tests__/api.test.ts:829:28)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º deve identificar erro de servidor (500+)

    TypeError: Cannot read properties of undefined (reading 'isServerError')

      846 |
      847 |       // Act & Assert
    > 848 |       expect(ApiErrorUtils.isServerError(serverError500)).toBe(true);
          |                            ^
      849 |       expect(ApiErrorUtils.isServerError(serverError503)).toBe(true);
      850 |     });
      851 |

      at Object.isServerError (src/services/__tests__/api.test.ts:848:28)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º deve identificar erro de rede (status 0)

    TypeError: Cannot read properties of undefined (reading 'isNetworkError')

      860 |
      861 |       // Act & Assert
    > 862 |       expect(ApiErrorUtils.isNetworkError(networkError)).toBe(true);
          |                            ^
      863 |     });
      864 |
      865 |     it('nÃ£o deve identificar falsamente tipos de erro', () => {

      at Object.isNetworkError (src/services/__tests__/api.test.ts:862:28)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º nÃ£o deve identificar falsamente tipos de erro

    TypeError: Cannot read properties of undefined (reading 'isValidationError')

      873 |
      874 |       // Act & Assert
    > 875 |       expect(ApiErrorUtils.isValidationError(badRequestError)).toBe(false);
          |                            ^
      876 |       expect(ApiErrorUtils.isAuthError(badRequestError)).toBe(false);
      877 |       expect(ApiErrorUtils.isAuthorizationError(badRequestError)).toBe(false);
      878 |       expect(ApiErrorUtils.isNotFoundError(badRequestError)).toBe(false);

      at Object.isValidationError (src/services/__tests__/api.test.ts:875:28)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem amigÃ¡vel para erro de rede

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      893 |
      894 |       // Act
    > 895 |       const message = ApiErrorUtils.getFriendlyMessage(networkError);
          |                                     ^
      896 |
      897 |       // Assert
      898 |       expect(message).toBe('Erro de conexÃ£o. Verifique sua internet.');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:895:37)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem amigÃ¡vel para erro de servidor

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      909 |
      910 |       // Act
    > 911 |       const message = ApiErrorUtils.getFriendlyMessage(serverError);
          |                                     ^
      912 |
      913 |       // Assert
      914 |       expect(message).toBe('Erro interno do servidor. Tente novamente mais tarde.');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:911:37)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem amigÃ¡vel para erro nÃ£o encontrado

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      925 |
      926 |       // Act
    > 927 |       const message = ApiErrorUtils.getFriendlyMessage(notFoundError);
          |                                     ^
      928 |
      929 |       // Assert
      930 |       expect(message).toBe('Recurso nÃ£o encontrado.');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:927:37)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem amigÃ¡vel para erro de autenticaÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      941 |
      942 |       // Act
    > 943 |       const message = ApiErrorUtils.getFriendlyMessage(authError);
          |                                     ^
      944 |
      945 |       // Assert
      946 |       expect(message).toBe('SessÃ£o expirada. FaÃ§a login novamente.');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:943:37)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem amigÃ¡vel para erro de autorizaÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      957 |
      958 |       // Act
    > 959 |       const message = ApiErrorUtils.getFriendlyMessage(authorizationError);
          |                                     ^
      960 |
      961 |       // Assert
      962 |       expect(message).toBe('VocÃª nÃ£o tem permissÃ£o para esta aÃ§Ã£o.');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:959:37)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem do erro para outros casos

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      973 |
      974 |       // Act
    > 975 |       const message = ApiErrorUtils.getFriendlyMessage(customError);
          |                                     ^
      976 |
      977 |       // Assert
      978 |       expect(message).toBe('Custom error message');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:975:37)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem padrÃ£o quando erro nÃ£o tem mensagem

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      989 |
      990 |       // Act
    > 991 |       const message = ApiErrorUtils.getFriendlyMessage(errorWithoutMessage);
          |                                     ^
      992 |
      993 |       // Assert
      994 |       expect(message).toBe('Erro desconhecido.');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:991:37)

  â— ApiClient â€º 10. ApiErrorUtils - Erros de ValidaÃ§Ã£o Formatados â€º deve formatar erros de validaÃ§Ã£o corretamente

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      1010 |
      1011 |       // Act
    > 1012 |       const formattedErrors = ApiErrorUtils.getValidationErrors(validationError);
           |                                             ^
      1013 |
      1014 |       // Assert
      1015 |       expect(formattedErrors).toEqual({

      at Object.getValidationErrors (src/services/__tests__/api.test.ts:1012:45)

  â— ApiClient â€º 10. ApiErrorUtils - Erros de ValidaÃ§Ã£o Formatados â€º deve retornar primeira mensagem de array de erros

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      1031 |
      1032 |       // Act
    > 1033 |       const formattedErrors = ApiErrorUtils.getValidationErrors(validationError);
           |                                             ^
      1034 |
      1035 |       // Assert
      1036 |       expect(formattedErrors.name).toBe('Name is required');

      at Object.getValidationErrors (src/services/__tests__/api.test.ts:1033:45)

  â— ApiClient â€º 10. ApiErrorUtils - Erros de ValidaÃ§Ã£o Formatados â€º deve retornar objeto vazio para erro nÃ£o-validaÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      1049 |
      1050 |       // Act
    > 1051 |       const formattedErrors = ApiErrorUtils.getValidationErrors(notValidationError);
           |                                             ^
      1052 |
      1053 |       // Assert
      1054 |       expect(formattedErrors).toEqual({});

      at Object.getValidationErrors (src/services/__tests__/api.test.ts:1051:45)

  â— ApiClient â€º 10. ApiErrorUtils - Erros de ValidaÃ§Ã£o Formatados â€º deve lidar com erros vazios

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      1065 |
      1066 |       // Act
    > 1067 |       const formattedErrors = ApiErrorUtils.getValidationErrors(validationError);
           |                                             ^
      1068 |
      1069 |       // Assert
      1070 |       expect(formattedErrors).toEqual({});

      at Object.getValidationErrors (src/services/__tests__/api.test.ts:1067:45)

  â— ApiClient â€º 10. ApiErrorUtils - Erros de ValidaÃ§Ã£o Formatados â€º deve lidar com mensagens de erro que nÃ£o sÃ£o arrays

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      1084 |
      1085 |       // Act
    > 1086 |       const formattedErrors = ApiErrorUtils.getValidationErrors(validationError);
           |                                             ^
      1087 |
      1088 |       // Assert
      1089 |       expect(formattedErrors.field1).toBe('Array message');

      at Object.getValidationErrors (src/services/__tests__/api.test.ts:1086:45)

PASS src/store/slices/__tests__/cartSlice.test.ts
  cartSlice
    Estado Inicial
      âœ“ deve retornar o estado inicial correto (1 ms)
      âœ“ deve ter cart como null no estado inicial
      âœ“ deve ter arrays vazios para shippingOptions no estado inicial
      âœ“ deve ter loading flags como false no estado inicial
    Buscar Carrinho (fetchCart)
      âœ“ deve definir isLoading como true quando fetch estÃ¡ pendente (1 ms)
      âœ“ deve atualizar cart e lastUpdated quando fetch Ã© bem-sucedido (2 ms)
      âœ“ deve definir erro quando fetch falha (2 ms)
      âœ“ deve usar mensagem de erro personalizada quando fornecida
    Adicionar ao Carrinho (addToCart)
      âœ“ deve definir isUpdating como true quando add estÃ¡ pendente
      âœ“ deve atualizar cart com novo item quando add Ã© bem-sucedido (2 ms)
      âœ“ deve definir erro quando add falha (1 ms)
      âœ“ deve usar mensagem padrÃ£o quando erro nÃ£o tem mensagem (1 ms)
    Atualizar Item (updateCartItem)
      âœ“ deve definir isUpdating como true quando update estÃ¡ pendente
      âœ“ deve atualizar cart quando quantity Ã© alterada (2 ms)
      âœ“ deve definir erro quando update falha (1 ms)
    Remover do Carrinho (removeFromCart)
      âœ“ deve definir isUpdating como true quando remove estÃ¡ pendente (1 ms)
      âœ“ deve atualizar cart removendo item quando remove Ã© bem-sucedido (1 ms)
      âœ“ deve definir erro quando remove falha (1 ms)
    Limpar Carrinho (clearCart)
      âœ“ deve definir isUpdating como true quando clear estÃ¡ pendente (1 ms)
      âœ“ deve limpar cart e dados relacionados quando clear Ã© bem-sucedido (2 ms)
      âœ“ deve definir erro quando clear falha (1 ms)
    OperaÃ§Ãµes de Cupom
      Aplicar Cupom (applyCoupon)
        âœ“ deve definir isUpdating como true quando apply estÃ¡ pendente (1 ms)
        âœ“ deve atualizar cart e appliedCoupon quando cupom Ã© aplicado (2 ms)
        âœ“ deve definir erro quando cupom invÃ¡lido (1 ms)
      Remover Cupom (removeCoupon)
        âœ“ deve definir isUpdating como true quando remove estÃ¡ pendente
        âœ“ deve remover cupom e atualizar cart quando remove Ã© bem-sucedido (2 ms)
        âœ“ deve definir erro quando remove falha (1 ms)
      Validar Cupom (validateCoupon)
        âœ“ deve retornar resultado de validaÃ§Ã£o (1 ms)
        âœ“ deve definir erro quando validaÃ§Ã£o falha (1 ms)
    OperaÃ§Ãµes de Frete
      Calcular Frete por EndereÃ§o (calculateShipping)
        âœ“ deve atualizar shippingOptions quando cÃ¡lculo Ã© bem-sucedido (1 ms)
        âœ“ deve definir erro quando cÃ¡lculo falha (1 ms)
      Calcular Frete por CEP (calculateShippingByZip)
        âœ“ deve atualizar shippingOptions quando cÃ¡lculo Ã© bem-sucedido (1 ms)
        âœ“ deve definir erro quando cÃ¡lculo falha (1 ms)
    Reducers SÃ­ncronos
      clearError
        âœ“ deve limpar erro do estado
      setSelectedShippingOption
        âœ“ deve definir opÃ§Ã£o de frete selecionada (1 ms)
        âœ“ deve permitir trocar opÃ§Ã£o de frete selecionada
      clearShippingOptions
        âœ“ deve limpar opÃ§Ãµes de frete e seleÃ§Ã£o (1 ms)
      resetCart
        âœ“ deve resetar para o estado inicial
    Selectors
      âœ“ selectCart deve retornar cart (1 ms)
      âœ“ selectCartItems deve retornar items do cart
      âœ“ selectCartItems deve retornar array vazio quando cart Ã© null
      âœ“ selectCartTotal deve retornar total do cart
      âœ“ selectCartTotal deve retornar 0 quando cart Ã© null (1 ms)
      âœ“ selectCartSubtotal deve retornar subtotal do cart
      âœ“ selectCartItemsCount deve retornar total_items do cart
      âœ“ selectCartIsLoading deve retornar isLoading (1 ms)
      âœ“ selectCartIsUpdating deve retornar isUpdating
      âœ“ selectCartError deve retornar erro
      âœ“ selectAppliedCoupon deve retornar cupom aplicado (1 ms)
      âœ“ selectShippingOptions deve retornar opÃ§Ãµes de frete
      âœ“ selectSelectedShippingOption deve retornar opÃ§Ã£o selecionada

PASS src/utils/__tests__/imageOptimization.test.ts
  imageOptimization
    Constantes
      âœ“ IMAGE_QUALITY deve ter todos os nÃ­veis de qualidade (1 ms)
      âœ“ IMAGE_FORMATS deve ter todos os formatos suportados
      âœ“ IMAGE_SIZES deve ter todos os presets de tamanho (2 ms)
    getOptimizedImageUrl()
      âœ“ deve retornar string vazia para baseUrl vazia
      âœ“ deve retornar URLs file:// sem modificaÃ§Ã£o
      âœ“ deve retornar URLs jÃ¡ otimizadas sem modificaÃ§Ã£o (1 ms)
      âœ“ deve adicionar parÃ¢metro de largura com pixel ratio (1 ms)
      âœ“ deve adicionar parÃ¢metro de altura com pixel ratio
      âœ“ deve adicionar parÃ¢metro de qualidade (0-1 para 0-100) (1 ms)
      âœ“ nÃ£o deve adicionar parÃ¢metro de qualidade para ORIGINAL
      âœ“ deve adicionar parÃ¢metro de formato (exceto JPEG como padrÃ£o)
      âœ“ nÃ£o deve adicionar parÃ¢metro de formato para JPEG (1 ms)
      âœ“ deve adicionar parÃ¢metro progressive
      âœ“ deve adicionar parÃ¢metro blur
      âœ“ deve adicionar parÃ¢metro grayscale (1 ms)
      âœ“ deve combinar mÃºltiplos parÃ¢metros corretamente (1 ms)
      âœ“ deve usar & como separador quando URL jÃ¡ tem query params (1 ms)
      âœ“ deve arredondar dimensÃµes corretamente
    getResponsiveImageUrls()
      âœ“ deve retornar fallback quando baseUrl estÃ¡ vazia
      âœ“ deve retornar array vazio quando nÃ£o hÃ¡ baseUrl nem fallback
      â—‹ skipped deve gerar URLs para todos os tamanhos
      â—‹ skipped deve filtrar tamanhos baseado na funÃ§Ã£o condition
      â—‹ skipped deve passar quality para cada tamanho
      â—‹ skipped deve incluir altura quando fornecida
    calculateOptimalSize()
      âœ“ deve aplicar pixel ratio Ã s dimensÃµes
      âœ“ deve manter aspect ratio quando fornecido (largura maior) (1 ms)
      âœ“ deve manter aspect ratio quando fornecido (altura maior)
      âœ“ deve limitar largura ao mÃ¡ximo de 2048px (1 ms)
      âœ“ deve limitar altura ao mÃ¡ximo de 2048px
      âœ“ deve ajustar ambas dimensÃµes quando aspect ratio aplicado em imagem grande (1 ms)
      âœ“ deve arredondar dimensÃµes para nÃºmeros inteiros
      âœ“ deve lidar com valores extremamente pequenos (1 ms)
    generateSrcSet()
      âœ“ deve retornar string vazia para baseUrl vazia
      âœ“ deve gerar srcSet com escalas padrÃ£o (1 ms)
      âœ“ deve usar qualidade MEDIUM para escalas > 2
      âœ“ deve usar qualidade HIGH para escalas <= 2 (1 ms)
      âœ“ deve aceitar escalas customizadas (1 ms)
      âœ“ deve calcular larguras corretamente baseado em DEVICE_WIDTH
      âœ“ deve formatar corretamente com vÃ­rgulas e espaÃ§os
    IMAGE_PRESETS
      âœ“ boxThumbnail deve ter configuraÃ§Ã£o correta
      âœ“ boxDetail deve ter qualidade HIGH
      âœ“ banner deve ter aspect ratio 2.5:1 (1 ms)
      âœ“ background deve ter blur aplicado
      âœ“ placeholder deve ter qualidade LOW e blur alto
      â—‹ skipped avatar deve retornar configuraÃ§Ã£o correta
      â—‹ skipped avatar deve usar tamanho padrÃ£o de 80px
    imageUrlCache
      âœ“ deve retornar undefined para chaves inexistentes
      â—‹ skipped deve armazenar e recuperar valores
      â—‹ skipped deve limpar todo o cache
      â—‹ skipped deve retornar tamanho correto do cache
      â—‹ skipped deve remover entrada mais antiga quando atinge tamanho mÃ¡ximo
    getCachedOptimizedUrl()
      âœ“ deve retornar string vazia para baseUrl vazia
      â—‹ skipped deve usar cache para URLs jÃ¡ otimizadas
      â—‹ skipped deve gerar chaves de cache Ãºnicas para configs diferentes
      â—‹ skipped deve armazenar no cache apÃ³s primeira otimizaÃ§Ã£o
      â—‹ skipped deve retornar mesma URL do cache em chamadas subsequentes
    preloadImages()
      â—‹ skipped deve tentar prÃ©-carregar todas as URLs fornecidas
      â—‹ skipped deve logar erro quando imagem falha ao carregar
      â—‹ skipped deve lidar com array vazio de URLs
      â—‹ skipped deve continuar mesmo com algumas imagens falhando
    supportsWebP()
      âœ“ deve retornar true quando WebP Ã© suportado (1 ms)
      âœ“ deve retornar false quando WebP nÃ£o Ã© suportado
      âœ“ deve retornar false em caso de erro
      âœ“ deve usar data URI WebP correto para detecÃ§Ã£o
    getOptimalFormat()
      âœ“ deve retornar WEBP quando suportado (1 ms)
      âœ“ deve retornar JPEG quando WebP nÃ£o Ã© suportado
    calculateDataSavings()
      âœ“ deve calcular economia corretamente (1 ms)
      âœ“ deve lidar com tamanho otimizado maior que original
      âœ“ deve lidar com tamanhos iguais
      âœ“ deve calcular percentual corretamente para diferentes valores
      âœ“ deve garantir valores nÃ£o negativos
      âœ“ deve lidar com valores decimais
    getAdaptiveImageConfig()
      âœ“ deve retornar configuraÃ§Ã£o HIGH para WiFi (1 ms)
      âœ“ deve retornar configuraÃ§Ã£o MEDIUM para 4G
      âœ“ deve retornar configuraÃ§Ã£o LOW para 3G
      âœ“ deve retornar configuraÃ§Ã£o LOW e JPEG para 2G (1 ms)
      âœ“ deve retornar configuraÃ§Ã£o MEDIUM para unknown
      âœ“ deve retornar configuraÃ§Ã£o MEDIUM quando sem parÃ¢metro
      âœ“ 2G deve desabilitar progressive
      âœ“ outras conexÃµes nÃ£o devem ter progressive definido
    Casos de edge e integraÃ§Ã£o
      âœ“ deve lidar com URLs com caracteres especiais (1 ms)
      âœ“ deve lidar com configuraÃ§Ãµes extremas
      âœ“ generateSrcSet deve usar getOptimizedImageUrl internamente
      âœ“ IMAGE_PRESETS devem funcionar com getOptimizedImageUrl (1 ms)
      â—‹ skipped cache deve funcionar com getResponsiveImageUrls
      â—‹ skipped deve manter consistÃªncia entre getOptimizedImageUrl e getCachedOptimizedUrl

PASS src/hooks/__tests__/useRealtime.test.ts
  useRealtime
    Main Hook - Connection
      âœ“ deve conectar automaticamente quando autoConnect Ã© true (15 ms)
      âœ“ nÃ£o deve conectar automaticamente quando autoConnect Ã© false (3 ms)
      âœ“ nÃ£o deve conectar se jÃ¡ estiver conectado (3 ms)
      âœ“ deve permitir conexÃ£o manual (3 ms)
      âœ“ deve subscrever a global events quando solicitado (4 ms)
      âœ“ deve subscrever a live stats quando solicitado (4 ms)
      âœ“ deve logar erro ao falhar na conexÃ£o (4 ms)
    Main Hook - Disconnection
      âœ“ deve desconectar manualmente (5 ms)
      âœ“ deve desconectar ao desmontar se conectado (3 ms)
      âœ“ nÃ£o deve desconectar ao desmontar se nÃ£o conectado (2 ms)
      âœ“ deve logar erro ao falhar na desconexÃ£o (19 ms)
    Main Hook - Subscriptions
      âœ“ deve subscrever a box updates (3 ms)
      âœ“ deve subscrever a order updates (2 ms)
      âœ“ deve subscrever a mÃºltiplas boxes (3 ms)
      âœ“ deve subscrever a mÃºltiplas orders (3 ms)
      âœ“ deve logar erro ao falhar na subscriÃ§Ã£o de box (2 ms)
      âœ“ deve logar erro ao falhar na subscriÃ§Ã£o de order (2 ms)
      âœ“ deve lidar com subscriÃ§Ã£o de box vazio (2 ms)
      âœ“ deve lidar com subscriÃ§Ã£o de order vazio (2 ms)
    Main Hook - AppState Integration
      âœ“ deve configurar listener do AppState ao montar (1 ms)
      âœ“ deve reconectar quando app volta para ativo (6 ms)
      âœ“ nÃ£o deve reconectar se jÃ¡ conectado (5 ms)
      âœ“ nÃ£o deve reconectar se autoConnect Ã© false (1 ms)
    Main Hook - Error Handling
      âœ“ deve lidar com erro de conexÃ£o (2 ms)
      âœ“ deve lidar com erro de desconexÃ£o (1 ms)
      âœ“ deve lidar com erro de subscriÃ§Ã£o (2 ms)
    Main Hook - Cleanup
      âœ“ deve fazer cleanup ao desmontar (2 ms)
      âœ“ nÃ£o deve fazer cleanup se nÃ£o conectado (1 ms)
    Main Hook - Return Values
      âœ“ deve retornar todos os valores de state (3 ms)
      âœ“ deve retornar todas as actions (1 ms)
      âœ“ deve calcular isReady corretamente quando conectado (2 ms)
      âœ“ deve calcular isReady como false quando nÃ£o conectado (1 ms)
      âœ“ deve calcular hasError corretamente (1 ms)
      âœ“ deve calcular hasError como false quando nÃ£o hÃ¡ erro (1 ms)
    useBoxRealtime
      âœ“ deve subscrever a box quando conectado (14 ms)
      âœ“ nÃ£o deve subscrever se nÃ£o conectado (5 ms)
      âœ“ nÃ£o deve subscrever se boxId for vazio (6 ms)
      âœ“ deve retornar dados de stock da box (6 ms)
      âœ“ deve retornar undefined para box sem dados (7 ms)
      âœ“ deve retornar isSubscribed baseado em isConnected (6 ms)
      âœ“ deve atualizar quando boxId muda (55 ms)
    useOrderRealtime
      âœ“ deve subscrever a order quando conectado (9 ms)
      âœ“ nÃ£o deve subscrever se nÃ£o conectado (5 ms)
      âœ“ nÃ£o deve subscrever se orderId for vazio (6 ms)
      âœ“ deve retornar dados de status da order (6 ms)
      âœ“ deve retornar undefined para order sem dados (6 ms)
      âœ“ deve retornar isSubscribed baseado em isConnected (10 ms)
      âœ“ deve atualizar quando orderId muda (54 ms)
    useLiveEvents
      âœ“ deve conectar com subscribeToGlobal e subscribeToStats (3 ms)
      âœ“ deve retornar eventos ao vivo (6 ms)
      âœ“ deve limitar eventos ao maxEvents (7 ms)
      âœ“ deve retornar stats ao vivo (5 ms)
      âœ“ deve retornar online users count (5 ms)
      âœ“ deve retornar isConnected status (9 ms)
      âœ“ deve retornar hasEvents true quando hÃ¡ eventos (5 ms)
      âœ“ deve retornar hasEvents false quando nÃ£o hÃ¡ eventos (5 ms)
      âœ“ deve usar maxEvents padrÃ£o de 20 (7 ms)

FAIL src/store/slices/__tests__/authSlice.test.ts
  authSlice
    Estado Inicial
      âœ“ deve retornar o estado inicial correto (1 ms)
      âœ“ deve ter isInitializing como true no estado inicial
      âœ“ deve ter user como null no estado inicial (1 ms)
      âœ“ deve ter isAuthenticated como false no estado inicial
    Login com Keycloak
      âœ“ deve definir isLoading como true quando login estÃ¡ pendente (1 ms)
      âœ“ deve atualizar estado com user e isAuthenticated true quando login Ã© bem-sucedido (2 ms)
      âœ“ deve definir lastLoginTime quando login Ã© bem-sucedido (2 ms)
      âœ“ deve definir needsMfaSetup como true quando MFA nÃ£o estÃ¡ habilitado
      âœ“ deve definir needsMfaSetup como false quando MFA estÃ¡ habilitado (1 ms)
      âœ“ deve lidar com erro de login e definir mensagem de erro (2 ms)
      âœ“ deve definir mensagem de erro especÃ­fica quando usuÃ¡rio cancela login (1 ms)
      âœ“ deve definir mensagem de erro especÃ­fica quando hÃ¡ erro de rede
      âœ“ deve continuar login mesmo se verificaÃ§Ã£o de MFA falhar (1 ms)
    Logout
      âœ“ deve definir isLoading como true quando logout estÃ¡ pendente (1 ms)
      âœ“ deve limpar user e isAuthenticated quando logout Ã© bem-sucedido (1 ms)
      âœ“ deve limpar lastLoginTime quando logout Ã© bem-sucedido (1 ms)
      âœ“ deve definir erro quando logout falha (1 ms)
    Refresh Tokens
      âœ“ deve definir isLoading como true quando refresh estÃ¡ pendente (1 ms)
      âœ“ deve atualizar tokens do usuÃ¡rio quando refresh Ã© bem-sucedido (4 ms)
      âœ“ nÃ£o deve atualizar tokens se user for null (1 ms)
      âœ“ deve forÃ§ar logout quando refresh falha (1 ms)
      âœ“ deve definir erro quando refresh rejeita (1 ms)
    Verificar Estado de AutenticaÃ§Ã£o
      âœ“ deve definir isInitializing como true quando check estÃ¡ pendente (1 ms)
      âœ• deve restaurar usuÃ¡rio quando tokens vÃ¡lidos existem
      âœ“ deve retornar null quando usuÃ¡rio nÃ£o estÃ¡ autenticado (1 ms)
      âœ“ deve retornar null quando token expirou e refresh falhou (1 ms)
      âœ• deve retornar null quando tokens nÃ£o existem
      âœ• deve definir needsMfaSetup baseado no status MFA
      âœ“ deve lidar com erro ao verificar auth state (1 ms)
    MFA Operations
      Enable MFA
        âœ“ deve definir isLoading como true quando enable MFA estÃ¡ pendente (1 ms)
        âœ“ deve atualizar needsMfaSetup e user.mfaEnabled quando MFA Ã© habilitado (1 ms)
        âœ“ deve definir erro quando enable MFA falha (1 ms)
      Disable MFA
        âœ“ deve definir isLoading como true quando disable MFA estÃ¡ pendente (1 ms)
        âœ“ deve atualizar user.mfaEnabled para false quando MFA Ã© desabilitado (1 ms)
        âœ“ deve definir erro quando disable MFA falha (1 ms)
    Reducers SÃ­ncronos
      clearError
        âœ“ deve limpar erro do estado
      setUser
        âœ“ deve definir usuÃ¡rio e isAuthenticated quando user nÃ£o Ã© null (1 ms)
        âœ“ deve limpar usuÃ¡rio e isAuthenticated quando user Ã© null (1 ms)
      setGotifyToken
        âœ“ deve definir gotifyToken no usuÃ¡rio quando user existe
        âœ“ nÃ£o deve fazer nada quando user Ã© null
      finishInitialization
        âœ“ deve definir isInitializing como false (1 ms)
    Selectors
      âœ“ selectAuth deve retornar estado auth completo
      âœ“ selectUser deve retornar usuÃ¡rio
      âœ“ selectIsAuthenticated deve retornar status de autenticaÃ§Ã£o
      âœ“ selectIsLoading deve retornar status de loading
      âœ“ selectIsInitializing deve retornar status de inicializaÃ§Ã£o
      âœ“ selectAuthError deve retornar erro (1 ms)
      âœ“ selectNeedsMfaSetup deve retornar status de MFA setup
      âœ“ selectUser deve retornar null quando user nÃ£o existe
      âœ“ selectIsAuthenticated deve retornar false quando nÃ£o autenticado (1 ms)

  â— authSlice â€º Verificar Estado de AutenticaÃ§Ã£o â€º deve restaurar usuÃ¡rio quando tokens vÃ¡lidos existem

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      511 |       (keycloakService.getAccessToken as jest.Mock).mockResolvedValue('valid-token');
      512 |       (keycloakService.getUserInfo as jest.Mock).mockResolvedValue(mockUserInfo);
    > 513 |       (keycloakService.getTokens as jest.Mock).mockResolvedValue(mockTokens);
          |                                                ^
      514 |       (mfaService.getStatus as jest.Mock).mockResolvedValue({ mfaEnabled: false });
      515 |
      516 |       const store = createTestStore();

      at Object.mockResolvedValue (src/store/slices/__tests__/authSlice.test.ts:513:48)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— authSlice â€º Verificar Estado de AutenticaÃ§Ã£o â€º deve retornar null quando tokens nÃ£o existem

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      556 |       (keycloakService.getAccessToken as jest.Mock).mockResolvedValue('valid-token');
      557 |       (keycloakService.getUserInfo as jest.Mock).mockResolvedValue(mockUserInfo);
    > 558 |       (keycloakService.getTokens as jest.Mock).mockResolvedValue(null);
          |                                                ^
      559 |
      560 |       const store = createTestStore();
      561 |       await store.dispatch(checkAuthState());

      at Object.mockResolvedValue (src/store/slices/__tests__/authSlice.test.ts:558:48)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— authSlice â€º Verificar Estado de AutenticaÃ§Ã£o â€º deve definir needsMfaSetup baseado no status MFA

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      570 |       (keycloakService.getAccessToken as jest.Mock).mockResolvedValue('valid-token');
      571 |       (keycloakService.getUserInfo as jest.Mock).mockResolvedValue(mockUserInfo);
    > 572 |       (keycloakService.getTokens as jest.Mock).mockResolvedValue(mockTokens);
          |                                                ^
      573 |       (mfaService.getStatus as jest.Mock).mockResolvedValue({ mfaEnabled: true });
      574 |
      575 |       const store = createTestStore();

      at Object.mockResolvedValue (src/store/slices/__tests__/authSlice.test.ts:572:48)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/__tests__/integration/cart.integration.test.ts
  Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho
    Gerenciamento bÃ¡sico do carrinho
      âœ• deve obter carrinho atual (5 ms)
      âœ• deve adicionar item ao carrinho (2 ms)
      âœ• deve falhar ao adicionar item fora de estoque (1 ms)
      âœ• deve atualizar quantidade de item no carrinho
      âœ• deve remover item do carrinho (1 ms)
      âœ“ deve limpar carrinho completamente (1 ms)
      âœ• deve tratar erro ao atualizar item inexistente (1 ms)
    Sistema de cupons
      âœ• deve aplicar cupom de desconto vÃ¡lido (6 ms)
      âœ• deve falhar ao aplicar cupom invÃ¡lido (1 ms)
      âœ• deve validar cupom antes de aplicar (2 ms)
      âœ• deve remover cupom aplicado (1 ms)
      âœ• deve falhar validaÃ§Ã£o de cupom com valor mÃ­nimo nÃ£o atingido (1 ms)
    CÃ¡lculo de frete
      âœ• deve calcular frete por endereÃ§o (1 ms)
      âœ• deve calcular frete por CEP (1 ms)
      âœ• deve falhar cÃ¡lculo de frete com CEP invÃ¡lido (1 ms)
      âœ• deve estimar tempo de entrega (2 ms)
    Processo de checkout
      âœ• deve finalizar pedido com sucesso (2 ms)
      âœ• deve obter resumo do pedido antes da finalizaÃ§Ã£o (1 ms)
      âœ• deve falhar checkout com endereÃ§o invÃ¡lido
      âœ• deve verificar disponibilidade dos itens antes do checkout (1 ms)
    Processamento de pagamento
      âœ• deve processar pagamento com cartÃ£o de crÃ©dito (1 ms)
      âœ• deve processar pagamento PIX (1 ms)
      âœ• deve processar pagamento boleto (1 ms)
      âœ• deve verificar _status do pagamento (3 ms)
      âœ• deve obter mÃ©todos de pagamento disponÃ­veis (2 ms)
      âœ• deve calcular parcelas para pagamento (1 ms)
      âœ• deve falhar pagamento com cartÃ£o invÃ¡lido (1 ms)
    Funcionalidades auxiliares
      âœ• deve salvar carrinho para mais tarde (2 ms)
      âœ• deve restaurar carrinho salvo (1 ms)
      âœ• deve verificar se hÃ¡ carrinho salvo (2 ms)
      âœ• deve compartilhar carrinho (1 ms)
      âœ• deve importar carrinho compartilhado (2 ms)
      âœ• deve falhar ao importar carrinho com token invÃ¡lido
    CenÃ¡rios de erro
      âœ• deve tratar erro de rede durante adiÃ§Ã£o ao carrinho (1 ms)
      âœ• deve tratar timeout durante checkout (1 ms)
      âœ• deve tratar erro 500 durante processamento de pagamento (1 ms)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Gerenciamento bÃ¡sico do carrinho â€º deve obter carrinho atual

    expect(received).toMatchObject(expected)

    - Expected  -  5
    + Received  + 13

      Object {
        "id": "cart-123",
    -   "items": ArrayContaining [
    -     ObjectContaining {
    -       "mystery_box_id": "box-electronics-001",
    -       "quantity": 2,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
          },
        ],
    -   "total": 364.97,
    +   "total": 59.9,
      }

      116 |
      117 |       // Assert
    > 118 |       expect(response).toMatchObject({
          |                        ^
      119 |         id: 'cart-123',
      120 |         items: expect.arrayContaining([
      121 |           expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:118:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Gerenciamento bÃ¡sico do carrinho â€º deve adicionar item ao carrinho

    expect(received).toMatchObject(expected)

    - Expected  -  4
    + Received  + 24

      Object {
    +   "cart": Object {
    +     "createdAt": "2025-01-01T10:00:00Z",
    +     "discount": 0,
          "id": "cart-123",
    -   "items": ArrayContaining [
    -     ObjectContaining {
    -       "mystery_box_id": "box-electronics-001",
    -       "quantity": 2,
    +     "itemCount": 1,
    +     "items": Array [
    +       Object {
    +         "boxId": "box-456",
    +         "boxImage": "https://example.com/box.jpg",
    +         "boxName": "Caixa Misteriosa Tech",
    +         "id": "item-123",
    +         "platform": "magalu",
    +         "price": 49.9,
    +         "quantity": 1,
    +         "subtotal": 49.9,
    +         "vendorId": "vendor-789",
    +         "vendorName": "TechStore Brasil",
            },
          ],
    +     "shipping": 10,
    +     "subtotal": 49.9,
    +     "total": 59.9,
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "userId": "user-123",
    +   },
    +   "message": "Item adicionado ao carrinho",
    +   "success": true,
      }

      145 |
      146 |       // Assert
    > 147 |       expect(response).toMatchObject({
          |                        ^
      148 |         id: 'cart-123',
      149 |         items: expect.arrayContaining([
      150 |           expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:147:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Gerenciamento bÃ¡sico do carrinho â€º deve falhar ao adicionar item fora de estoque

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Item adicionado ao carrinho", "success": true}

      168 |
      169 |       // Act & Assert
    > 170 |       await expect(cartService.addToCart(boxId, quantity)).rejects.toMatchObject({
          |             ^
      171 |         status: 400,
      172 |         message: 'Produto fora de estoque',
      173 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:170:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Gerenciamento bÃ¡sico do carrinho â€º deve atualizar quantidade de item no carrinho

    TypeError: Cannot read properties of undefined (reading 'find')

      195 |
      196 |       // Assert
    > 197 |       expect(response.items.find(item => item.id === itemId)).toMatchObject({
          |                             ^
      198 |         quantity: newQuantity,
      199 |         total: testCart.items[0].price * newQuantity,
      200 |       });

      at Object.find (src/services/__tests__/integration/cart.integration.test.ts:197:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Gerenciamento bÃ¡sico do carrinho â€º deve remover item do carrinho

    TypeError: Cannot read properties of undefined (reading 'find')

      217 |
      218 |       // Assert
    > 219 |       expect(response.items.find(item => item.id === itemId)).toBeUndefined();
          |                             ^
      220 |       expect(response.total).toBeLessThan(testCart.total);
      221 |     });
      222 |

      at Object.find (src/services/__tests__/integration/cart.integration.test.ts:219:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Gerenciamento bÃ¡sico do carrinho â€º deve tratar erro ao atualizar item inexistente

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 3, "subtotal": 149.7, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 149.7, "total": 159.7, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Quantidade atualizada", "success": true}

      247 |
      248 |       // Act & Assert
    > 249 |       await expect(cartService.updateCartItem(itemId, quantity)).rejects.toMatchObject({
          |             ^
      250 |         status: 404,
      251 |         message: 'Item nÃ£o encontrado no carrinho',
      252 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:249:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Sistema de cupons â€º deve aplicar cupom de desconto vÃ¡lido

    expect(received).toMatchObject(expected)

    - Expected  - 3
    + Received  + 2

      Object {
    -   "coupon_code": "WELCOME10",
    -   "discount": 34.99,
    -   "total": 329.98,
    +   "discount": 0,
    +   "total": 59.9,
      }

      272 |
      273 |       // Assert
    > 274 |       expect(response).toMatchObject({
          |                        ^
      275 |         coupon_code: couponCode,
      276 |         discount: 34.99,
      277 |         total: testCart.total - 34.99,

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:274:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Sistema de cupons â€º deve falhar ao aplicar cupom invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}

      290 |
      291 |       // Act & Assert
    > 292 |       await expect(cartService.applyCoupon(couponCode)).rejects.toMatchObject({
          |             ^
      293 |         status: 400,
      294 |         message: 'Cupom invÃ¡lido ou expirado',
      295 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:292:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Sistema de cupons â€º deve validar cupom antes de aplicar

    expect(received).toMatchObject(expected)

    - Expected  -  6
    + Received  + 22

      Object {
    -   "discount_amount": 34.99,
    -   "promotion": ObjectContaining {
    -     "code": "WELCOME10",
    -     "type": "percentage",
    -     "value": 10,
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
          },
    -   "valid": true,
    +   ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      313 |
      314 |       // Assert
    > 315 |       expect(response).toMatchObject({
          |                        ^
      316 |         valid: true,
      317 |         promotion: expect.objectContaining({
      318 |           code: couponCode,

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:315:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Sistema de cupons â€º deve remover cupom aplicado

    expect(received).toMatchObject(expected)

    - Expected  -  2
    + Received  + 13

      Object {
    -   "coupon_code": null,
    +   "cart": Object {
    +     "createdAt": "2025-01-01T10:00:00Z",
          "discount": 0,
    -   "total": 364.97,
    +     "id": "cart-789",
    +     "itemCount": 0,
    +     "items": Array [],
    +     "shipping": 0,
    +     "subtotal": 0,
    +     "total": 0,
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "userId": "user-123",
    +   },
    +   "message": "Item removido do carrinho",
    +   "success": true,
      }

      340 |
      341 |       // Assert
    > 342 |       expect(response).toMatchObject({
          |                        ^
      343 |         coupon_code: null,
      344 |         discount: 0,
      345 |         total: testCart.subtotal + testCart.shipping,

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:342:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Sistema de cupons â€º deve falhar validaÃ§Ã£o de cupom com valor mÃ­nimo nÃ£o atingido

    expect(received).toMatchObject(expected)

    - Expected  -  2
    + Received  + 23

      Object {
    -   "message": "Valor mÃ­nimo de R$ 500,00 nÃ£o atingido",
    -   "valid": false,
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
    +     },
    +   ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      362 |
      363 |       // Assert
    > 364 |       expect(response).toMatchObject({
          |                        ^
      365 |         valid: false,
      366 |         message: 'Valor mÃ­nimo de R$ 500,00 nÃ£o atingido',
      367 |       });

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:364:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CÃ¡lculo de frete â€º deve calcular frete por endereÃ§o

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      399 |
      400 |       // Assert
    > 401 |       expect(response.options).toHaveLength(2);
          |                                ^
      402 |       expect(response.options[0]).toMatchObject({
      403 |         id: 'correios-pac',
      404 |         name: 'PAC',

      at Object.toHaveLength (src/services/__tests__/integration/cart.integration.test.ts:401:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CÃ¡lculo de frete â€º deve calcular frete por CEP

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      430 |
      431 |       // Assert
    > 432 |       expect(response.options).toHaveLength(1);
          |                                ^
      433 |       expect(response.options[0]).toMatchObject({
      434 |         id: 'correios-pac',
      435 |         name: 'PAC',

      at Object.toHaveLength (src/services/__tests__/integration/cart.integration.test.ts:432:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CÃ¡lculo de frete â€º deve falhar cÃ¡lculo de frete com CEP invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}

      450 |
      451 |       // Act & Assert
    > 452 |       await expect(cartService.calculateShippingByZip(zipCode)).rejects.toMatchObject({
          |             ^
      453 |         status: 400,
      454 |         message: 'CEP invÃ¡lido ou nÃ£o atendido',
      455 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:452:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CÃ¡lculo de frete â€º deve estimar tempo de entrega

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 23

      Object {
    -   "estimated_date": "2025-01-14T00:00:00Z",
    -   "max_days": 7,
    -   "min_days": 3,
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
    +     },
    +   ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      472 |
      473 |       // Assert
    > 474 |       expect(response).toMatchObject({
          |                        ^
      475 |         min_days: 3,
      476 |         max_days: 7,
      477 |         estimated_date: '2025-01-14T00:00:00Z',

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:474:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processo de checkout â€º deve finalizar pedido com sucesso

    expect(received).toMatchObject(expected)

    - Expected  -  4
    + Received  + 43

      Object {
    +   "data": Object {
    +     "createdAt": "2025-01-01T10:00:00Z",
    +     "discount": 0,
    +     "estimatedDelivery": "2025-01-15T00:00:00Z",
          "id": "order-123",
    -   "order_number": "ORD-2025-001",
    -   "payment_status": "pending",
    -   "status": "pending",
    -   "total": 329.98,
    +     "items": Array [
    +       Object {
    +         "boxId": "box-456",
    +         "boxImage": "https://example.com/box.jpg",
    +         "boxName": "Caixa Misteriosa Tech",
    +         "id": "order-item-123",
    +         "platform": "magalu",
    +         "price": 49.9,
    +         "quantity": 1,
    +         "status": "processing",
    +         "subtotal": 49.9,
    +         "vendorId": "vendor-789",
    +         "vendorName": "TechStore Brasil",
    +       },
    +     ],
    +     "orderNumber": "ORD-2025-001",
    +     "paymentMethod": "credit_card",
    +     "paymentStatus": "paid",
    +     "shipping": 10,
    +     "shippingAddress": Object {
    +       "city": "SÃ£o Paulo",
    +       "complement": "Apto 45",
    +       "country": "Brasil",
    +       "id": "address-123",
    +       "neighborhood": "Centro",
    +       "number": "123",
    +       "state": "SP",
    +       "street": "Rua Exemplo",
    +       "zipCode": "01000-000",
    +     },
    +     "status": "processing",
    +     "subtotal": 49.9,
    +     "total": 59.9,
    +     "trackingCode": "BR123456789",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "userId": "user-123",
    +   },
    +   "message": "Pedido criado com sucesso",
    +   "success": true,
      }

      501 |
      502 |       // Assert
    > 503 |       expect(response).toMatchObject({
          |                        ^
      504 |         id: 'order-123',
      505 |         order_number: 'ORD-2025-001',
      506 |         status: 'pending',

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:503:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processo de checkout â€º deve obter resumo do pedido antes da finalizaÃ§Ã£o

    expect(received).toMatchObject(expected)

    - Expected  -  6
    + Received  + 15

      Object {
    -   "discount": 34.99,
    -   "items": ArrayContaining [
    -     ObjectContaining {
    -       "mystery_box_id": "box-electronics-001",
    +   "discount": 0,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
          },
        ],
    -   "subtotal": 349.97,
    -   "total": 329.98,
    +   "subtotal": 49.9,
    +   "total": 59.9,
      }

      535 |
      536 |       // Assert
    > 537 |       expect(response).toMatchObject({
          |                        ^
      538 |         items: expect.arrayContaining([
      539 |           expect.objectContaining({
      540 |             mystery_box_id: 'box-electronics-001',

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:537:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processo de checkout â€º deve falhar checkout com endereÃ§o invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "estimatedDelivery": "2025-01-15T00:00:00Z", "id": "order-123", "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "order-item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "status": "processing", "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "orderNumber": "ORD-2025-001", "paymentMethod": "credit_card", "paymentStatus": "paid", "shipping": 10, "shippingAddress": {"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "id": "address-123", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "zipCode": "01000-000"}, "status": "processing", "subtotal": 49.9, "total": 59.9, "trackingCode": "BR123456789", "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Pedido criado com sucesso", "success": true}

      562 |
      563 |       // Act & Assert
    > 564 |       await expect(cartService.checkout(checkoutData)).rejects.toMatchObject({
          |             ^
      565 |         status: 400,
      566 |         message: 'EndereÃ§o de entrega invÃ¡lido',
      567 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:564:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processo de checkout â€º deve verificar disponibilidade dos itens antes do checkout

    expect(received).toMatchObject(expected)

    - Expected  -  6
    + Received  + 21

      Object {
    -   "available": false,
    -   "unavailable_items": ArrayContaining [
    -     ObjectContaining {
    -       "available_quantity": 1,
    -       "item_id": "cart-item-001",
    -       "requested_quantity": 2,
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
          },
        ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      589 |
      590 |       // Assert
    > 591 |       expect(response).toMatchObject({
          |                        ^
      592 |         available: false,
      593 |         unavailable_items: expect.arrayContaining([
      594 |           expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:591:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve processar pagamento com cartÃ£o de crÃ©dito

    expect(received).toMatchObject(expected)

    - Expected  - 3
    + Received  + 1

      Object {
    -   "message": "Pagamento processado com sucesso",
    -   "payment_id": "payment-123",
    -   "status": "success",
    +   "message": "Pedido criado com sucesso",
      }

      631 |
      632 |       // Assert
    > 633 |       expect(response).toMatchObject({
          |                        ^
      634 |         status: 'success',
      635 |         payment_id: 'payment-123',
      636 |         message: 'Pagamento processado com sucesso',

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:633:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve processar pagamento PIX

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 44

      Object {
    -   "payment_id": "payment-pix-123",
    -   "pix_qr_code": StringContaining "data:image/png;base64",
    -   "status": "pending",
    +   "data": Object {
    +     "createdAt": "2025-01-01T10:00:00Z",
    +     "discount": 0,
    +     "estimatedDelivery": "2025-01-15T00:00:00Z",
    +     "id": "order-123",
    +     "items": Array [
    +       Object {
    +         "boxId": "box-456",
    +         "boxImage": "https://example.com/box.jpg",
    +         "boxName": "Caixa Misteriosa Tech",
    +         "id": "order-item-123",
    +         "platform": "magalu",
    +         "price": 49.9,
    +         "quantity": 1,
    +         "status": "processing",
    +         "subtotal": 49.9,
    +         "vendorId": "vendor-789",
    +         "vendorName": "TechStore Brasil",
    +       },
    +     ],
    +     "orderNumber": "ORD-2025-001",
    +     "paymentMethod": "credit_card",
    +     "paymentStatus": "paid",
    +     "shipping": 10,
    +     "shippingAddress": Object {
    +       "city": "SÃ£o Paulo",
    +       "complement": "Apto 45",
    +       "country": "Brasil",
    +       "id": "address-123",
    +       "neighborhood": "Centro",
    +       "number": "123",
    +       "state": "SP",
    +       "street": "Rua Exemplo",
    +       "zipCode": "01000-000",
    +     },
    +     "status": "processing",
    +     "subtotal": 49.9,
    +     "total": 59.9,
    +     "trackingCode": "BR123456789",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "userId": "user-123",
    +   },
    +   "message": "Pedido criado com sucesso",
    +   "success": true,
      }

      659 |
      660 |       // Assert
    > 661 |       expect(response).toMatchObject({
          |                        ^
      662 |         status: 'pending',
      663 |         payment_id: 'payment-pix-123',
      664 |         pix_qr_code: expect.stringContaining('data:image/png;base64'),

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:661:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve processar pagamento boleto

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 44

      Object {
    -   "boleto_url": "https://pagamento.com/boleto/123.pdf",
    -   "payment_id": "payment-boleto-123",
    -   "status": "pending",
    +   "data": Object {
    +     "createdAt": "2025-01-01T10:00:00Z",
    +     "discount": 0,
    +     "estimatedDelivery": "2025-01-15T00:00:00Z",
    +     "id": "order-123",
    +     "items": Array [
    +       Object {
    +         "boxId": "box-456",
    +         "boxImage": "https://example.com/box.jpg",
    +         "boxName": "Caixa Misteriosa Tech",
    +         "id": "order-item-123",
    +         "platform": "magalu",
    +         "price": 49.9,
    +         "quantity": 1,
    +         "status": "processing",
    +         "subtotal": 49.9,
    +         "vendorId": "vendor-789",
    +         "vendorName": "TechStore Brasil",
    +       },
    +     ],
    +     "orderNumber": "ORD-2025-001",
    +     "paymentMethod": "credit_card",
    +     "paymentStatus": "paid",
    +     "shipping": 10,
    +     "shippingAddress": Object {
    +       "city": "SÃ£o Paulo",
    +       "complement": "Apto 45",
    +       "country": "Brasil",
    +       "id": "address-123",
    +       "neighborhood": "Centro",
    +       "number": "123",
    +       "state": "SP",
    +       "street": "Rua Exemplo",
    +       "zipCode": "01000-000",
    +     },
    +     "status": "processing",
    +     "subtotal": 49.9,
    +     "total": 59.9,
    +     "trackingCode": "BR123456789",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "userId": "user-123",
    +   },
    +   "message": "Pedido criado com sucesso",
    +   "success": true,
      }

      687 |
      688 |       // Assert
    > 689 |       expect(response).toMatchObject({
          |                        ^
      690 |         status: 'pending',
      691 |         payment_id: 'payment-boleto-123',
      692 |         boleto_url: 'https://pagamento.com/boleto/123.pdf',

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:689:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve verificar _status do pagamento

    expect(received).toMatchObject(expected)

    - Expected  -   3
    + Received  + 138

      Object {
    -   "payment_id": "payment-123",
    -   "status": "paid",
    -   "updated_at": "2025-01-07T13:00:00Z",
    +   "data": Array [
    +     Object {
    +       "createdAt": "2025-01-01T10:00:00Z",
    +       "discount": 0,
    +       "estimatedDelivery": "2025-01-15T00:00:00Z",
    +       "id": "order-123",
    +       "items": Array [
    +         Object {
    +           "boxId": "box-456",
    +           "boxImage": "https://example.com/box.jpg",
    +           "boxName": "Caixa Misteriosa Tech",
    +           "id": "order-item-123",
    +           "platform": "magalu",
    +           "price": 49.9,
    +           "quantity": 1,
    +           "status": "processing",
    +           "subtotal": 49.9,
    +           "vendorId": "vendor-789",
    +           "vendorName": "TechStore Brasil",
    +         },
    +       ],
    +       "orderNumber": "ORD-2025-001",
    +       "paymentMethod": "credit_card",
    +       "paymentStatus": "paid",
    +       "shipping": 10,
    +       "shippingAddress": Object {
    +         "city": "SÃ£o Paulo",
    +         "complement": "Apto 45",
    +         "country": "Brasil",
    +         "id": "address-123",
    +         "neighborhood": "Centro",
    +         "number": "123",
    +         "state": "SP",
    +         "street": "Rua Exemplo",
    +         "zipCode": "01000-000",
    +       },
    +       "status": "processing",
    +       "subtotal": 49.9,
    +       "total": 59.9,
    +       "trackingCode": "BR123456789",
    +       "updatedAt": "2025-01-01T10:00:00Z",
    +       "userId": "user-123",
    +     },
    +     Object {
    +       "createdAt": "2025-01-01T10:00:00Z",
    +       "deliveredAt": "2025-01-10T14:30:00Z",
    +       "discount": 0,
    +       "estimatedDelivery": "2025-01-15T00:00:00Z",
    +       "id": "order-456",
    +       "items": Array [
    +         Object {
    +           "boxId": "box-456",
    +           "boxImage": "https://example.com/box.jpg",
    +           "boxName": "Caixa Misteriosa Tech",
    +           "id": "order-item-123",
    +           "platform": "magalu",
    +           "price": 49.9,
    +           "quantity": 1,
    +           "status": "processing",
    +           "subtotal": 49.9,
    +           "vendorId": "vendor-789",
    +           "vendorName": "TechStore Brasil",
    +         },
    +       ],
    +       "orderNumber": "ORD-2025-002",
    +       "paymentMethod": "credit_card",
    +       "paymentStatus": "paid",
    +       "shipping": 10,
    +       "shippingAddress": Object {
    +         "city": "SÃ£o Paulo",
    +         "complement": "Apto 45",
    +         "country": "Brasil",
    +         "id": "address-123",
    +         "neighborhood": "Centro",
    +         "number": "123",
    +         "state": "SP",
    +         "street": "Rua Exemplo",
    +         "zipCode": "01000-000",
    +       },
    +       "status": "delivered",
    +       "subtotal": 49.9,
    +       "total": 59.9,
    +       "trackingCode": "BR123456789",
    +       "updatedAt": "2025-01-01T10:00:00Z",
    +       "userId": "user-123",
    +     },
    +     Object {
    +       "cancellationReason": "Solicitado pelo cliente",
    +       "cancelledAt": "2025-01-02T09:00:00Z",
    +       "createdAt": "2025-01-01T10:00:00Z",
    +       "discount": 0,
    +       "estimatedDelivery": "2025-01-15T00:00:00Z",
    +       "id": "order-789",
    +       "items": Array [
    +         Object {
    +           "boxId": "box-456",
    +           "boxImage": "https://example.com/box.jpg",
    +           "boxName": "Caixa Misteriosa Tech",
    +           "id": "order-item-123",
    +           "platform": "magalu",
    +           "price": 49.9,
    +           "quantity": 1,
    +           "status": "processing",
    +           "subtotal": 49.9,
    +           "vendorId": "vendor-789",
    +           "vendorName": "TechStore Brasil",
    +         },
    +       ],
    +       "orderNumber": "ORD-2025-003",
    +       "paymentMethod": "credit_card",
    +       "paymentStatus": "refunded",
    +       "shipping": 10,
    +       "shippingAddress": Object {
    +         "city": "SÃ£o Paulo",
    +         "complement": "Apto 45",
    +         "country": "Brasil",
    +         "id": "address-123",
    +         "neighborhood": "Centro",
    +         "number": "123",
    +         "state": "SP",
    +         "street": "Rua Exemplo",
    +         "zipCode": "01000-000",
    +       },
    +       "status": "cancelled",
    +       "subtotal": 49.9,
    +       "total": 59.9,
    +       "trackingCode": "BR123456789",
    +       "updatedAt": "2025-01-01T10:00:00Z",
    +       "userId": "user-123",
    +     },
    +   ],
    +   "pagination": Object {
    +     "limit": 20,
    +     "page": 1,
    +     "total": 3,
    +     "totalPages": 1,
    +   },
    +   "success": true,
      }

      710 |
      711 |       // Assert
    > 712 |       expect(response).toMatchObject({
          |                        ^
      713 |         status: 'paid',
      714 |         payment_id: 'payment-123',
      715 |         updated_at: '2025-01-07T13:00:00Z',

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:712:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve obter mÃ©todos de pagamento disponÃ­veis

    expect(received).toMatchObject(expected)

    - Expected  - 10
    + Received  + 23

      Object {
    -   "credit_card": ObjectContaining {
    -     "brands": ArrayContaining [
    -       "visa",
    -       "mastercard",
    -     ],
    -     "enabled": true,
    -     "max_installments": 12,
    +   "data": Array [
    +     Object {
    +       "cardBrand": "visa",
    +       "cardExpMonth": 12,
    +       "cardExpYear": 2026,
    +       "cardLast4": "4242",
    +       "cardholderName": "JOAO SILVA",
    +       "createdAt": "2024-01-01T10:00:00Z",
    +       "id": "pm-123",
    +       "isDefault": true,
    +       "type": "credit_card",
          },
    -   "pix": ObjectContaining {
    -     "discount_percentage": 5,
    -     "enabled": true,
    +     Object {
    +       "cardBrand": "mastercard",
    +       "cardExpMonth": 6,
    +       "cardExpYear": 2025,
    +       "cardLast4": "8888",
    +       "cardholderName": "JOAO SILVA",
    +       "createdAt": "2024-06-01T10:00:00Z",
    +       "id": "pm-456",
    +       "isDefault": false,
    +       "type": "debit_card",
          },
    +   ],
    +   "success": true,
      }

      743 |
      744 |       // Assert
    > 745 |       expect(response).toMatchObject({
          |                        ^
      746 |         credit_card: expect.objectContaining({
      747 |           enabled: true,
      748 |           brands: expect.arrayContaining(['visa', 'mastercard']),

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:745:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve calcular parcelas para pagamento

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"amount": 5990, "installments": 1, "interestRate": 0, "totalAmount": 5990}, {"amount": 2995, "installments": 2, "interestRate": 0, "totalAmount": 5990}, {"amount": 1997, "installments": 3, "interestRate": 0, "totalAmount": 5990}, {"amount": 1573, "installments": 4, "interestRate": 5, "totalAmount": 6292}, {"amount": 1282, "installments": 5, "interestRate": 7, "totalAmount": 6410}, {"amount": 1087, "installments": 6, "interestRate": 9, "totalAmount": 6522}], "success": true}

      772 |
      773 |       // Assert
    > 774 |       expect(response).toHaveLength(3);
          |                        ^
      775 |       expect(response[0]).toMatchObject({
      776 |         installments: 1,
      777 |         amount_per_installment: 329.98,

      at Object.toHaveLength (src/services/__tests__/integration/cart.integration.test.ts:774:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve falhar pagamento com cartÃ£o invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "estimatedDelivery": "2025-01-15T00:00:00Z", "id": "order-123", "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "order-item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "status": "processing", "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "orderNumber": "ORD-2025-001", "paymentMethod": "credit_card", "paymentStatus": "paid", "shipping": 10, "shippingAddress": {"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "id": "address-123", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "zipCode": "01000-000"}, "status": "processing", "subtotal": 49.9, "total": 59.9, "trackingCode": "BR123456789", "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Pedido criado com sucesso", "success": true}

      806 |
      807 |       // Act & Assert
    > 808 |       await expect(cartService.processPayment(orderId, paymentData)).rejects.toMatchObject({
          |             ^
      809 |         status: 400,
      810 |         message: 'CartÃ£o invÃ¡lido',
      811 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:808:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Funcionalidades auxiliares â€º deve salvar carrinho para mais tarde

    expect(received).toMatchObject(expected)

    - Expected  -  1
    + Received  + 23

      Object {
    -   "saved_at": "2025-01-07T12:00:00Z",
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
    +     },
    +   ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      827 |
      828 |       // Assert
    > 829 |       expect(response).toMatchObject({
          |                        ^
      830 |         saved_at: '2025-01-07T12:00:00Z',
      831 |       });
      832 |     });

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:829:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Funcionalidades auxiliares â€º deve restaurar carrinho salvo

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 12

      Object {
        "id": "cart-123",
    -   "items": ArrayContaining [
    -     ObjectContaining {
    -       "mystery_box_id": "box-electronics-001",
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
          },
        ],
      }

      841 |
      842 |       // Assert
    > 843 |       expect(response).toMatchObject({
          |                        ^
      844 |         id: 'cart-123',
      845 |         items: expect.arrayContaining([
      846 |           expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:843:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Funcionalidades auxiliares â€º deve verificar se hÃ¡ carrinho salvo

    expect(received).toMatchObject(expected)

    - Expected  -  2
    + Received  + 23

      Object {
    -   "has_saved_cart": true,
    -   "saved_at": "2025-01-07T12:00:00Z",
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
    +     },
    +   ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      865 |
      866 |       // Assert
    > 867 |       expect(response).toMatchObject({
          |                        ^
      868 |         has_saved_cart: true,
      869 |         saved_at: '2025-01-07T12:00:00Z',
      870 |       });

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:867:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Funcionalidades auxiliares â€º deve compartilhar carrinho

    expect(received).toMatchObject(expected)

    - Expected  -  2
    + Received  + 23

      Object {
    -   "expires_at": "2025-01-14T12:00:00Z",
    -   "share_url": "https://crowbar.com/cart/share/abc123",
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
    +     },
    +   ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      885 |
      886 |       // Assert
    > 887 |       expect(response).toMatchObject({
          |                        ^
      888 |         share_url: 'https://crowbar.com/cart/share/abc123',
      889 |         expires_at: '2025-01-14T12:00:00Z',
      890 |       });

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:887:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Funcionalidades auxiliares â€º deve importar carrinho compartilhado

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 12

      Object {
        "id": "cart-123",
    -   "items": ArrayContaining [
    -     ObjectContaining {
    -       "mystery_box_id": "box-electronics-001",
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
          },
        ],
      }

      901 |
      902 |       // Assert
    > 903 |       expect(response).toMatchObject({
          |                        ^
      904 |         id: 'cart-123',
      905 |         items: expect.arrayContaining([
      906 |           expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:903:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Funcionalidades auxiliares â€º deve falhar ao importar carrinho com token invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}

      922 |
      923 |       // Act & Assert
    > 924 |       await expect(cartService.importSharedCart(shareToken)).rejects.toMatchObject({
          |             ^
      925 |         status: 400,
      926 |         message: 'Token de compartilhamento invÃ¡lido ou expirado',
      927 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:924:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CenÃ¡rios de erro â€º deve tratar erro de rede durante adiÃ§Ã£o ao carrinho

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Item adicionado ao carrinho", "success": true}

      936 |
      937 |       // Act & Assert
    > 938 |       await expect(cartService.addToCart(boxId, 1)).rejects.toMatchObject({
          |             ^
      939 |         status: 0,
      940 |         message: expect.stringContaining('Erro de conexÃ£o'),
      941 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:938:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CenÃ¡rios de erro â€º deve tratar timeout durante checkout

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "estimatedDelivery": "2025-01-15T00:00:00Z", "id": "order-123", "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "order-item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "status": "processing", "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "orderNumber": "ORD-2025-001", "paymentMethod": "credit_card", "paymentStatus": "paid", "shipping": 10, "shippingAddress": {"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "id": "address-123", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "zipCode": "01000-000"}, "status": "processing", "subtotal": 49.9, "total": 59.9, "trackingCode": "BR123456789", "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Pedido criado com sucesso", "success": true}

      953 |
      954 |       // Act & Assert
    > 955 |       await expect(cartService.checkout(checkoutData)).rejects.toMatchObject({
          |             ^
      956 |         status: 0,
      957 |         message: expect.stringContaining('timeout'),
      958 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:955:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CenÃ¡rios de erro â€º deve tratar erro 500 durante processamento de pagamento

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "estimatedDelivery": "2025-01-15T00:00:00Z", "id": "order-123", "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "order-item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "status": "processing", "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "orderNumber": "ORD-2025-001", "paymentMethod": "credit_card", "paymentStatus": "paid", "shipping": 10, "shippingAddress": {"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "id": "address-123", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "zipCode": "01000-000"}, "status": "processing", "subtotal": 49.9, "total": 59.9, "trackingCode": "BR123456789", "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Pedido criado com sucesso", "success": true}

      981 |
      982 |       // Act & Assert
    > 983 |       await expect(cartService.processPayment(orderId, paymentData)).rejects.toMatchObject({
          |             ^
      984 |         status: 500,
      985 |         message: 'Erro interno do servidor',
      986 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:983:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/__tests__/integration/user.integration.test.ts
  Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio
    Gerenciamento de perfil
      âœ• deve obter perfil do usuÃ¡rio atual (5 ms)
      âœ• deve atualizar perfil do usuÃ¡rio (2 ms)
      âœ• deve atualizar avatar do usuÃ¡rio (1 ms)
      âœ• deve falhar ao atualizar com dados invÃ¡lidos (2 ms)
    Gerenciamento de endereÃ§os
      âœ• deve obter lista de endereÃ§os do usuÃ¡rio (1 ms)
      âœ• deve adicionar novo endereÃ§o (2 ms)
      âœ• deve atualizar endereÃ§o existente (1 ms)
      âœ“ deve remover endereÃ§o
      âœ“ deve definir endereÃ§o como padrÃ£o (1 ms)
      âœ• deve falhar ao remover endereÃ§o padrÃ£o Ãºnico (1 ms)
    PreferÃªncias do usuÃ¡rio
      âœ• deve obter preferÃªncias do usuÃ¡rio (3 ms)
      âœ• deve atualizar preferÃªncias do usuÃ¡rio (2 ms)
      âœ“ deve atualizar configuraÃ§Ãµes de notificaÃ§Ã£o (1 ms)
    EstatÃ­sticas do usuÃ¡rio
      âœ• deve obter estatÃ­sticas do usuÃ¡rio (2 ms)
      âœ• deve obter histÃ³rico de atividades (1 ms)
    Gerenciamento de favoritos
      âœ• deve obter lista de favoritos
      âœ• deve adicionar caixa aos favoritos (1 ms)
      âœ“ deve remover caixa dos favoritos (1 ms)
      âœ• deve verificar se caixa estÃ¡ nos favoritos (1 ms)
      âœ• deve retornar false para caixa nÃ£o favoritada (1 ms)
      âœ• deve falhar ao adicionar caixa jÃ¡ favoritada (1 ms)
    Gerenciamento de notificaÃ§Ãµes
      âœ• deve obter lista de notificaÃ§Ãµes (1 ms)
      âœ“ deve marcar notificaÃ§Ã£o como lida (1 ms)
      âœ“ deve marcar todas as notificaÃ§Ãµes como lidas
      âœ“ deve deletar notificaÃ§Ã£o (1 ms)
      âœ• deve obter contagem de notificaÃ§Ãµes nÃ£o lidas (1 ms)
    Funcionalidades auxiliares
      âœ“ deve alterar senha do usuÃ¡rio (3 ms)
      âœ• deve falhar ao alterar senha com senha atual incorreta (2 ms)
      âœ• deve verificar disponibilidade de email (2 ms)
      âœ“ deve reenviar email de verificaÃ§Ã£o
      âœ“ deve verificar email com token
      âœ“ deve solicitar exclusÃ£o de conta (1 ms)
      âœ“ deve cancelar solicitaÃ§Ã£o de exclusÃ£o (1 ms)
      âœ• deve exportar dados do usuÃ¡rio (1 ms)
    CenÃ¡rios de erro
      âœ• deve tratar erro de rede durante busca de perfil (2 ms)
      âœ• deve tratar timeout durante atualizaÃ§Ã£o de perfil (1 ms)
      âœ• deve tratar erro 500 durante busca de estatÃ­sticas
      âœ• deve tratar erro 403 ao tentar acessar dados de outro usuÃ¡rio (7 ms)
      âœ• deve tratar erro isFavorite graciosamente (1 ms)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de perfil â€º deve obter perfil do usuÃ¡rio atual

    expect(received).toMatchObject(expected)

    - Expected  -  4
    + Received  + 27

      Object {
    -   "email": "test@crowbar.com",
    -   "id": "user-test-123",
    -   "name": "UsuÃ¡rio Teste",
    -   "phone": "(11) 99999-9999",
    +   "data": Object {
    +     "avatar": "https://example.com/avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva",
    +     "phone": "+5511987654321",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
    +     },
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "verified": true,
    +   },
    +   "success": true,
      }

      180 |
      181 |       // Assert
    > 182 |       expect(response).toMatchObject({
          |                        ^
      183 |         id: 'user-test-123',
      184 |         email: 'test@crowbar.com',
      185 |         name: 'UsuÃ¡rio Teste',

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:182:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de perfil â€º deve atualizar perfil do usuÃ¡rio

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 27

      Object {
    -   "birth_date": "1990-05-15",
    -   "gender": "male",
    +   "data": Object {
    +     "avatar": "https://example.com/new-avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
          "name": "JoÃ£o Silva Santos",
    -   "phone": "(11) 98765-4321",
    +     "phone": "+5511999887766",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
    +     },
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-06T15:00:00Z",
    +     "verified": true,
    +   },
    +   "message": "Perfil atualizado com sucesso",
    +   "success": true,
      }

      210 |
      211 |       // Assert
    > 212 |       expect(response).toMatchObject({
          |                        ^
      213 |         name: 'JoÃ£o Silva Santos',
      214 |         phone: '(11) 98765-4321',
      215 |         birth_date: '1990-05-15',

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:212:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de perfil â€º deve atualizar avatar do usuÃ¡rio

    expect(received).toMatchObject(expected)

    - Expected  - 3
    + Received  + 1

    - Object {
    -   "avatar_url": "https://storage.com/avatars/user-123-new.jpg",
    - }
    + Object {}

      234 |
      235 |       // Assert
    > 236 |       expect(response).toMatchObject({
          |                        ^
      237 |         avatar_url: 'https://storage.com/avatars/user-123-new.jpg',
      238 |       });
      239 |     });

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:236:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de perfil â€º deve falhar ao atualizar com dados invÃ¡lidos

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/new-avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva Santos", "phone": "+5511999887766", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-06T15:00:00Z", "verified": true}, "message": "Perfil atualizado com sucesso", "success": true}

      258 |
      259 |       // Act & Assert
    > 260 |       await expect(userService.updateProfile(invalidData)).rejects.toMatchObject({
          |             ^
      261 |         status: 422,
      262 |         message: 'Dados invÃ¡lidos',
      263 |         errors: {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:260:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de endereÃ§os â€º deve obter lista de endereÃ§os do usuÃ¡rio

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "createdAt": "2024-01-01T10:00:00Z", "id": "address-123", "isDefault": true, "label": "Casa", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "updatedAt": "2024-01-01T10:00:00Z", "userId": "user-123", "zipCode": "01000-000"}, {"city": "SÃ£o Paulo", "complement": "Sala 501", "country": "Brasil", "createdAt": "2024-01-15T10:00:00Z", "id": "address-456", "isDefault": false, "label": "Trabalho", "neighborhood": "Bela Vista", "number": "1000", "state": "SP", "street": "Avenida Paulista", "updatedAt": "2024-01-15T10:00:00Z", "userId": "user-123", "zipCode": "01310-100"}], "success": true}

      280 |
      281 |       // Assert
    > 282 |       expect(response).toHaveLength(2);
          |                        ^
      283 |       expect(response[0]).toMatchObject({
      284 |         id: 'addr-001',
      285 |         street: 'Rua das Flores',

      at Object.toHaveLength (src/services/__tests__/integration/user.integration.test.ts:282:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de endereÃ§os â€º deve adicionar novo endereÃ§o

    expect(received).toMatchObject(expected)

    - Expected  -  4
    + Received  + 18

      Object {
    -   "id": "addr-003",
    -   "number": "456",
    -   "street": "Rua Nova",
    -   "zip_code": "04567-890",
    +   "data": Object {
    +     "city": "SÃ£o Paulo",
    +     "complement": "Apto 45",
    +     "country": "Brasil",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "id": "address-123",
    +     "isDefault": true,
    +     "label": "Casa",
    +     "neighborhood": "Centro",
    +     "number": "123",
    +     "state": "SP",
    +     "street": "Rua Exemplo",
    +     "updatedAt": "2024-01-01T10:00:00Z",
    +     "userId": "user-123",
    +     "zipCode": "01000-000",
    +   },
    +   "message": "EndereÃ§o criado com sucesso",
    +   "success": true,
      }

      317 |
      318 |       // Assert
    > 319 |       expect(response).toMatchObject({
          |                        ^
      320 |         id: 'addr-003',
      321 |         street: 'Rua Nova',
      322 |         number: '456',

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:319:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de endereÃ§os â€º deve atualizar endereÃ§o existente

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 28

      Object {
    -   "complement": "Apto 46",
    -   "id": "addr-001",
    -   "neighborhood": "Centro HistÃ³rico",
    +   "data": Object {
    +     "avatar": "https://example.com/new-avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva Santos",
    +     "phone": "+5511999887766",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
    +     },
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-06T15:00:00Z",
    +     "verified": true,
    +   },
    +   "message": "Perfil atualizado com sucesso",
    +   "success": true,
      }

      346 |
      347 |       // Assert
    > 348 |       expect(response).toMatchObject({
          |                        ^
      349 |         id: addressId,
      350 |         complement: 'Apto 46',
      351 |         neighborhood: 'Centro HistÃ³rico',

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:348:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de endereÃ§os â€º deve falhar ao remover endereÃ§o padrÃ£o Ãºnico

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: undefined

      394 |
      395 |       // Act & Assert
    > 396 |       await expect(userService.deleteAddress(addressId)).rejects.toMatchObject({
          |             ^
      397 |         status: 400,
      398 |         message: 'NÃ£o Ã© possÃ­vel remover o Ãºnico endereÃ§o padrÃ£o',
      399 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:396:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º PreferÃªncias do usuÃ¡rio â€º deve obter preferÃªncias do usuÃ¡rio

    expect(received).toMatchObject(expected)

    - Expected  - 11
    + Received  + 25

      Object {
    -   "box_preferences": ObjectContaining {
    -     "preferred_categories": Array [
    -       "electronics",
    -       "gaming",
    -     ],
    -   },
    +   "data": Object {
    +     "avatar": "https://example.com/avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva",
    +     "phone": "+5511987654321",
    +     "preferences": Object {
            "language": "pt-BR",
    -   "notifications": ObjectContaining {
    -     "email": true,
    -     "push": true,
    -     "sms": false,
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
          },
    -   "theme": "light",
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "verified": true,
    +   },
    +   "success": true,
      }

      411 |
      412 |       // Assert
    > 413 |       expect(response).toMatchObject({
          |                        ^
      414 |         theme: 'light',
      415 |         language: 'pt-BR',
      416 |         notifications: expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:413:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º PreferÃªncias do usuÃ¡rio â€º deve atualizar preferÃªncias do usuÃ¡rio

    expect(received).toMatchObject(expected)

    - Expected  - 14
    + Received  + 26

      Object {
    -   "box_preferences": ObjectContaining {
    -     "exclude_categories": Array [
    -       "fashion",
    -       "sports",
    -     ],
    -     "preferred_categories": Array [
    -       "electronics",
    -       "books",
    -     ],
    +   "data": Object {
    +     "avatar": "https://example.com/new-avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva Santos",
    +     "phone": "+5511999887766",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
          },
    -   "notifications": ObjectContaining {
    -     "email": false,
    -     "marketing": true,
    -     "sms": true,
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-06T15:00:00Z",
    +     "verified": true,
        },
    -   "theme": "dark",
    +   "message": "Perfil atualizado com sucesso",
    +   "success": true,
      }

      454 |
      455 |       // Assert
    > 456 |       expect(response).toMatchObject({
          |                        ^
      457 |         theme: 'dark',
      458 |         notifications: expect.objectContaining({
      459 |           email: false,

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:456:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º EstatÃ­sticas do usuÃ¡rio â€º deve obter estatÃ­sticas do usuÃ¡rio

    expect(received).toMatchObject(expected)

    - Expected  - 12
    + Received  + 25

      Object {
    -   "achievements": ArrayContaining [
    -     ObjectContaining {
    -       "id": "first_box",
    -       "name": "Primeira Caixa",
    +   "data": Object {
    +     "avatar": "https://example.com/avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva",
    +     "phone": "+5511987654321",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
          },
    -   ],
    -   "boxes_by_category": ObjectContaining {
    -     "electronics": 10,
    -     "gaming": 8,
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "verified": true,
        },
    -   "boxes_opened": 25,
    -   "favorite_boxes": 8,
    -   "reviews_written": 12,
    -   "total_spent": 1250.75,
    +   "success": true,
      }

      500 |
      501 |       // Assert
    > 502 |       expect(response).toMatchObject({
          |                        ^
      503 |         boxes_opened: 25,
      504 |         total_spent: 1250.75,
      505 |         favorite_boxes: 8,

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:502:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º EstatÃ­sticas do usuÃ¡rio â€º deve obter histÃ³rico de atividades

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      544 |
      545 |       // Assert
    > 546 |       expect(response.data).toHaveLength(2);
          |                             ^
      547 |       expect(response.data[0]).toMatchObject({
      548 |         id: 'activity-001',
      549 |         type: 'box_opened',

      at Object.toHaveLength (src/services/__tests__/integration/user.integration.test.ts:546:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de favoritos â€º deve obter lista de favoritos

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      563 |
      564 |       // Assert
    > 565 |       expect(response.data).toHaveLength(2);
          |                             ^
      566 |       expect(response.data[0]).toMatchObject({
      567 |         id: 'fav-001',
      568 |         mystery_box_id: 'box-electronics-001',

      at Object.toHaveLength (src/services/__tests__/integration/user.integration.test.ts:565:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de favoritos â€º deve adicionar caixa aos favoritos

    expect(received).toMatchObject(expected)

    - Expected  - 7
    + Received  + 1

    - Object {
    -   "id": "fav-003",
    -   "mystery_box": ObjectContaining {
    -     "name": "Nova Caixa Favorita",
    -   },
    -   "mystery_box_id": "box-new-favorite",
    - }
    + Object {}

      598 |
      599 |       // Assert
    > 600 |       expect(response).toMatchObject({
          |                        ^
      601 |         id: 'fav-003',
      602 |         mystery_box_id: boxId,
      603 |         mystery_box: expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:600:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de favoritos â€º deve verificar se caixa estÃ¡ nos favoritos

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      634 |
      635 |       // Assert
    > 636 |       expect(response).toBe(true);
          |                        ^
      637 |     });
      638 |
      639 |     it('deve retornar false para caixa nÃ£o favoritada', async () => {

      at Object.toBe (src/services/__tests__/integration/user.integration.test.ts:636:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de favoritos â€º deve retornar false para caixa nÃ£o favoritada

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      649 |
      650 |       // Assert
    > 651 |       expect(response).toBe(false);
          |                        ^
      652 |     });
      653 |
      654 |     it('deve falhar ao adicionar caixa jÃ¡ favoritada', async () => {

      at Object.toBe (src/services/__tests__/integration/user.integration.test.ts:651:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de favoritos â€º deve falhar ao adicionar caixa jÃ¡ favoritada

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      663 |
      664 |       // Act & Assert
    > 665 |       await expect(userService.addToFavorites(boxId)).rejects.toMatchObject({
          |             ^
      666 |         status: 409,
      667 |         message: 'Caixa jÃ¡ estÃ¡ nos favoritos',
      668 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:665:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de notificaÃ§Ãµes â€º deve obter lista de notificaÃ§Ãµes

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      680 |
      681 |       // Assert
    > 682 |       expect(response.data).toHaveLength(2);
          |                             ^
      683 |       expect(response.data[0]).toMatchObject({
      684 |         id: 'notif-001',
      685 |         type: 'order_shipped',

      at Object.toHaveLength (src/services/__tests__/integration/user.integration.test.ts:682:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de notificaÃ§Ãµes â€º deve obter contagem de notificaÃ§Ãµes nÃ£o lidas

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: undefined

      743 |
      744 |       // Assert
    > 745 |       expect(response).toBe(5);
          |                        ^
      746 |     });
      747 |   });
      748 |

      at Object.toBe (src/services/__tests__/integration/user.integration.test.ts:745:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Funcionalidades auxiliares â€º deve falhar ao alterar senha com senha atual incorreta

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: undefined

      783 |
      784 |       // Act & Assert
    > 785 |       await expect(userService.changePassword(passwordData)).rejects.toMatchObject({
          |             ^
      786 |         status: 400,
      787 |         message: 'Senha atual incorreta',
      788 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:785:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Funcionalidades auxiliares â€º deve verificar disponibilidade de email

    expect(received).toMatchObject(expected)

    - Expected  -  1
    + Received  + 27

      Object {
    -   "available": true,
    +   "data": Object {
    +     "avatar": "https://example.com/avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva",
    +     "phone": "+5511987654321",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
    +     },
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "verified": true,
    +   },
    +   "success": true,
      }

      801 |
      802 |       // Assert
    > 803 |       expect(response).toMatchObject({
          |                        ^
      804 |         available: true,
      805 |       });
      806 |     });

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:803:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Funcionalidades auxiliares â€º deve exportar dados do usuÃ¡rio

    expect(received).toMatchObject(expected)

    - Expected  - 4
    + Received  + 1

    - Object {
    -   "download_url": "https://storage.com/exports/user-123-data.zip",
    -   "expires_at": "2025-01-14T00:00:00Z",
    - }
    + Object {}

      879 |
      880 |       // Assert
    > 881 |       expect(response).toMatchObject({
          |                        ^
      882 |         download_url: 'https://storage.com/exports/user-123-data.zip',
      883 |         expires_at: '2025-01-14T00:00:00Z',
      884 |       });

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:881:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º CenÃ¡rios de erro â€º deve tratar erro de rede durante busca de perfil

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      892 |
      893 |       // Act & Assert
    > 894 |       await expect(userService.getProfile()).rejects.toMatchObject({
          |             ^
      895 |         status: 0,
      896 |         message: expect.stringContaining('Erro de conexÃ£o'),
      897 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:894:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º CenÃ¡rios de erro â€º deve tratar timeout durante atualizaÃ§Ã£o de perfil

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/new-avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva Santos", "phone": "+5511999887766", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-06T15:00:00Z", "verified": true}, "message": "Perfil atualizado com sucesso", "success": true}

      904 |
      905 |       // Act & Assert
    > 906 |       await expect(userService.updateProfile(updateData)).rejects.toMatchObject({
          |             ^
      907 |         status: 0,
      908 |         message: expect.stringContaining('timeout'),
      909 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:906:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º CenÃ¡rios de erro â€º deve tratar erro 500 durante busca de estatÃ­sticas

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      919 |
      920 |       // Act & Assert
    > 921 |       await expect(userService.getStats()).rejects.toMatchObject({
          |             ^
      922 |         status: 500,
      923 |         message: 'Erro interno do servidor',
      924 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:921:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º CenÃ¡rios de erro â€º deve tratar erro 403 ao tentar acessar dados de outro usuÃ¡rio

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      934 |
      935 |       // Act & Assert
    > 936 |       await expect(userService.getProfile()).rejects.toMatchObject({
          |             ^
      937 |         status: 403,
      938 |         message: 'Acesso negado',
      939 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:936:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º CenÃ¡rios de erro â€º deve tratar erro isFavorite graciosamente

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      953 |
      954 |       // Assert
    > 955 |       expect(response).toBe(false); // Deve retornar false em caso de erro
          |                        ^
      956 |     });
      957 |   });
      958 | });

      at Object.toBe (src/services/__tests__/integration/user.integration.test.ts:955:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/keycloakService.test.ts
  KeycloakAuthService
    Fluxo de AutorizaÃ§Ã£o OAuth2
      âœ“ deve realizar login com sucesso e retornar resposta completa de token (1 ms)
      âœ“ deve salvar tokens no Keychain apÃ³s login bem-sucedido
      âœ“ deve lanÃ§ar erro quando login falhar por erro de rede (17 ms)
      âœ“ deve lanÃ§ar erro quando login falhar por configuraÃ§Ã£o invÃ¡lida (5 ms)
      âœ“ deve usar configuraÃ§Ã£o correta de scopes e redirect URL (1 ms)
      âœ• deve registrar log de sucesso apÃ³s login bem-sucedido (1 ms)
    ObtenÃ§Ã£o de Token de Acesso
      âœ“ deve retornar token de acesso vÃ¡lido quando nÃ£o expirado (1 ms)
      âœ“ deve renovar token automaticamente quando expirado (1 ms)
      âœ• deve renovar token quando estiver prestes a expirar (< 1 minuto)
      âœ“ deve retornar null quando nÃ£o houver tokens salvos
      âœ“ deve retornar null quando renovaÃ§Ã£o de token falhar
      âœ• deve retornar null e registrar erro quando Keychain falhar
      âœ“ deve verificar expiraÃ§Ã£o com threshold de 1 minuto
      âœ“ deve usar token existente quando expiraÃ§Ã£o for maior que 1 minuto (1 ms)
    RenovaÃ§Ã£o de Tokens
      âœ“ deve renovar tokens com sucesso usando refresh token
      âœ“ deve salvar novos tokens no Keychain apÃ³s renovaÃ§Ã£o (1 ms)
      âœ“ deve preservar refresh token antigo se nÃ£o retornado na renovaÃ§Ã£o
      âœ“ deve preservar ID token antigo se nÃ£o retornado na renovaÃ§Ã£o
      âœ• deve retornar null quando nÃ£o houver refresh token disponÃ­vel (1 ms)
      âœ• deve limpar tokens e retornar null quando renovaÃ§Ã£o falhar (seguranÃ§a) (1 ms)
      âœ• deve registrar log de sucesso apÃ³s renovaÃ§Ã£o bem-sucedida
    Logout e RevogaÃ§Ã£o
      âœ• deve revogar token e limpar Keychain durante logout (1 ms)
      âœ“ deve limpar Keychain mesmo quando nÃ£o houver tokens (1 ms)
      âœ• deve continuar logout mesmo quando revogaÃ§Ã£o falhar
      âœ“ deve lanÃ§ar erro quando falhar ao limpar Keychain
      âœ“ deve usar configuraÃ§Ã£o correta ao revogar token (1 ms)
    Status de AutenticaÃ§Ã£o
      âœ“ deve retornar true quando usuÃ¡rio estiver autenticado com token vÃ¡lido
      âœ“ deve retornar false quando nÃ£o houver tokens salvos (1 ms)
      âœ“ deve retornar false quando token estiver expirado e renovaÃ§Ã£o falhar
    ExtraÃ§Ã£o de InformaÃ§Ãµes do UsuÃ¡rio
      âœ“ deve decodificar ID token e retornar informaÃ§Ãµes do usuÃ¡rio (1 ms)
      âœ“ deve extrair corretamente claims do usuÃ¡rio (sub, email, name) (1 ms)
      âœ“ deve retornar null quando nÃ£o houver ID token
      âœ• deve retornar null e registrar erro quando JWT estiver malformado (1 ms)
      âœ• deve tratar erro de decodificaÃ§Ã£o graciosamente (1 ms)
    IntegraÃ§Ã£o com Keychain
      âœ“ deve salvar tokens no Keychain com nome de serviÃ§o correto (1 ms)
      âœ“ deve recuperar tokens do Keychain com sucesso
      âœ“ deve retornar null quando nÃ£o houver credenciais no Keychain (1 ms)
      âœ• deve tratar erro do Keychain graciosamente

  â— KeycloakAuthService â€º Fluxo de AutorizaÃ§Ã£o OAuth2 â€º deve registrar log de sucesso apÃ³s login bem-sucedido

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ğŸ” Iniciando login Keycloak..."

    Number of calls: 0

      195 |
      196 |       // Assert
    > 197 |       expect(console.log).toHaveBeenCalledWith('ğŸ” Iniciando login Keycloak...');
          |                           ^
      198 |       expect(console.log).toHaveBeenCalledWith('âœ… Login Keycloak bem-sucedido');
      199 |     });
      200 |   });

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:197:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º ObtenÃ§Ã£o de Token de Acesso â€º deve renovar token quando estiver prestes a expirar (< 1 minuto)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ğŸ”„ Access token expirado, renovando..."

    Number of calls: 0

      258 |       expect(token).toBe(newTokens.accessToken);
      259 |       expect(mockedRefresh).toHaveBeenCalledTimes(1);
    > 260 |       expect(console.log).toHaveBeenCalledWith('ğŸ”„ Access token expirado, renovando...');
          |                           ^
      261 |     });
      262 |
      263 |     it('deve retornar null quando nÃ£o houver tokens salvos', async () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:260:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º ObtenÃ§Ã£o de Token de Acesso â€º deve retornar null e registrar erro quando Keychain falhar

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ Erro ao obter tokens:", Any<Error>

    Number of calls: 0

      302 |       // Assert
      303 |       expect(token).toBeNull();
    > 304 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      305 |         'âŒ Erro ao obter tokens:',
      306 |         expect.any(Error)
      307 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:304:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º RenovaÃ§Ã£o de Tokens â€º deve retornar null quando nÃ£o houver refresh token disponÃ­vel

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âš ï¸  Nenhum refresh token disponÃ­vel"

    Number of calls: 0

      462 |       expect(result).toBeNull();
      463 |       expect(mockedRefresh).not.toHaveBeenCalled();
    > 464 |       expect(console.warn).toHaveBeenCalledWith('âš ï¸  Nenhum refresh token disponÃ­vel');
          |                            ^
      465 |     });
      466 |
      467 |     it('deve limpar tokens e retornar null quando renovaÃ§Ã£o falhar (seguranÃ§a)', async () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:464:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º RenovaÃ§Ã£o de Tokens â€º deve limpar tokens e retornar null quando renovaÃ§Ã£o falhar (seguranÃ§a)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ Erro ao renovar tokens:", Any<Error>

    Number of calls: 0

      483 |         service: 'keycloak_tokens',
      484 |       });
    > 485 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      486 |         'âŒ Erro ao renovar tokens:',
      487 |         expect.any(Error)
      488 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:485:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º RenovaÃ§Ã£o de Tokens â€º deve registrar log de sucesso apÃ³s renovaÃ§Ã£o bem-sucedida

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âœ… Tokens renovados com sucesso"

    Number of calls: 0

      504 |
      505 |       // Assert
    > 506 |       expect(console.log).toHaveBeenCalledWith('âœ… Tokens renovados com sucesso');
          |                           ^
      507 |     });
      508 |   });
      509 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:506:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º Logout e RevogaÃ§Ã£o â€º deve revogar token e limpar Keychain durante logout

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âœ… Logout realizado"

    Number of calls: 0

      537 |         service: 'keycloak_tokens',
      538 |       });
    > 539 |       expect(console.log).toHaveBeenCalledWith('âœ… Logout realizado');
          |                           ^
      540 |     });
      541 |
      542 |     it('deve limpar Keychain mesmo quando nÃ£o houver tokens', async () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:539:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º Logout e RevogaÃ§Ã£o â€º deve continuar logout mesmo quando revogaÃ§Ã£o falhar

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âš ï¸  Erro ao revogar token:", Any<Error>

    Number of calls: 0

      569 |
      570 |       // Assert
    > 571 |       expect(console.warn).toHaveBeenCalledWith(
          |                            ^
      572 |         'âš ï¸  Erro ao revogar token:',
      573 |         expect.any(Error)
      574 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:571:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º ExtraÃ§Ã£o de InformaÃ§Ãµes do UsuÃ¡rio â€º deve retornar null e registrar erro quando JWT estiver malformado

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ Erro ao obter informaÃ§Ãµes do usuÃ¡rio:", Anything

    Number of calls: 0

      745 |       // Assert
      746 |       expect(result).toBeNull();
    > 747 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      748 |         'âŒ Erro ao obter informaÃ§Ãµes do usuÃ¡rio:',
      749 |         expect.anything()
      750 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:747:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º ExtraÃ§Ã£o de InformaÃ§Ãµes do UsuÃ¡rio â€º deve tratar erro de decodificaÃ§Ã£o graciosamente

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      765 |       // Assert
      766 |       expect(result).toBeNull();
    > 767 |       expect(console.error).toHaveBeenCalled();
          |                             ^
      768 |     });
      769 |   });
      770 |

      at Object.toHaveBeenCalled (src/services/__tests__/keycloakService.test.ts:767:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º IntegraÃ§Ã£o com Keychain â€º deve tratar erro do Keychain graciosamente

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ Erro ao obter tokens:", Any<Error>

    Number of calls: 0

      831 |       // Assert
      832 |       expect(token).toBeNull();
    > 833 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      834 |         'âŒ Erro ao obter tokens:',
      835 |         expect.any(Error)
      836 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:833:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/analyticsService.test.ts
  AnalyticsService
    initialize
      âœ“ deve inicializar o serviÃ§o com sucesso (3 ms)
      âœ“ deve criar novo session ID se nÃ£o existir (1 ms)
      âœ“ deve processar eventos pendentes na inicializaÃ§Ã£o (1 ms)
      âœ“ deve tratar erro na inicializaÃ§Ã£o (16 ms)
    logEvent
      âœ• deve registrar evento com sucesso (2 ms)
      âœ• deve sanitizar parÃ¢metros do evento (1 ms)
      âœ“ deve adicionar evento pendente se nÃ£o inicializado (1 ms)
      âœ• deve adicionar evento pendente em caso de erro (1 ms)
    setUserProperties
      âœ• deve definir propriedades do usuÃ¡rio (1 ms)
      âœ“ deve tratar erro ao definir propriedades (1 ms)
    setUserId
      âœ• deve definir ID do usuÃ¡rio
      âœ“ deve remover ID do usuÃ¡rio quando null
      âœ“ deve tratar erro ao definir ID (1 ms)
    logScreenView
      âœ• deve registrar visualizaÃ§Ã£o de tela
      âœ• deve usar screen_name como screen_class se nÃ£o fornecido (1 ms)
    trackPurchase
      âœ• deve rastrear compra com sucesso
    trackError
      âœ• deve rastrear erro corretamente (2 ms)
    trackApiCall
      âœ• deve rastrear chamada de API (2 ms)
      âœ• deve rastrear erro de API
    Performance tracking
      âœ• deve iniciar mediÃ§Ã£o de performance (1 ms)
      âœ• deve finalizar mediÃ§Ã£o de performance
      âœ• deve retornar -1 se mediÃ§Ã£o nÃ£o existir
    Campaign tracking
      âœ• deve rastrear origem de campanha (1 ms)
    Crowbar Custom Events
      E-commerce Events
        âœ• deve rastrear visualizaÃ§Ã£o de item (1 ms)
        âœ• deve rastrear adiÃ§Ã£o ao carrinho
        âœ• deve rastrear inÃ­cio do checkout
      Mystery Box Events
        âœ• deve rastrear visualizaÃ§Ã£o de caixa (1 ms)
        âœ• deve rastrear abertura de caixa
        âœ• deve rastrear compartilhamento de caixa
      Engagement Events
        âœ• deve rastrear submissÃ£o de review
        âœ• deve rastrear compartilhamento social (1 ms)
      Performance Events
        âœ• deve rastrear latÃªncia da API
        âœ• deve rastrear tempo de carregamento de tela
        âœ• deve marcar tela como lenta se > 3000ms
      Privacy and LGPD
        âœ• deve definir consentimento de analytics
        âœ• deve verificar consentimento de analytics
        âœ• deve deletar dados do usuÃ¡rio (LGPD)
      User Properties and Audiences
        âœ• deve definir segmento do usuÃ¡rio (1 ms)
        âœ• deve calcular nÃ­vel de engajamento - alto
        âœ• deve calcular nÃ­vel de engajamento - mÃ©dio
        âœ• deve calcular nÃ­vel de engajamento - baixo

  â— AnalyticsService â€º logEvent â€º deve registrar evento com sucesso

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Analytics Event:", "test_event", ObjectContaining {"param1": "value1"}

    Number of calls: 0

      108 |
      109 |       // Verificar que evento foi registrado
    > 110 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      111 |         'Analytics Event:',
      112 |         'test_event',
      113 |         expect.objectContaining({ param1: 'value1' })

      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:110:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º logEvent â€º deve sanitizar parÃ¢metros do evento

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Analytics Event:", "test_event", ObjectContaining {"invalid_param": "should be sanitized", "longString": StringMatching /^a{100}$/, "nested": "{\"object\":\"should be stringified\"}", "nullValue": "null", "valid_param": "value"}

    Number of calls: 0

      129 |
      130 |       // Verificar sanitizaÃ§Ã£o
    > 131 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      132 |         'Analytics Event:',
      133 |         'test_event',
      134 |         expect.objectContaining({

      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:131:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º logEvent â€º deve adicionar evento pendente em caso de erro

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Error logging event:", Any<Error>

    Number of calls: 0

      173 |         addPendingEvent({ name: 'test_event', parameters: { test: true } })
      174 |       );
    > 175 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      176 |         'Error logging event:',
      177 |         expect.any(Error)
      178 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:175:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º setUserProperties â€º deve definir propriedades do usuÃ¡rio

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Analytics User Properties:", {"plan": "premium", "registration_date": "2025-01-01"}

    Number of calls: 0

      194 |         JSON.stringify(properties)
      195 |       );
    > 196 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      197 |         'Analytics User Properties:',
      198 |         properties
      199 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:196:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º setUserId â€º deve definir ID do usuÃ¡rio

    Storage error

      201 |
      202 |     it('deve tratar erro ao definir propriedades', async () => {
    > 203 |       const mockError = new Error('Storage error');
          |                         ^
      204 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      205 |
      206 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:203:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º logScreenView â€º deve registrar visualizaÃ§Ã£o de tela

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º logScreenView â€º deve usar screen_name como screen_class se nÃ£o fornecido

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º trackPurchase â€º deve rastrear compra com sucesso

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º trackError â€º deve rastrear erro corretamente

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "app_error", ObjectContaining {"error_context": {"action": "button_click", "screen": "HomeScreen"}, "error_message": "Test error", "error_stack": Any<String>}
    Received: "error_occurred", {"context": {"action": "button_click", "screen": "HomeScreen"}, "error_message": "Test error", "error_type": "Error", "stack_trace": "Error: Test error

      340 |       jest.spyOn(analyticsService, 'logEvent');
      341 |
    > 342 |       const error = new Error('Test error');
          |                     ^
      343 |       const context = { screen: 'HomeScreen', action: 'button_click' };
      344 |
      345 |       await analyticsService.trackError(error, context);

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:342:21)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      Number of calls: 1
      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:348:41)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º trackApiCall â€º deve rastrear chamada de API

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"payload": {"duration": 250, "endpoint": "/api/users", "statusCode": 200}, "type": "analytics/recordApiResponseTime"}
    Received
           1
              Object {
                "payload": Object {
            -     "duration": 250,
                  "endpoint": "/api/users",
            -     "statusCode": 200,
            +     "responseTime": 1767027176451,
                },
                "type": "analytics/recordApiResponseTime",
              },
           2
              Object {
                "payload": Object {
            -     "duration": 250,
            +     "name": "api_call",
            +     "parameters": Object {
                    "endpoint": "/api/users",
            -     "statusCode": 200,
            +       "method": "GET",
            +       "response_time": 1767027176451,
                  },
            -   "type": "analytics/recordApiResponseTime",
            +   },
            +   "type": "analytics/addPendingEvent",
              },

    Number of calls: 2

      386 |
      387 |       // Verificar dispatch
    > 388 |       expect(mockDispatch).toHaveBeenCalledWith(
          |                            ^
      389 |         recordApiResponseTime({
      390 |           endpoint: apiData.endpoint,
      391 |           duration: apiData.responseTime,

      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:388:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º trackApiCall â€º deve rastrear erro de API

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "api_error", ObjectContaining {"endpoint": "/api/users", "method": "POST", "response_time": 500, "status_code": 500}
    Received: "api_call", {"endpoint": "/api/users", "method": "POST", "response_time": 1767027176204}

    Number of calls: 1

      406 |
      407 |       // Verificar log de erro
    > 408 |       expect(analyticsService.logEvent).toHaveBeenCalledWith(
          |                                         ^
      409 |         'api_error',
      410 |         expect.objectContaining({
      411 |           endpoint: '/api/users',

      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:408:41)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º Performance tracking â€º deve iniciar mediÃ§Ã£o de performance

    TypeError: _analyticsService.analyticsService.startPerformanceMeasure is not a function

      420 |   describe('Performance tracking', () => {
      421 |     it('deve iniciar mediÃ§Ã£o de performance', () => {
    > 422 |       const startTime = analyticsService.startPerformanceMeasure('test_operation');
          |                                          ^
      423 |       
      424 |       expect(startTime).toBeGreaterThan(0);
      425 |       expect((analyticsService as any).performanceMeasures.get('test_operation')).toBe(startTime);

      at Object.startPerformanceMeasure (src/services/__tests__/analyticsService.test.ts:422:42)

  â— AnalyticsService â€º Performance tracking â€º deve finalizar mediÃ§Ã£o de performance

    TypeError: _analyticsService.analyticsService.startPerformanceMeasure is not a function

      430 |       
      431 |       // Iniciar mediÃ§Ã£o
    > 432 |       analyticsService.startPerformanceMeasure('test_operation');
          |                        ^
      433 |       
      434 |       // Simular delay
      435 |       await new Promise(resolve => setTimeout(resolve, 100));

      at Object.startPerformanceMeasure (src/services/__tests__/analyticsService.test.ts:432:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Performance tracking â€º deve retornar -1 se mediÃ§Ã£o nÃ£o existir

    TypeError: _analyticsService.analyticsService.endPerformanceMeasure is not a function

      449 |
      450 |     it('deve retornar -1 se mediÃ§Ã£o nÃ£o existir', async () => {
    > 451 |       const duration = await analyticsService.endPerformanceMeasure('non_existent');
          |                                               ^
      452 |       expect(duration).toBe(-1);
      453 |     });
      454 |   });

      at Object.endPerformanceMeasure (src/services/__tests__/analyticsService.test.ts:451:47)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Campaign tracking â€º deve rastrear origem de campanha

    TypeError: _analyticsService.analyticsService.trackCampaign is not a function

      465 |       };
      466 |
    > 467 |       await analyticsService.trackCampaign(
          |                              ^
      468 |         campaignData.source,
      469 |         campaignData.medium,
      470 |         campaignData.campaign

      at Object.trackCampaign (src/services/__tests__/analyticsService.test.ts:467:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º E-commerce Events â€º deve rastrear visualizaÃ§Ã£o de item

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º E-commerce Events â€º deve rastrear adiÃ§Ã£o ao carrinho

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º E-commerce Events â€º deve rastrear inÃ­cio do checkout

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Mystery Box Events â€º deve rastrear visualizaÃ§Ã£o de caixa

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Mystery Box Events â€º deve rastrear abertura de caixa

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Mystery Box Events â€º deve rastrear compartilhamento de caixa

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Engagement Events â€º deve rastrear submissÃ£o de review

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Engagement Events â€º deve rastrear compartilhamento social

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Performance Events â€º deve rastrear latÃªncia da API

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Performance Events â€º deve rastrear tempo de carregamento de tela

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Performance Events â€º deve marcar tela como lenta se > 3000ms

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Privacy and LGPD â€º deve definir consentimento de analytics

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Privacy and LGPD â€º deve verificar consentimento de analytics

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Privacy and LGPD â€º deve deletar dados do usuÃ¡rio (LGPD)

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º User Properties and Audiences â€º deve definir segmento do usuÃ¡rio

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º User Properties and Audiences â€º deve calcular nÃ­vel de engajamento - alto

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º User Properties and Audiences â€º deve calcular nÃ­vel de engajamento - mÃ©dio

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º User Properties and Audiences â€º deve calcular nÃ­vel de engajamento - baixo

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

PASS src/components/__tests__/OrderCard.test.tsx
  OrderCard
    RenderizaÃ§Ã£o
      âœ“ deve renderizar com props obrigatÃ³rias (36 ms)
      âœ“ deve renderizar nÃºmero do pedido (3 ms)
      âœ“ deve renderizar data de criaÃ§Ã£o formatada (2 ms)
      âœ“ deve renderizar total formatado em BRL (2 ms)
      âœ“ deve renderizar informaÃ§Ãµes do endereÃ§o de entrega (2 ms)
      âœ“ deve renderizar botÃ£o "Ver detalhes" (2 ms)
    ExibiÃ§Ã£o de Status
      âœ“ deve exibir status "Pendente" corretamente (2 ms)
      âœ“ deve exibir status "Confirmado" corretamente (1 ms)
      âœ“ deve exibir status "Processando" corretamente (3 ms)
      âœ“ deve exibir status "Enviado" corretamente (2 ms)
      âœ“ deve exibir status "Entregue" corretamente (1 ms)
      âœ“ deve exibir status "Cancelado" corretamente (2 ms)
      âœ“ deve lidar com status desconhecido (2 ms)
    ExibiÃ§Ã£o de Itens
      âœ“ deve exibir resumo de 1 item corretamente (2 ms)
      âœ“ deve exibir resumo de mÃºltiplos itens da mesma caixa (1 ms)
      âœ“ deve exibir resumo de mÃºltiplos tipos de caixas (1 ms)
      âœ“ deve exibir nome do primeiro item (2 ms)
      âœ“ deve exibir "+N mais" quando hÃ¡ mÃºltiplos tipos (7 ms)
      âœ“ deve lidar com array de itens vazio (2 ms)
      âœ“ deve lidar com items undefined (1 ms)
      âœ“ deve exibir imagem do primeiro item quando disponÃ­vel (2 ms)
      âœ“ deve exibir placeholder quando item nÃ£o tem imagem (2 ms)
      âœ“ deve lidar com item.box undefined (2 ms)
    BotÃµes de AÃ§Ã£o
      âœ“ deve exibir botÃ£o "Comprar novamente" quando pedido estÃ¡ entregue (2 ms)
      âœ“ deve exibir botÃ£o "Comprar novamente" quando pedido estÃ¡ cancelado (1 ms)
      âœ“ deve exibir botÃ£o "Comprar novamente" quando status Ã© "cancelled" (sem underscore) (1 ms)
      âœ“ nÃ£o deve exibir botÃ£o "Comprar novamente" quando pedido estÃ¡ pendente (2 ms)
      âœ“ nÃ£o deve exibir botÃ£o "Comprar novamente" quando pedido estÃ¡ processando (2 ms)
      âœ“ nÃ£o deve exibir botÃ£o "Comprar novamente" quando pedido estÃ¡ enviado (1 ms)
      âœ“ deve sempre exibir botÃ£o "Ver detalhes" (9 ms)
    InteraÃ§Ãµes do UsuÃ¡rio
      âœ“ deve chamar onPress quando card Ã© pressionado (2 ms)
      âœ“ deve chamar onPress quando botÃ£o "Ver detalhes" Ã© pressionado (2 ms)
      âœ“ nÃ£o deve chamar onPress mÃºltiplas vezes em pressÃ£o Ãºnica (2 ms)
    FormataÃ§Ã£o de Data
      âœ“ deve formatar data no padrÃ£o brasileiro DD/MM/YYYY (1 ms)
      âœ“ deve formatar data com zeros Ã  esquerda (2 ms)
      âœ“ deve formatar data de fim de ano (1 ms)
      âœ“ deve formatar data de inÃ­cio de ano (2 ms)
    FormataÃ§Ã£o de PreÃ§o
      âœ“ deve formatar preÃ§o com centavos (2 ms)
      âœ“ deve formatar preÃ§o inteiro com ,00 (1 ms)
      âœ“ deve formatar preÃ§o com milhares (1 ms)
      âœ“ deve formatar preÃ§o com mÃºltiplos milhares (2 ms)
      âœ“ deve formatar preÃ§o zero (2 ms)
    Casos Extremos
      âœ“ deve lidar com order_number muito longo (1 ms)
      âœ“ deve lidar com ausÃªncia de delivery_address (2 ms)
      âœ“ deve aplicar style customizado passado via props (1 ms)
      âœ“ deve lidar com total muito alto (2 ms)
      âœ“ deve lidar com data invÃ¡lida gracefully (1 ms)
      âœ“ deve lidar com mÃºltiplos itens sem box (1 ms)
      âœ“ deve lidar com nome de cidade muito longo (2 ms)
      âœ“ deve lidar com tracking_code presente (nÃ£o usado visualmente) (2 ms)
      âœ“ deve lidar com notes presente (nÃ£o usado visualmente) (5 ms)
    Testes de IntegraÃ§Ã£o
      âœ“ deve atualizar quando order Ã© modificado (4 ms)
      âœ“ deve atualizar botÃµes quando status muda para delivered (3 ms)
      âœ“ deve atualizar total quando valor muda (3 ms)
      âœ“ deve manter onPress funcional apÃ³s re-render (2 ms)
    Acessibilidade
      âœ“ deve ser acessÃ­vel para leitores de tela (2 ms)
      âœ“ deve ter hierarquia de informaÃ§Ãµes clara (2 ms)
      âœ“ deve ter labels descritivos para aÃ§Ãµes (2 ms)

PASS src/components/__tests__/CartItemCard.test.tsx
  CartItemCard
    RenderizaÃ§Ã£o
      âœ“ deve renderizar com props obrigatÃ³rias (39 ms)
      âœ“ deve renderizar o nome da caixa (3 ms)
      âœ“ deve renderizar a categoria (2 ms)
      âœ“ deve renderizar a imagem da caixa (3 ms)
      âœ“ deve renderizar chip de raridade (2 ms)
      âœ“ deve renderizar badge de raridade com primeira letra (2 ms)
    ExibiÃ§Ã£o de PreÃ§os
      âœ“ deve exibir preÃ§o unitÃ¡rio formatado (3 ms)
      âœ“ deve exibir preÃ§o total formatado (2 ms)
      âœ“ deve exibir preÃ§o original quando presente e maior que unit_price (2 ms)
      âœ“ nÃ£o deve exibir preÃ§o original quando igual ao unit_price (2 ms)
      âœ“ nÃ£o deve exibir preÃ§o original quando ausente (5 ms)
      âœ“ deve calcular total corretamente (quantidade * preÃ§o) (2 ms)
    Controles de Quantidade
      âœ“ deve exibir quantidade atual (2 ms)
      âœ“ deve chamar onUpdateQuantity com quantidade incrementada ao pressionar + (3 ms)
      âœ“ deve chamar onUpdateQuantity com quantidade decrementada ao pressionar - (2 ms)
      âœ“ deve desabilitar botÃ£o - quando quantidade Ã© 1 (2 ms)
      âœ“ deve desabilitar botÃ£o + quando quantidade atinge o estoque (2 ms)
      âœ“ deve permitir quantidade atÃ© o limite de estoque (2 ms)
      âœ“ nÃ£o deve permitir quantidade menor que 1 (2 ms)
    BotÃ£o de Remover
      âœ“ deve chamar onRemove ao pressionar botÃ£o de deletar (2 ms)
      âœ“ deve renderizar Ã­cone de delete (2 ms)
      âœ“ nÃ£o deve chamar onRemove quando disabled Ã© true (2 ms)
    Estado Desabilitado
      âœ“ deve desabilitar todos os botÃµes quando disabled Ã© true (3 ms)
      âœ“ deve permitir interaÃ§Ã£o quando disabled Ã© false (1 ms)
      âœ“ deve usar disabled como false por padrÃ£o (2 ms)
    ExibiÃ§Ã£o de Raridade
      âœ“ deve exibir raridade common corretamente (2 ms)
      âœ“ deve exibir raridade rare corretamente (2 ms)
      âœ“ deve exibir raridade epic corretamente (2 ms)
      âœ“ deve exibir raridade legendary corretamente (2 ms)
    Casos Extremos
      âœ“ deve lidar com nome muito longo (truncate) (2 ms)
      âœ“ deve lidar com preÃ§o zero (1 ms)
      âœ“ deve lidar com quantidade muito alta (2 ms)
      âœ“ deve lidar com estoque zero (botÃ£o + desabilitado) (2 ms)
      âœ“ deve lidar com array de imagens vazio gracefully (1 ms)
      âœ“ deve lidar com imagem sem URL (2 ms)
      âœ“ deve lidar com categoria sem nome (1 ms)
    Testes de IntegraÃ§Ã£o
      âœ“ deve incrementar quantidade mÃºltiplas vezes (4 ms)
      âœ“ deve decrementar quantidade mÃºltiplas vezes (3 ms)
      âœ“ deve atualizar total price quando quantidade muda (3 ms)

PASS src/services/__tests__/monitoringService.test.ts
  MonitoringService
    InicializaÃ§Ã£o
      âœ“ deve criar instÃ¢ncia do MonitoringService (1 ms)
      âœ“ deve inicializar todos os serviÃ§os quando features estÃ£o habilitadas (1 ms)
      âœ“ nÃ£o deve inicializar novamente se jÃ¡ inicializado (1 ms)
      âœ“ deve registrar erro se inicializaÃ§Ã£o falhar
      âœ“ deve inicializar crashlytics com informaÃ§Ãµes do ambiente (1 ms)
      âœ“ deve inicializar performance monitoring (3 ms)
      âœ“ deve inicializar analytics com informaÃ§Ãµes do ambiente (1 ms)
    Logging de Erros
      âœ“ deve registrar erro com contexto completo (14 ms)
      âœ“ deve registrar erro sem contexto (1 ms)
      âœ“ deve incluir stack trace no log de erro (1 ms)
      âœ“ deve incluir timestamp no log de erro (1 ms)
      âœ“ deve registrar non-fatal error com nome correto (5 ms)
      âœ“ deve registrar non-fatal error sem contexto (1 ms)
      âœ“ deve lidar com erro ao tentar registrar erro
    Gerenciamento de UsuÃ¡rio
      âœ“ deve definir user ID e registrar no log
      âœ“ deve definir propriedades do usuÃ¡rio e registrar no log (1 ms)
      âœ“ deve lidar com erro ao definir user ID
      âœ“ deve lidar com erro ao definir propriedades do usuÃ¡rio (1 ms)
    Performance Tracing
      âœ“ deve iniciar trace com nome e atributos (1 ms)
      âœ“ deve iniciar trace sem atributos
      âœ“ deve parar trace e registrar duraÃ§Ã£o (12 ms)
      âœ“ deve registrar mÃ©trica ao parar trace (6 ms)
      âœ“ nÃ£o deve fazer nada ao parar trace inexistente
      âœ“ deve lidar com erro ao iniciar trace (1 ms)
      âœ“ deve lidar com erro ao parar trace
    MÃ©tricas de Performance
      âœ“ deve registrar mÃ©trica customizada
      âœ“ deve registrar mÃ©trica sem unidade
      âœ“ deve armazenar mÃºltiplos valores para mesma mÃ©trica (1 ms)
      âœ“ deve retornar resumo de mÃ©tricas vazio quando nÃ£o hÃ¡ mÃ©tricas
      âœ“ deve calcular estatÃ­sticas corretas das mÃ©tricas (1 ms)
      âœ“ deve limpar mÃ©tricas de performance (1 ms)
      âœ“ deve lidar com erro ao registrar mÃ©trica
    Event Tracking
      âœ“ deve rastrear visualizaÃ§Ã£o de tela (1 ms)
      âœ“ deve rastrear evento customizado com parÃ¢metros
      âœ“ deve rastrear evento sem parÃ¢metros (1 ms)
      âœ“ deve lidar com erro ao rastrear tela
      âœ“ deve lidar com erro ao rastrear evento (1 ms)
    Crash Tracking
      âœ“ deve rastrear crash fatal (6 ms)
      âœ“ deve rastrear crash nÃ£o-fatal
      âœ“ deve rastrear crash como fatal por padrÃ£o
      âœ“ deve incluir stack trace no crash (1 ms)
      âœ“ deve lidar com erro ao rastrear crash (1 ms)
    Testing Functions
      âœ“ deve executar teste de crash em desenvolvimento (1 ms)
      âœ“ nÃ£o deve executar teste de crash em produÃ§Ã£o
      âœ“ deve executar teste de non-fatal error em desenvolvimento (1 ms)
      âœ“ nÃ£o deve executar teste de non-fatal error em produÃ§Ã£o
    Status
      âœ“ deve retornar status completo do serviÃ§o
      âœ“ deve retornar status apÃ³s inicializaÃ§Ã£o
      âœ“ deve retornar traces ativos no status (1 ms)
      âœ“ deve retornar contagem de mÃ©tricas no status

FAIL src/services/__tests__/integration/orders.integration.test.ts
  Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos
    Listagem e busca de pedidos
      âœ• deve obter lista de pedidos do usuÃ¡rio (2 ms)
      âœ• deve obter pedidos com filtros aplicados
      âœ• deve obter pedidos com paginaÃ§Ã£o
      âœ• deve obter detalhes de um pedido especÃ­fico (1 ms)
      âœ• deve falhar ao buscar pedido inexistente (1 ms)
      âœ• deve obter estatÃ­sticas de pedidos (1 ms)
    Cancelamento de pedidos
      âœ• deve cancelar pedido com sucesso (1 ms)
      âœ• deve falhar ao cancelar pedido jÃ¡ enviado
      âœ• deve falhar ao cancelar pedido sem permissÃ£o
    Rastreamento e _status
      âœ• deve obter informaÃ§Ãµes de rastreamento
      âœ• deve obter histÃ³rico de _status
      âœ• deve obter _status de entrega (1 ms)
      âœ• deve confirmar recebimento da entrega
      âœ• deve falhar ao confirmar entrega de pedido nÃ£o enviado
    AvaliaÃ§Ã£o e feedback
      âœ• deve avaliar pedido com sucesso
      âœ• deve falhar ao avaliar pedido nÃ£o entregue (1 ms)
      âœ• deve falhar ao avaliar com rating invÃ¡lido (1 ms)
    Funcionalidades auxiliares
      âœ• deve recomprar pedido anterior (1 ms)
      âœ• deve gerar nota fiscal do pedido (1 ms)
      âœ• deve baixar comprovante do pedido (1 ms)
      âœ• deve reportar problema com pedido (1 ms)
      âœ• deve atualizar endereÃ§o de entrega (1 ms)
      âœ• deve reagendar entrega
    SolicitaÃ§Ã£o de devoluÃ§Ã£o
      âœ• deve solicitar devoluÃ§Ã£o com sucesso
      âœ• deve falhar ao solicitar devoluÃ§Ã£o apÃ³s prazo (1 ms)
    CenÃ¡rios de erro
      âœ• deve tratar erro de rede durante busca de pedidos (1 ms)
      âœ• deve tratar timeout durante cancelamento
      âœ• deve tratar erro 500 durante rastreamento
      âœ• deve tratar erro 403 ao tentar acessar pedido de outro usuÃ¡rio

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Listagem e busca de pedidos â€º deve obter lista de pedidos do usuÃ¡rio

    ReferenceError: response is not defined

      147 |
      148 |       // Assert
    > 149 |       expect(response.data).toHaveLength(2);
          |              ^
      150 |       expect(response.data[0]).toMatchObject({
      151 |         id: 'order-123',
      152 |         order_number: 'ORD-2025-001',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:149:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Listagem e busca de pedidos â€º deve obter pedidos com filtros aplicados

    ReferenceError: response is not defined

      173 |
      174 |       // Assert
    > 175 |       expect(response.data).toHaveLength(1);
          |              ^
      176 |       expect(response.data[0]._status).toBe('shipped');
      177 |       expect(response.data[0].payment_status).toBe('paid');
      178 |     });

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:175:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Listagem e busca de pedidos â€º deve obter pedidos com paginaÃ§Ã£o

    ReferenceError: response is not defined

      190 |
      191 |       // Assert
    > 192 |       expect(response.data).toHaveLength(1);
          |              ^
      193 |       expect(response.meta.current_page).toBe(page);
      194 |       expect(response.meta.per_page).toBe(perPage);
      195 |     });

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:192:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Listagem e busca de pedidos â€º deve obter detalhes de um pedido especÃ­fico

    ReferenceError: response is not defined

      205 |
      206 |       // Assert
    > 207 |       expect(response).toMatchObject({
          |              ^
      208 |         id: orderId,
      209 |         order_number: 'ORD-2025-001',
      210 |         status: 'pending',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:207:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Listagem e busca de pedidos â€º deve falhar ao buscar pedido inexistente

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      228 |
      229 |       // Act & Assert
    > 230 |       await expect(orderService.getOrderById(orderId)).rejects.toMatchObject({
          |             ^
      231 |         status: 404,
      232 |         message: 'Pedido nÃ£o encontrado',
      233 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:230:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Listagem e busca de pedidos â€º deve obter estatÃ­sticas de pedidos

    ReferenceError: response is not defined

      260 |
      261 |       // Assert
    > 262 |       expect(response).toMatchObject({
          |              ^
      263 |         total_orders: 15,
      264 |         total_spent: 2499.85,
      265 |         orders_by_status: expect.objectContaining({

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:262:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Cancelamento de pedidos â€º deve cancelar pedido com sucesso

    ReferenceError: response is not defined

      290 |
      291 |       // Assert
    > 292 |       expect(response).toMatchObject({
          |              ^
      293 |         id: orderId,
      294 |         status: 'cancelled',
      295 |         cancellation_reason: reason,

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:292:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Cancelamento de pedidos â€º deve falhar ao cancelar pedido jÃ¡ enviado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      310 |
      311 |       // Act & Assert
    > 312 |       await expect(orderService.cancelOrder(orderId, reason)).rejects.toMatchObject({
          |             ^
      313 |         status: 400,
      314 |         message: 'Pedido jÃ¡ foi enviado e nÃ£o pode ser cancelado',
      315 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:312:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Cancelamento de pedidos â€º deve falhar ao cancelar pedido sem permissÃ£o

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      328 |
      329 |       // Act & Assert
    > 330 |       await expect(orderService.cancelOrder(orderId, reason)).rejects.toMatchObject({
          |             ^
      331 |         status: 403,
      332 |         message: 'VocÃª nÃ£o tem permissÃ£o para cancelar este pedido',
      333 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:330:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Rastreamento e _status â€º deve obter informaÃ§Ãµes de rastreamento

    ReferenceError: response is not defined

      346 |
      347 |       // Assert
    > 348 |       expect(response).toMatchObject({
          |              ^
      349 |         tracking_code: 'BR123456789',
      350 |         carrier: 'Correios',
      351 |         status: 'in_transit',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:348:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Rastreamento e _status â€º deve obter histÃ³rico de _status

    ReferenceError: response is not defined

      369 |
      370 |       // Assert
    > 371 |       expect(response).toHaveLength(3);
          |              ^
      372 |       expect(response[0]).toMatchObject({
      373 |         status: 'pending',
      374 |         description: 'Pedido aguardando pagamento',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:371:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Rastreamento e _status â€º deve obter _status de entrega

    ReferenceError: response is not defined

      398 |
      399 |       // Assert
    > 400 |       expect(response).toMatchObject({
          |              ^
      401 |         status: 'out_for_delivery',
      402 |         estimated_delivery: '2025-01-10T16:00:00Z',
      403 |         delivery_attempts: 0,

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:400:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Rastreamento e _status â€º deve confirmar recebimento da entrega

    ReferenceError: response is not defined

      421 |
      422 |       // Assert
    > 423 |       expect(response).toMatchObject({
          |              ^
      424 |         id: orderId,
      425 |         status: 'delivered',
      426 |         delivered_at: '2025-01-10T16:30:00Z',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:423:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Rastreamento e _status â€º deve falhar ao confirmar entrega de pedido nÃ£o enviado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      439 |
      440 |       // Act & Assert
    > 441 |       await expect(orderService.confirmDelivery(orderId)).rejects.toMatchObject({
          |             ^
      442 |         status: 400,
      443 |         message: 'Pedido ainda nÃ£o foi enviado',
      444 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:441:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º AvaliaÃ§Ã£o e feedback â€º deve avaliar pedido com sucesso

    ReferenceError: response is not defined

      467 |
      468 |       // Assert
    > 469 |       expect(response).toMatchObject({
          |              ^
      470 |         id: orderId,
      471 |         rating,
      472 |         review,

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:469:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º AvaliaÃ§Ã£o e feedback â€º deve falhar ao avaliar pedido nÃ£o entregue

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      487 |
      488 |       // Act & Assert
    > 489 |       await expect(orderService.rateOrder(orderId, rating)).rejects.toMatchObject({
          |             ^
      490 |         status: 400,
      491 |         message: 'Pedido deve estar entregue para ser avaliado',
      492 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:489:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º AvaliaÃ§Ã£o e feedback â€º deve falhar ao avaliar com rating invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      505 |
      506 |       // Act & Assert
    > 507 |       await expect(orderService.rateOrder(orderId, rating)).rejects.toMatchObject({
          |             ^
      508 |         status: 422,
      509 |         message: 'Dados invÃ¡lidos',
      510 |         errors: { rating: ['Rating deve ser entre 1 e 5'] },

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:507:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Funcionalidades auxiliares â€º deve recomprar pedido anterior

    ReferenceError: response is not defined

      531 |
      532 |       // Assert
    > 533 |       expect(response).toMatchObject({
          |              ^
      534 |         cart_id: 'cart-456',
      535 |         items_added: 1,
      536 |         items_unavailable: 0,

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:533:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Funcionalidades auxiliares â€º deve gerar nota fiscal do pedido

    ReferenceError: response is not defined

      554 |
      555 |       // Assert
    > 556 |       expect(response).toMatchObject({
          |              ^
      557 |         invoice_url: 'https://storage.com/invoices/invoice-124.pdf',
      558 |         invoice_number: 'NF-2025-001',
      559 |         generated_at: '2025-01-10T20:00:00Z',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:556:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Funcionalidades auxiliares â€º deve baixar comprovante do pedido

    ReferenceError: response is not defined

      579 |
      580 |       // Assert
    > 581 |       expect(response).toBe('blob:http://localhost/receipt.pdf');
          |              ^
      582 |       expect(URL.createObjectURL).toHaveBeenCalledWith(expect.any(Blob));
      583 |     });
      584 |

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:581:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Funcionalidades auxiliares â€º deve reportar problema com pedido

    ReferenceError: response is not defined

      606 |
      607 |       // Assert
    > 608 |       expect(response).toMatchObject({
          |              ^
      609 |         issue_id: 'issue-001',
      610 |         status: 'open',
      611 |         message: 'Problema reportado com sucesso',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:608:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Funcionalidades auxiliares â€º deve atualizar endereÃ§o de entrega

    ReferenceError: response is not defined

      632 |
      633 |       // Assert
    > 634 |       expect(response).toMatchObject({
          |              ^
      635 |         id: orderId,
      636 |         shipping_address: expect.objectContaining({
      637 |           id: addressId,

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:634:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Funcionalidades auxiliares â€º deve reagendar entrega

    ReferenceError: response is not defined

      656 |
      657 |       // Assert
    > 658 |       expect(response).toMatchObject({
          |              ^
      659 |         id: orderId,
      660 |         delivery_date: newDate,
      661 |       });

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:658:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º SolicitaÃ§Ã£o de devoluÃ§Ã£o â€º deve solicitar devoluÃ§Ã£o com sucesso

    ReferenceError: response is not defined

      694 |
      695 |       // Assert
    > 696 |       expect(response).toMatchObject({
          |              ^
      697 |         return_id: 'return-001',
      698 |         status: 'pending',
      699 |         return_code: 'RET-2025-001',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:696:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º SolicitaÃ§Ã£o de devoluÃ§Ã£o â€º deve falhar ao solicitar devoluÃ§Ã£o apÃ³s prazo

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      724 |
      725 |       // Act & Assert
    > 726 |       await expect(orderService.requestReturn(orderId, returnData)).rejects.toMatchObject({
          |             ^
      727 |         status: 400,
      728 |         message: 'Prazo para devoluÃ§Ã£o expirado',
      729 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:726:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º CenÃ¡rios de erro â€º deve tratar erro de rede durante busca de pedidos

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      737 |
      738 |       // Act & Assert
    > 739 |       await expect(orderService.getOrders()).rejects.toMatchObject({
          |             ^
      740 |         status: 0,
      741 |         message: expect.stringContaining('Erro de conexÃ£o'),
      742 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:739:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º CenÃ¡rios de erro â€º deve tratar timeout durante cancelamento

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      749 |
      750 |       // Act & Assert
    > 751 |       await expect(orderService.cancelOrder(orderId)).rejects.toMatchObject({
          |             ^
      752 |         status: 0,
      753 |         message: expect.stringContaining('timeout'),
      754 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:751:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º CenÃ¡rios de erro â€º deve tratar erro 500 durante rastreamento

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      765 |
      766 |       // Act & Assert
    > 767 |       await expect(orderService.trackOrder(orderId)).rejects.toMatchObject({
          |             ^
      768 |         status: 500,
      769 |         message: 'Erro interno do servidor',
      770 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:767:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º CenÃ¡rios de erro â€º deve tratar erro 403 ao tentar acessar pedido de outro usuÃ¡rio

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      781 |
      782 |       // Act & Assert
    > 783 |       await expect(orderService.getOrderById(orderId)).rejects.toMatchObject({
          |             ^
      784 |         status: 403,
      785 |         message: 'Acesso negado',
      786 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:783:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/test/performance/animationPerformance.test.tsx
  â— Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     â€¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     â€¢ If you need a custom transformation specify a "transform" option in your config.
     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/react-native@0.80.1_@babel+core@7.28.5_@react-native-community+cli@20.0.2_typescript@5._f6e2dde6378c211fab3d29d577bf68a4/node_modules/react-native/index.js:28
    import typeof * as ReactNativePublicAPI from './index.js.flow';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

       8 | // Mock React Native modules
       9 | jest.mock('react-native', () => ({
    > 10 |   ...jest.requireActual('react-native'),
         |           ^
      11 |   InteractionManager: {
      12 |     runAfterInteractions: (callback: () => void) => {
      13 |       setTimeout(callback, 0);

      at Runtime.createScriptFromCode (node_modules/.pnpm/node_modules/jest-runtime/build/index.js:1505:14)
      at requireActual (src/test/performance/animationPerformance.test.tsx:10:11)
      at Object.require (src/test/performance/animationPerformance.test.tsx:2:1)

FAIL src/screens/Checkout/__tests__/CheckoutScreen.test.tsx
  CheckoutScreen
    RenderizaÃ§Ã£o Inicial
      âœ• deve renderizar o componente corretamente
      âœ• deve mostrar loading ao carregar dados (4 ms)
      âœ• deve carregar endereÃ§os e mÃ©todos de pagamento
      âœ• deve auto-selecionar endereÃ§o padrÃ£o
      âœ• deve auto-selecionar mÃ©todo de pagamento padrÃ£o
    Estado de Erro
      âœ• deve mostrar erro ao falhar carregamento de dados (1 ms)
      âœ• deve permitir retry apÃ³s erro
    Carrinho Vazio
      âœ• deve mostrar mensagem de carrinho vazio
      âœ• deve navegar para loja ao clicar em "Ir Ã s compras"
    Indicador de Etapas
      âœ• deve renderizar indicador com 3 etapas
      âœ• deve iniciar na etapa 1 (EndereÃ§o)
    NavegaÃ§Ã£o entre Etapas
      âœ• deve permitir avanÃ§ar para etapa 2 apÃ³s selecionar endereÃ§o
      âœ• deve bloquear avanÃ§o se etapa nÃ£o for vÃ¡lida
      âœ• deve permitir voltar para etapa anterior
      âœ• nÃ£o deve mostrar botÃ£o voltar na etapa 1
    Etapa 1 - EndereÃ§o
      âœ• deve renderizar lista de endereÃ§os (1 ms)
      âœ• deve validar se endereÃ§o estÃ¡ selecionado antes de avanÃ§ar
    Etapa 2 - Frete
      âœ• deve renderizar opÃ§Ãµes de frete (1 ms)
      âœ• deve mostrar preÃ§o das opÃ§Ãµes de frete
      âœ• deve mostrar dias de entrega estimados (1 ms)
      âœ• deve mostrar mensagem quando nÃ£o hÃ¡ opÃ§Ãµes de frete
    Etapa 3 - Pagamento
      âœ• deve renderizar mÃ©todos de pagamento (1 ms)
      âœ• deve mostrar botÃ£o Finalizar Pedido na etapa 3
    Processamento de Pedido
      âœ• deve processar pedido com sucesso (1 ms)
      âœ• deve mostrar loading durante processamento
      âœ• deve tratar erro no processamento do pedido (1 ms)
      âœ• deve enviar dados corretos ao criar pedido
    FormataÃ§Ã£o e CÃ¡lculos
      âœ• deve formatar preÃ§os em reais corretamente (1 ms)
      âœ• deve calcular total com frete incluÃ­do
      âœ• deve mostrar frete grÃ¡tis quando preÃ§o Ã© zero
    NavegaÃ§Ã£o
      âœ• deve navegar de volta ao clicar no botÃ£o voltar do header

  â— CheckoutScreen â€º RenderizaÃ§Ã£o Inicial â€º deve renderizar o componente corretamente

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º RenderizaÃ§Ã£o Inicial â€º deve mostrar loading ao carregar dados

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º RenderizaÃ§Ã£o Inicial â€º deve carregar endereÃ§os e mÃ©todos de pagamento

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º RenderizaÃ§Ã£o Inicial â€º deve auto-selecionar endereÃ§o padrÃ£o

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º RenderizaÃ§Ã£o Inicial â€º deve auto-selecionar mÃ©todo de pagamento padrÃ£o

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Estado de Erro â€º deve mostrar erro ao falhar carregamento de dados

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Estado de Erro â€º deve permitir retry apÃ³s erro

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Carrinho Vazio â€º deve mostrar mensagem de carrinho vazio

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Carrinho Vazio â€º deve navegar para loja ao clicar em "Ir Ã s compras"

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Indicador de Etapas â€º deve renderizar indicador com 3 etapas

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Indicador de Etapas â€º deve iniciar na etapa 1 (EndereÃ§o)

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º NavegaÃ§Ã£o entre Etapas â€º deve permitir avanÃ§ar para etapa 2 apÃ³s selecionar endereÃ§o

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º NavegaÃ§Ã£o entre Etapas â€º deve bloquear avanÃ§o se etapa nÃ£o for vÃ¡lida

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º NavegaÃ§Ã£o entre Etapas â€º deve permitir voltar para etapa anterior

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º NavegaÃ§Ã£o entre Etapas â€º nÃ£o deve mostrar botÃ£o voltar na etapa 1

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 1 - EndereÃ§o â€º deve renderizar lista de endereÃ§os

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 1 - EndereÃ§o â€º deve validar se endereÃ§o estÃ¡ selecionado antes de avanÃ§ar

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 2 - Frete â€º deve renderizar opÃ§Ãµes de frete

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 2 - Frete â€º deve mostrar preÃ§o das opÃ§Ãµes de frete

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 2 - Frete â€º deve mostrar dias de entrega estimados

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 2 - Frete â€º deve mostrar mensagem quando nÃ£o hÃ¡ opÃ§Ãµes de frete

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 3 - Pagamento â€º deve renderizar mÃ©todos de pagamento

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 3 - Pagamento â€º deve mostrar botÃ£o Finalizar Pedido na etapa 3

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Processamento de Pedido â€º deve processar pedido com sucesso

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Processamento de Pedido â€º deve mostrar loading durante processamento

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Processamento de Pedido â€º deve tratar erro no processamento do pedido

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Processamento de Pedido â€º deve enviar dados corretos ao criar pedido

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º FormataÃ§Ã£o e CÃ¡lculos â€º deve formatar preÃ§os em reais corretamente

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º FormataÃ§Ã£o e CÃ¡lculos â€º deve calcular total com frete incluÃ­do

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º FormataÃ§Ã£o e CÃ¡lculos â€º deve mostrar frete grÃ¡tis quando preÃ§o Ã© zero

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º NavegaÃ§Ã£o â€º deve navegar de volta ao clicar no botÃ£o voltar do header

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

FAIL src/test/accessibility/animationAccessibility.test.tsx
  â— Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     â€¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     â€¢ If you need a custom transformation specify a "transform" option in your config.
     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/react-native@0.80.1_@babel+core@7.28.5_@react-native-community+cli@20.0.2_typescript@5._f6e2dde6378c211fab3d29d577bf68a4/node_modules/react-native/index.js:28
    import typeof * as ReactNativePublicAPI from './index.js.flow';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

       7 | // Mock React Native modules
       8 | jest.mock('react-native', () => ({
    >  9 |   ...jest.requireActual('react-native'),
         |           ^
      10 |   AccessibilityInfo: {
      11 |     isScreenReaderEnabled: jest.fn(() => Promise.resolve(true)),
      12 |     announceForAccessibility: jest.fn(),

      at Runtime.createScriptFromCode (node_modules/.pnpm/node_modules/jest-runtime/build/index.js:1505:14)
      at requireActual (src/test/accessibility/animationAccessibility.test.tsx:9:11)
      at Object.require (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/helpers/accessibility.ts:2:1)
      at Object.require (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/matchers/to-be-busy.ts:5:1)
      at Object.require (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/matchers/extend-expect.ts:1:1)
      at Object.require (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/index.ts:2:1)
      at Object.require (src/test/accessibility/animationAccessibility.test.tsx:2:1)

FAIL src/services/__tests__/integration/boxes.integration.test.ts
  Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes
    Listagem de caixas
      âœ• deve obter lista de caixas com sucesso (2 ms)
      âœ• deve obter caixas com filtros aplicados (2 ms)
      âœ• deve obter caixas em destaque (1 ms)
      âœ• deve obter caixas populares (1 ms)
      âœ• deve obter caixas _recÃ©m-lanÃ§adas (1 ms)
      âœ• deve tratar erro ao obter lista de caixas (1 ms)
    Detalhes da caixa
      âœ• deve obter detalhes de uma caixa especÃ­fica (3 ms)
      âœ• deve falhar ao obter caixa inexistente (1 ms)
      âœ• deve obter estatÃ­sticas de uma caixa (1 ms)
      âœ• deve verificar disponibilidade de estoque
      âœ• deve obter caixas relacionadas (1 ms)
    Busca de caixas
      âœ• deve realizar busca com sucesso
      âœ• deve realizar busca com filtros avanÃ§ados
      âœ• deve obter sugestÃµes de busca
      âœ• deve retornar resultado vazio para busca sem matches
    Categorias
      âœ• deve obter lista de categorias (1 ms)
      âœ• deve obter categoria por ID (1 ms)
      âœ• deve obter caixas de uma categoria especÃ­fica (1 ms)
    Reviews
      âœ• deve obter reviews de uma caixa (1 ms)
      âœ• deve adicionar review para uma caixa (1 ms)
      âœ“ deve marcar review como Ãºtil (1 ms)
    Funcionalidades auxiliares
      âœ• deve obter tags populares (1 ms)
      âœ• deve obter filtros disponÃ­veis
      âœ• deve obter histÃ³rico de preÃ§os (1 ms)
      âœ“ deve reportar problema com uma caixa
    CenÃ¡rios de erro
      âœ• deve tratar erro de rede durante busca
      âœ• deve tratar timeout durante carregamento de detalhes (1 ms)
      âœ• deve tratar erro 500 durante listagem (1 ms)
      âœ• deve tratar erro de validaÃ§Ã£o ao adicionar review (1 ms)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Listagem de caixas â€º deve obter lista de caixas com sucesso

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}

      108 |
      109 |       // Assert
    > 110 |       expect(response.data).toHaveLength(2);
          |                             ^
      111 |       expect(response.data[0]).toMatchObject({
      112 |         id: 'box-electronics-001',
      113 |         name: 'Caixa EletrÃ´nicos Premium',

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:110:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Listagem de caixas â€º deve obter caixas com filtros aplicados

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "success": true}

      140 |
      141 |       // Assert
    > 142 |       expect(response.data).toHaveLength(1);
          |                             ^
      143 |       expect(response.data[0].category_id).toBe('cat-electronics');
      144 |     });
      145 |

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:142:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Listagem de caixas â€º deve obter caixas em destaque

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "success": true}

      155 |
      156 |       // Assert
    > 157 |       expect(response).toHaveLength(1);
          |                        ^
      158 |       expect(response[0].is_featured).toBe(true);
      159 |     });
      160 |

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:157:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Listagem de caixas â€º deve obter caixas populares

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      170 |
      171 |       // Assert
    > 172 |       expect(response).toHaveLength(2);
          |                        ^
      173 |       expect(response[0].reviews_count).toBeGreaterThanOrEqual(response[1].reviews_count);
      174 |     });
      175 |

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:172:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Listagem de caixas â€º deve obter caixas _recÃ©m-lanÃ§adas

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      185 |
      186 |       // Assert
    > 187 |       expect(response).toHaveLength(1);
          |                        ^
      188 |       expect(response[0].is_new).toBe(true);
      189 |     });
      190 |

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:187:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Listagem de caixas â€º deve tratar erro ao obter lista de caixas

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      197 |       });
      198 |
    > 199 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      200 |         status: 500,
      201 |         message: 'Erro interno do servidor',
      202 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/boxes.integration.test.ts:199:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Detalhes da caixa â€º deve obter detalhes de uma caixa especÃ­fica

    expect(received).toMatchObject(expected)

    - Expected  -  5
    + Received  + 67

      Object {
    -   "category": Object {
    -     "name": "EletrÃ´nicos",
    +   "data": Object {
    +     "category": "tech",
    +     "categoryName": "Tecnologia",
    +     "contents": Array [
    +       Object {
    +         "name": "Item Surpresa 1",
    +         "probability": 30,
    +       },
    +       Object {
    +         "name": "Item Surpresa 2",
    +         "probability": 25,
            },
    -   "id": "box-electronics-001",
    -   "name": "Caixa EletrÃ´nicos Premium",
    -   "price": 99.99,
    +       Object {
    +         "name": "Item Surpresa 3",
    +         "probability": 20,
    +       },
    +       Object {
    +         "name": "Item Raro",
    +         "probability": 15,
    +       },
    +       Object {
    +         "name": "Item Super Raro",
    +         "probability": 10,
    +       },
    +     ],
    +     "createdAt": "2025-01-01T10:00:00Z",
    +     "description": "Caixa com produtos de tecnologia surpresa",
    +     "discount": 37,
    +     "featured": true,
    +     "id": "box-123",
    +     "image": "https://example.com/box-tech.jpg",
    +     "images": Array [
    +       "https://example.com/box-tech-1.jpg",
    +       "https://example.com/box-tech-2.jpg",
    +     ],
    +     "name": "Caixa Misteriosa Tech",
    +     "originalPrice": 79.9,
    +     "platform": "magalu",
    +     "price": 49.9,
    +     "rating": 4.5,
    +     "reviewCount": 128,
    +     "sold": 250,
    +     "specifications": Object {
    +       "dimensions": "20x15x10cm",
    +       "maxValue": "150.00",
    +       "minValue": "30.00",
    +       "weight": "500g",
    +     },
    +     "stock": 50,
    +     "tags": Array [
    +       "eletrÃ´nicos",
    +       "gadgets",
    +       "surpresa",
    +     ],
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "vendor": Object {
    +       "id": "vendor-123",
    +       "name": "TechStore Brasil",
    +       "rating": 4.7,
    +       "reviewCount": 1250,
    +       "since": "2023-01-01",
    +       "verified": true,
    +     },
    +     "vendorId": "vendor-123",
    +     "vendorName": "TechStore Brasil",
    +     "verified": true,
    +   },
    +   "success": true,
      }

      216 |
      217 |       // Assert
    > 218 |       expect(response).toMatchObject({
          |                        ^
      219 |         id: boxId,
      220 |         name: 'Caixa EletrÃ´nicos Premium',
      221 |         price: 99.99,

      at Object.toMatchObject (src/services/__tests__/integration/boxes.integration.test.ts:218:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Detalhes da caixa â€º deve falhar ao obter caixa inexistente

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"category": "tech", "categoryName": "Tecnologia", "contents": [{"name": "Item Surpresa 1", "probability": 30}, {"name": "Item Surpresa 2", "probability": 25}, {"name": "Item Surpresa 3", "probability": 20}, {"name": "Item Raro", "probability": 15}, {"name": "Item Super Raro", "probability": 10}], "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "specifications": {"dimensions": "20x15x10cm", "maxValue": "150.00", "minValue": "30.00", "weight": "500g"}, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendor": {"id": "vendor-123", "name": "TechStore Brasil", "rating": 4.7, "reviewCount": 1250, "since": "2023-01-01", "verified": true}, "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, "success": true}

      234 |
      235 |       // Act & Assert
    > 236 |       await expect(boxService.getBoxById(boxId)).rejects.toMatchObject({
          |             ^
      237 |         status: 404,
      238 |         message: 'Caixa nÃ£o encontrada',
      239 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/boxes.integration.test.ts:236:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Detalhes da caixa â€º deve obter estatÃ­sticas de uma caixa

    expect(received).toBe(expected) // Object.is equality

    Expected: 150
    Received: undefined

      265 |
      266 |       // Assert
    > 267 |       expect(response.total_sold).toBe(150);
          |                                   ^
      268 |       expect(response.average_rating).toBe(4.5);
      269 |       expect(response.recent_openings).toHaveLength(1);
      270 |     });

      at Object.toBe (src/services/__tests__/integration/boxes.integration.test.ts:267:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Detalhes da caixa â€º deve verificar disponibilidade de estoque

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      287 |
      288 |       // Assert
    > 289 |       expect(response.available).toBe(true);
          |                                  ^
      290 |       expect(response.stock).toBe(47);
      291 |       expect(response.max_per_user).toBe(5);
      292 |     });

      at Object.toBe (src/services/__tests__/integration/boxes.integration.test.ts:289:34)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Detalhes da caixa â€º deve obter caixas relacionadas

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      304 |
      305 |       // Assert
    > 306 |       expect(response).toHaveLength(1);
          |                        ^
      307 |       expect(response[0].id).toBe('box-gaming-002');
      308 |     });
      309 |   });

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:306:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Busca de caixas â€º deve realizar busca com sucesso

    expect(received).toBe(expected) // Object.is equality

    Expected: "eletrÃ´nicos"
    Received: undefined

      332 |
      333 |       // Assert
    > 334 |       expect(response.query).toBe(query);
          |                              ^
      335 |       expect(response.results).toHaveLength(1);
      336 |       expect(response.results[0].name).toContain('EletrÃ´nicos');
      337 |       expect(response.suggestions).toContain('eletrÃ´nicos premium');

      at Object.toBe (src/services/__tests__/integration/boxes.integration.test.ts:334:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Busca de caixas â€º deve realizar busca com filtros avanÃ§ados

    expect(received).toBe(expected) // Object.is equality

    Expected: "premium"
    Received: undefined

      368 |
      369 |       // Assert
    > 370 |       expect(response.query).toBe(query);
          |                              ^
      371 |       expect(response.results).toHaveLength(1);
      372 |       expect(response.total).toBe(1);
      373 |     });

      at Object.toBe (src/services/__tests__/integration/boxes.integration.test.ts:370:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Busca de caixas â€º deve obter sugestÃµes de busca

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      385 |
      386 |       // Assert
    > 387 |       expect(response).toHaveLength(3);
          |                        ^
      388 |       expect(response[0]).toBe('eletrÃ´nicos');
      389 |       expect(response).toContain('eletrÃ´nicos premium');
      390 |     });

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:387:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Busca de caixas â€º deve retornar resultado vazio para busca sem matches

    expect(received).toBe(expected) // Object.is equality

    Expected: "inexistente"
    Received: undefined

      412 |
      413 |       // Assert
    > 414 |       expect(response.query).toBe(query);
          |                              ^
      415 |       expect(response.results).toHaveLength(0);
      416 |       expect(response.total).toBe(0);
      417 |       expect(response.suggestions).toHaveLength(3);

      at Object.toBe (src/services/__tests__/integration/boxes.integration.test.ts:414:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Categorias â€º deve obter lista de categorias

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {}

      429 |
      430 |       // Assert
    > 431 |       expect(response).toHaveLength(3);
          |                        ^
      432 |       expect(response[0]).toMatchObject({
      433 |         id: 'cat-electronics',
      434 |         name: 'EletrÃ´nicos',

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:431:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Categorias â€º deve obter categoria por ID

    expect(received).toMatchObject(expected)

    - Expected  - 5
    + Received  + 1

    - Object {
    -   "id": "cat-electronics",
    -   "name": "EletrÃ´nicos",
    -   "slug": "electronics",
    - }
    + Object {}

      448 |
      449 |       // Assert
    > 450 |       expect(response).toMatchObject({
          |                        ^
      451 |         id: categoryId,
      452 |         name: 'EletrÃ´nicos',
      453 |         slug: 'electronics',

      at Object.toMatchObject (src/services/__tests__/integration/boxes.integration.test.ts:450:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Categorias â€º deve obter caixas de uma categoria especÃ­fica

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      467 |
      468 |       // Assert
    > 469 |       expect(response.data).toHaveLength(1);
          |                             ^
      470 |       expect(response.data[0].category_id).toBe(categoryId);
      471 |     });
      472 |   });

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:469:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Reviews â€º deve obter reviews de uma caixa

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      484 |
      485 |       // Assert
    > 486 |       expect(response.data).toHaveLength(1);
          |                             ^
      487 |       expect(response.data[0]).toMatchObject({
      488 |         id: 'review-001',
      489 |         rating: 5,

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:486:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Reviews â€º deve adicionar review para uma caixa

    expect(received).toMatchObject(expected)

    - Expected  -  4
    + Received  + 22

      Object {
    -   "comment": "Boa caixa, mas poderia ter mais itens.",
    -   "id": "review-002",
    -   "mystery_box_id": "box-electronics-001",
    -   "rating": 4,
    +   "data": Object {
    +     "boxId": "box-456",
    +     "comment": "Adorei os produtos que vieram na caixa. Superou minhas expectativas!",
    +     "createdAt": "2025-01-05T14:30:00Z",
    +     "helpful": 15,
    +     "id": "review-123",
    +     "images": Array [
    +       "https://example.com/review-1.jpg",
    +       "https://example.com/review-2.jpg",
    +     ],
    +     "rating": 5,
    +     "response": null,
    +     "title": "Excelente caixa!",
    +     "unhelpful": 2,
    +     "updatedAt": "2025-01-05T14:30:00Z",
    +     "userAvatar": "https://example.com/avatar.jpg",
    +     "userId": "user-123",
    +     "userName": "JoÃ£o Silva",
    +     "verified": true,
    +   },
    +   "message": "AvaliaÃ§Ã£o criada com sucesso",
    +   "success": true,
      }

      523 |
      524 |       // Assert
    > 525 |       expect(response).toMatchObject({
          |                        ^
      526 |         id: 'review-002',
      527 |         rating: 4,
      528 |         comment: 'Boa caixa, mas poderia ter mais itens.',

      at Object.toMatchObject (src/services/__tests__/integration/boxes.integration.test.ts:525:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Funcionalidades auxiliares â€º deve obter tags populares

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {}

      564 |
      565 |       // Assert
    > 566 |       expect(response).toHaveLength(3);
          |                        ^
      567 |       expect(response[0]).toMatchObject({
      568 |         tag: 'eletrÃ´nicos',
      569 |         count: 25,

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:566:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Funcionalidades auxiliares â€º deve obter filtros disponÃ­veis

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      587 |
      588 |       // Assert
    > 589 |       expect(response.categories).toHaveLength(3);
          |                                   ^
      590 |       expect(response.rarities).toContain('legendary');
      591 |       expect(response.price_range.min).toBe(19.99);
      592 |       expect(response.tags).toContain('eletrÃ´nicos');

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:589:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Funcionalidades auxiliares â€º deve obter histÃ³rico de preÃ§os

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      609 |
      610 |       // Assert
    > 611 |       expect(response).toHaveLength(3);
          |                        ^
      612 |       expect(response[0]).toMatchObject({
      613 |         date: '2025-01-01',
      614 |         price: 89.99,

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:611:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º CenÃ¡rios de erro â€º deve tratar erro de rede durante busca

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      645 |
      646 |       // Act & Assert
    > 647 |       await expect(boxService.searchBoxes(query)).rejects.toMatchObject({
          |             ^
      648 |         status: 0,
      649 |         message: expect.stringContaining('Erro de conexÃ£o'),
      650 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/boxes.integration.test.ts:647:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º CenÃ¡rios de erro â€º deve tratar timeout durante carregamento de detalhes

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"category": "tech", "categoryName": "Tecnologia", "contents": [{"name": "Item Surpresa 1", "probability": 30}, {"name": "Item Surpresa 2", "probability": 25}, {"name": "Item Surpresa 3", "probability": 20}, {"name": "Item Raro", "probability": 15}, {"name": "Item Super Raro", "probability": 10}], "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "specifications": {"dimensions": "20x15x10cm", "maxValue": "150.00", "minValue": "30.00", "weight": "500g"}, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendor": {"id": "vendor-123", "name": "TechStore Brasil", "rating": 4.7, "reviewCount": 1250, "since": "2023-01-01", "verified": true}, "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, "success": true}

      657 |
      658 |       // Act & Assert
    > 659 |       await expect(boxService.getBoxById(boxId)).rejects.toMatchObject({
          |             ^
      660 |         status: 0,
      661 |         message: expect.stringContaining('timeout'),
      662 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/boxes.integration.test.ts:659:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º CenÃ¡rios de erro â€º deve tratar erro 500 durante listagem

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      672 |
      673 |       // Act & Assert
    > 674 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      675 |         status: 500,
      676 |         message: 'Erro interno do servidor',
      677 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/boxes.integration.test.ts:674:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º CenÃ¡rios de erro â€º deve tratar erro de validaÃ§Ã£o ao adicionar review

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"boxId": "box-456", "comment": "Adorei os produtos que vieram na caixa. Superou minhas expectativas!", "createdAt": "2025-01-05T14:30:00Z", "helpful": 15, "id": "review-123", "images": ["https://example.com/review-1.jpg", "https://example.com/review-2.jpg"], "rating": 5, "response": null, "title": "Excelente caixa!", "unhelpful": 2, "updatedAt": "2025-01-05T14:30:00Z", "userAvatar": "https://example.com/avatar.jpg", "userId": "user-123", "userName": "JoÃ£o Silva", "verified": true}, "message": "AvaliaÃ§Ã£o criada com sucesso", "success": true}

      696 |
      697 |       // Act & Assert
    > 698 |       await expect(boxService.addBoxReview(boxId, invalidReview)).rejects.toMatchObject({
          |             ^
      699 |         status: 422,
      700 |         message: 'Dados invÃ¡lidos',
      701 |         errors: {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/boxes.integration.test.ts:698:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/__tests__/integration/interceptors.integration.test.ts
  Testes de IntegraÃ§Ã£o - Interceptors
    Request Interceptor - AutenticaÃ§Ã£o
      âœ• deve adicionar token de autenticaÃ§Ã£o automaticamente (2 ms)
      âœ“ deve fazer request sem token quando nÃ£o autenticado (1 ms)
      âœ• deve incluir headers padrÃ£o em todas as requisiÃ§Ãµes (1 ms)
      âœ• deve preservar headers customizados (1 ms)
      âœ• deve adicionar timestamp ou ID de request para tracking (1 ms)
    Response Interceptor - Tratamento de Erros
      âœ• deve limpar token automaticamente em erro 401 (1 ms)
      âœ• deve manter token em outros tipos de erro
      âœ• deve formatar erros de forma consistente (1 ms)
      âœ• deve tratar erro sem response de forma consistente (1 ms)
      âœ• deve passar responses bem-sucedidos sem modificaÃ§Ã£o (1 ms)
    Interceptor de Logging
      âœ• deve logar requests em modo desenvolvimento (1 ms)
      âœ• deve logar responses em modo desenvolvimento (1 ms)
      âœ• deve logar erros em modo desenvolvimento (1 ms)
      âœ“ nÃ£o deve logar em modo produÃ§Ã£o (1 ms)
    Interceptor de Performance
      âœ• deve adicionar delay configurÃ¡vel para simular latÃªncia
      âœ• deve contar requisiÃ§Ãµes corretamente
      âœ• deve contar erros tambÃ©m
    Interceptor de Retry
      âœ• deve implementar retry automÃ¡tico para erros de rede (1 ms)
      âœ• nÃ£o deve fazer retry para erros HTTP (1 ms)
    Interceptor de Cache
      âœ• deve implementar cache simples para GET requests (2 ms)
      âœ• nÃ£o deve fazer cache para POST requests (1 ms)
    Interceptor de TransformaÃ§Ã£o de Dados
      âœ• deve transformar datas string em objetos Date (1 ms)
    Interceptor de ValidaÃ§Ã£o de Response
      âœ• deve validar estrutura de response da API (1 ms)
    Comportamento integrado dos interceptors
      âœ• deve executar mÃºltiplos interceptors em ordem (2 ms)
      âœ• deve permitir interceptors assÃ­ncronos (1 ms)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Request Interceptor - AutenticaÃ§Ã£o â€º deve adicionar token de autenticaÃ§Ã£o automaticamente

    expect(received).toBe(expected) // Object.is equality

    Expected: "Bearer test-token-123"
    Received: ""

      53 |
      54 |       // Assert
    > 55 |       expect(capturedAuthHeader).toBe(`Bearer ${token}`);
         |                                  ^
      56 |     });
      57 |
      58 |     it('deve fazer request sem token quando nÃ£o autenticado', async () => {

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:55:34)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Request Interceptor - AutenticaÃ§Ã£o â€º deve incluir headers padrÃ£o em todas as requisiÃ§Ãµes

    expect(received).toBe(expected) // Object.is equality

    Expected: "application/json"
    Received: undefined

       97 |
       98 |       // Assert
    >  99 |       expect(capturedHeaders['Content-Type']).toBe('application/json');
          |                                               ^
      100 |       expect(capturedHeaders.Accept).toBe('application/json');
      101 |     });
      102 |

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:99:47)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Request Interceptor - AutenticaÃ§Ã£o â€º deve preservar headers customizados

    expect(received).toBe(expected) // Object.is equality

    Expected: "multipart/form-data"
    Received: undefined

      121 |
      122 |       // Assert
    > 123 |       expect(capturedHeaders['Content-Type']).toBe('multipart/form-data');
          |                                               ^
      124 |     });
      125 |
      126 |     it('deve adicionar timestamp ou ID de request para tracking', async () => {

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:123:47)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Request Interceptor - AutenticaÃ§Ã£o â€º deve adicionar timestamp ou ID de request para tracking

    expect(received).toMatch(expected)

    Matcher error: received value must be a string

    Received has value: undefined

      144 |
      145 |       // Assert
    > 146 |       expect(capturedHeaders['X-Request-ID']).toMatch(/^req-\d+$/);
          |                                               ^
      147 |     });
      148 |   });
      149 |

      at Object.toMatch (src/services/__tests__/integration/interceptors.integration.test.ts:146:47)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Response Interceptor - Tratamento de Erros â€º deve limpar token automaticamente em erro 401

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      161 |
      162 |       // Act & Assert
    > 163 |       await expect(userService.getProfile()).rejects.toMatchObject({
          |             ^
      164 |         status: 401,
      165 |         message: 'Token expirado',
      166 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:163:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Response Interceptor - Tratamento de Erros â€º deve manter token em outros tipos de erro

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"category": "tech", "categoryName": "Tecnologia", "contents": [{"name": "Item Surpresa 1", "probability": 30}, {"name": "Item Surpresa 2", "probability": 25}, {"name": "Item Surpresa 3", "probability": 20}, {"name": "Item Raro", "probability": 15}, {"name": "Item Super Raro", "probability": 10}], "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "specifications": {"dimensions": "20x15x10cm", "maxValue": "150.00", "minValue": "30.00", "weight": "500g"}, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendor": {"id": "vendor-123", "name": "TechStore Brasil", "rating": 4.7, "reviewCount": 1250, "since": "2023-01-01", "verified": true}, "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, "success": true}

      182 |
      183 |       // Act & Assert
    > 184 |       await expect(boxService.getBoxById('nonexistent')).rejects.toMatchObject({
          |             ^
      185 |         status: 404,
      186 |         message: 'Caixa nÃ£o encontrada',
      187 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:184:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Response Interceptor - Tratamento de Erros â€º deve formatar erros de forma consistente

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/new-avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva Santos", "phone": "+5511999887766", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-06T15:00:00Z", "verified": true}, "message": "Perfil atualizado com sucesso", "success": true}

      210 |
      211 |       // Act & Assert
    > 212 |       await expect(userService.updateProfile({
          |             ^
      213 |         name: '',
      214 |         email: 'invalid-email',
      215 |       })).rejects.toMatchObject({

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:212:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Response Interceptor - Tratamento de Erros â€º deve tratar erro sem response de forma consistente

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      228 |
      229 |       // Act & Assert
    > 230 |       await expect(userService.getProfile()).rejects.toMatchObject({
          |             ^
      231 |         status: 0,
      232 |         message: expect.stringContaining('Erro de conexÃ£o'),
      233 |         errors: {},

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:230:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Response Interceptor - Tratamento de Erros â€º deve passar responses bem-sucedidos sem modificaÃ§Ã£o

    ReferenceError: response is not defined

      245 |
      246 |       // Assert
    > 247 |       expect(response).toEqual(testData.user);
          |              ^
      248 |     });
      249 |   });
      250 |

      at Object.response (src/services/__tests__/integration/interceptors.integration.test.ts:247:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Logging â€º deve logar requests em modo desenvolvimento

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "ğŸŒ API Request:", ObjectContaining {"method": "GET", "url": "/user/profile"}

    Number of calls: 0

      264 |
      265 |       // Assert
    > 266 |       expect(consoleSpy).toHaveBeenCalledWith(
          |                          ^
      267 |         expect.stringContaining('ğŸŒ API Request:'),
      268 |         expect.objectContaining({
      269 |           method: 'GET',

      at Object.toHaveBeenCalledWith (src/services/__tests__/integration/interceptors.integration.test.ts:266:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Logging â€º deve logar responses em modo desenvolvimento

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "âœ… API Response:", ObjectContaining {"status": 200, "url": "/user/profile"}

    Number of calls: 0

      291 |
      292 |       // Assert
    > 293 |       expect(consoleSpy).toHaveBeenCalledWith(
          |                          ^
      294 |         expect.stringContaining('âœ… API Response:'),
      295 |         expect.objectContaining({
      296 |           status: 200,

      at Object.toHaveBeenCalledWith (src/services/__tests__/integration/interceptors.integration.test.ts:293:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Logging â€º deve logar erros em modo desenvolvimento

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      318 |
      319 |       // Act & Assert
    > 320 |       await expect(userService.getProfile()).rejects.toThrow();
          |             ^
      321 |
      322 |       expect(consoleSpy).toHaveBeenCalledWith(
      323 |         expect.stringContaining('âŒ API Error:'),

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:320:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Performance â€º deve adicionar delay configurÃ¡vel para simular latÃªncia

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 100
    Received:    0

      371 |
      372 |       // Assert
    > 373 |       expect(endTime - startTime).toBeGreaterThanOrEqual(delay);
          |                                   ^
      374 |     });
      375 |
      376 |     it('deve contar requisiÃ§Ãµes corretamente', async () => {

      at Object.toBeGreaterThanOrEqual (src/services/__tests__/integration/interceptors.integration.test.ts:373:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Performance â€º deve contar requisiÃ§Ãµes corretamente

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 0

      387 |
      388 |       // Assert
    > 389 |       expect(getRequestCount()).toBe(2);
          |                                 ^
      390 |     });
      391 |
      392 |     it('deve contar erros tambÃ©m', async () => {

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:389:33)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Performance â€º deve contar erros tambÃ©m

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 0

      409 |
      410 |       // Assert
    > 411 |       expect(getRequestCount()).toBe(1);
          |                                 ^
      412 |     });
      413 |   });
      414 |

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:411:33)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Retry â€º deve implementar retry automÃ¡tico para erros de rede

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      436 |
      437 |       // Act & Assert
    > 438 |       await expect(userService.getProfile()).rejects.toThrow();
          |             ^
      439 |       expect(attemptCount).toBe(3); // Tentativa inicial + 2 retries
      440 |     });
      441 |

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:438:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Retry â€º nÃ£o deve fazer retry para erros HTTP

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      466 |
      467 |       // Act & Assert
    > 468 |       await expect(userService.getProfile()).rejects.toThrow();
          |             ^
      469 |       expect(attemptCount).toBe(1); // Apenas uma tentativa
      470 |     });
      471 |   });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:468:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Cache â€º deve implementar cache simples para GET requests

    expect(received).toEqual(expected) // deep equality

    - Expected  -  7
    + Received  + 27

      Object {
    -   "avatar_url": "https://test.com/avatar.jpg",
    -   "created_at": "2025-01-01T00:00:00Z",
    -   "email": "test@crowbar.com",
    -   "id": "user-test-123",
    -   "name": "UsuÃ¡rio Teste",
    -   "phone": "(11) 99999-9999",
    -   "updated_at": "2025-01-01T00:00:00Z",
    +   "data": Object {
    +     "avatar": "https://example.com/avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva",
    +     "phone": "+5511987654321",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
    +     },
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "verified": true,
    +   },
    +   "success": true,
      }

      511 |
      512 |       // Assert
    > 513 |       expect(result1).toEqual(testData.user);
          |                       ^
      514 |       expect(result2).toEqual(testData.user);
      515 |       expect(cache._size).toBe(1);
      516 |       expect(cache.has('get:/user/profile')).toBe(true);

      at Object.toEqual (src/services/__tests__/integration/interceptors.integration.test.ts:513:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Cache â€º nÃ£o deve fazer cache para POST requests

    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: undefined

      554 |
      555 |       // Assert
    > 556 |       expect(cache._size).toBe(0); // Nenhum cache para POST
          |                           ^
      557 |     });
      558 |   });
      559 |

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:556:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de TransformaÃ§Ã£o de Dados â€º deve transformar datas string em objetos Date

    expect(received).toBeInstanceOf(expected)

    Expected constructor: Date

    Received value has no prototype
    Received value: undefined

      602 |
      603 |       // Assert
    > 604 |       expect(_result.created_at).toBeInstanceOf(Date);
          |                                  ^
      605 |       expect(_result.updated_at).toBeInstanceOf(Date);
      606 |     });
      607 |   });

      at Object.toBeInstanceOf (src/services/__tests__/integration/interceptors.integration.test.ts:604:34)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de ValidaÃ§Ã£o de Response â€º deve validar estrutura de response da API

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "âš ï¸ Response nÃ£o segue padrÃ£o esperado:", {"user": {"avatar_url": "https://test.com/avatar.jpg", "created_at": "2025-01-01T00:00:00Z", "email": "test@crowbar.com", "id": "user-test-123", "name": "UsuÃ¡rio Teste", "phone": "(11) 99999-9999", "updated_at": "2025-01-01T00:00:00Z"}}

    Number of calls: 0

      632 |
      633 |       // Assert
    > 634 |       expect(consoleSpy).toHaveBeenCalledWith(
          |                          ^
      635 |         expect.stringContaining('âš ï¸ Response nÃ£o segue padrÃ£o esperado:'),
      636 |         malformedResponse
      637 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/integration/interceptors.integration.test.ts:634:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Comportamento integrado dos interceptors â€º deve executar mÃºltiplos interceptors em ordem

    expect(received).toEqual(expected) // deep equality

    - Expected  - 6
    + Received  + 1

    - Array [
    -   "request-2",
    -   "request-1",
    -   "response-1",
    -   "response-2",
    - ]
    + Array []

      678 |
      679 |       // Assert
    > 680 |       expect(executionOrder).toEqual(['request-2', 'request-1', 'response-1', 'response-2']);
          |                              ^
      681 |     });
      682 |
      683 |     it('deve permitir interceptors assÃ­ncronos', async () => {

      at Object.toEqual (src/services/__tests__/integration/interceptors.integration.test.ts:680:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Comportamento integrado dos interceptors â€º deve permitir interceptors assÃ­ncronos

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      700 |
      701 |       // Assert
    > 702 |       expect(asyncOperationCompleted).toBe(true);
          |                                       ^
      703 |     });
      704 |   });
      705 | });

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:702:39)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/integration/networkErrors.integration.test.ts
  Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede
    Erros de conectividade
      âœ• deve tratar erro de rede durante busca de caixas (2 ms)
      âœ• deve tratar erro de rede durante login
      âœ• deve tratar erro de rede durante adiÃ§Ã£o ao carrinho (1 ms)
      âœ• deve tratar erro de rede durante busca de perfil (1 ms)
      âœ• deve tratar erro de rede durante busca de pedidos (1 ms)
    Erros de timeout
      âœ• deve tratar timeout durante busca de caixas (1 ms)
      âœ• deve tratar timeout durante checkout (1 ms)
      âœ• deve tratar timeout durante busca de detalhes do pedido (1 ms)
      âœ• deve tratar timeout durante atualizaÃ§Ã£o de perfil (1 ms)
    Erros HTTP 404 - Not Found
      âœ• deve tratar erro 404 para caixa nÃ£o encontrada (1 ms)
      âœ• deve tratar erro 404 para pedido nÃ£o encontrado (1 ms)
      âœ• deve tratar erro 404 para item de carrinho nÃ£o encontrado (1 ms)
      âœ• deve tratar erro 404 para endpoint nÃ£o existente (1 ms)
    Erros HTTP 500 - Internal Server Error
      âœ• deve tratar erro 500 durante busca de caixas (1 ms)
      âœ• deve tratar erro 500 durante processamento de pagamento (1 ms)
      âœ• deve tratar erro 500 durante busca de estatÃ­sticas
      âœ• deve tratar erro 500 durante cancelamento de pedido (1 ms)
    Erros HTTP 401 - Unauthorized
      âœ• deve tratar erro 401 para token expirado (1 ms)
      âœ• deve tratar erro 401 durante busca de pedidos (1 ms)
      âœ• deve tratar erro 401 durante adiÃ§Ã£o ao carrinho (1 ms)
    Erros HTTP 403 - Forbidden
      âœ• deve tratar erro 403 para acesso negado
      âœ• deve tratar erro 403 para cancelamento nÃ£o autorizado
    Erros HTTP 422 - Unprocessable Entity
      âœ• deve tratar erro 422 para dados invÃ¡lidos no perfil (1 ms)
      âœ• deve tratar erro 422 para cupom invÃ¡lido (1 ms)
      âœ• deve tratar erro 422 para avaliaÃ§Ã£o invÃ¡lida (1 ms)
    Erros HTTP 409 - Conflict
      âœ• deve tratar erro 409 para email jÃ¡ em uso
      âœ• deve tratar erro 409 para item jÃ¡ favoritado (1 ms)
    Erros HTTP 400 - Bad Request
      âœ• deve tratar erro 400 para produto fora de estoque
      âœ• deve tratar erro 400 para operaÃ§Ã£o invÃ¡lida (1 ms)
    CenÃ¡rios de recuperaÃ§Ã£o de erro
      âœ• deve falhar silenciosamente em verificaÃ§Ã£o de favorito (1 ms)
      âœ• deve tratar mÃºltiplos erros em sequÃªncia (1 ms)
    UtilitÃ¡rios de erro
      âœ• deve identificar corretamente tipos de erro
      âœ• deve retornar mensagens amigÃ¡veis para diferentes tipos de erro (1 ms)
      âœ• deve formatar erros de validaÃ§Ã£o corretamente
      âœ• deve retornar objeto vazio para erros nÃ£o-validaÃ§Ã£o
    CenÃ¡rios de estresse e edge cases
      âœ• deve tratar erro sem mensagem
      âœ• deve tratar resposta malformada (1 ms)
      âœ• deve tratar erro com dados extras (1 ms)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de conectividade â€º deve tratar erro de rede durante busca de caixas

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      38 |
      39 |       // Act & Assert
    > 40 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
         |             ^
      41 |         status: 0,
      42 |         message: expect.stringContaining('Erro de conexÃ£o'),
      43 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:40:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de conectividade â€º deve tratar erro de rede durante login

    ReferenceError: apiClient is not defined

      49 |
      50 |       // Act & Assert
    > 51 |       await expect(apiClient.post('/auth/login', {
         |                    ^
      52 |         email: 'test@test.com',
      53 |         password: 'password123',
      54 |       })).rejects.toMatchObject({

      at Object.apiClient (src/services/__tests__/integration/networkErrors.integration.test.ts:51:20)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de conectividade â€º deve tratar erro de rede durante adiÃ§Ã£o ao carrinho

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Item adicionado ao carrinho", "success": true}

      63 |
      64 |       // Act & Assert
    > 65 |       await expect(cartService.addToCart('box-123', 1)).rejects.toMatchObject({
         |             ^
      66 |         status: 0,
      67 |         message: expect.stringContaining('Erro de conexÃ£o'),
      68 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:65:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de conectividade â€º deve tratar erro de rede durante busca de perfil

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      74 |
      75 |       // Act & Assert
    > 76 |       await expect(userService.getProfile()).rejects.toMatchObject({
         |             ^
      77 |         status: 0,
      78 |         message: expect.stringContaining('Erro de conexÃ£o'),
      79 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:76:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de conectividade â€º deve tratar erro de rede durante busca de pedidos

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      85 |
      86 |       // Act & Assert
    > 87 |       await expect(orderService.getOrders()).rejects.toMatchObject({
         |             ^
      88 |         status: 0,
      89 |         message: expect.stringContaining('Erro de conexÃ£o'),
      90 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:87:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de timeout â€º deve tratar timeout durante busca de caixas

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

       98 |
       99 |       // Act & Assert
    > 100 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      101 |         status: 0,
      102 |         message: expect.stringContaining('timeout'),
      103 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:100:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de timeout â€º deve tratar timeout durante checkout

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "estimatedDelivery": "2025-01-15T00:00:00Z", "id": "order-123", "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "order-item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "status": "processing", "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "orderNumber": "ORD-2025-001", "paymentMethod": "credit_card", "paymentStatus": "paid", "shipping": 10, "shippingAddress": {"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "id": "address-123", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "zipCode": "01000-000"}, "status": "processing", "subtotal": 49.9, "total": 59.9, "trackingCode": "BR123456789", "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Pedido criado com sucesso", "success": true}

      109 |
      110 |       // Act & Assert
    > 111 |       await expect(cartService.checkout({
          |             ^
      112 |         shipping_address_id: 'addr-123',
      113 |         shipping_option_id: 'shipping-123',
      114 |         payment_method: 'credit_card',

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:111:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de timeout â€º deve tratar timeout durante busca de detalhes do pedido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      124 |
      125 |       // Act & Assert
    > 126 |       await expect(orderService.getOrderById('order-123')).rejects.toMatchObject({
          |             ^
      127 |         status: 0,
      128 |         message: expect.stringContaining('timeout'),
      129 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:126:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de timeout â€º deve tratar timeout durante atualizaÃ§Ã£o de perfil

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/new-avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva Santos", "phone": "+5511999887766", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-06T15:00:00Z", "verified": true}, "message": "Perfil atualizado com sucesso", "success": true}

      135 |
      136 |       // Act & Assert
    > 137 |       await expect(userService.updateProfile({
          |             ^
      138 |         name: 'JoÃ£o Silva',
      139 |       })).rejects.toMatchObject({
      140 |         status: 0,

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:137:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 404 - Not Found â€º deve tratar erro 404 para caixa nÃ£o encontrada

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"category": "tech", "categoryName": "Tecnologia", "contents": [{"name": "Item Surpresa 1", "probability": 30}, {"name": "Item Surpresa 2", "probability": 25}, {"name": "Item Surpresa 3", "probability": 20}, {"name": "Item Raro", "probability": 15}, {"name": "Item Super Raro", "probability": 10}], "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "specifications": {"dimensions": "20x15x10cm", "maxValue": "150.00", "minValue": "30.00", "weight": "500g"}, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendor": {"id": "vendor-123", "name": "TechStore Brasil", "rating": 4.7, "reviewCount": 1250, "since": "2023-01-01", "verified": true}, "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, "success": true}

      154 |
      155 |       // Act & Assert
    > 156 |       await expect(boxService.getBoxById('nonexistent-box')).rejects.toMatchObject({
          |             ^
      157 |         status: 404,
      158 |         message: 'Caixa nÃ£o encontrada',
      159 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:156:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 404 - Not Found â€º deve tratar erro 404 para pedido nÃ£o encontrado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      169 |
      170 |       // Act & Assert
    > 171 |       await expect(orderService.getOrderById('nonexistent-order')).rejects.toMatchObject({
          |             ^
      172 |         status: 404,
      173 |         message: 'Pedido nÃ£o encontrado',
      174 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:171:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 404 - Not Found â€º deve tratar erro 404 para item de carrinho nÃ£o encontrado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 3, "subtotal": 149.7, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 149.7, "total": 159.7, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Quantidade atualizada", "success": true}

      184 |
      185 |       // Act & Assert
    > 186 |       await expect(cartService.updateCartItem('nonexistent-item', 2)).rejects.toMatchObject({
          |             ^
      187 |         status: 404,
      188 |         message: 'Item nÃ£o encontrado no carrinho',
      189 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:186:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 404 - Not Found â€º deve tratar erro 404 para endpoint nÃ£o existente

    ReferenceError: apiClient is not defined

      199 |
      200 |       // Act & Assert
    > 201 |       await expect(apiClient.get('/nonexistent-endpoint')).rejects.toMatchObject({
          |                    ^
      202 |         status: 404,
      203 |         message: 'Endpoint nÃ£o encontrado',
      204 |       });

      at Object.apiClient (src/services/__tests__/integration/networkErrors.integration.test.ts:201:20)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 500 - Internal Server Error â€º deve tratar erro 500 durante busca de caixas

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      216 |
      217 |       // Act & Assert
    > 218 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      219 |         status: 500,
      220 |         message: 'Erro interno do servidor',
      221 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:218:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 500 - Internal Server Error â€º deve tratar erro 500 durante processamento de pagamento

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "estimatedDelivery": "2025-01-15T00:00:00Z", "id": "order-123", "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "order-item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "status": "processing", "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "orderNumber": "ORD-2025-001", "paymentMethod": "credit_card", "paymentStatus": "paid", "shipping": 10, "shippingAddress": {"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "id": "address-123", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "zipCode": "01000-000"}, "status": "processing", "subtotal": 49.9, "total": 59.9, "trackingCode": "BR123456789", "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Pedido criado com sucesso", "success": true}

      231 |
      232 |       // Act & Assert
    > 233 |       await expect(cartService.processPayment('order-123', {
          |             ^
      234 |         method: 'credit_card',
      235 |         card_data: {
      236 |           number: '4111111111111111',

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:233:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 500 - Internal Server Error â€º deve tratar erro 500 durante busca de estatÃ­sticas

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      256 |
      257 |       // Act & Assert
    > 258 |       await expect(userService.getStats()).rejects.toMatchObject({
          |             ^
      259 |         status: 500,
      260 |         message: 'Erro interno do servidor',
      261 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:258:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 500 - Internal Server Error â€º deve tratar erro 500 durante cancelamento de pedido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      271 |
      272 |       // Act & Assert
    > 273 |       await expect(orderService.cancelOrder('order-123', 'Cancelamento')).rejects.toMatchObject({
          |             ^
      274 |         status: 500,
      275 |         message: 'Erro interno do servidor',
      276 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:273:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 401 - Unauthorized â€º deve tratar erro 401 para token expirado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      288 |
      289 |       // Act & Assert
    > 290 |       await expect(userService.getProfile()).rejects.toMatchObject({
          |             ^
      291 |         status: 401,
      292 |         message: 'Token expirado ou invÃ¡lido',
      293 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:290:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 401 - Unauthorized â€º deve tratar erro 401 durante busca de pedidos

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      303 |
      304 |       // Act & Assert
    > 305 |       await expect(orderService.getOrders()).rejects.toMatchObject({
          |             ^
      306 |         status: 401,
      307 |         message: 'AutenticaÃ§Ã£o necessÃ¡ria',
      308 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:305:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 401 - Unauthorized â€º deve tratar erro 401 durante adiÃ§Ã£o ao carrinho

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Item adicionado ao carrinho", "success": true}

      318 |
      319 |       // Act & Assert
    > 320 |       await expect(cartService.addToCart('box-123', 1)).rejects.toMatchObject({
          |             ^
      321 |         status: 401,
      322 |         message: 'SessÃ£o expirada',
      323 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:320:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 403 - Forbidden â€º deve tratar erro 403 para acesso negado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      335 |
      336 |       // Act & Assert
    > 337 |       await expect(orderService.getOrderById('order-other-user')).rejects.toMatchObject({
          |             ^
      338 |         status: 403,
      339 |         message: 'Acesso negado',
      340 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:337:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 403 - Forbidden â€º deve tratar erro 403 para cancelamento nÃ£o autorizado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      350 |
      351 |       // Act & Assert
    > 352 |       await expect(orderService.cancelOrder('order-123')).rejects.toMatchObject({
          |             ^
      353 |         status: 403,
      354 |         message: 'VocÃª nÃ£o tem permissÃ£o para cancelar este pedido',
      355 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:352:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 422 - Unprocessable Entity â€º deve tratar erro 422 para dados invÃ¡lidos no perfil

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/new-avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva Santos", "phone": "+5511999887766", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-06T15:00:00Z", "verified": true}, "message": "Perfil atualizado com sucesso", "success": true}

      371 |
      372 |       // Act & Assert
    > 373 |       await expect(userService.updateProfile({
          |             ^
      374 |         name: '',
      375 |         phone: '123',
      376 |         email: 'invalid@email',

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:373:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 422 - Unprocessable Entity â€º deve tratar erro 422 para cupom invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}

      397 |
      398 |       // Act & Assert
    > 399 |       await expect(cartService.applyCoupon('INVALID_COUPON')).rejects.toMatchObject({
          |             ^
      400 |         status: 422,
      401 |         message: 'Cupom invÃ¡lido',
      402 |         errors: {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:399:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 422 - Unprocessable Entity â€º deve tratar erro 422 para avaliaÃ§Ã£o invÃ¡lida

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      418 |
      419 |       // Act & Assert
    > 420 |       await expect(orderService.rateOrder('order-123', 6, 'Bad')).rejects.toMatchObject({
          |             ^
      421 |         status: 422,
      422 |         message: 'Dados invÃ¡lidos',
      423 |         errors: {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:420:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 409 - Conflict â€º deve tratar erro 409 para email jÃ¡ em uso

    ReferenceError: apiClient is not defined

      441 |
      442 |       // Act & Assert
    > 443 |       await expect(apiClient.post('/auth/register', {
          |                    ^
      444 |         name: 'JoÃ£o Silva',
      445 |         email: 'existing@email.com',
      446 |         password: 'password123',

      at Object.apiClient (src/services/__tests__/integration/networkErrors.integration.test.ts:443:20)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 409 - Conflict â€º deve tratar erro 409 para item jÃ¡ favoritado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      462 |
      463 |       // Act & Assert
    > 464 |       await expect(userService.addToFavorites('box-123')).rejects.toMatchObject({
          |             ^
      465 |         status: 409,
      466 |         message: 'Caixa jÃ¡ estÃ¡ nos favoritos',
      467 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:464:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 400 - Bad Request â€º deve tratar erro 400 para produto fora de estoque

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Item adicionado ao carrinho", "success": true}

      481 |
      482 |       // Act & Assert
    > 483 |       await expect(cartService.addToCart('box-out-of-stock', 1)).rejects.toMatchObject({
          |             ^
      484 |         status: 400,
      485 |         message: 'Produto fora de estoque',
      486 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:483:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 400 - Bad Request â€º deve tratar erro 400 para operaÃ§Ã£o invÃ¡lida

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      498 |
      499 |       // Act & Assert
    > 500 |       await expect(orderService.cancelOrder('order-shipped')).rejects.toMatchObject({
          |             ^
      501 |         status: 400,
      502 |         message: 'Pedido jÃ¡ foi enviado e nÃ£o pode ser cancelado',
      503 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:500:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º CenÃ¡rios de recuperaÃ§Ã£o de erro â€º deve falhar silenciosamente em verificaÃ§Ã£o de favorito

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      518 |
      519 |       // Assert
    > 520 |       expect(_result).toBe(false); // Deve retornar false em caso de erro
          |                       ^
      521 |     });
      522 |
      523 |     it('deve tratar mÃºltiplos erros em sequÃªncia', async () => {

      at Object.toBe (src/services/__tests__/integration/networkErrors.integration.test.ts:520:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º CenÃ¡rios de recuperaÃ§Ã£o de erro â€º deve tratar mÃºltiplos erros em sequÃªncia

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      536 |
      537 |       // Act & Assert
    > 538 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      539 |         status: 500,
      540 |         message: 'Erro interno do servidor',
      541 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:538:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º UtilitÃ¡rios de erro â€º deve identificar corretamente tipos de erro

    TypeError: Cannot read properties of undefined (reading 'isNetworkError')

      559 |
      560 |       // Act & Assert
    > 561 |       expect(ApiErrorUtils.isNetworkError(networkError)).toBe(true);
          |                            ^
      562 |       expect(ApiErrorUtils.isValidationError(validationError)).toBe(true);
      563 |       expect(ApiErrorUtils.isAuthError(authError)).toBe(true);
      564 |       expect(ApiErrorUtils.isAuthorizationError(authorizationError)).toBe(true);

      at Object.isNetworkError (src/services/__tests__/integration/networkErrors.integration.test.ts:561:28)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º UtilitÃ¡rios de erro â€º deve retornar mensagens amigÃ¡veis para diferentes tipos de erro

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      576 |
      577 |       // Act & Assert
    > 578 |       expect(ApiErrorUtils.getFriendlyMessage(networkError)).toBe('Erro de conexÃ£o. Verifique sua internet.');
          |                            ^
      579 |       expect(ApiErrorUtils.getFriendlyMessage(serverError)).toBe('Erro interno do servidor. Tente novamente mais tarde.');
      580 |       expect(ApiErrorUtils.getFriendlyMessage(notFoundError)).toBe('Recurso nÃ£o encontrado.');
      581 |       expect(ApiErrorUtils.getFriendlyMessage(authError)).toBe('SessÃ£o expirada. FaÃ§a login novamente.');

      at Object.getFriendlyMessage (src/services/__tests__/integration/networkErrors.integration.test.ts:578:28)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º UtilitÃ¡rios de erro â€º deve formatar erros de validaÃ§Ã£o corretamente

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      597 |
      598 |       // Act
    > 599 |       const formattedErrors = ApiErrorUtils.getValidationErrors(validationError);
          |                                             ^
      600 |
      601 |       // Assert
      602 |       expect(formattedErrors).toEqual({

      at Object.getValidationErrors (src/services/__tests__/integration/networkErrors.integration.test.ts:599:45)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º UtilitÃ¡rios de erro â€º deve retornar objeto vazio para erros nÃ£o-validaÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      612 |
      613 |       // Act
    > 614 |       const formattedErrors = ApiErrorUtils.getValidationErrors(serverError);
          |                                             ^
      615 |
      616 |       // Assert
      617 |       expect(formattedErrors).toEqual({});

      at Object.getValidationErrors (src/services/__tests__/integration/networkErrors.integration.test.ts:614:45)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º CenÃ¡rios de estresse e edge cases â€º deve tratar erro sem mensagem

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      629 |
      630 |       // Act & Assert
    > 631 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      632 |         status: 500,
      633 |         message: expect.any(String),
      634 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:631:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º CenÃ¡rios de estresse e edge cases â€º deve tratar resposta malformada

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      640 |
      641 |       // Act & Assert
    > 642 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      643 |         status: 500,
      644 |       });
      645 |     });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:642:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º CenÃ¡rios de estresse e edge cases â€º deve tratar erro com dados extras

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      658 |
      659 |       // Act & Assert
    > 660 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      661 |         status: 400,
      662 |         message: 'Erro com dados extras',
      663 |         data: expect.objectContaining({

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:660:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/__tests__/useAuthListener.test.ts
  useAuthListener - Keycloak
    InicializaÃ§Ã£o
      âœ“ deve configurar listener do Keycloak Auth ao montar (6 ms)
      âœ“ deve finalizar inicializaÃ§Ã£o apÃ³s verificar estado (2 ms)
    Login de UsuÃ¡rio
      âœ“ deve atualizar Redux state quando usuÃ¡rio faz login (3 ms)
      âœ“ deve mapear dados do usuÃ¡rio corretamente (2 ms)
      âœ“ deve lidar com usuÃ¡rio sem name (usa preferred_username) (2 ms)
      âœ“ deve lidar com usuÃ¡rio sem picture (2 ms)
    Logout de UsuÃ¡rio
      âœ“ deve limpar Redux state quando usuÃ¡rio faz logout (3 ms)
      âœ“ deve finalizar inicializaÃ§Ã£o mesmo sem usuÃ¡rio (5 ms)
    TransiÃ§Ãµes de Estado
      âœ“ deve lidar com login seguido de logout (3 ms)
      âœ• deve lidar com mÃºltiplos logins (troca de usuÃ¡rio) (3 ms)
    Cleanup
      âœ“ deve limpar interval ao desmontar (2 ms)
      âœ“ deve limpar interval apenas uma vez (1 ms)
    Re-render
      âœ“ nÃ£o deve criar novo interval em re-render (2 ms)
    Edge Cases
      âœ“ deve lidar com email null (2 ms)
      âœ“ deve lidar com sub vazio (usa id) (2 ms)
      âœ“ deve lidar com emailVerified false (2 ms)
      âœ“ deve lidar com usuÃ¡rio sem propriedades opcionais (2 ms)
      âœ“ deve lidar com erro ao verificar autenticaÃ§Ã£o (2 ms)
    Logging
      âœ“ deve logar setup inicial (2 ms)
      âœ“ deve logar login de usuÃ¡rio (2 ms)
      âœ“ deve logar logout de usuÃ¡rio (2 ms)
      âœ“ deve logar cleanup (1 ms)
    IntegraÃ§Ã£o com Redux
      âœ“ deve dispatch setUser e finishInitialization para login (2 ms)
      âœ“ deve dispatch setUser(null) e finishInitialization para logout (2 ms)
      âœ“ deve preservar outros campos do state (2 ms)
    Comportamento AssÃ­ncrono
      âœ“ deve lidar com verificaÃ§Ã£o assÃ­ncrona (1 ms)
      âœ“ deve verificar estado periodicamente (1 ms)

  â— useAuthListener - Keycloak â€º TransiÃ§Ãµes de Estado â€º deve lidar com mÃºltiplos logins (troca de usuÃ¡rio)

    expect(received).toBe(expected) // Object.is equality

    Expected: "user2"
    Received: undefined

      327 |
      328 |       state = store.getState();
    > 329 |       expect(state.auth.user?.uid).toBe('user2');
          |                                    ^
      330 |       expect(state.auth.user?.email).toBe('user2@example.com');
      331 |     });
      332 |   });

      at Object.toBe (src/hooks/__tests__/useAuthListener.test.ts:329:36)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

PASS src/utils/__tests__/lazyWithPreload.test.tsx
  lazyWithPreload
    Factory Function
      âœ“ deve criar componente lazy com mÃ©todo preload (1 ms)
      âœ“ deve criar componente lazy sem chamar factory imediatamente
      âœ“ deve retornar tipo correto LazyComponentWithPreload (1 ms)
    MÃ©todo preload()
      âœ“ deve carregar componente quando preload() Ã© chamado (2 ms)
      âœ“ deve retornar promise que resolve com o componente (6 ms)
      âœ“ deve cachear componente apÃ³s primeiro preload() (2 ms)
      âœ“ deve retornar mesma promise em chamadas simultÃ¢neas (101 ms)
      âœ“ deve resolver componente cacheado instantaneamente (101 ms)
    RenderizaÃ§Ã£o do Componente
      âœ“ deve renderizar componente corretamente apÃ³s preload (58 ms)
      âœ“ deve usar componente cacheado quando jÃ¡ foi preloaded (54 ms)
      âœ“ deve carregar componente automaticamente se nÃ£o foi preloaded (53 ms)
    Tratamento de Erros
      âœ“ deve propagar erro quando factory falha no preload (17 ms)
      âœ“ deve propagar erro especÃ­fico da factory (1 ms)
      âœ“ deve cachear promise de erro e retornar mesma promise em retry (1 ms)
    Hook usePreloadComponents
      âœ“ deve prÃ©-carregar todos os componentes fornecidos (2 ms)
      âœ“ deve prÃ©-carregar componentes em paralelo (2 ms)
      âœ“ deve lidar com array vazio gracefully (1 ms)
      âœ“ deve lidar com erros de preload sem crashar (51 ms)
      âœ“ deve re-executar preload quando array de componentes muda (2 ms)
      âœ“ nÃ£o deve re-executar preload quando array nÃ£o muda (1 ms)
    Componente LazyBoundary
      âœ“ deve renderizar children quando carregado (1 ms)
      âœ“ deve usar fallback padrÃ£o "Carregando..." quando nÃ£o fornecido (101 ms)
      âœ“ deve usar fallback customizado quando fornecido (102 ms)
      âœ“ deve aceitar componente complexo como fallback (102 ms)
      âœ“ deve renderizar mÃºltiplos children (2 ms)
      âœ“ deve suportar nested LazyBoundaries (52 ms)
    Testes de IntegraÃ§Ã£o
      âœ“ deve funcionar fluxo completo: preload â†’ render â†’ use cached (55 ms)
      âœ“ deve preload mÃºltiplos componentes e renderizar todos (53 ms)
      âœ“ deve lidar com mix de componentes preloaded e nÃ£o preloaded (108 ms)
    Casos Extremos
      âœ“ deve lidar com factory que retorna null
      âœ“ deve lidar com factory que retorna undefined (1 ms)
      âœ“ deve lidar com LazyBoundary sem children (1 ms)
      âœ“ deve lidar com LazyBoundary com children null
      âœ“ deve manter referÃªncia de preload apÃ³s mÃºltiplas chamadas (2 ms)
    SeguranÃ§a de Tipos
      âœ“ deve manter props do componente no tipo lazy (51 ms)
      âœ“ deve aceitar componentes com diferentes props (53 ms)

PASS src/utils/__tests__/animations.test.ts
  animations
    ANIMATION_CONFIGS
      âœ“ deve conter todas as constantes de duraÃ§Ã£o (2 ms)
      âœ“ deve conter todas as funÃ§Ãµes de easing (1 ms)
      âœ“ deve conter configuraÃ§Ãµes de spring com propriedades corretas (1 ms)
      âœ“ deve conter configuraÃ§Ãµes de bounce spring com propriedades corretas
    fadeAnimation
      âœ“ deve criar fadeIn com configuraÃ§Ã£o padrÃ£o (1 ms)
      âœ“ deve criar fadeIn com duraÃ§Ã£o customizada (1 ms)
      âœ“ deve criar fadeIn com toValue customizado (1 ms)
      âœ“ deve criar fadeOut com configuraÃ§Ã£o padrÃ£o
      âœ“ deve criar fadeOut com parÃ¢metros customizados
    scaleAnimation
      âœ“ deve criar scaleIn com configuraÃ§Ã£o padrÃ£o (1 ms)
      âœ“ deve criar scaleOut com configuraÃ§Ã£o padrÃ£o
      âœ“ deve criar pulse como sequÃªncia de animaÃ§Ãµes (1 ms)
      âœ“ deve criar pulse com escala customizada
      âœ“ deve criar bounce como spring animation (1 ms)
    slideAnimation
      âœ“ deve criar slideInFromRight com configuraÃ§Ã£o padrÃ£o (1 ms)
      âœ“ deve criar slideInFromLeft com configuraÃ§Ã£o padrÃ£o
      âœ“ deve criar slideInFromBottom com configuraÃ§Ã£o padrÃ£o (1 ms)
      âœ“ deve aceitar duraÃ§Ã£o customizada para slide animations (1 ms)
    rotateAnimation
      âœ“ deve criar rotate com configuraÃ§Ã£o padrÃ£o (10 ms)
      âœ“ deve criar rotate com parÃ¢metros customizados (1 ms)
      âœ“ deve criar spin como loop animation (1 ms)
      âœ“ deve criar spin com duraÃ§Ã£o customizada
    combinedAnimations
      âœ“ deve criar fadeInScale como parallel animation (1 ms)
      âœ“ deve criar fadeInScale com duraÃ§Ã£o customizada
      âœ“ deve criar fadeOutScale como parallel animation (1 ms)
      âœ“ deve criar slideInFade como parallel animation (1 ms)
    listAnimations
      âœ“ deve criar staggeredFadeIn para todos os valores (1 ms)
      âœ“ deve criar staggeredFadeIn com parÃ¢metros customizados (1 ms)
      âœ“ deve criar staggeredSlideIn para todos os valores
      âœ“ deve criar staggeredSlideIn com toValue 0
    feedbackAnimations
      âœ“ deve criar success como sequÃªncia de timing + spring (1 ms)
      âœ“ deve criar success com escala 1.2 e depois spring para 1 (1 ms)
      âœ“ deve criar error como sequÃªncia de shake (4 movimentos) (1 ms)
      âœ“ deve criar error com valores alternados (+10, -10, +10, 0) (1 ms)
      âœ“ deve criar loading como loop de sequÃªncia (1 ms)
      âœ“ deve criar loading oscilando entre 1 e 0.3 (1 ms)
    interpolations
      âœ“ deve criar fadeInterpolation com propriedade opacity
      âœ“ deve criar scaleInterpolation com transform scale (1 ms)
      âœ“ deve criar slideFromRightInterpolation com distÃ¢ncia padrÃ£o
      âœ“ deve criar slideFromRightInterpolation com distÃ¢ncia customizada (1 ms)
      âœ“ deve criar slideFromBottomInterpolation com distÃ¢ncia padrÃ£o
      âœ“ deve criar slideFromBottomInterpolation com distÃ¢ncia customizada (1 ms)
      âœ“ deve criar rotateInterpolation de 0deg a 360deg
      âœ“ deve criar shakeInterpolation com translateX direto (1 ms)

PASS src/components/__tests__/BoxCard.test.tsx
  BoxCard
    RenderizaÃ§Ã£o
      âœ“ deve renderizar com props obrigatÃ³rias (6 ms)
      âœ“ deve renderizar o tÃ­tulo corretamente (2 ms)
      âœ“ deve renderizar a categoria (1 ms)
      âœ“ deve renderizar chip de raridade (2 ms)
      âœ“ deve renderizar preÃ§o formatado em BRL (2 ms)
      âœ“ deve renderizar preÃ§o original com desconto (2 ms)
    Variantes
      âœ“ deve renderizar variante compact por padrÃ£o (1 ms)
      âœ“ deve renderizar variante featured com estatÃ­sticas (3 ms)
      âœ“ deve renderizar variante list com descriÃ§Ã£o (38 ms)
      âœ“ deve renderizar tags na variante list (3 ms)
      âœ“ deve limitar tags a 3 na variante list (2 ms)
    Badges
      âœ“ deve renderizar badge NOVO quando is_new Ã© true (9 ms)
      âœ“ deve renderizar badge DESTAQUE quando is_featured Ã© true (2 ms)
      âœ“ deve renderizar badge de desconto quando disponÃ­vel (1 ms)
      âœ“ deve renderizar mÃºltiplos badges simultaneamente (2 ms)
      âœ“ nÃ£o deve renderizar badges quando nÃ£o aplicÃ¡veis (2 ms)
    Indicadores de Estoque
      âœ“ deve exibir indicador de estoque baixo quando <= 5 (1 ms)
      âœ“ deve exibir indicador para cada quantidade baixa (1-5) (7 ms)
      âœ“ nÃ£o deve exibir indicador de estoque baixo quando > 5 (2 ms)
      âœ“ deve exibir overlay de ESGOTADO quando stock Ã© 0 (1 ms)
      âœ“ nÃ£o deve exibir ESGOTADO quando stock > 0 (2 ms)
    Flash Sale
      âœ“ deve renderizar Flash Sale quando ativo (2 ms)
      âœ“ deve exibir preÃ§o de Flash Sale formatado (2 ms)
      âœ“ nÃ£o deve renderizar Flash Sale quando inativo (1 ms)
      âœ“ deve exibir preÃ§o normal quando Flash Sale nÃ£o estÃ¡ disponÃ­vel (2 ms)
    InteraÃ§Ãµes do UsuÃ¡rio
      âœ“ deve chamar onPress quando o card Ã© pressionado (2 ms)
      âœ“ deve renderizar FavoriteButton quando showFavoriteButton Ã© true (2 ms)
      âœ“ nÃ£o deve renderizar FavoriteButton quando showFavoriteButton Ã© false (1 ms)
      âœ“ deve passar boxId correto para FavoriteButton (2 ms)
    Raridade
      âœ“ deve renderizar raridade common corretamente (1 ms)
      âœ“ deve renderizar raridade rare corretamente (1 ms)
      âœ“ deve renderizar raridade epic corretamente (1 ms)
      âœ“ deve renderizar raridade legendary corretamente (1 ms)
    EstatÃ­sticas (Variante Featured)
      âœ“ deve renderizar estatÃ­sticas na variante featured (3 ms)
      âœ“ nÃ£o deve renderizar estatÃ­sticas em variante compact (2 ms)
      âœ“ nÃ£o deve renderizar estatÃ­sticas em variante list (1 ms)
    Casos Extremos
      âœ“ deve lidar com tÃ­tulo muito longo (truncate) (1 ms)
      âœ“ deve lidar com preÃ§o zero (1 ms)
      âœ“ deve lidar com preÃ§o muito alto (7 ms)
      âœ“ deve lidar com array de tags vazio (1 ms)
      âœ“ deve lidar com imagem ausente gracefully (2 ms)
      âœ“ deve lidar com categoria sem nome (1 ms)
      âœ“ deve lidar com estatÃ­sticas zeradas (2 ms)
      âœ“ deve aplicar style customizado passado via props (1 ms)
    FormataÃ§Ã£o de PreÃ§o
      âœ“ deve formatar preÃ§o com centavos (1 ms)
      âœ“ deve formatar preÃ§o inteiro com ,00 (2 ms)
      âœ“ deve formatar preÃ§o com milhares (1 ms)
      âœ“ deve exibir preÃ§o original quando presente e maior que preÃ§o atual (1 ms)
      âœ“ nÃ£o deve exibir preÃ§o original quando ausente (1 ms)
      âœ“ nÃ£o deve exibir preÃ§o original quando igual ao preÃ§o atual (1 ms)

PASS src/utils/__tests__/lazyLoading.test.tsx
  lazyLoading
    withLazyLoading() HOC
      âœ“ deve criar componente lazy com Suspense (55 ms)
      âœ“ deve mostrar fallback padrÃ£o enquanto carrega (51 ms)
      âœ“ deve usar fallback customizado se fornecido (53 ms)
      âœ“ deve renderizar componente apÃ³s carregamento (51 ms)
      âœ“ deve incluir ErrorBoundary no wrapper (6 ms)
      âœ“ deve passar props e ref corretamente (55 ms)
    withLazyScreen() HOC
      âœ“ deve criar screen lazy com skeleton padrÃ£o (51 ms)
      âœ“ deve usar skeleton tipo "boxList" quando especificado (52 ms)
      âœ“ deve usar skeleton tipo "cart" quando especificado (52 ms)
      âœ“ deve usar skeleton tipo "profile" quando especificado (52 ms)
      âœ“ deve incluir ErrorBoundary no wrapper de screen (2 ms)
      âœ“ deve passar navigation props corretamente (52 ms)
    preloadCriticalComponents()
      âœ“ deve fazer preload de componentes crÃ­ticos (1 ms)
      âœ“ deve tratar erros no preload graciosamente
      âœ“ deve retornar promise resolvida (1 ms)
    preloadByRoute()
      âœ“ deve fazer preload de componentes da rota Shop (1 ms)
      âœ“ deve fazer preload de componentes da rota Cart
      âœ“ deve fazer preload de componentes da rota Profile
      âœ“ deve lidar com rotas desconhecidas sem erro (1 ms)
      âœ“ deve retornar promise para qualquer rota
    useSmartPreload() hook
      âœ“ deve retornar funÃ§Ã£o preloadForUser
      âœ“ deve fazer preload baseado em comportamento do usuÃ¡rio (1 ms)
      âœ“ deve limitar preload a 3 telas mais relevantes (1 ms)
      âœ“ deve retornar funÃ§Ã£o async
      âœ“ deve ser memoizado com useCallback (1 ms)
    LazyScreens exports
      âœ“ deve exportar todas as telas do Shop
      âœ“ deve exportar telas de Cart e Checkout (1 ms)
      âœ“ deve exportar telas de usuÃ¡rio
      âœ“ deve exportar telas especiais (1 ms)
    LazyComponents exports
      âœ“ deve exportar componentes complexos (1 ms)
      âœ“ deve exportar componentes de animaÃ§Ã£o
    LazyErrorBoundary integraÃ§Ã£o
      âœ“ deve integrar ErrorBoundary com withLazyLoading (2 ms)
      âœ“ deve integrar ErrorBoundary com withLazyScreen (2 ms)
      âœ“ deve permitir renderizaÃ§Ã£o normal de children (51 ms)
    SkeletonFallback component
      âœ“ deve renderizar skeleton "profile" corretamente (1 ms)
      âœ“ deve renderizar skeleton "boxList" com 6 itens
      âœ“ deve renderizar skeleton "cart" com 3 itens (1 ms)
      âœ“ deve usar DefaultFallback para tipo desconhecido
    DefaultFallback component
      âœ“ deve renderizar ActivityIndicator

PASS src/services/__tests__/payment.test.ts
  Payment Service Tests
    processPayment - PIX
      âœ“ deve processar pagamento PIX com sucesso (1 ms)
      âœ“ deve tratar erro de geraÃ§Ã£o PIX QR Code (1 ms)
      âœ“ deve validar que PIX retorna QR Code (1 ms)
    processPayment - CartÃ£o de CrÃ©dito
      âœ“ deve processar pagamento cartÃ£o de crÃ©dito com sucesso (1 ms)
      âœ“ deve processar pagamento parcelado (12x)
      âœ“ deve tratar erro de cartÃ£o recusado (1 ms)
      âœ“ deve tratar erro de cartÃ£o expirado
      âœ“ deve tratar erro de CVV invÃ¡lido (1 ms)
      âœ“ deve tratar erro de dados de cartÃ£o ausentes
    processPayment - Boleto
      âœ“ deve processar pagamento boleto com sucesso (1 ms)
      âœ“ deve validar que boleto retorna URL de download (1 ms)
      âœ“ deve tratar erro de geraÃ§Ã£o de boleto (1 ms)
    checkPaymentStatus
      âœ“ deve verificar status de pagamento pendente
      âœ“ deve verificar status de pagamento pago (1 ms)
      âœ“ deve verificar status de pagamento falhado
      âœ“ deve verificar status de pagamento reembolsado
      âœ“ deve tratar erro ao verificar status de pagamento (1 ms)
    Edge Cases e ValidaÃ§Ãµes
      âœ“ deve tratar timeout durante processamento
      âœ“ deve tratar erro de rede (1 ms)
      âœ“ deve tratar resposta malformada do backend
      âœ“ deve tratar erro 401 (nÃ£o autenticado)
      âœ“ deve tratar erro 403 (sem permissÃ£o) (1 ms)
      âœ“ deve tratar erro 500 (erro do servidor)
    IntegraÃ§Ã£o Pagar.me - CenÃ¡rios Reais
      âœ“ deve simular fluxo completo PIX: criaÃ§Ã£o â†’ verificaÃ§Ã£o â†’ pagamento (1 ms)
      âœ“ deve simular fluxo completo CartÃ£o: tentativa â†’ recusa â†’ sucesso (1 ms)

PASS src/services/__tests__/orderService.test.ts
  OrderService
    getOrders
      âœ“ deve buscar pedidos com paginaÃ§Ã£o padrÃ£o (2 ms)
      âœ“ deve buscar pedidos com filtros personalizados (1 ms)
      âœ“ deve tratar erro ao buscar pedidos (13 ms)
    getOrderById
      âœ“ deve buscar detalhes de um pedido especÃ­fico
      âœ“ deve tratar erro ao buscar pedido inexistente
    cancelOrder
      âœ“ deve cancelar pedido sem motivo (1 ms)
      âœ“ deve cancelar pedido com motivo (1 ms)
      âœ“ deve tratar erro ao cancelar pedido nÃ£o cancelÃ¡vel
    reorderOrder
      âœ“ deve recomprar pedido adicionando itens ao carrinho (1 ms)
      âœ“ deve tratar erro quando produtos nÃ£o estÃ£o disponÃ­veis (1 ms)
    trackOrder
      âœ“ deve rastrear pedido com sucesso
      âœ“ deve tratar erro quando rastreamento nÃ£o disponÃ­vel (1 ms)
    rateOrder
      âœ“ deve avaliar pedido apenas com nota (1 ms)
      âœ“ deve avaliar pedido com nota e comentÃ¡rio
      âœ“ deve validar nota invÃ¡lida (1 ms)
    getOrderStatistics
      âœ“ deve buscar estatÃ­sticas de pedidos (1 ms)
    generateInvoice
      âœ“ deve gerar nota fiscal para pedido
      âœ“ deve tratar erro quando nota fiscal jÃ¡ existe (1 ms)
    downloadReceipt
      âœ“ deve baixar comprovante de pedido (1 ms)
      âœ“ deve tratar erro ao baixar comprovante (1 ms)
    reportIssue
      âœ“ deve reportar problema com pedido
      âœ“ deve aceitar anexos ao reportar problema (1 ms)
    getDeliveryStatus
      âœ“ deve buscar status de entrega
    confirmDelivery
      âœ“ deve confirmar recebimento do pedido
    requestReturn
      âœ“ deve solicitar devoluÃ§Ã£o de pedido (1 ms)
    getStatusHistory
      âœ“ deve buscar histÃ³rico de status do pedido
    updateDeliveryAddress
      âœ“ deve atualizar endereÃ§o de entrega (1 ms)
    rescheduleDelivery
      âœ“ deve reagendar entrega

FAIL src/services/__tests__/mfaService.test.ts
  MFAService
    getStatus()
      âœ• deve obter status MFA com sucesso quando autenticado
      âœ• deve receber status MFA completo com mfaEnabled, mfaType e credentials (1 ms)
      âœ• deve lanÃ§ar erro quando usuÃ¡rio nÃ£o estÃ¡ autenticado (3 ms)
      âœ• deve tratar erro HTTP 404 corretamente
      âœ• deve tratar erro HTTP 500 corretamente (1 ms)
      âœ• deve tratar erro de rede graciosamente
    enable()
      âœ• deve habilitar MFA com sucesso e receber instruÃ§Ãµes da prÃ³xima aÃ§Ã£o
      âœ• deve enviar requisiÃ§Ã£o POST para o endpoint correto
      âœ• deve verificar cabeÃ§alho Authorization com Bearer token
      âœ• deve lanÃ§ar erro quando usuÃ¡rio nÃ£o estÃ¡ autenticado (1 ms)
      âœ• deve tratar erros HTTP durante habilitaÃ§Ã£o
    disable()
      âœ• deve desabilitar MFA com sucesso usando credentialId
      âœ• deve enviar credentialId nos dados da requisiÃ§Ã£o
      âœ• deve verificar requisiÃ§Ã£o DELETE com dados corretos (1 ms)
      âœ• deve lanÃ§ar erro quando usuÃ¡rio nÃ£o estÃ¡ autenticado (1 ms)
      âœ• deve tratar erros HTTP durante desabilitaÃ§Ã£o
    needsSetup()
      âœ• deve retornar true quando MFA nÃ£o estÃ¡ habilitado (necessita setup)
      âœ• deve retornar false quando MFA jÃ¡ estÃ¡ habilitado
      âœ• deve retornar false em caso de erro (degradaÃ§Ã£o graciosa)
      âœ• deve tratar erros de autenticaÃ§Ã£o graciosamente (1 ms)
    SeguranÃ§a - VerificaÃ§Ãµes de Token
      âœ“ deve sempre verificar autenticaÃ§Ã£o antes de qualquer operaÃ§Ã£o (1 ms)
      âœ• deve passar credentialId de forma segura na requisiÃ§Ã£o
      âœ• nÃ£o deve vazar dados sensÃ­veis em mensagens de erro

  â— MFAService â€º getStatus() â€º deve obter status MFA com sucesso quando autenticado

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      113 |
      114 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 115 |       mockHttpClient.get.mockResolvedValue({ data: mockStatus } as any);
          |                          ^
      116 |
      117 |       // Act
      118 |       const result = await mfaService.getStatus();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:115:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º getStatus() â€º deve receber status MFA completo com mfaEnabled, mfaType e credentials

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      154 |
      155 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 156 |       mockHttpClient.get.mockResolvedValue({ data: mockStatus } as any);
          |                          ^
      157 |
      158 |       // Act
      159 |       const result = await mfaService.getStatus();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:156:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º getStatus() â€º deve lanÃ§ar erro quando usuÃ¡rio nÃ£o estÃ¡ autenticado

    expect(received).not.toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

      173 |       // Act & Assert
      174 |       await expect(mfaService.getStatus()).rejects.toThrow('User not authenticated');
    > 175 |       expect(mockHttpClient.get).not.toHaveBeenCalled();
          |                                      ^
      176 |     });
      177 |
      178 |     it('deve tratar erro HTTP 404 corretamente', async () => {

      at Object.toHaveBeenCalled (src/services/__tests__/mfaService.test.ts:175:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— MFAService â€º getStatus() â€º deve tratar erro HTTP 404 corretamente

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      187 |
      188 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 189 |       mockHttpClient.get.mockRejectedValue(mockError);
          |                          ^
      190 |
      191 |       // Act & Assert
      192 |       await expect(mfaService.getStatus()).rejects.toEqual(mockError);

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:189:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º getStatus() â€º deve tratar erro HTTP 500 corretamente

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      205 |
      206 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 207 |       mockHttpClient.get.mockRejectedValue(mockError);
          |                          ^
      208 |
      209 |       // Act & Assert
      210 |       await expect(mfaService.getStatus()).rejects.toEqual(mockError);

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:207:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º getStatus() â€º deve tratar erro de rede graciosamente

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      218 |
      219 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 220 |       mockHttpClient.get.mockRejectedValue(networkError);
          |                          ^
      221 |
      222 |       // Act & Assert
      223 |       await expect(mfaService.getStatus()).rejects.toThrow('Network request failed');

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:220:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º enable() â€º deve habilitar MFA com sucesso e receber instruÃ§Ãµes da prÃ³xima aÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      237 |
      238 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 239 |       mockHttpClient.post.mockResolvedValue({ data: mockResponse } as any);
          |                           ^
      240 |
      241 |       // Act
      242 |       const result = await mfaService.enable();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:239:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º enable() â€º deve enviar requisiÃ§Ã£o POST para o endpoint correto

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      255 |
      256 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 257 |       mockHttpClient.post.mockResolvedValue({ data: mockResponse } as any);
          |                           ^
      258 |
      259 |       // Act
      260 |       await mfaService.enable();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:257:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º enable() â€º deve verificar cabeÃ§alho Authorization com Bearer token

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      278 |
      279 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 280 |       mockHttpClient.post.mockResolvedValue({ data: mockResponse } as any);
          |                           ^
      281 |
      282 |       // Act
      283 |       await mfaService.enable();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:280:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º enable() â€º deve lanÃ§ar erro quando usuÃ¡rio nÃ£o estÃ¡ autenticado

    expect(received).not.toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

      294 |       // Act & Assert
      295 |       await expect(mfaService.enable()).rejects.toThrow('User not authenticated');
    > 296 |       expect(mockHttpClient.post).not.toHaveBeenCalled();
          |                                       ^
      297 |     });
      298 |
      299 |     it('deve tratar erros HTTP durante habilitaÃ§Ã£o', async () => {

      at Object.toHaveBeenCalled (src/services/__tests__/mfaService.test.ts:296:39)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— MFAService â€º enable() â€º deve tratar erros HTTP durante habilitaÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      308 |
      309 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 310 |       mockHttpClient.post.mockRejectedValue(mockError);
          |                           ^
      311 |
      312 |       // Act & Assert
      313 |       await expect(mfaService.enable()).rejects.toEqual(mockError);

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:310:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º disable() â€º deve desabilitar MFA com sucesso usando credentialId

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      328 |
      329 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 330 |       mockHttpClient.delete.mockResolvedValue({ data: mockResponse } as any);
          |                             ^
      331 |
      332 |       // Act
      333 |       const result = await mfaService.disable(credentialId);

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:330:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º disable() â€º deve enviar credentialId nos dados da requisiÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      346 |
      347 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 348 |       mockHttpClient.delete.mockResolvedValue({ data: mockResponse } as any);
          |                             ^
      349 |
      350 |       // Act
      351 |       await mfaService.disable(credentialId);

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:348:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º disable() â€º deve verificar requisiÃ§Ã£o DELETE com dados corretos

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      370 |
      371 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 372 |       mockHttpClient.delete.mockResolvedValue({ data: mockResponse } as any);
          |                             ^
      373 |
      374 |       // Act
      375 |       await mfaService.disable(credentialId);

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:372:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º disable() â€º deve lanÃ§ar erro quando usuÃ¡rio nÃ£o estÃ¡ autenticado

    expect(received).not.toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

      389 |       // Act & Assert
      390 |       await expect(mfaService.disable(credentialId)).rejects.toThrow('User not authenticated');
    > 391 |       expect(mockHttpClient.delete).not.toHaveBeenCalled();
          |                                         ^
      392 |     });
      393 |
      394 |     it('deve tratar erros HTTP durante desabilitaÃ§Ã£o', async () => {

      at Object.toHaveBeenCalled (src/services/__tests__/mfaService.test.ts:391:41)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— MFAService â€º disable() â€º deve tratar erros HTTP durante desabilitaÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      404 |
      405 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 406 |       mockHttpClient.delete.mockRejectedValue(mockError);
          |                             ^
      407 |
      408 |       // Act & Assert
      409 |       await expect(mfaService.disable(credentialId)).rejects.toEqual(mockError);

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:406:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º needsSetup() â€º deve retornar true quando MFA nÃ£o estÃ¡ habilitado (necessita setup)

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      423 |
      424 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 425 |       mockHttpClient.get.mockResolvedValue({ data: mockStatus } as any);
          |                          ^
      426 |
      427 |       // Act
      428 |       const result = await mfaService.needsSetup();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:425:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º needsSetup() â€º deve retornar false quando MFA jÃ¡ estÃ¡ habilitado

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      439 |
      440 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 441 |       mockHttpClient.get.mockResolvedValue({ data: mockStatus } as any);
          |                          ^
      442 |
      443 |       // Act
      444 |       const result = await mfaService.needsSetup();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:441:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º needsSetup() â€º deve retornar false em caso de erro (degradaÃ§Ã£o graciosa)

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      454 |
      455 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 456 |       mockHttpClient.get.mockRejectedValue(mockError);
          |                          ^
      457 |
      458 |       // Act
      459 |       const result = await mfaService.needsSetup();

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:456:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º needsSetup() â€º deve tratar erros de autenticaÃ§Ã£o graciosamente

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      473 |       // Assert
      474 |       expect(result).toBe(false);
    > 475 |       expect(console.error).toHaveBeenCalled();
          |                             ^
      476 |     });
      477 |   });
      478 |

      at Object.toHaveBeenCalled (src/services/__tests__/mfaService.test.ts:475:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— MFAService â€º SeguranÃ§a - VerificaÃ§Ãµes de Token â€º deve passar credentialId de forma segura na requisiÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      506 |
      507 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 508 |       mockHttpClient.delete.mockResolvedValue({ data: mockResponse } as any);
          |                             ^
      509 |
      510 |       // Act
      511 |       await mfaService.disable(sensitiveCredentialId);

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:508:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º SeguranÃ§a - VerificaÃ§Ãµes de Token â€º nÃ£o deve vazar dados sensÃ­veis em mensagens de erro

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      528 |
      529 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 530 |       mockHttpClient.get.mockRejectedValue(mockError);
          |                          ^
      531 |
      532 |       // Act
      533 |       try {

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:530:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/test/integration/boxOpening.integration.test.tsx
  Box Opening Integration Tests
    Complete Box Opening Flow
      âœ• completes full box opening flow successfully (1 ms)
      âœ• tracks detailed animation events (1 ms)
      âœ• handles real-time updates during opening
    Error Handling
      âœ• handles network errors gracefully (1 ms)
      âœ• handles API timeout errors
      âœ• handles insufficient funds error
      âœ• handles box unavailable error
      âœ• retries failed request successfully
    State Management Integration
      âœ• properly manages loading states (1 ms)
      âœ• updates user profile after successful opening
      âœ• persists box opening history (1 ms)
    Performance Considerations
      âœ• should not cause memory leaks during animation
      âœ• should handle rapid state changes (1 ms)

  â— Box Opening Integration Tests â€º Complete Box Opening Flow â€º completes full box opening flow successfully

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Complete Box Opening Flow â€º tracks detailed animation events

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Complete Box Opening Flow â€º handles real-time updates during opening

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Error Handling â€º handles network errors gracefully

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Error Handling â€º handles API timeout errors

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Error Handling â€º handles insufficient funds error

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Error Handling â€º handles box unavailable error

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Error Handling â€º retries failed request successfully

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º State Management Integration â€º properly manages loading states

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º State Management Integration â€º updates user profile after successful opening

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º State Management Integration â€º persists box opening history

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Performance Considerations â€º should not cause memory leaks during animation

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Performance Considerations â€º should handle rapid state changes

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

FAIL src/services/__tests__/httpClient.test.ts
  HttpClient
    Initialization & Configuration
      âœ• deve criar instÃ¢ncia do HttpClient com baseURL correta (2 ms)
      âœ• deve configurar headers padrÃ£o (Content-Type e Accept) (1 ms)
      âœ• deve configurar timeout correto (1 ms)
      âœ• deve configurar interceptors de request e response (1 ms)
    HTTP Methods
      âœ• deve executar requisiÃ§Ã£o GET com sucesso (1 ms)
      âœ• deve executar requisiÃ§Ã£o POST com dados (1 ms)
      âœ• deve executar requisiÃ§Ã£o PUT com dados (1 ms)
      âœ• deve executar requisiÃ§Ã£o PATCH com dados (1 ms)
      âœ• deve executar requisiÃ§Ã£o DELETE com sucesso (1 ms)
      âœ• deve retornar AxiosResponse completo (nÃ£o apenas .data) (1 ms)
    Request Interceptor
      âœ• deve adicionar header Authorization quando token estiver definido (1 ms)
      âœ• nÃ£o deve adicionar header Authorization quando token nÃ£o estiver definido (1 ms)
      âœ• deve adicionar metadata.startTime para rastreamento de performance (1 ms)
      âœ• deve rejeitar promise em caso de erro no interceptor (1 ms)
    Response Interceptor - Success
      âœ• deve rastrear latÃªncia da API com analyticsService (1 ms)
      âœ• deve rastrear chamada da API com analyticsService
      âœ• deve calcular tempo de resposta corretamente
      âœ• deve extrair endpoint e method corretamente do config
      âœ• deve retornar response inalterado (1 ms)
    Response Interceptor - Error
      âœ• deve rastrear latÃªncia da API mesmo em caso de erro (1 ms)
      âœ• deve rastrear erro com analyticsService (1 ms)
      âœ• deve limpar token em caso de erro 401 (1 ms)
      âœ• deve lidar com erro sem config (1 ms)
      âœ• deve rejeitar promise com erro (1 ms)
    Token Management
      âœ• deve definir token de autenticaÃ§Ã£o
      âœ• deve limpar token quando definido como null
      âœ• deve adicionar token Ã s requisiÃ§Ãµes subsequentes

  â— HttpClient â€º Initialization & Configuration â€º deve criar instÃ¢ncia do HttpClient com baseURL correta

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"baseURL": "https://api.test.com", "headers": {"Accept": "application/json", "Content-Type": "application/json"}, "timeout": 30000}

    Number of calls: 0

      80 |     it('deve criar instÃ¢ncia do HttpClient com baseURL correta', () => {
      81 |       // Verificar
    > 82 |       expect(mockedAxios.create).toHaveBeenCalledWith({
         |                                  ^
      83 |         baseURL: 'https://api.test.com',
      84 |         timeout: 30000,
      85 |         headers: {

      at Object.toHaveBeenCalledWith (src/services/__tests__/httpClient.test.ts:82:34)

  â— HttpClient â€º Initialization & Configuration â€º deve configurar headers padrÃ£o (Content-Type e Accept)

    TypeError: Cannot read properties of undefined (reading '0')

      91 |
      92 |     it('deve configurar headers padrÃ£o (Content-Type e Accept)', () => {
    > 93 |       const createCall = (mockedAxios.create as jest.Mock).mock.calls[0][0];
         |                                                                         ^
      94 |       expect(createCall.headers['Content-Type']).toBe('application/json');
      95 |       expect(createCall.headers['Accept']).toBe('application/json');
      96 |     });

      at Object.<anonymous> (src/services/__tests__/httpClient.test.ts:93:73)

  â— HttpClient â€º Initialization & Configuration â€º deve configurar timeout correto

    TypeError: Cannot read properties of undefined (reading '0')

       97 |
       98 |     it('deve configurar timeout correto', () => {
    >  99 |       const createCall = (mockedAxios.create as jest.Mock).mock.calls[0][0];
          |                                                                         ^
      100 |       expect(createCall.timeout).toBe(30000);
      101 |     });
      102 |

      at Object.<anonymous> (src/services/__tests__/httpClient.test.ts:99:73)

  â— HttpClient â€º Initialization & Configuration â€º deve configurar interceptors de request e response

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      102 |
      103 |     it('deve configurar interceptors de request e response', () => {
    > 104 |       expect(mockAxiosInstance.interceptors.request.use).toHaveBeenCalled();
          |                                                          ^
      105 |       expect(mockAxiosInstance.interceptors.response.use).toHaveBeenCalled();
      106 |     });
      107 |   });

      at Object.toHaveBeenCalled (src/services/__tests__/httpClient.test.ts:104:58)

  â— HttpClient â€º HTTP Methods â€º deve executar requisiÃ§Ã£o GET com sucesso

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/users/123", undefined

    Number of calls: 0

      121 |       const result = await httpClient.get('/users/123');
      122 |
    > 123 |       expect(mockAxiosInstance.get).toHaveBeenCalledWith('/users/123', undefined);
          |                                     ^
      124 |       expect(result).toEqual(mockResponse);
      125 |       expect(result.data).toEqual({ id: '123', name: 'Test' });
      126 |     });

      at Object.toHaveBeenCalledWith (src/services/__tests__/httpClient.test.ts:123:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— HttpClient â€º HTTP Methods â€º deve executar requisiÃ§Ã£o POST com dados

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/users", {"email": "test@test.com", "name": "New User"}, undefined

    Number of calls: 0

      140 |       const result = await httpClient.post('/users', postData);
      141 |
    > 142 |       expect(mockAxiosInstance.post).toHaveBeenCalledWith('/users', postData, undefined);
          |                                      ^
      143 |       expect(result).toEqual(mockResponse);
      144 |     });
      145 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/httpClient.test.ts:142:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— HttpClient â€º HTTP Methods â€º deve executar requisiÃ§Ã£o PUT com dados

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/users/123", {"name": "Updated User"}, undefined

    Number of calls: 0

      158 |       const result = await httpClient.put('/users/123', putData);
      159 |
    > 160 |       expect(mockAxiosInstance.put).toHaveBeenCalledWith('/users/123', putData, undefined);
          |                                     ^
      161 |       expect(result).toEqual(mockResponse);
      162 |     });
      163 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/httpClient.test.ts:160:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— HttpClient â€º HTTP Methods â€º deve executar requisiÃ§Ã£o PATCH com dados

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/users/123", {"name": "Patched User"}, undefined

    Number of calls: 0

      176 |       const result = await httpClient.patch('/users/123', patchData);
      177 |
    > 178 |       expect(mockAxiosInstance.patch).toHaveBeenCalledWith('/users/123', patchData, undefined);
          |                                       ^
      179 |       expect(result).toEqual(mockResponse);
      180 |     });
      181 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/httpClient.test.ts:178:39)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— HttpClient â€º HTTP Methods â€º deve executar requisiÃ§Ã£o DELETE com sucesso

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/users/123", undefined

    Number of calls: 0

      193 |       const result = await httpClient.delete('/users/123');
      194 |
    > 195 |       expect(mockAxiosInstance.delete).toHaveBeenCalledWith('/users/123', undefined);
          |                                        ^
      196 |       expect(result).toEqual(mockResponse);
      197 |     });
      198 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/httpClient.test.ts:195:40)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— HttpClient â€º HTTP Methods â€º deve retornar AxiosResponse completo (nÃ£o apenas .data)

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: undefined

      211 |
      212 |       // Verificar que retorna objeto completo com status, headers, etc
    > 213 |       expect(result.status).toBe(200);
          |                             ^
      214 |       expect(result.statusText).toBe('OK');
      215 |       expect(result.headers).toBeDefined();
      216 |       expect(result.data).toEqual({ id: '123' });

      at Object.toBe (src/services/__tests__/httpClient.test.ts:213:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— HttpClient â€º Request Interceptor â€º deve adicionar header Authorization quando token estiver definido

    TypeError: requestInterceptorOnFulfilled is not a function

      230 |
      231 |       // Executar interceptor
    > 232 |       const result = requestInterceptorOnFulfilled(config);
          |                      ^
      233 |
      234 |       // Verificar que token foi adicionado
      235 |       expect(result.headers.Authorization).toBe('Bearer test-token-123');

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:232:22)

  â— HttpClient â€º Request Interceptor â€º nÃ£o deve adicionar header Authorization quando token nÃ£o estiver definido

    TypeError: requestInterceptorOnFulfilled is not a function

      245 |       };
      246 |
    > 247 |       const result = requestInterceptorOnFulfilled(config);
          |                      ^
      248 |
      249 |       expect(result.headers.Authorization).toBeUndefined();
      250 |     });

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:247:22)

  â— HttpClient â€º Request Interceptor â€º deve adicionar metadata.startTime para rastreamento de performance

    TypeError: requestInterceptorOnFulfilled is not a function

      259 |       };
      260 |
    > 261 |       const result = requestInterceptorOnFulfilled(config);
          |                      ^
      262 |
      263 |       expect(result.metadata).toBeDefined();
      264 |       expect(result.metadata.startTime).toBe(mockDate);

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:261:22)

  â— HttpClient â€º Request Interceptor â€º deve rejeitar promise em caso de erro no interceptor

    TypeError: requestInterceptorOnRejected is not a function

      268 |       const error = new Error('Request failed');
      269 |
    > 270 |       await expect(requestInterceptorOnRejected(error)).rejects.toThrow('Request failed');
          |                    ^
      271 |     });
      272 |   });
      273 |

      at Object.requestInterceptorOnRejected (src/services/__tests__/httpClient.test.ts:270:20)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HttpClient â€º Response Interceptor - Success â€º deve rastrear latÃªncia da API com analyticsService

    TypeError: responseInterceptorOnFulfilled is not a function

      292 |       };
      293 |
    > 294 |       const result = responseInterceptorOnFulfilled(mockResponse);
          |                      ^
      295 |
      296 |       expect(analyticsService.trackApiLatency).toHaveBeenCalledWith(
      297 |         '/test',

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:294:22)

  â— HttpClient â€º Response Interceptor - Success â€º deve rastrear chamada da API com analyticsService

    TypeError: responseInterceptorOnFulfilled is not a function

      317 |       };
      318 |
    > 319 |       responseInterceptorOnFulfilled(response);
          |       ^
      320 |
      321 |       expect(analyticsService.trackApiCall).toHaveBeenCalledWith(
      322 |         '/users',

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:319:7)

  â— HttpClient â€º Response Interceptor - Success â€º deve calcular tempo de resposta corretamente

    TypeError: responseInterceptorOnFulfilled is not a function

      341 |       };
      342 |
    > 343 |       responseInterceptorOnFulfilled(response);
          |       ^
      344 |
      345 |       // Tempo de resposta = 2500 - 1000 = 1500ms
      346 |       expect(analyticsService.trackApiLatency).toHaveBeenCalledWith(

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:343:7)

  â— HttpClient â€º Response Interceptor - Success â€º deve extrair endpoint e method corretamente do config

    TypeError: responseInterceptorOnFulfilled is not a function

      365 |       };
      366 |
    > 367 |       responseInterceptorOnFulfilled(response);
          |       ^
      368 |
      369 |       expect(analyticsService.trackApiLatency).toHaveBeenCalledWith(
      370 |         '/api/v1/boxes',

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:367:7)

  â— HttpClient â€º Response Interceptor - Success â€º deve retornar response inalterado

    TypeError: responseInterceptorOnFulfilled is not a function

      390 |       };
      391 |
    > 392 |       const result = responseInterceptorOnFulfilled(mockResponse);
          |                      ^
      393 |
      394 |       expect(result).toEqual(mockResponse);
      395 |       expect(result.data).toEqual({ id: '123', name: 'Test' });

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:392:22)

  â— HttpClient â€º Response Interceptor - Error â€º deve rastrear latÃªncia da API mesmo em caso de erro

    TypeError: Cannot read properties of undefined (reading 'trackApiLatency')

      421 |       }
      422 |
    > 423 |       expect(analyticsService.trackApiLatency).toHaveBeenCalled();
          |                               ^
      424 |     });
      425 |
      426 |     it('deve rastrear erro com analyticsService', async () => {

      at Object.trackApiLatency (src/services/__tests__/httpClient.test.ts:423:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HttpClient â€º Response Interceptor - Error â€º deve rastrear erro com analyticsService

    TypeError: Cannot read properties of undefined (reading 'trackError')

      443 |       }
      444 |
    > 445 |       expect(analyticsService.trackError).toHaveBeenCalledWith(
          |                               ^
      446 |         expect.any(Error),
      447 |         'http_client'
      448 |       );

      at Object.trackError (src/services/__tests__/httpClient.test.ts:445:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HttpClient â€º Response Interceptor - Error â€º deve limpar token em caso de erro 401

    TypeError: requestInterceptorOnFulfilled is not a function

      475 |       // mas podemos verificar atravÃ©s de uma nova request
      476 |       const config: any = { headers: {} };
    > 477 |       const result = requestInterceptorOnFulfilled(config);
          |                      ^
      478 |       expect(result.headers.Authorization).toBeUndefined();
      479 |     });
      480 |

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:477:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HttpClient â€º Response Interceptor - Error â€º deve lidar com erro sem config

    TypeError: responseInterceptorOnRejected is not a function

      487 |       };
      488 |
    > 489 |       await expect(responseInterceptorOnRejected(error)).rejects.toEqual(error);
          |                    ^
      490 |
      491 |       // NÃ£o deve chamar trackApiLatency quando nÃ£o hÃ¡ config
      492 |       expect(analyticsService.trackApiLatency).not.toHaveBeenCalled();

      at Object.responseInterceptorOnRejected (src/services/__tests__/httpClient.test.ts:489:20)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HttpClient â€º Response Interceptor - Error â€º deve rejeitar promise com erro

    TypeError: responseInterceptorOnRejected is not a function

      506 |       };
      507 |
    > 508 |       await expect(responseInterceptorOnRejected(error)).rejects.toEqual(error);
          |                    ^
      509 |     });
      510 |   });
      511 |

      at Object.responseInterceptorOnRejected (src/services/__tests__/httpClient.test.ts:508:20)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HttpClient â€º Token Management â€º deve definir token de autenticaÃ§Ã£o

    TypeError: requestInterceptorOnFulfilled is not a function

      515 |
      516 |       const config: any = { headers: {} };
    > 517 |       const result = requestInterceptorOnFulfilled(config);
          |                      ^
      518 |
      519 |       expect(result.headers.Authorization).toBe('Bearer new-token-456');
      520 |     });

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:517:22)

  â— HttpClient â€º Token Management â€º deve limpar token quando definido como null

    TypeError: requestInterceptorOnFulfilled is not a function

      525 |
      526 |       const config: any = { headers: {} };
    > 527 |       const result = requestInterceptorOnFulfilled(config);
          |                      ^
      528 |
      529 |       expect(result.headers.Authorization).toBeUndefined();
      530 |     });

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:527:22)

  â— HttpClient â€º Token Management â€º deve adicionar token Ã s requisiÃ§Ãµes subsequentes

    TypeError: requestInterceptorOnFulfilled is not a function

      535 |       // Primeira requisiÃ§Ã£o
      536 |       const config1: any = { headers: {} };
    > 537 |       const result1 = requestInterceptorOnFulfilled(config1);
          |                       ^
      538 |       expect(result1.headers.Authorization).toBe('Bearer persistent-token');
      539 |
      540 |       // Segunda requisiÃ§Ã£o

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:537:23)

FAIL src/test/e2e/shopping.e2e.test.tsx
  Shopping Flow E2E Tests
    Box Browsing and Search
      âœ• should browse and search for boxes (14 ms)
      âœ• should filter boxes by category (7 ms)
      âœ• should view box details (1 ms)
    Cart Management
      âœ• should add box to cart (1 ms)
      âœ• should update cart item quantity (1 ms)
      âœ• should remove item from cart (1 ms)
      âœ• should apply coupon to cart (1 ms)
    Checkout Process
      âœ• should complete full checkout process (1 ms)
      âœ• should handle shipping calculation (1 ms)
      âœ• should handle payment method selection (1 ms)
      âœ• should handle checkout validation errors (1 ms)
    Box Opening Experience
      âœ• should complete box opening flow
      âœ• should handle insufficient balance for box opening (1 ms)
    Error Handling
      âœ• should handle network errors gracefully (1 ms)
      âœ• should handle API errors with proper messages (1 ms)

  â— Shopping Flow E2E Tests â€º Box Browsing and Search â€º should browse and search for boxes

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:52:66)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Box Browsing and Search â€º should filter boxes by category

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:84:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Box Browsing and Search â€º should view box details

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:113:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Cart Management â€º should add box to cart

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:157:66)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Cart Management â€º should update cart item quantity

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:182:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Cart Management â€º should remove item from cart

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:200:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Cart Management â€º should apply coupon to cart

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:231:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Checkout Process â€º should complete full checkout process

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      280 |       };
      281 |
    > 282 |       mockedOrderService.createOrder.mockResolvedValue(mockOrder);
          |                                      ^
      283 |
      284 |       const { getByTestId, _queryByTestId } = renderWithProviders(<MockMainApp />);
      285 |

      at Object.mockResolvedValue (src/test/e2e/shopping.e2e.test.tsx:282:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Checkout Process â€º should handle shipping calculation

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:312:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Checkout Process â€º should handle payment method selection

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:334:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Checkout Process â€º should handle checkout validation errors

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      354 |
      355 |     it('should handle checkout validation errors', async () => {
    > 356 |       mockedOrderService.createOrder.mockRejectedValue({
          |                                      ^
      357 |         response: {
      358 |           status: 422,
      359 |           data: {

      at Object.mockRejectedValue (src/test/e2e/shopping.e2e.test.tsx:356:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Box Opening Experience â€º should complete box opening flow

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      392 |       };
      393 |
    > 394 |       mockedBoxService.openBox.mockResolvedValue(mockOpeningResult);
          |                                ^
      395 |
      396 |       const { getByTestId, _queryByTestId } = renderWithProviders(<MockMainApp />);
      397 |

      at Object.mockResolvedValue (src/test/e2e/shopping.e2e.test.tsx:394:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Box Opening Experience â€º should handle insufficient balance for box opening

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      414 |
      415 |     it('should handle insufficient balance for box opening', async () => {
    > 416 |       mockedBoxService.openBox.mockRejectedValue({
          |                                ^
      417 |         response: {
      418 |           status: 400,
      419 |           data: {

      at Object.mockRejectedValue (src/test/e2e/shopping.e2e.test.tsx:416:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Error Handling â€º should handle network errors gracefully

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:445:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Error Handling â€º should handle API errors with proper messages

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:470:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

PASS src/services/__tests__/loggerService.test.ts
  LoggerService
    MÃ©todos de Log Level
      debug()
        âœ“ deve registrar mensagem com nÃ­vel debug (2 ms)
        âœ“ deve registrar mensagem debug sem contexto ou extra (1 ms)
      info()
        âœ“ deve registrar mensagem com nÃ­vel info (1 ms)
        âœ“ deve registrar mÃºltiplas mensagens info em sequÃªncia
      warn()
        âœ“ deve registrar mensagem com nÃ­vel warn (1 ms)
      error()
        âœ“ deve registrar mensagem com nÃ­vel error (1 ms)
        âœ“ NÃƒO deve reportar erro em desenvolvimento
        âœ“ deve reportar erro em produÃ§Ã£o quando error object estÃ¡ presente (1 ms)
        âœ“ NÃƒO deve reportar erro em produÃ§Ã£o quando error object estÃ¡ ausente (1 ms)
      performance()
        âœ“ deve registrar log de performance com duraÃ§Ã£o (1 ms)
        âœ“ deve registrar performance com duraÃ§Ã£o menor que 100ms
      api()
        âœ“ deve registrar chamada de API com todos os parÃ¢metros (1 ms)
        âœ“ deve registrar chamada de API sem status e duraÃ§Ã£o (1 ms)
      navigation()
        âœ“ deve registrar navegaÃ§Ã£o entre telas
    Armazenamento de Logs
      âœ“ deve adicionar logs ao array interno (1 ms)
      âœ“ deve incluir timestamp em cada log
      âœ“ deve incluir contexto quando fornecido
      âœ“ deve incluir dados extras quando fornecidos
      âœ“ deve limitar logs ao maxLogs (1000) e remover os mais antigos (2 ms)
    RecuperaÃ§Ã£o de Logs
      âœ“ deve retornar todos os logs quando chamado sem parÃ¢metro
      âœ“ deve filtrar logs por nÃ­vel debug (1 ms)
      âœ“ deve filtrar logs por nÃ­vel info (1 ms)
      âœ“ deve filtrar logs por nÃ­vel warn
      âœ“ deve filtrar logs por nÃ­vel error (1 ms)
    Limpeza de Logs
      âœ“ deve limpar todos os logs do array
      âœ“ deve retornar array vazio apÃ³s clearLogs
      âœ“ deve permitir adicionar novos logs apÃ³s clearLogs (1 ms)
    Comportamento em ProduÃ§Ã£o
      âœ“ deve chamar reportToCrashlytics em produÃ§Ã£o quando erro presente
      âœ“ NÃƒO deve chamar reportToCrashlytics em desenvolvimento
      âœ“ NÃƒO deve chamar reportToCrashlytics quando erro nÃ£o fornecido

FAIL src/services/__tests__/integration/auth.integration.test.ts
  Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak
    Login de usuÃ¡rio - Keycloak OAuth2
      âœ• deve fazer login com sucesso usando OAuth2 flow (2 ms)
      âœ• deve falhar com credenciais invÃ¡lidas no OAuth2 (1 ms)
      âœ• deve falhar quando usuÃ¡rio cancela autorizaÃ§Ã£o OAuth2 (1 ms)
      âœ• deve tratar erro de rede durante login OAuth2 (1 ms)
      âœ• deve tratar timeout durante login OAuth2 (1 ms)
    Registro de usuÃ¡rio - Keycloak Admin API
      âœ“ deve registrar novo usuÃ¡rio via Keycloak Admin API (1 ms)
      âœ“ deve falhar com email jÃ¡ em uso no Keycloak (1 ms)
      âœ“ deve falhar com senhas nÃ£o coincidentes (1 ms)
    Logout de usuÃ¡rio - Keycloak OAuth2
      âœ• deve fazer logout com sucesso e revogar tokens (1 ms)
      âœ“ deve tratar erro durante logout (1 ms)
    Gerenciamento de tokens - Keycloak OAuth2
      âœ• deve renovar token com sucesso usando refresh token (1 ms)
      âœ“ deve falhar renovaÃ§Ã£o com refresh token invÃ¡lido (7 ms)
      âœ“ deve verificar validade do token Keycloak (1 ms)
    RecuperaÃ§Ã£o de senha - Keycloak
      âœ“ deve enviar email de recuperaÃ§Ã£o via Keycloak (1 ms)
      âœ“ deve falhar com email nÃ£o encontrado no Keycloak (1 ms)
      âœ“ deve resetar senha com token vÃ¡lido do Keycloak (1 ms)
      âœ“ deve falhar com token de reset invÃ¡lido do Keycloak (1 ms)
    IntegraÃ§Ã£o com Backend - Keycloak Token Exchange
      âœ“ deve trocar token Keycloak por JWT do backend (1 ms)
      âœ“ deve falhar exchange com token Keycloak invÃ¡lido (1 ms)
    CenÃ¡rios de erro de rede - Keycloak OAuth2
      âœ• deve tratar erro de conexÃ£o durante autenticaÃ§Ã£o OAuth2 (1 ms)
      âœ• deve tratar timeout durante autenticaÃ§Ã£o OAuth2 (1 ms)
      âœ• deve tratar erro 500 do servidor Keycloak (1 ms)
    Comportamento de interceptors - Keycloak Token
      âœ“ deve adicionar token Keycloak automaticamente nas requisiÃ§Ãµes (3 ms)
      âœ“ deve limpar token automaticamente em erro 401 e forÃ§ar re-login (55 ms)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Login de usuÃ¡rio - Keycloak OAuth2 â€º deve fazer login com sucesso usando OAuth2 flow

    expect(received).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      80 |
      81 |       // Assert
    > 82 |       expect(mockedAuthorize).toHaveBeenCalled();
         |                               ^
      83 |       expect(result.accessToken).toBe('mock-keycloak-access-token');
      84 |       expect(result.refreshToken).toBe('mock-keycloak-refresh-token');
      85 |       expect(result.tokenType).toBe('Bearer');

      at Object.toHaveBeenCalled (src/services/__tests__/integration/auth.integration.test.ts:82:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Login de usuÃ¡rio - Keycloak OAuth2 â€º deve falhar com credenciais invÃ¡lidas no OAuth2

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.801Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      92 |
      93 |       // Act & Assert
    > 94 |       await expect(mockedKeycloakService.login()).rejects.toThrow('Invalid credentials');
         |             ^
      95 |     });
      96 |
      97 |     it('deve falhar quando usuÃ¡rio cancela autorizaÃ§Ã£o OAuth2', async () => {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:94:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Login de usuÃ¡rio - Keycloak OAuth2 â€º deve falhar quando usuÃ¡rio cancela autorizaÃ§Ã£o OAuth2

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.803Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      102 |
      103 |       // Act & Assert
    > 104 |       await expect(mockedKeycloakService.login()).rejects.toThrow('User cancelled');
          |             ^
      105 |     });
      106 |
      107 |     it('deve tratar erro de rede durante login OAuth2', async () => {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:104:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Login de usuÃ¡rio - Keycloak OAuth2 â€º deve tratar erro de rede durante login OAuth2

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.804Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      111 |
      112 |       // Act & Assert
    > 113 |       await expect(mockedKeycloakService.login()).rejects.toThrow('Network request failed');
          |             ^
      114 |     });
      115 |
      116 |     it('deve tratar timeout durante login OAuth2', async () => {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:113:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Login de usuÃ¡rio - Keycloak OAuth2 â€º deve tratar timeout durante login OAuth2

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.806Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      120 |
      121 |       // Act & Assert
    > 122 |       await expect(mockedKeycloakService.login()).rejects.toThrow('timeout');
          |             ^
      123 |     });
      124 |   });
      125 |

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:122:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Logout de usuÃ¡rio - Keycloak OAuth2 â€º deve fazer logout com sucesso e revogar tokens

    expect(received).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      197 |       // Assert
      198 |       expect(mockedKeycloakService.logout).toHaveBeenCalled();
    > 199 |       expect(mockedRevoke).toHaveBeenCalled();
          |                            ^
      200 |     });
      201 |
      202 |     it('deve tratar erro durante logout', async () => {

      at Object.toHaveBeenCalled (src/services/__tests__/integration/auth.integration.test.ts:199:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Gerenciamento de tokens - Keycloak OAuth2 â€º deve renovar token com sucesso usando refresh token

    expect(received).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      228 |
      229 |       // Assert
    > 230 |       expect(mockedRefresh).toHaveBeenCalled();
          |                             ^
      231 |       expect(result.accessToken).toBe('new-refreshed-access-token');
      232 |       expect(result.tokenType).toBe('Bearer');
      233 |     });

      at Object.toHaveBeenCalled (src/services/__tests__/integration/auth.integration.test.ts:230:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º CenÃ¡rios de erro de rede - Keycloak OAuth2 â€º deve tratar erro de conexÃ£o durante autenticaÃ§Ã£o OAuth2

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.827Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      360 |
      361 |       // Act & Assert
    > 362 |       await expect(mockedKeycloakService.login()).rejects.toThrow('Network request failed');
          |             ^
      363 |     });
      364 |
      365 |     it('deve tratar timeout durante autenticaÃ§Ã£o OAuth2', async () => {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:362:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º CenÃ¡rios de erro de rede - Keycloak OAuth2 â€º deve tratar timeout durante autenticaÃ§Ã£o OAuth2

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.829Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      369 |
      370 |       // Act & Assert
    > 371 |       await expect(mockedKeycloakService.login()).rejects.toThrow('timeout');
          |             ^
      372 |     });
      373 |
      374 |     it('deve tratar erro 500 do servidor Keycloak', async () => {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:371:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º CenÃ¡rios de erro de rede - Keycloak OAuth2 â€º deve tratar erro 500 do servidor Keycloak

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.830Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      378 |
      379 |       // Act & Assert
    > 380 |       await expect(mockedKeycloakService.login()).rejects.toThrow('Server error');
          |             ^
      381 |     });
      382 |   });
      383 |

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:380:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

PASS src/services/__tests__/navigationService.test.ts
  NavigationService
    InicializaÃ§Ã£o
      âœ“ deve criar instÃ¢ncia do NavigationService (1 ms)
      âœ“ deve retornar referÃªncia de navegaÃ§Ã£o (1 ms)
    NavegaÃ§Ã£o BÃ¡sica
      âœ“ deve navegar para tela com parÃ¢metros quando pronto
      âœ“ deve navegar para tela sem parÃ¢metros quando pronto
      âœ“ nÃ£o deve navegar quando nÃ£o estÃ¡ pronto
      âœ“ deve voltar para tela anterior quando pode voltar
      âœ“ nÃ£o deve voltar quando nÃ£o pode voltar (1 ms)
      âœ“ nÃ£o deve voltar quando nÃ£o estÃ¡ pronto
    Reset de NavegaÃ§Ã£o
      âœ“ deve resetar navegaÃ§Ã£o para tela com parÃ¢metros (1 ms)
      âœ“ deve resetar navegaÃ§Ã£o para tela sem parÃ¢metros
      âœ“ nÃ£o deve resetar quando nÃ£o estÃ¡ pronto (1 ms)
    NavegaÃ§Ã£o Baseada em NotificaÃ§Ãµes
      âœ“ deve navegar para OrderDetails quando notificaÃ§Ã£o order_update com orderId (1 ms)
      âœ“ deve navegar para OrderHistory quando order_status sem orderId
      âœ“ deve navegar para BoxDetails quando new_box com boxId
      âœ“ deve navegar para Shop quando box_restock sem boxId
      âœ“ deve navegar para BoxDetails quando promotion com boxId (1 ms)
      âœ“ deve navegar para Category quando discount com categoryId
      âœ“ deve navegar para Shop quando promotion sem boxId ou categoryId (1 ms)
      âœ“ deve navegar para Cart quando cart_reminder
      âœ“ deve navegar para Reviews quando review_request com boxId (1 ms)
      âœ“ deve navegar para Notifications quando system notification
      âœ“ deve navegar para Notifications quando announcement
      âœ“ deve navegar para Notifications quando sem tipo especificado (1 ms)
      âœ“ deve navegar para Notifications quando dados sÃ£o null
    DetecÃ§Ã£o de Tela Atual
      âœ“ deve retornar true quando estÃ¡ na tela especificada (1 ms)
      âœ“ deve retornar false quando nÃ£o estÃ¡ na tela especificada
      âœ“ deve retornar false quando nÃ£o estÃ¡ pronto (1 ms)
      âœ“ deve retornar nome da tela atual quando pronto
      âœ“ deve retornar undefined quando nÃ£o estÃ¡ pronto (1 ms)
    Deep Link Navigation
      âœ“ deve navegar para BoxDetails quando deep link de box
      âœ“ deve navegar para OrderDetails quando deep link de order (1 ms)
      âœ“ deve navegar para Category quando deep link de category
      âœ“ deve navegar para Cart quando deep link de cart (1 ms)
      âœ“ deve navegar para Profile quando deep link de profile
      âœ“ deve navegar para Home quando deep link desconhecido
      âœ“ nÃ£o deve navegar quando deep link Ã© invÃ¡lido (1 ms)
      âœ“ nÃ£o deve navegar quando deep link de box sem parÃ¢metro
      âœ“ nÃ£o deve navegar quando deep link de order sem parÃ¢metro
      âœ“ nÃ£o deve navegar quando deep link de category sem parÃ¢metro (1 ms)

FAIL src/services/__tests__/notificationService.test.ts
  NotificationService
    initialize
      âœ“ deve inicializar com sucesso quando permissÃµes sÃ£o concedidas (3 ms)
      âœ• deve retornar denied quando permissÃµes sÃ£o negadas (1 ms)
      âœ• deve tratar erros na inicializaÃ§Ã£o
    requestPermissions
      âœ“ deve solicitar permissÃµes no Android 13+ (6 ms)
      âœ“ deve solicitar permissÃµes no Android < 13
      âœ“ deve solicitar permissÃµes no iOS (1 ms)
      âœ“ deve retornar denied quando permissÃ£o Ã© negada
      âœ“ deve tratar erros na solicitaÃ§Ã£o de permissÃµes (1 ms)
    registerToken
      âœ“ deve registrar token no backend
      âœ“ deve tratar erro ao registrar token (2 ms)
    getNotifications
      âœ“ deve buscar notificaÃ§Ãµes com paginaÃ§Ã£o (1 ms)
    markAsRead
      âœ“ deve marcar notificaÃ§Ã£o como lida
    markAllAsRead
      âœ“ deve marcar todas as notificaÃ§Ãµes como lidas
    deleteNotification
      âœ“ deve deletar notificaÃ§Ã£o (1 ms)
    getSettings
      âœ“ deve obter configuraÃ§Ãµes de notificaÃ§Ã£o
    updateSettings
      âœ“ deve atualizar configuraÃ§Ãµes de notificaÃ§Ã£o (1 ms)
    getBadgeCount
      âœ“ deve obter contagem de badge (1 ms)
      âœ“ deve retornar 0 em caso de erro
    clearBadgeCount
      âœ“ deve limpar badge count (1 ms)
    checkPermission
      âœ“ deve verificar status de permissÃ£o autorizado
      âœ“ deve verificar status de permissÃ£o negado (1 ms)
      âœ“ deve retornar denied em caso de erro
    openSettings
      âœ“ deve abrir configuraÃ§Ãµes no Android
      âœ“ deve abrir configuraÃ§Ãµes no iOS
    createNotificationChannel
      âœ“ deve criar canais de notificaÃ§Ã£o no Android
      âœ“ nÃ£o deve criar canais no iOS (1 ms)
    displayLocalNotification
      âœ“ deve exibir notificaÃ§Ã£o local
    getInitialNotification
      âœ“ deve obter notificaÃ§Ã£o inicial (1 ms)
      âœ“ deve retornar null em caso de erro

  â— NotificationService â€º initialize â€º deve retornar denied quando permissÃµes sÃ£o negadas

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
    -   "permissionStatus": "denied",
    +   "permissionStatus": "granted",
        "token": null,
      }

      111 |
      112 |       // Verificar
    > 113 |       expect(result).toEqual({
          |                      ^
      114 |         token: null,
      115 |         permissionStatus: 'denied',
      116 |       });

      at Object.toEqual (src/services/__tests__/notificationService.test.ts:113:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— NotificationService â€º initialize â€º deve tratar erros na inicializaÃ§Ã£o

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
    -   "permissionStatus": "denied",
    +   "permissionStatus": "granted",
        "token": null,
      }

      127 |
      128 |       // Verificar
    > 129 |       expect(result).toEqual({
          |                      ^
      130 |         token: null,
      131 |         permissionStatus: 'denied',
      132 |       });

      at Object.toEqual (src/services/__tests__/notificationService.test.ts:129:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/reviewService.test.ts
  ReviewService
    getReviews
      âœ“ deve buscar reviews de uma caixa com paginaÃ§Ã£o padrÃ£o (1 ms)
      âœ“ deve buscar reviews com filtros personalizados (1 ms)
      âœ“ deve tratar erro ao buscar reviews (11 ms)
    getReviewStatistics
      âœ“ deve buscar estatÃ­sticas de reviews de uma caixa
      âœ“ deve tratar erro ao buscar estatÃ­sticas (1 ms)
    getUserReview
      âœ“ deve buscar review do usuÃ¡rio para uma caixa (1 ms)
      âœ“ deve retornar null quando usuÃ¡rio nÃ£o avaliou a caixa
      âœ“ deve propagar outros erros (1 ms)
    createReview
      âœ“ deve criar review sem fotos (1 ms)
      âœ“ deve criar review com fotos (1 ms)
      âœ“ deve tratar erro ao criar review duplicada (1 ms)
    updateReview
      âœ“ deve atualizar review existente
      âœ“ deve tratar erro ao atualizar review inexistente (1 ms)
    deleteReview
      âœ“ deve deletar review com sucesso (1 ms)
      âœ“ deve tratar erro ao deletar review
    markReviewHelpful
      âœ“ deve marcar review como Ãºtil (1 ms)
      âœ“ deve marcar review como nÃ£o Ãºtil (1 ms)
    reportReview
      âœ• deve reportar review com sucesso (1 ms)
      âœ• deve reportar sem descriÃ§Ã£o
    getTopReviews
      âœ• deve buscar top reviews de uma caixa (1 ms)
      âœ• deve usar limite padrÃ£o de 10
    getUserReviews
      âœ• deve buscar todas as reviews de um usuÃ¡rio (2 ms)
    canUserReview
      âœ• deve verificar se usuÃ¡rio pode avaliar caixa
      âœ• deve retornar motivo quando nÃ£o pode avaliar (1 ms)

  â— ReviewService â€º reportReview â€º deve reportar review com sucesso

    expect(received).toEqual(expected) // deep equality

    Expected: {"message": "Report submitted successfully", "reportId": "report-123", "success": true}
    Received: undefined

      387 |
      388 |       // Verificar
    > 389 |       expect(_result).toEqual(mockResponse);
          |                       ^
      390 |       expect(httpClient.post).toHaveBeenCalledWith('/reviews/review-123/report', reportData);
      391 |     });
      392 |

      at Object.toEqual (src/services/__tests__/reviewService.test.ts:389:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ReviewService â€º reportReview â€º deve reportar sem descriÃ§Ã£o

    expect(received).toEqual(expected) // deep equality

    Expected: {"reportId": "report-124", "success": true}
    Received: undefined

      403 |
      404 |       // Verificar
    > 405 |       expect(_result).toEqual(mockResponse);
          |                       ^
      406 |       expect(httpClient.post).toHaveBeenCalledWith('/reviews/review-123/report', {
      407 |         reason: 'spam',
      408 |         description: undefined,

      at Object.toEqual (src/services/__tests__/reviewService.test.ts:405:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ReviewService â€º getTopReviews â€º deve buscar top reviews de uma caixa

    TypeError: _reviewService.reviewService.getTopReviews is not a function

      431 |
      432 |       // Executar
    > 433 |       const _result = await reviewService.getTopReviews('box-123', 5);
          |                                           ^
      434 |
      435 |       // Verificar
      436 |       expect(_result).toEqual(mockTopReviews);

      at Object.getTopReviews (src/services/__tests__/reviewService.test.ts:433:43)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ReviewService â€º getTopReviews â€º deve usar limite padrÃ£o de 10

    TypeError: _reviewService.reviewService.getTopReviews is not a function

      446 |       (httpClient.get as jest.Mock).mockResolvedValue({ data: [] });
      447 |
    > 448 |       await reviewService.getTopReviews('box-123');
          |                           ^
      449 |
      450 |       expect(httpClient.get).toHaveBeenCalledWith('/reviews/top', {
      451 |         params: {

      at Object.getTopReviews (src/services/__tests__/reviewService.test.ts:448:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ReviewService â€º getUserReviews â€º deve buscar todas as reviews de um usuÃ¡rio

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

    - "/reviews/user/user-123",
    + "/reviews/user/all",
      Object {
        "params": Object {
    -     "page": 1,
    -     "per_page": 20,
    +     "page": "user-123",
    +     "per_page": 1,
        },
      },

    Number of calls: 1

      486 |       // Verificar
      487 |       expect(_result).toEqual(mockResponse);
    > 488 |       expect(httpClient.get).toHaveBeenCalledWith('/reviews/user/user-123', {
          |                              ^
      489 |         params: {
      490 |           page: 1,
      491 |           per_page: 20,

      at Object.toHaveBeenCalledWith (src/services/__tests__/reviewService.test.ts:488:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ReviewService â€º canUserReview â€º deve verificar se usuÃ¡rio pode avaliar caixa

    expect(received).toEqual(expected) // deep equality

    Expected: {"canReview": true, "reason": null}
    Received: true

      508 |
      509 |       // Verificar
    > 510 |       expect(_result).toEqual(mockResponse);
          |                       ^
      511 |       expect(httpClient.get).toHaveBeenCalledWith('/reviews/can-review/box-123');
      512 |     });
      513 |

      at Object.toEqual (src/services/__tests__/reviewService.test.ts:510:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ReviewService â€º canUserReview â€º deve retornar motivo quando nÃ£o pode avaliar

    expect(received).toEqual(expected) // deep equality

    Expected: {"canReview": false, "reason": "User must purchase box before reviewing"}
    Received: false

      521 |
      522 |       const _result = await reviewService.canUserReview('box-123');
    > 523 |       expect(_result).toEqual(mockResponse);
          |                       ^
      524 |     });
      525 |   });
      526 | });

      at Object.toEqual (src/services/__tests__/reviewService.test.ts:523:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/gotifyService.test.ts
  GotifyService
    initialize()
      âœ“ should create default notification channel (1 ms)
      âœ“ should create critical notification channel
      âœ“ should create normal notification channel (1 ms)
      âœ“ should handle errors when creating channels
    connect()
      âœ• should connect to Gotify WebSocket with token (2 ms)
      âœ“ should not connect if already connected (1 ms)
      âœ“ should not connect if token is empty
      âœ“ should register connect event handler (1 ms)
      âœ“ should register disconnect event handler
      âœ“ should register message event handler (1 ms)
      âœ“ should register error event handler
      âœ“ should set connected to true on connect event (1 ms)
      âœ“ should set connected to false on disconnect event (1 ms)
    disconnect()
      âœ“ should disconnect socket if connected
      âœ“ should not throw if socket is null (1 ms)
    isConnected()
      âœ“ should return true if socket is connected
      âœ“ should return false if socket is not connected (1 ms)
      âœ“ should return false if socket is null (5 ms)
    setNotificationHandler()
      âœ“ should set notification handler
    handleMessage()
      âœ“ should call notification handler if set (1 ms)
      âœ“ should display local notification when message received
      âœ“ should use critical channel for high priority messages (1 ms)
      âœ“ should use normal channel for low priority messages (1 ms)
    getMessages()
      âœ“ should fetch messages from Gotify API (1 ms)
      âœ“ should return empty array on error
      âœ“ should return empty array if response is not ok (1 ms)
    deleteMessage()
      âœ“ should delete message by id
      âœ“ should return false on error
    deleteAllMessages()
      âœ“ should delete all messages (1 ms)
      âœ“ should return false on error

  â— GotifyService â€º connect() â€º should connect to Gotify WebSocket with token

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "gotify", ObjectContaining {"path": "/stream", "query": {"token": "test-token-123"}, "transports": ["websocket"]}
    Received: "http://10.0.2.2:8888", {"path": "/stream", "query": {"token": "test-token-123"}, "reconnection": true, "reconnectionAttempts": Infinity, "reconnectionDelay": 1000, "reconnectionDelayMax": 5000, "transports": ["websocket"]}

    Number of calls: 1

      112 |       gotifyService.connect(token);
      113 |
    > 114 |       expect(io).toHaveBeenCalledWith(
          |                  ^
      115 |         expect.stringContaining('gotify'),
      116 |         expect.objectContaining({
      117 |           path: '/stream',

      at Object.toHaveBeenCalledWith (src/services/__tests__/gotifyService.test.ts:114:18)

FAIL src/animations/__tests__/animations.test.ts
  â— Test suite failed to run

    TypeError: _reactNativeReanimated.Easing.in is not a function

      57 | // Easings personalizados
      58 | export const EASINGS = {
    > 59 |   easeIn: Easing.in(Easing.ease),
         |                    ^
      60 |   easeOut: Easing.out(Easing.ease),
      61 |   easeInOut: Easing.inOut(Easing.ease),
      62 |   easeInQuad: Easing.in(Easing.quad),

      at Object.<anonymous> (src/animations/constants.ts:59:20)
      at Object.require (src/animations/animations.ts:15:1)
      at Object.require (src/animations/__tests__/animations.test.ts:1:1)

FAIL src/services/__tests__/websocketService.test.ts
  WebSocketService
    connect
      âœ• deve conectar ao servidor WebSocket (2 ms)
      âœ“ deve conectar sem token de autenticaÃ§Ã£o (1 ms)
      âœ• nÃ£o deve reconectar se jÃ¡ estiver conectado (1 ms)
      âœ“ deve configurar event listeners ao conectar (2 ms)
    disconnect
      âœ• deve desconectar do servidor WebSocket (1 ms)
      âœ“ nÃ£o deve fazer nada se nÃ£o estiver conectado
    Event Handlers
      âœ• deve tratar evento de conexÃ£o (1 ms)
      âœ• deve tratar evento de desconexÃ£o (1 ms)
      âœ“ nÃ£o deve tentar reconectar se servidor desconectou
      âœ• deve tratar erro de conexÃ£o (1 ms)
      âœ• deve tratar evento box_opened (1 ms)
      âœ• deve tratar evento stock_update (1 ms)
    Event Listeners Management
      âœ• deve adicionar listener de evento
      âœ“ deve remover listener de evento
      âœ“ deve emitir evento para todos os listeners (1 ms)
      âœ“ nÃ£o deve falhar ao emitir evento sem listeners
    Message Emission
      âœ• deve emitir mensagem quando conectado (1 ms)
      âœ• nÃ£o deve emitir mensagem quando desconectado (1 ms)
    Room Management
      âœ• deve entrar em uma sala (1 ms)
      âœ• deve sair de uma sala (1 ms)
      âœ“ nÃ£o deve entrar em sala quando desconectado (1 ms)
    Reconnection Logic
      âœ“ deve tentar reconectar apÃ³s desconexÃ£o (1 ms)
      âœ• deve incrementar tentativas de reconexÃ£o (1 ms)
      âœ• deve parar de tentar reconectar apÃ³s limite mÃ¡ximo (1 ms)
      âœ• deve aumentar delay entre tentativas de reconexÃ£o (1 ms)
    Connection Status
      âœ• deve retornar _status de conexÃ£o corretamente (1 ms)
      âœ• deve retornar informaÃ§Ãµes de conexÃ£o
    Error Handling
      âœ• deve tratar erro ao emitir para listeners (1 ms)
    Authentication Update
      âœ• deve atualizar token de autenticaÃ§Ã£o e reconectar (1 ms)

  â— WebSocketService â€º connect â€º deve conectar ao servidor WebSocket

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ğŸ”Œ Connecting to WebSocket server..."

    Number of calls: 0

      57 |
      58 |       expect((websocketService as any).authToken).toBe('auth-token-123');
    > 59 |       expect(console.log).toHaveBeenCalledWith('ğŸ”Œ Connecting to WebSocket server...');
         |                           ^
      60 |     });
      61 |
      62 |     it('deve conectar sem token de autenticaÃ§Ã£o', () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:59:27)

  â— WebSocketService â€º connect â€º nÃ£o deve reconectar se jÃ¡ estiver conectado

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ğŸ”Œ WebSocket already connected"

    Number of calls: 0

      78 |
      79 |       expect(mockIo).not.toHaveBeenCalled();
    > 80 |       expect(console.log).toHaveBeenCalledWith('ğŸ”Œ WebSocket already connected');
         |                           ^
      81 |     });
      82 |
      83 |     it('deve configurar event listeners ao conectar', () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:80:27)

  â— WebSocketService â€º disconnect â€º deve desconectar do servidor WebSocket

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ğŸ”Œ Disconnecting from WebSocket server..."

    Number of calls: 0

      103 |       expect((websocketService as any).isConnected).toBe(false);
      104 |       expect((websocketService as any).reconnectAttempts).toBe(0);
    > 105 |       expect(console.log).toHaveBeenCalledWith('ğŸ”Œ Disconnecting from WebSocket server...');
          |                           ^
      106 |     });
      107 |
      108 |     it('nÃ£o deve fazer nada se nÃ£o estiver conectado', () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:105:27)

  â— WebSocketService â€º Event Handlers â€º deve tratar evento de conexÃ£o

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âœ… WebSocket connected"

    Number of calls: 0

      131 |       expect((websocketService as any).reconnectAttempts).toBe(0);
      132 |       expect(listener).toHaveBeenCalledWith({ connected: true });
    > 133 |       expect(console.log).toHaveBeenCalledWith('âœ… WebSocket connected');
          |                           ^
      134 |     });
      135 |
      136 |     it('deve tratar evento de desconexÃ£o', () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:133:27)

  â— WebSocketService â€º Event Handlers â€º deve tratar evento de desconexÃ£o

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ WebSocket disconnected:", "transport close"

    Number of calls: 0

      149 |         reason: 'transport close' 
      150 |       });
    > 151 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      152 |         'âŒ WebSocket disconnected:', 
      153 |         'transport close'
      154 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:151:27)

  â— WebSocketService â€º Event Handlers â€º deve tratar erro de conexÃ£o

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ WebSocket connection error:", [Error: Connection failed]

    Number of calls: 0

      179 |
      180 |       expect(listener).toHaveBeenCalledWith({ error: 'Connection failed' });
    > 181 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      182 |         'âŒ WebSocket connection error:', 
      183 |         error
      184 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:181:29)

  â— WebSocketService â€º Event Handlers â€º deve tratar evento box_opened

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ğŸ“¦ Box opened event received:", {"box_id": "box-123", "items": [{"id": "item-1", "name": "Item 1"}], "opened_at": "2025-12-29T16:53:01.607Z", "user_id": "user-456"}

    Number of calls: 0

      203 |
      204 |       expect(listener).toHaveBeenCalledWith(eventData);
    > 205 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      206 |         'ğŸ“¦ Box opened event received:', 
      207 |         eventData
      208 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:205:27)

  â— WebSocketService â€º Event Handlers â€º deve tratar evento stock_update

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ğŸ“Š Stock update received:", {"box_id": "box-123", "stock": 50}

    Number of calls: 0

      225 |
      226 |       expect(listener).toHaveBeenCalledWith(eventData);
    > 227 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      228 |         'ğŸ“Š Stock update received:', 
      229 |         eventData
      230 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:227:27)

  â— WebSocketService â€º Event Listeners Management â€º deve adicionar listener de evento

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: undefined

      241 |
      242 |       const listeners = (websocketService as any).eventListeners.get('test_event');
    > 243 |       expect(listeners?._size).toBe(2);
          |                                ^
      244 |       expect(listeners?.has(listener1)).toBe(true);
      245 |       expect(listeners?.has(listener2)).toBe(true);
      246 |     });

      at Object.toBe (src/services/__tests__/websocketService.test.ts:243:32)

  â— WebSocketService â€º Message Emission â€º deve emitir mensagem quando conectado

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      286 |       const _result = websocketService.emit('test_event', { data: 'test' });
      287 |
    > 288 |       expect(_result).toBe(true);
          |                       ^
      289 |       expect(mockSocket.emit).toHaveBeenCalledWith('test_event', { data: 'test' });
      290 |     });
      291 |

      at Object.toBe (src/services/__tests__/websocketService.test.ts:288:23)

  â— WebSocketService â€º Message Emission â€º nÃ£o deve emitir mensagem quando desconectado

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      295 |       const _result = websocketService.emit('test_event', { data: 'test' });
      296 |
    > 297 |       expect(_result).toBe(false);
          |                       ^
      298 |       expect(mockSocket.emit).not.toHaveBeenCalled();
      299 |       expect(console.log).toHaveBeenCalledWith(
      300 |         'âš ï¸ Cannot emit test_event - WebSocket not connected'

      at Object.toBe (src/services/__tests__/websocketService.test.ts:297:23)

  â— WebSocketService â€º Room Management â€º deve entrar em uma sala

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "join_room", {"room": "room-123"}

    Number of calls: 0

      312 |       websocketService.joinRoom('room-123');
      313 |
    > 314 |       expect(mockSocket.emit).toHaveBeenCalledWith('join_room', { room: 'room-123' });
          |                               ^
      315 |       expect(console.log).toHaveBeenCalledWith('ğŸšª Joining room: room-123');
      316 |     });
      317 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:314:31)

  â— WebSocketService â€º Room Management â€º deve sair de uma sala

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "leave_room", {"room": "room-123"}

    Number of calls: 0

      319 |       websocketService.leaveRoom('room-123');
      320 |
    > 321 |       expect(mockSocket.emit).toHaveBeenCalledWith('leave_room', { room: 'room-123' });
          |                               ^
      322 |       expect(console.log).toHaveBeenCalledWith('ğŸšª Leaving room: room-123');
      323 |     });
      324 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:321:31)

  â— WebSocketService â€º Reconnection Logic â€º deve incrementar tentativas de reconexÃ£o

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ğŸ”„ Attempting to reconnect... (1/5)"

    Number of calls: 0

      359 |       
      360 |       expect((websocketService as any).reconnectAttempts).toBe(1);
    > 361 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      362 |         'ğŸ”„ Attempting to reconnect... (1/5)'
      363 |       );
      364 |     });

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:361:27)

  â— WebSocketService â€º Reconnection Logic â€º deve parar de tentar reconectar apÃ³s limite mÃ¡ximo

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ Max reconnection attempts reached. Giving up."

    Number of calls: 0

      369 |       (websocketService as any).attemptReconnect();
      370 |       
    > 371 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      372 |         'âŒ Max reconnection attempts reached. Giving up.'
      373 |       );
      374 |       expect(mockSocket.connect).not.toHaveBeenCalled();

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:371:27)

  â— WebSocketService â€º Reconnection Logic â€º deve aumentar delay entre tentativas de reconexÃ£o

    expect(received).toHaveBeenCalledWith(...expected)

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function setTimeout]

      378 |       // Primeira tentativa - delay de 1s
      379 |       (websocketService as any).attemptReconnect();
    > 380 |       expect(setTimeout).toHaveBeenCalledWith(expect.any(Function), 1000);
          |                          ^
      381 |
      382 |       // Segunda tentativa - delay de 2s
      383 |       jest.advanceTimersByTime(1000);

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:380:26)

  â— WebSocketService â€º Connection Status â€º deve retornar _status de conexÃ£o corretamente

    TypeError: _websocketService.websocketService.isConnected is not a function

      394 |   describe('Connection Status', () => {
      395 |     it('deve retornar _status de conexÃ£o corretamente', () => {
    > 396 |       expect(websocketService.isConnected()).toBe(false);
          |                               ^
      397 |
      398 |       websocketService.connect();
      399 |       (websocketService as any).isConnected = true;

      at Object.isConnected (src/services/__tests__/websocketService.test.ts:396:31)

  â— WebSocketService â€º Connection Status â€º deve retornar informaÃ§Ãµes de conexÃ£o

    TypeError: _websocketService.websocketService.getConnectionInfo is not a function

      406 |       (websocketService as any).isConnected = true;
      407 |
    > 408 |       const info = websocketService.getConnectionInfo();
          |                                     ^
      409 |
      410 |       expect(info).toEqual({
      411 |         connected: true,

      at Object.getConnectionInfo (src/services/__tests__/websocketService.test.ts:408:37)

  â— WebSocketService â€º Error Handling â€º deve tratar erro ao emitir para listeners

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Error emitting to listener:", Any<Error>

    Number of calls: 0

      428 |       }).not.toThrow();
      429 |
    > 430 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      431 |         'Error emitting to listener:',
      432 |         expect.any(Error)
      433 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:430:29)

  â— WebSocketService â€º Authentication Update â€º deve atualizar token de autenticaÃ§Ã£o e reconectar

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      442 |
      443 |       expect((websocketService as any).authToken).toBe('new-token');
    > 444 |       expect(mockSocket.disconnect).toHaveBeenCalled();
          |                                     ^
      445 |       expect(mockIo).toHaveBeenCalledTimes(2); // ConexÃ£o inicial + reconexÃ£o
      446 |     });
      447 |   });

      at Object.toHaveBeenCalled (src/services/__tests__/websocketService.test.ts:444:37)

FAIL src/test/e2e/auth.e2e.test.tsx
  â— Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     â€¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     â€¢ If you need a custom transformation specify a "transform" option in your config.
     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/@react-navigation+native-stack@7.6.2_@react-navigation+native@7.1.19_react-native@0.80._eb7fa789b24d214e6afc881de3e985a1/node_modules/@react-navigation/native-stack/lib/module/index.js:6
    export { createNativeStackNavigator } from "./navigators/createNativeStackNavigator.js";
    ^^^^^^

    SyntaxError: Unexpected token 'export'

      1 | import React from 'react';
    > 2 | import { createNativeStackNavigator } from '@react-navigation/native-stack';
        | ^
      3 |
      4 | // Screens
      5 | import LoginScreen from '../screens/Auth/LoginScreen';

      at Runtime.createScriptFromCode (node_modules/.pnpm/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.require (src/navigation/AuthNavigator.tsx:2:1)
      at Object.require (src/test/e2e/auth.e2e.test.tsx:10:1)

PASS src/store/slices/__tests__/paymentSlice.test.ts
  paymentSlice
    Estado Inicial
      âœ“ deve retornar o estado inicial correto (2 ms)
    Reducers SÃ­ncronos
      âœ“ deve limpar pagamento atual (1 ms)
      âœ“ deve limpar erro (1 ms)
      âœ“ deve resetar pagamento completamente (1 ms)
    processPayment
      âœ“ deve processar pagamento PIX com sucesso (3 ms)
      âœ“ deve processar pagamento cartÃ£o com sucesso (1 ms)
      âœ“ deve tratar erro ao processar pagamento (2 ms)
      âœ“ deve atualizar estado para processing durante processamento (2 ms)
    checkPaymentStatus
      âœ“ deve verificar status de pagamento pendente (1 ms)
      âœ“ deve verificar status de pagamento pago (1 ms)
      âœ“ deve tratar erro ao verificar status (1 ms)
    fetchPaymentMethods
      âœ“ deve buscar mÃ©todos de pagamento disponÃ­veis (1 ms)
      âœ“ deve tratar erro ao buscar mÃ©todos de pagamento (1 ms)
    Selectors
      âœ“ selectCurrentPayment deve retornar pagamento atual (1 ms)
      âœ“ selectPaymentMethods deve retornar mÃ©todos disponÃ­veis
      âœ“ selectPaymentIsLoading deve retornar estado de loading
      âœ“ selectPaymentIsProcessing deve retornar estado de processamento (1 ms)
      âœ“ selectPaymentError deve retornar erro

FAIL src/__tests__/performance/gamification.performance.test.ts
  â— Test suite failed to run

    Cannot find module '../assets/animations/fire_opening.png' from 'src/services/animationManager.ts'

    Require stack:
      src/services/animationManager.ts
      src/__tests__/performance/gamification.performance.test.ts

      57 |       spriteSheets: {
      58 |         opening: {
    > 59 |           source: require('../assets/animations/fire_opening.png'),
         |                   ^
      60 |           frameWidth: 200,
      61 |           frameHeight: 200,
      62 |           totalFrames: 60,

      at Resolver._throwModNotFoundError (node_modules/.pnpm/node_modules/jest-resolve/build/resolver.js:427:11)
      at new require (src/services/animationManager.ts:59:19)
      at Function.getInstance (src/services/animationManager.ts:200:35)
      at Object.getInstance (src/services/animationManager.ts:496:50)
      at Object.require (src/__tests__/performance/gamification.performance.test.ts:9:1)

FAIL src/store/slices/__tests__/favoritesSlice.test.ts
  favoritesSlice
    Estado Inicial
      âœ“ deve retornar o estado inicial correto (2 ms)
    Reducers SÃ­ncronos
      âœ“ deve limpar erro
      âœ“ deve limpar favoritos (6 ms)
      âœ• deve adicionar favorito local
      âœ• deve remover favorito local (1 ms)
      âœ“ deve resetar favoritos completamente
    fetchFavorites
      âœ“ deve buscar favoritos com sucesso (3 ms)
      âœ“ deve tratar erro ao buscar favoritos (1 ms)
    addToFavorites
      âœ• deve adicionar aos favoritos com sucesso (1 ms)
      âœ• deve reverter atualizaÃ§Ã£o otimista em caso de erro
    removeFromFavorites
      âœ• deve remover dos favoritos com sucesso (1 ms)
    checkIsFavorite
      âœ• deve verificar se Ã© favorito e atualizar estado (1 ms)
      âœ• deve remover do estado se nÃ£o for favorito (1 ms)
    Selectors
      âœ“ selectFavorites deve retornar lista de favoritos
      âœ“ selectFavoriteIds deve retornar Set de IDs (1 ms)
      âœ“ selectIsFavorite deve retornar true se box Ã© favorito
      âœ“ selectIsFavorite deve retornar false se box nÃ£o Ã© favorito
      âœ“ selectFavoritesLoading deve retornar estado de loading (1 ms)
      âœ“ selectFavoritesUpdating deve retornar estado de updating
      âœ“ selectFavoritesError deve retornar erro (1 ms)
      âœ“ selectFavoritesPagination deve retornar paginaÃ§Ã£o

  â— favoritesSlice â€º Reducers SÃ­ncronos â€º deve adicionar favorito local

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      143 |     // Adicionar favorito local (otimistic update)
      144 |     addFavoriteLocal: (state, action: PayloadAction<string>) => {
    > 145 |       state.favoriteIds.add(action.payload);
          |             ^
      146 |     },
      147 |     
      148 |     // Remover favorito local (otimistic update)

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:145:13)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at Object.<anonymous> (src/store/slices/__tests__/favoritesSlice.test.ts:164:37)

  â— favoritesSlice â€º Reducers SÃ­ncronos â€º deve remover favorito local

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      148 |     // Remover favorito local (otimistic update)
      149 |     removeFavoriteLocal: (state, action: PayloadAction<string>) => {
    > 150 |       state.favoriteIds.delete(action.payload);
          |             ^
      151 |       state.favorites = state.favorites.filter(box => box.id !== action.payload);
      152 |     },
      153 |     

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:150:13)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at Object.<anonymous> (src/store/slices/__tests__/favoritesSlice.test.ts:185:37)

  â— favoritesSlice â€º addToFavorites â€º deve adicionar aos favoritos com sucesso

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      192 |       .addCase(addToFavorites.fulfilled, (state, action) => {
      193 |         state.isUpdating = false;
    > 194 |         state.favoriteIds.add(action.payload);
          |               ^
      195 |       })
      196 |       .addCase(addToFavorites.rejected, (state, action) => {
      197 |         state.isUpdating = false;

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:194:15)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at combination (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/combineReducers.ts:120:31)
      at Object.dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/createStore.ts:214:22)
      at dispatch (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/autoBatchEnhancer.ts:112:22)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/serializableStateInvariantMiddleware.ts:169:22
      at node_modules/.pnpm/redux-thunk@3.1.0_redux@5.0.1/node_modules/redux-thunk/dist/cjs/redux-thunk.cjs:32:12
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/immutableStateInvariantMiddleware.ts:174:34
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/actionCreatorInvariantMiddleware.ts:29:12
      at dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/applyMiddleware.ts:52:38)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createAsyncThunk.ts:397:13

  â— favoritesSlice â€º addToFavorites â€º deve reverter atualizaÃ§Ã£o otimista em caso de erro

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      143 |     // Adicionar favorito local (otimistic update)
      144 |     addFavoriteLocal: (state, action: PayloadAction<string>) => {
    > 145 |       state.favoriteIds.add(action.payload);
          |             ^
      146 |     },
      147 |     
      148 |     // Remover favorito local (otimistic update)

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:145:13)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at combination (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/combineReducers.ts:120:31)
      at Object.dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/createStore.ts:214:22)
      at dispatch (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/autoBatchEnhancer.ts:112:22)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/serializableStateInvariantMiddleware.ts:169:22
      at node_modules/.pnpm/redux-thunk@3.1.0_redux@5.0.1/node_modules/redux-thunk/dist/cjs/redux-thunk.cjs:32:12
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/immutableStateInvariantMiddleware.ts:174:34
      at Object.dispatch (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/actionCreatorInvariantMiddleware.ts:29:12)
      at Object.dispatch (src/store/slices/__tests__/favoritesSlice.test.ts:301:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— favoritesSlice â€º removeFromFavorites â€º deve remover dos favoritos com sucesso

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      209 |       .addCase(removeFromFavorites.fulfilled, (state, action) => {
      210 |         state.isUpdating = false;
    > 211 |         state.favoriteIds.delete(action.payload);
          |               ^
      212 |         state.favorites = state.favorites.filter(box => box.id !== action.payload);
      213 |       })
      214 |       .addCase(removeFromFavorites.rejected, (state, action) => {

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:211:15)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at combination (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/combineReducers.ts:120:31)
      at Object.dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/createStore.ts:214:22)
      at dispatch (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/autoBatchEnhancer.ts:112:22)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/serializableStateInvariantMiddleware.ts:169:22
      at node_modules/.pnpm/redux-thunk@3.1.0_redux@5.0.1/node_modules/redux-thunk/dist/cjs/redux-thunk.cjs:32:12
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/immutableStateInvariantMiddleware.ts:174:34
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/actionCreatorInvariantMiddleware.ts:29:12
      at dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/applyMiddleware.ts:52:38)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createAsyncThunk.ts:397:13

  â— favoritesSlice â€º checkIsFavorite â€º deve verificar se Ã© favorito e atualizar estado

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      223 |       .addCase(checkIsFavorite.fulfilled, (state, action) => {
      224 |         if (action.payload.isFavorite) {
    > 225 |           state.favoriteIds.add(action.payload.boxId);
          |                 ^
      226 |         } else {
      227 |           state.favoriteIds.delete(action.payload.boxId);
      228 |         }

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:225:17)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at combination (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/combineReducers.ts:120:31)
      at Object.dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/createStore.ts:214:22)
      at dispatch (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/autoBatchEnhancer.ts:112:22)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/serializableStateInvariantMiddleware.ts:169:22
      at node_modules/.pnpm/redux-thunk@3.1.0_redux@5.0.1/node_modules/redux-thunk/dist/cjs/redux-thunk.cjs:32:12
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/immutableStateInvariantMiddleware.ts:174:34
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/actionCreatorInvariantMiddleware.ts:29:12
      at dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/applyMiddleware.ts:52:38)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createAsyncThunk.ts:397:13

  â— favoritesSlice â€º checkIsFavorite â€º deve remover do estado se nÃ£o for favorito

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      225 |           state.favoriteIds.add(action.payload.boxId);
      226 |         } else {
    > 227 |           state.favoriteIds.delete(action.payload.boxId);
          |                 ^
      228 |         }
      229 |       });
      230 |

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:227:17)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at combination (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/combineReducers.ts:120:31)
      at Object.dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/createStore.ts:214:22)
      at dispatch (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/autoBatchEnhancer.ts:112:22)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/serializableStateInvariantMiddleware.ts:169:22
      at node_modules/.pnpm/redux-thunk@3.1.0_redux@5.0.1/node_modules/redux-thunk/dist/cjs/redux-thunk.cjs:32:12
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/immutableStateInvariantMiddleware.ts:174:34
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/actionCreatorInvariantMiddleware.ts:29:12
      at dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/applyMiddleware.ts:52:38)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createAsyncThunk.ts:397:13

PASS src/utils/__tests__/debounce.test.ts
  Debounce Utility
    Funcionalidade BÃ¡sica
      âœ“ deve atrasar a execuÃ§Ã£o da funÃ§Ã£o (2 ms)
      âœ“ deve executar apenas a Ãºltima chamada em mÃºltiplas chamadas rÃ¡pidas (2 ms)
      âœ“ deve respeitar o tempo de espera correto (1 ms)
    PreservaÃ§Ã£o de Argumentos
      âœ“ deve passar todos os argumentos corretamente (1 ms)
      âœ“ deve preservar argumentos da Ãºltima chamada em mÃºltiplas invocaÃ§Ãµes (1 ms)
      âœ“ deve lidar corretamente com argumentos complexos (1 ms)
    PreservaÃ§Ã£o de Contexto
      âœ“ deve preservar o contexto this da funÃ§Ã£o
    Limpeza de Timeout
      âœ“ deve cancelar execuÃ§Ã£o pendente quando chamado novamente (1 ms)
      âœ“ deve limpar timeout corretamente apÃ³s execuÃ§Ã£o (1 ms)
    MÃºltiplas FunÃ§Ãµes Debounced
      âœ“ deve manter timers independentes para funÃ§Ãµes diferentes (2 ms)
    Casos Extremos
      âœ“ deve lidar com delay zero (8 ms)
      âœ“ deve lidar com delay muito longo (1 ms)
    FunÃ§Ãµes AssÃ­ncronas
      âœ“ deve funcionar com funÃ§Ãµes assÃ­ncronas (1 ms)
      âœ“ deve chamar funÃ§Ã£o assÃ­ncrona com argumentos corretos (1 ms)
    Cancelamento de ExecuÃ§Ã£o Pendente
      âœ“ deve cancelar execuÃ§Ã£o se nova chamada ocorrer durante delay (1 ms)
    MÃºltiplas InvocaÃ§Ãµes ApÃ³s Delay
      âœ“ deve permitir mÃºltiplas execuÃ§Ãµes se chamadas apÃ³s o delay (2 ms)
      âœ“ deve resetar timer completamente entre execuÃ§Ãµes completas (1 ms)
    Uso Real - Busca de Texto
      âœ“ deve simular busca em tempo real com debounce (1 ms)
    Uso Real - Resize de Janela
      âœ“ deve simular handler de resize com debounce (1 ms)

FAIL src/test/integration/cart.integration.test.ts
  â— Cart Integration Tests â€º Cart Operations â€º should fetch empty cart initially

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Operations â€º should fetch empty cart initially

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Operations â€º should add item to cart successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Operations â€º should add item to cart successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Operations â€º should update cart item quantity

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Operations â€º should update cart item quantity

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Operations â€º should remove item from cart

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Operations â€º should remove item from cart

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Operations â€º should clear entire cart

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Operations â€º should clear entire cart

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Coupon Management â€º should apply valid coupon

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Coupon Management â€º should apply valid coupon

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Coupon Management â€º should handle invalid coupon

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Coupon Management â€º should handle invalid coupon

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Coupon Management â€º should remove applied coupon

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Coupon Management â€º should remove applied coupon

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Calculations â€º should calculate cart totals correctly

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Calculations â€º should calculate cart totals correctly

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Calculations â€º should handle multiple items correctly

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Calculations â€º should handle multiple items correctly

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Error Handling â€º should handle adding out-of-stock item

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Error Handling â€º should handle adding out-of-stock item

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Error Handling â€º should handle updating non-existent cart item

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Error Handling â€º should handle updating non-existent cart item

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Error Handling â€º should handle removing non-existent cart item

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Error Handling â€º should handle removing non-existent cart item

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Persistence â€º should persist cart across sessions

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Persistence â€º should persist cart across sessions

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)


  â— Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'request')

      103 |   
      104 |   // Clear HTTP client interceptors
    > 105 |   httpClient.interceptors.request.clear();
          |                           ^
      106 |   httpClient.interceptors.response.clear();
      107 | };
      108 |

      at request (src/test/integration/setup.ts:105:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:100:36)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:36:33)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/screens/Settings/__tests__/MFASetupScreen.test.tsx
  MFASetupScreen
    RenderizaÃ§Ã£o Inicial
      âœ• should render loading state initially
      âœ• should render MFA disabled state (3 ms)
      âœ• should render MFA enabled state
    Carregamento de Status
      âœ• should load MFA status on mount
      âœ• should handle error when loading status fails (1 ms)
    Habilitar MFA
      âœ• should enable MFA when button is pressed
      âœ• should show loading state when enabling MFA
      âœ• should handle error when enabling MFA fails
    Desabilitar MFA
      âœ• should show disable button when MFA is enabled (1 ms)
      âœ• should disable MFA when button is pressed (1 ms)
      âœ• should not disable if no credentials available (1 ms)
    InstruÃ§Ãµes e InformaÃ§Ãµes
      âœ• should display MFA instructions (1 ms)
      âœ• should display security notice

  â— MFASetupScreen â€º RenderizaÃ§Ã£o Inicial â€º should render loading state initially

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º RenderizaÃ§Ã£o Inicial â€º should render MFA disabled state

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º RenderizaÃ§Ã£o Inicial â€º should render MFA enabled state

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Carregamento de Status â€º should load MFA status on mount

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Carregamento de Status â€º should handle error when loading status fails

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Habilitar MFA â€º should enable MFA when button is pressed

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Habilitar MFA â€º should show loading state when enabling MFA

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Habilitar MFA â€º should handle error when enabling MFA fails

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Desabilitar MFA â€º should show disable button when MFA is enabled

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Desabilitar MFA â€º should disable MFA when button is pressed

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Desabilitar MFA â€º should not disable if no credentials available

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º InstruÃ§Ãµes e InformaÃ§Ãµes â€º should display MFA instructions

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º InstruÃ§Ãµes e InformaÃ§Ãµes â€º should display security notice

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

FAIL src/hooks/__tests__/useOffline.test.ts
  useOffline
    Hook Principal
      âœ“ deve retornar estado offline correto (6 ms)
      âœ• deve sincronizar dados (7 ms)
      âœ• deve adicionar aÃ§Ã£o offline (4 ms)
      âœ• deve verificar se estÃ¡ no modo offline (1 ms)
      âœ“ deve limpar cache (1 ms)
      âœ• deve identificar flags de estado (2 ms)
    useOfflineCache
      âœ• deve buscar dados com cache (3 ms)
      âœ• deve atualizar cache manualmente (3 ms)
      âœ• deve tratar erro na busca (9 ms)
      âœ• deve refazer busca quando voltar online (4 ms)
    useOfflineImage
      âœ• deve cachear imagem com sucesso (3 ms)
      âœ• deve usar URL original em caso de erro (2 ms)
      âœ• deve retornar null para URL null (2 ms)
    useOfflineAction
      âœ“ deve executar aÃ§Ã£o online imediatamente (3 ms)
      âœ“ deve adicionar aÃ§Ã£o Ã  fila quando offline (3 ms)
      âœ“ deve chamar atualizaÃ§Ã£o otimista (1 ms)
      âœ• deve tratar erro na execuÃ§Ã£o (2 ms)

  â— useOffline â€º Hook Principal â€º deve sincronizar dados

    TypeError: Cannot read properties of undefined (reading 'length')

      92 |     // Flags Ãºteis
      93 |     isSyncing: syncStatus === 'syncing',
    > 94 |     hasPendingActions: pendingActions.length > 0,
         |                                       ^
      95 |     lastSyncError: syncStatus === 'error',
      96 |   };
      97 | };

      at length (src/hooks/useOffline.ts:94:39)
      at _renderHook2.wrapper (src/hooks/__tests__/useOffline.test.ts:77:53)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at updateFunctionComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9483:20)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11326:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performSyncWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15433:20)
      at flushSyncCallbacks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:2597:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at recursivelyFlushAsyncActWork (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2633:9)
      at node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2545:15

  â— useOffline â€º Hook Principal â€º deve adicionar aÃ§Ã£o offline

    TypeError: Cannot read properties of undefined (reading 'length')

      92 |     // Flags Ãºteis
      93 |     isSyncing: syncStatus === 'syncing',
    > 94 |     hasPendingActions: pendingActions.length > 0,
         |                                       ^
      95 |     lastSyncError: syncStatus === 'error',
      96 |   };
      97 | };

      at length (src/hooks/useOffline.ts:94:39)
      at _renderHook3.wrapper (src/hooks/__tests__/useOffline.test.ts:90:53)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at updateFunctionComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9483:20)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11326:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performSyncWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15433:20)
      at flushSyncCallbacks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:2597:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at recursivelyFlushAsyncActWork (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2633:9)
      at node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2545:15

  â— useOffline â€º Hook Principal â€º deve verificar se estÃ¡ no modo offline

    TypeError: Cannot read properties of undefined (reading 'current')

      103 |       const { _result } = renderHook(() => useOffline(), { wrapper });
      104 |
    > 105 |       expect(_result.current.isOfflineMode()).toBe(true);
          |                      ^
      106 |     });
      107 |
      108 |     it('deve limpar cache', async () => {

      at Object.current (src/hooks/__tests__/useOffline.test.ts:105:22)

  â— useOffline â€º Hook Principal â€º deve identificar flags de estado

    TypeError: Cannot read properties of undefined (reading 'current')

      126 |       });
      127 |
    > 128 |       expect(_result.current.isSyncing).toBe(true);
          |                      ^
      129 |       expect(_result.current.hasPendingActions).toBe(true);
      130 |       expect(_result.current.lastSyncError).toBe(false);
      131 |     });

      at Object.current (src/hooks/__tests__/useOffline.test.ts:128:22)

  â— useOffline â€º useOfflineCache â€º deve buscar dados com cache

    ReferenceError: priority is not defined

      153 |       }
      154 |     },
    > 155 |     [priority, strategy]
          |      ^
      156 |   );
      157 |
      158 |   // Auto fetch on mount

      at priority (src/hooks/useOffline.ts:155:6)
      at _renderHook7.wrapper (src/hooks/__tests__/useOffline.test.ts:142:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:141:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— useOffline â€º useOfflineCache â€º deve atualizar cache manualmente

    ReferenceError: priority is not defined

      153 |       }
      154 |     },
    > 155 |     [priority, strategy]
          |      ^
      156 |   );
      157 |
      158 |   // Auto fetch on mount

      at priority (src/hooks/useOffline.ts:155:6)
      at _renderHook8.wrapper (src/hooks/__tests__/useOffline.test.ts:164:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:163:36)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— useOffline â€º useOfflineCache â€º deve tratar erro na busca

    ReferenceError: priority is not defined

      153 |       }
      154 |     },
    > 155 |     [priority, strategy]
          |      ^
      156 |   );
      157 |
      158 |   // Auto fetch on mount

      at priority (src/hooks/useOffline.ts:155:6)
      at _renderHook9.wrapper (src/hooks/__tests__/useOffline.test.ts:189:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:188:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— useOffline â€º useOfflineCache â€º deve refazer busca quando voltar online

    ReferenceError: priority is not defined

      153 |       }
      154 |     },
    > 155 |     [priority, strategy]
          |      ^
      156 |   );
      157 |
      158 |   // Auto fetch on mount

      at priority (src/hooks/useOffline.ts:155:6)
      at _renderHook0.wrapper (src/hooks/__tests__/useOffline.test.ts:209:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:208:55)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— useOffline â€º useOfflineImage â€º deve cachear imagem com sucesso

    ReferenceError: priority is not defined

      210 |
      211 |     cacheImage();
    > 212 |   }, [url, priority]);
          |            ^
      213 |
      214 |   return {
      215 |     uri: cachedUrl || url,

      at priority (src/hooks/useOffline.ts:212:12)
      at _renderHook1.wrapper (src/hooks/__tests__/useOffline.test.ts:242:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:241:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— useOffline â€º useOfflineImage â€º deve usar URL original em caso de erro

    ReferenceError: priority is not defined

      210 |
      211 |     cacheImage();
    > 212 |   }, [url, priority]);
          |            ^
      213 |
      214 |   return {
      215 |     uri: cachedUrl || url,

      at priority (src/hooks/useOffline.ts:212:12)
      at _renderHook10.wrapper (src/hooks/__tests__/useOffline.test.ts:262:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:261:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— useOffline â€º useOfflineImage â€º deve retornar null para URL null

    ReferenceError: priority is not defined

      210 |
      211 |     cacheImage();
    > 212 |   }, [url, priority]);
          |            ^
      213 |
      214 |   return {
      215 |     uri: cachedUrl || url,

      at priority (src/hooks/useOffline.ts:212:12)
      at _renderHook11.wrapper (src/hooks/__tests__/useOffline.test.ts:276:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:275:37)

  â— useOffline â€º useOfflineAction â€º deve tratar erro na execuÃ§Ã£o

    ReferenceError: _result is not defined

      376 |
      377 |       expect(mockOnError).toHaveBeenCalledWith(mockError);
    > 378 |       expect(_result.current.error).toEqual(mockError);
          |              ^
      379 |     });
      380 |   });
      381 | });

      at Object._result (src/hooks/__tests__/useOffline.test.ts:378:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/store/slices/__tests__/userSlice.test.ts
  userSlice
    Estado Inicial
      âœ“ deve retornar o estado inicial correto (2 ms)
    Reducers SÃ­ncronos
      âœ“ deve limpar erro
      âœ“ deve resetar usuÃ¡rio completamente (1 ms)
    fetchUserProfile
      âœ“ deve buscar perfil do usuÃ¡rio com sucesso (2 ms)
      âœ“ deve tratar erro ao buscar perfil (1 ms)
    updateUserProfile
      âœ“ deve atualizar perfil do usuÃ¡rio com sucesso (8 ms)
    fetchUserAddresses
      âœ“ deve buscar endereÃ§os do usuÃ¡rio com sucesso (1 ms)
    addUserAddress
      âœ• deve adicionar endereÃ§o com sucesso
    fetchUserPaymentMethods
      âœ• deve buscar mÃ©todos de pagamento com sucesso
    fetchUserStatistics
      âœ• deve buscar estatÃ­sticas do usuÃ¡rio com sucesso
    Selectors
      âœ“ selectUserProfile deve retornar perfil do usuÃ¡rio
      âœ“ selectUserAddresses deve retornar endereÃ§os (1 ms)
      âœ“ selectUserPaymentMethods deve retornar mÃ©todos de pagamento
      âœ“ selectUserStatistics deve retornar estatÃ­sticas
      âœ• selectUserIsLoading deve retornar estado de loading
      âœ• selectUserIsUpdating deve retornar estado de updating
      âœ“ selectUserError deve retornar erro (1 ms)

  â— userSlice â€º addUserAddress â€º deve adicionar endereÃ§o com sucesso

    TypeError: (0 , _userSlice.addUserAddress) is not a function

      274 |       (userService.addAddress as jest.Mock).mockResolvedValue(newAddress);
      275 |
    > 276 |       await store.dispatch(addUserAddress({
          |                                          ^
      277 |         street: 'Rua Teste',
      278 |         number: '123',
      279 |         city: 'SÃ£o Paulo',

      at Object.<anonymous> (src/store/slices/__tests__/userSlice.test.ts:276:42)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— userSlice â€º fetchUserPaymentMethods â€º deve buscar mÃ©todos de pagamento com sucesso

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      299 |       ];
      300 |
    > 301 |       (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                    ^
      302 |
      303 |       await store.dispatch(fetchUserPaymentMethods());
      304 |

      at Object.mockResolvedValue (src/store/slices/__tests__/userSlice.test.ts:301:52)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— userSlice â€º fetchUserStatistics â€º deve buscar estatÃ­sticas do usuÃ¡rio com sucesso

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      326 |       };
      327 |
    > 328 |       (userService.getStatistics as jest.Mock).mockResolvedValue(mockStatistics);
          |                                                ^
      329 |
      330 |       await store.dispatch(fetchUserStatistics());
      331 |

      at Object.mockResolvedValue (src/store/slices/__tests__/userSlice.test.ts:328:48)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— userSlice â€º Selectors â€º selectUserIsLoading deve retornar estado de loading

    TypeError: (0 , _userSlice.selectUserIsLoading) is not a function

      379 |
      380 |     it('selectUserIsLoading deve retornar estado de loading', () => {
    > 381 |       expect(selectUserIsLoading(mockState)).toBe(false);
          |                                 ^
      382 |     });
      383 |
      384 |     it('selectUserIsUpdating deve retornar estado de updating', () => {

      at Object.<anonymous> (src/store/slices/__tests__/userSlice.test.ts:381:33)

  â— userSlice â€º Selectors â€º selectUserIsUpdating deve retornar estado de updating

    TypeError: (0 , _userSlice.selectUserIsUpdating) is not a function

      383 |
      384 |     it('selectUserIsUpdating deve retornar estado de updating', () => {
    > 385 |       expect(selectUserIsUpdating(mockState)).toBe(false);
          |                                  ^
      386 |     });
      387 |
      388 |     it('selectUserError deve retornar erro', () => {

      at Object.<anonymous> (src/store/slices/__tests__/userSlice.test.ts:385:34)

FAIL src/test/integration/boxes.integration.test.ts
  â— Boxes Integration Tests â€º Fetch Boxes â€º should fetch boxes list successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should fetch boxes list successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should handle pagination correctly

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should handle pagination correctly

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should apply filters correctly

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should apply filters correctly

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should handle API errors gracefully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should handle API errors gracefully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Fetch Box by ID â€º should fetch box details successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Fetch Box by ID â€º should fetch box details successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Fetch Box by ID â€º should handle non-existent box ID

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Fetch Box by ID â€º should handle non-existent box ID

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Search Boxes â€º should search boxes successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Search Boxes â€º should search boxes successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Search Boxes â€º should handle empty search query

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Search Boxes â€º should handle empty search query

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Search Boxes â€º should handle search with no results

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Search Boxes â€º should handle search with no results

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Box Categories â€º should fetch categories successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Box Categories â€º should fetch categories successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Box Categories â€º should fetch boxes by category

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Box Categories â€º should fetch boxes by category

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Featured and Popular Boxes â€º should fetch featured boxes

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Featured and Popular Boxes â€º should fetch featured boxes

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Featured and Popular Boxes â€º should fetch popular boxes

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Featured and Popular Boxes â€º should fetch popular boxes

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Box Reviews â€º should fetch box reviews

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Box Reviews â€º should fetch box reviews

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Box Reviews â€º should add a review to a box

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Box Reviews â€º should add a review to a box

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Error Handling â€º should handle network timeouts

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Error Handling â€º should handle network timeouts

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Error Handling â€º should handle malformed responses

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Error Handling â€º should handle malformed responses

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)


  â— Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'request')

      103 |   
      104 |   // Clear HTTP client interceptors
    > 105 |   httpClient.interceptors.request.clear();
          |                           ^
      106 |   httpClient.interceptors.response.clear();
      107 | };
      108 |

      at request (src/test/integration/setup.ts:105:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:100:36)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:26:33)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/__tests__/integration/gotify.integration.test.ts
  Testes de IntegraÃ§Ã£o - Gotify Notifications
    InicializaÃ§Ã£o
      âœ“ deve inicializar canais de notificaÃ§Ã£o (3 ms)
    ConexÃ£o WebSocket
      âœ• deve conectar ao Gotify WebSocket com token (2 ms)
      âœ“ deve registrar handlers de eventos do socket (1 ms)
      âœ“ deve processar mensagem recebida via WebSocket (1 ms)
    Recebimento de NotificaÃ§Ãµes
      âœ“ deve exibir notificaÃ§Ã£o local quando mensagem Ã© recebida (1 ms)
      âœ“ deve usar canal crÃ­tico para notificaÃ§Ãµes de alta prioridade (1 ms)
      âœ“ deve usar canal normal para notificaÃ§Ãµes de baixa prioridade (1 ms)
    Gerenciamento de Mensagens
      âœ“ deve buscar mensagens anteriores do Gotify (1 ms)
      âœ“ deve deletar mensagem especÃ­fica (1 ms)
      âœ“ deve deletar todas as mensagens (1 ms)
    Fluxo Completo de NotificaÃ§Ã£o
      âœ“ deve completar fluxo: conectar â†’ receber â†’ exibir â†’ gerenciar (2 ms)

  â— Testes de IntegraÃ§Ã£o - Gotify Notifications â€º ConexÃ£o WebSocket â€º deve conectar ao Gotify WebSocket com token

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "gotify", ObjectContaining {"path": "/stream", "query": {"token": "test-gotify-token"}, "transports": ["websocket"]}
    Received: "http://10.0.2.2:8888", {"path": "/stream", "query": {"token": "test-gotify-token"}, "reconnection": true, "reconnectionAttempts": Infinity, "reconnectionDelay": 1000, "reconnectionDelayMax": 5000, "transports": ["websocket"]}

    Number of calls: 1

      101 |
      102 |       // Assert
    > 103 |       expect(mockedIo).toHaveBeenCalledWith(
          |                        ^
      104 |         expect.stringContaining('gotify'),
      105 |         expect.objectContaining({
      106 |           path: '/stream',

      at Object.toHaveBeenCalledWith (src/services/__tests__/integration/gotify.integration.test.ts:103:24)

FAIL src/services/__tests__/offlineService.test.ts
  OfflineService
    InicializaÃ§Ã£o
      âœ“ deve inicializar o serviÃ§o corretamente (3 ms)
      âœ“ deve configurar o listener de rede
      âœ“ deve criar o diretÃ³rio de cache de imagens (1 ms)
    Cache de Dados
      âœ“ deve cachear dados com compressÃ£o (1 ms)
      âœ“ deve recuperar dados do cache
      âœ• deve usar fetcher quando cache nÃ£o existe (2 ms)
      âœ“ deve respeitar estratÃ©gias de cache (1 ms)
    SincronizaÃ§Ã£o Diferencial
      âœ“ deve identificar itens adicionados (1 ms)
      âœ“ deve identificar itens modificados (1 ms)
      âœ“ deve identificar itens removidos (1 ms)
    AÃ§Ãµes Pendentes
      âœ“ deve adicionar aÃ§Ã£o pendente (1 ms)
      âœ“ deve processar aÃ§Ãµes pendentes por prioridade (1 ms)
      âœ“ deve respeitar limite de tentativas (1 ms)
    Cache de Imagens
      âœ“ deve cachear imagem com sucesso (1 ms)
      âœ• deve retornar URL original em caso de erro (1 ms)
    Limpeza de Cache
      âœ“ deve limpar cache especÃ­fico (1 ms)
      âœ“ deve limpar todo o cache
      âœ• deve limpar cache antigo baseado no tamanho (1 ms)
    SincronizaÃ§Ã£o de Dados
      âœ“ deve sincronizar dados quando online (2 ms)
      âœ“ deve falhar quando offline sem force (12 ms)
      âœ“ deve respeitar configuraÃ§Ã£o de WiFi only (1 ms)
    DestruiÃ§Ã£o do ServiÃ§o
      âœ“ deve limpar recursos ao destruir (1 ms)

  â— OfflineService â€º Cache de Dados â€º deve usar fetcher quando cache nÃ£o existe

    expect(received).toEqual(expected) // deep equality

    Expected: {"id": 1, "name": "Test Box"}
    Received: null

       98 |
       99 |       expect(fetcher).toHaveBeenCalled();
    > 100 |       expect(_result).toEqual(testData);
          |                       ^
      101 |     });
      102 |
      103 |     it('deve respeitar estratÃ©gias de cache', async () => {

      at Object.toEqual (src/services/__tests__/offlineService.test.ts:100:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— OfflineService â€º Cache de Imagens â€º deve retornar URL original em caso de erro

    expect(received).toBe(expected) // Object.is equality

    Expected: "https://example.com/invalid-image.jpg"
    Received: "file:///cache/crowbar_images/p7eii5.jpg"

      262 |       const cachedUrl = await offlineService.cacheImage(imageUrl);
      263 |       
    > 264 |       expect(cachedUrl).toBe(imageUrl);
          |                         ^
      265 |     });
      266 |   });
      267 |

      at Object.toBe (src/services/__tests__/offlineService.test.ts:264:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— OfflineService â€º Limpeza de Cache â€º deve limpar cache antigo baseado no tamanho

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      291 |
      292 |       // Verificar se caches de baixa prioridade foram removidos
    > 293 |       expect(mockAsyncStorage.removeItem).toHaveBeenCalled();
          |                                           ^
      294 |     });
      295 |   });
      296 |

      at Object.toHaveBeenCalled (src/services/__tests__/offlineService.test.ts:293:43)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/components/__tests__/BoxOpeningAnimation.test.tsx
  BoxOpeningAnimation
    Initial Render
      âœ“ renders box information correctly (6 ms)
      âœ“ displays open button when in idle state (3 ms)
      âœ• applies correct rarity colors (3 ms)
    Animation States
      âœ• shows loading indicator when opening (25 ms)
      âœ“ shows revealing text when revealing (2 ms)
      âœ• renders particles when opening (3 ms)
      âœ• renders glow effect when opening (4 ms)
      âœ• hides open button during opening states (4 ms)
    User Interactions
      âœ“ calls onOpenPress when button is pressed (2 ms)
      âœ• disables button when canOpen is false (3 ms)
      âœ“ shows loading state when isLoading is true (9 ms)
      âœ• prevents multiple rapid taps (3 ms)
    Edge Cases
      âœ• handles missing images gracefully (2 ms)
      âœ• handles null images array gracefully (2 ms)
      âœ“ handles unknown rarity gracefully (1 ms)
      âœ“ handles missing rarity gracefully (2 ms)
      âœ“ formats currency correctly for different values (7 ms)
      âœ“ handles very long box names (9 ms)
    Performance Considerations
      âœ“ should not re-render unnecessarily (4 ms)
      âœ“ cleans up animations on unmount (2 ms)
    Accessibility
      âœ• provides meaningful accessibility labels (3 ms)
      âœ• supports screen reader navigation (2 ms)
      âœ• provides button action hints (2 ms)

  â— BoxOpeningAnimation â€º Initial Render â€º applies correct rarity colors

    Unable to find an element with testID: box-rarity

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mCOMMON[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      102 |         );
      103 |         
    > 104 |         const rarityText = getByTestId('box-rarity');
          |                            ^
      105 |         expect(rarityText.props.style.color).toBe(expectedColor);
      106 |       });
      107 |     });

      at getByTestId (src/components/__tests__/BoxOpeningAnimation.test.tsx:104:28)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/components/__tests__/BoxOpeningAnimation.test.tsx:98:19)

  â— BoxOpeningAnimation â€º Animation States â€º shows loading indicator when opening

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `BoxOpeningAnimation`.

      110 |   describe('Animation States', () => {
      111 |     it('shows loading indicator when opening', () => {
    > 112 |       const { getByText, getByTestId } = render(
          |                                                ^
      113 |         <BoxOpeningAnimation 
      114 |           {...defaultProps} 
      115 |           animationState="opening" 

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/BoxOpeningAnimation.test.tsx:112:48)

  â— BoxOpeningAnimation â€º Animation States â€º renders particles when opening

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `BoxOpeningAnimation`.

      133 |
      134 |     it('renders particles when opening', () => {
    > 135 |       const { getByTestId } = render(
          |                                     ^
      136 |         <BoxOpeningAnimation 
      137 |           {...defaultProps} 
      138 |           animationState="opening" 

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/BoxOpeningAnimation.test.tsx:135:37)

  â— BoxOpeningAnimation â€º Animation States â€º renders glow effect when opening

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `BoxOpeningAnimation`.

      144 |
      145 |     it('renders glow effect when opening', () => {
    > 146 |       const { getByTestId } = render(
          |                                     ^
      147 |         <BoxOpeningAnimation 
      148 |           {...defaultProps} 
      149 |           animationState="opening" 

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/BoxOpeningAnimation.test.tsx:146:37)

  â— BoxOpeningAnimation â€º Animation States â€º hides open button during opening states

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `BoxOpeningAnimation`.

      155 |
      156 |     it('hides open button during opening states', () => {
    > 157 |       const { queryByText } = render(
          |                                     ^
      158 |         <BoxOpeningAnimation 
      159 |           {...defaultProps} 
      160 |           animationState="opening" 

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/BoxOpeningAnimation.test.tsx:157:37)

  â— BoxOpeningAnimation â€º User Interactions â€º disables button when canOpen is false

    Unable to find an element with testID: open-box-button

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mEPIC[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      188 |       );
      189 |       
    > 190 |       const button = getByTestId('open-box-button');
          |                      ^
      191 |       expect(button.props.disabled).toBe(true);
      192 |     });
      193 |

      at Object.getByTestId (src/components/__tests__/BoxOpeningAnimation.test.tsx:190:22)

  â— BoxOpeningAnimation â€º User Interactions â€º prevents multiple rapid taps

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 3

      220 |       
      221 |       // Should only register first press
    > 222 |       expect(mockOnPress).toHaveBeenCalledTimes(1);
          |                           ^
      223 |     });
      224 |   });
      225 |

      at Object.toHaveBeenCalledTimes (src/components/__tests__/BoxOpeningAnimation.test.tsx:222:27)

  â— BoxOpeningAnimation â€º Edge Cases â€º handles missing images gracefully

    Unable to find an element with testID: box-image

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mEPIC[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      234 |       );
      235 |       
    > 236 |       const image = getByTestId('box-image');
          |                     ^
      237 |       expect(image.props.source.uri).toContain('data:image/svg+xml');
      238 |     });
      239 |

      at Object.getByTestId (src/components/__tests__/BoxOpeningAnimation.test.tsx:236:21)

  â— BoxOpeningAnimation â€º Edge Cases â€º handles null images array gracefully

    Unable to find an element with testID: box-image

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mEPIC[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      247 |       );
      248 |       
    > 249 |       const image = getByTestId('box-image');
          |                     ^
      250 |       expect(image.props.source.uri).toContain('data:image/svg+xml');
      251 |     });
      252 |

      at Object.getByTestId (src/components/__tests__/BoxOpeningAnimation.test.tsx:249:21)

  â— BoxOpeningAnimation â€º Accessibility â€º provides meaningful accessibility labels

    Unable to find an element with accessibility label: /Epic Mystery Box/

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mEPIC[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      343 |       );
      344 |
    > 345 |       expect(getByLabelText(/Epic Mystery Box/)).toBeTruthy();
          |              ^
      346 |       expect(getByLabelText(/79,99/)).toBeTruthy();
      347 |       expect(getByLabelText(/epic/i)).toBeTruthy();
      348 |     });

      at Object.getByLabelText (src/components/__tests__/BoxOpeningAnimation.test.tsx:345:14)

  â— BoxOpeningAnimation â€º Accessibility â€º supports screen reader navigation

    Unable to find an element with testID: box-name

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mEPIC[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      354 |
      355 |       const elements = [
    > 356 |         getByTestId('box-name'),
          |         ^
      357 |         getByTestId('box-price'),
      358 |         getByTestId('box-rarity'),
      359 |         getByTestId('open-box-button'),

      at Object.getByTestId (src/components/__tests__/BoxOpeningAnimation.test.tsx:356:9)

  â— BoxOpeningAnimation â€º Accessibility â€º provides button action hints

    Unable to find an element with testID: open-box-button

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mEPIC[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      370 |       );
      371 |
    > 372 |       const button = getByTestId('open-box-button');
          |                      ^
      373 |       expect(button.props.accessibilityHint).toContain('Toque para abrir a caixa');
      374 |     });
      375 |   });

      at Object.getByTestId (src/components/__tests__/BoxOpeningAnimation.test.tsx:372:22)

FAIL src/services/__tests__/boxService.test.ts
  BoxService
    getBoxes
      âœ“ should fetch boxes successfully (3 ms)
      âœ“ should handle API error (13 ms)
      âœ“ should pass filters correctly (1 ms)
    getBoxById
      âœ• should fetch box by id successfully (3 ms)
      âœ“ should handle not found error
    searchBoxes
      âœ“ should search boxes successfully (1 ms)
      âœ“ should handle empty query
    getBoxesByCategory
      âœ“ should fetch boxes by category successfully
    getFeaturedBoxes
      âœ“ should fetch featured boxes successfully (1 ms)
    getPopularBoxes
      âœ“ should fetch popular boxes successfully
    getCategories
      âœ“ should fetch categories successfully
    openBox
      â—‹ skipped should open box successfully
      â—‹ skipped should handle insufficient funds error
    getBoxReviews
      âœ“ should fetch box reviews successfully (1 ms)
    addBoxReview
      âœ“ should add review successfully (1 ms)
      âœ“ should handle validation errors

  â— BoxService â€º getBoxById â€º should fetch box by id successfully

    expect(received).toEqual(expected) // deep equality

    - Expected  - 3
    + Received  + 0

      Object {
    -   "data": Object {
        "category": "test",
        "description": "Test description",
        "id": "1",
        "image_url": "test.jpg",
        "name": "Test Box",
        "possible_items": Array [],
        "price": 10.99,
        "rarity": "common",
        "reviews": Array [],
        "stock": 10,
    -   },
    -   "success": true,
      }

      123 |
      124 |       expect(mockedApiClient.get).toHaveBeenCalledWith('/boxes/1');
    > 125 |       expect(_result).toEqual(mockResponse);
          |                       ^
      126 |       expect(_result.data).toEqual(mockBox);
      127 |     });
      128 |

      at Object.toEqual (src/services/__tests__/boxService.test.ts:125:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

PASS src/services/__tests__/viaCepService.test.ts
  ViaCepService
    getAddressByCep
      âœ“ deve buscar endereÃ§o por CEP vÃ¡lido (1 ms)
      âœ“ deve remover formataÃ§Ã£o do CEP antes da busca
      âœ“ deve lanÃ§ar erro para CEP com formato invÃ¡lido (11 ms)
      âœ“ deve tratar erro 404 como CEP nÃ£o encontrado
      âœ“ deve tratar timeout na requisiÃ§Ã£o (1 ms)
      âœ“ deve tratar outros erros genericamente
    getCepsByAddress
      âœ“ deve buscar CEPs por endereÃ§o vÃ¡lido
      âœ“ deve validar parÃ¢metros obrigatÃ³rios (2 ms)
      âœ“ deve validar formato da UF (2 ms)
      âœ“ deve validar tamanho mÃ­nimo do nome da rua (1 ms)
      âœ“ deve tratar erro 404 como endereÃ§o nÃ£o encontrado
      âœ“ deve tratar timeout na requisiÃ§Ã£o (1 ms)
      âœ“ deve tratar outros erros genericamente
    isValidCep
      âœ“ deve validar CEPs corretos (1 ms)
      âœ“ deve invalidar CEPs incorretos (1 ms)
    formatCep
      âœ“ deve formatar CEP vÃ¡lido corretamente (1 ms)
      âœ“ deve retornar CEP sem formataÃ§Ã£o se invÃ¡lido
    cleanCep
      âœ“ deve remover toda formataÃ§Ã£o do CEP (1 ms)
      âœ“ deve retornar string vazia para entrada vazia (1 ms)
      âœ“ deve remover letras e manter apenas nÃºmeros
    Casos de uso integrados
      âœ“ deve buscar e formatar endereÃ§o completo (1 ms)
      âœ“ deve validar, limpar e buscar CEP

PASS src/services/__tests__/userService.test.ts
  UserService
    getProfile
      âœ“ should fetch user profile successfully (1 ms)
      âœ“ should handle unauthorized error (1 ms)
    updateProfile
      âœ“ should update profile successfully
      âœ“ should handle validation errors (1 ms)
    updateAvatar
      âœ“ should upload avatar successfully (1 ms)
      âœ“ should handle file _size error
    getAddresses
      âœ“ should fetch addresses successfully (1 ms)
    addAddress
      âœ“ should add address successfully
    updateAddress
      âœ“ should update address successfully
    deleteAddress
      âœ“ should delete address successfully (1 ms)
      âœ“ should handle not found error
    getPaymentMethods
      â—‹ skipped should fetch payment methods successfully
    addPaymentMethod
      â—‹ skipped should add payment method successfully
    deletePaymentMethod
      â—‹ skipped should delete payment method successfully
    getStats
      âœ“ should fetch user statistics successfully (1 ms)
    changePassword
      âœ“ should change password successfully
      âœ“ should handle incorrect current password (1 ms)

PASS src/services/__tests__/cartService.test.ts
  CartService
    getCart
      âœ“ should fetch cart successfully (1 ms)
      âœ“ should handle empty cart
    addToCart
      âœ“ should add item to cart successfully (1 ms)
      âœ“ should handle out of stock error
      âœ“ should default quantity to 1 (1 ms)
    updateCartItem
      âœ“ should update cart item quantity successfully (4 ms)
      âœ“ should handle invalid quantity
    removeFromCart
      âœ“ should remove item from cart successfully
      âœ“ should handle item not found (1 ms)
    clearCart
      âœ“ should clear cart successfully
    applyCoupon
      âœ“ should apply coupon successfully (1 ms)
      âœ“ should handle invalid coupon
    removeCoupon
      âœ“ should remove coupon successfully (1 ms)
    calculateShipping
      âœ“ should calculate shipping successfully
      âœ“ should handle invalid zip code (1 ms)
    selectShipping
      â—‹ skipped should select shipping option successfully
    getCartSummary
      â—‹ skipped should get cart summary successfully

FAIL src/services/__tests__/realtimeService.test.ts
  RealtimeService
    connect
      âœ“ should connect to WebSocket successfully (2 ms)
      âœ“ should handle connection error (15 ms)
      âœ“ should use auth token in connection URL (1 ms)
      â—‹ skipped should handle connection timeout
    disconnect
      âœ“ should disconnect WebSocket successfully
    message handling
      âœ“ should handle box stock update message (1 ms)
      âœ• should handle order _status update message (2 ms)
      âœ“ should handle box opened event
      âœ“ should handle new box available message (1 ms)
      âœ“ should handle online users update (1 ms)
      âœ• should handle pong message (1 ms)
      âœ• should handle invalid JSON message (1 ms)
    subscriptions
      âœ“ should subscribe to box updates (1 ms)
      âœ• should not subscribe to same box twice (1 ms)
      âœ“ should subscribe to order updates
      âœ“ should subscribe to global events (1 ms)
      âœ“ should subscribe to live stats
    connection state
      âœ• should return correct connection state (1 ms)

  â— RealtimeService â€º message handling â€º should handle order _status update message

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"type": StringContaining "addNotification"}
    Received
           1: {"payload": "connecting", "type": "realtime/setConnectionStatus"}
           2: {"payload": "connected", "type": "realtime/setConnectionStatus"}
           3: {"payload": {"orderId": "order1", "status": "shipped", "tracking": {"number": "TR123456"}}, "type": "realtime/updateOrderStatus"}

    Number of calls: 3

      174 |
      175 |       // Should also add notification
    > 176 |       expect(mockedStore.dispatch).toHaveBeenCalledWith(
          |                                    ^
      177 |         expect.objectContaining({
      178 |           type: expect.stringContaining('addNotification'),
      179 |         })

      at Object.toHaveBeenCalledWith (src/services/__tests__/realtimeService.test.ts:176:36)

  â— RealtimeService â€º message handling â€º should handle pong message

    expect(jest.fn()).not.toHaveBeenCalled()

    Expected number of calls: 0
    Received number of calls: 2

    1: {"payload": "connecting", "type": "realtime/setConnectionStatus"}
    2: {"payload": "connected", "type": "realtime/setConnectionStatus"}

      280 |
      281 |       // Should not dispatch any actions for pong
    > 282 |       expect(mockedStore.dispatch).not.toHaveBeenCalled();
          |                                        ^
      283 |     });
      284 |
      285 |     it('should handle invalid JSON message', () => {

      at Object.toHaveBeenCalled (src/services/__tests__/realtimeService.test.ts:282:40)

  â— RealtimeService â€º message handling â€º should handle invalid JSON message

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Error handling WebSocket message:", Any<Error>

    Number of calls: 0

      292 |       }
      293 |
    > 294 |       expect(consoleSpy).toHaveBeenCalledWith(
          |                          ^
      295 |         'Error handling WebSocket message:',
      296 |         expect.any(Error)
      297 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/realtimeService.test.ts:294:26)

  â— RealtimeService â€º subscriptions â€º should not subscribe to same box twice

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      327 |       await realtimeService.subscribeToBox('box1');
      328 |
    > 329 |       expect(mockWebSocket.send).toHaveBeenCalledTimes(1);
          |                                  ^
      330 |     });
      331 |
      332 |     it('should subscribe to order updates', async () => {

      at Object.toHaveBeenCalledTimes (src/services/__tests__/realtimeService.test.ts:329:34)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— RealtimeService â€º connection state â€º should return correct connection state

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      367 |   describe('connection state', () => {
      368 |     it('should return correct connection state', () => {
    > 369 |       expect(realtimeService.isConnected()).toBe(false);
          |                                             ^
      370 |
      371 |       // Mock connected state
      372 |       mockWebSocket.readyState = WebSocket.OPEN;

      at Object.toBe (src/services/__tests__/realtimeService.test.ts:369:45)

FAIL src/components/__tests__/NotificationCard.test.tsx
  NotificationCard
    RenderizaÃ§Ã£o BÃ¡sica
      âœ• should render notification title and message
      âœ• should render unread notification with badge (5 ms)
      âœ• should render read notification without badge (1 ms)
    FormataÃ§Ã£o de Data
      âœ• should format date as minutes ago for recent notifications
      âœ• should format date as hours ago
      âœ• should format date as "Ontem" for yesterday
      âœ• should format date as days ago for older notifications (1 ms)
    Ãcones e Cores por Tipo
      âœ• should show package icon for order notifications
      âœ• should show tag icon for promotion notifications
      âœ• should show gift icon for box_opening notifications
      âœ• should show star icon for review notifications
      âœ• should show default bell icon for unknown type
    AÃ§Ãµes
      âœ• should mark notification as read when mark as read is pressed
      âœ• should delete notification when delete is pressed
    Estilos Customizados
      âœ• should apply custom style prop

  â— NotificationCard â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render notification title and message

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render unread notification with badge

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render read notification without badge

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º FormataÃ§Ã£o de Data â€º should format date as minutes ago for recent notifications

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º FormataÃ§Ã£o de Data â€º should format date as hours ago

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º FormataÃ§Ã£o de Data â€º should format date as "Ontem" for yesterday

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º FormataÃ§Ã£o de Data â€º should format date as days ago for older notifications

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º Ãcones e Cores por Tipo â€º should show package icon for order notifications

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º Ãcones e Cores por Tipo â€º should show tag icon for promotion notifications

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º Ãcones e Cores por Tipo â€º should show gift icon for box_opening notifications

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º Ãcones e Cores por Tipo â€º should show star icon for review notifications

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º Ãcones e Cores por Tipo â€º should show default bell icon for unknown type

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º AÃ§Ãµes â€º should mark notification as read when mark as read is pressed

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º AÃ§Ãµes â€º should delete notification when delete is pressed

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º Estilos Customizados â€º should apply custom style prop

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

FAIL src/test/integration/auth.integration.test.ts
  â— Authentication Integration Tests â€º User Registration â€º should register a new user successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Registration â€º should register a new user successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º User Registration â€º should handle registration with existing email

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Registration â€º should handle registration with existing email

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º User Registration â€º should handle registration with invalid data

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Registration â€º should handle registration with invalid data

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º User Login â€º should login with valid credentials

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Login â€º should login with valid credentials

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º User Login â€º should handle login with invalid credentials

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Login â€º should handle login with invalid credentials

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º User Login â€º should handle login with non-existent user

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Login â€º should handle login with non-existent user

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º User Logout â€º should logout successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Logout â€º should logout successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º Token Persistence â€º should persist token across app restarts

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º Token Persistence â€º should persist token across app restarts

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º Authentication State Management â€º should handle concurrent login attempts

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º Authentication State Management â€º should handle concurrent login attempts

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º Authentication State Management â€º should handle network errors gracefully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º Authentication State Management â€º should handle network errors gracefully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º Session Management â€º should handle token expiration

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º Session Management â€º should handle token expiration

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º Session Management â€º should refresh token when needed

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º Session Management â€º should refresh token when needed

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)


  â— Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'request')

      103 |   
      104 |   // Clear HTTP client interceptors
    > 105 |   httpClient.interceptors.request.clear();
          |                           ^
      106 |   httpClient.interceptors.response.clear();
      107 | };
      108 |

      at request (src/test/integration/setup.ts:105:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:100:36)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:25:33)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/__tests__/integration/mfa.integration.test.ts
  Testes de IntegraÃ§Ã£o - MFA
    Obter Status MFA
      âœ• deve obter status MFA do backend (1 ms)
      âœ• deve retornar status quando MFA estÃ¡ habilitado
      âœ“ deve lanÃ§ar erro quando usuÃ¡rio nÃ£o estÃ¡ autenticado (3 ms)
    Habilitar MFA
      âœ• deve habilitar MFA com sucesso (1 ms)
      âœ• deve lanÃ§ar erro quando habilitar MFA falha (1 ms)
    Desabilitar MFA
      âœ• deve desabilitar MFA com sucesso (1 ms)
      âœ• deve lanÃ§ar erro quando desabilitar MFA falha (1 ms)
    Verificar Necessidade de Setup
      âœ• deve retornar true quando MFA nÃ£o estÃ¡ habilitado (1 ms)
      âœ• deve retornar false quando MFA estÃ¡ habilitado (1 ms)
    Fluxo Completo MFA
      âœ• deve completar fluxo completo: habilitar â†’ verificar â†’ desabilitar (1 ms)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Obter Status MFA â€º deve obter status MFA do backend

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      55 |       };
      56 |
    > 57 |       mockedHttpClient.get.mockResolvedValue({
         |                            ^
      58 |         data: mockStatus,
      59 |       } as any);
      60 |

      at Object.mockResolvedValue (src/services/__tests__/integration/mfa.integration.test.ts:57:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Obter Status MFA â€º deve retornar status quando MFA estÃ¡ habilitado

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      91 |       };
      92 |
    > 93 |       mockedHttpClient.get.mockResolvedValue({
         |                            ^
      94 |         data: mockStatus,
      95 |       } as any);
      96 |

      at Object.mockResolvedValue (src/services/__tests__/integration/mfa.integration.test.ts:93:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Habilitar MFA â€º deve habilitar MFA com sucesso

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      121 |       };
      122 |
    > 123 |       mockedHttpClient.post.mockResolvedValue({
          |                             ^
      124 |         data: mockResponse,
      125 |       } as any);
      126 |

      at Object.mockResolvedValue (src/services/__tests__/integration/mfa.integration.test.ts:123:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Habilitar MFA â€º deve lanÃ§ar erro quando habilitar MFA falha

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      145 |     it('deve lanÃ§ar erro quando habilitar MFA falha', async () => {
      146 |       // Arrange
    > 147 |       mockedHttpClient.post.mockRejectedValue(new Error('Failed to enable MFA'));
          |                             ^
      148 |
      149 |       // Act & Assert
      150 |       await expect(mfaService.enable()).rejects.toThrow('Failed to enable MFA');

      at Object.mockRejectedValue (src/services/__tests__/integration/mfa.integration.test.ts:147:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Desabilitar MFA â€º deve desabilitar MFA com sucesso

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      160 |       };
      161 |
    > 162 |       mockedHttpClient.delete.mockResolvedValue({
          |                               ^
      163 |         data: mockResponse,
      164 |       } as any);
      165 |

      at Object.mockResolvedValue (src/services/__tests__/integration/mfa.integration.test.ts:162:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Desabilitar MFA â€º deve lanÃ§ar erro quando desabilitar MFA falha

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      184 |     it('deve lanÃ§ar erro quando desabilitar MFA falha', async () => {
      185 |       // Arrange
    > 186 |       mockedHttpClient.delete.mockRejectedValue(new Error('Failed to disable MFA'));
          |                               ^
      187 |
      188 |       // Act & Assert
      189 |       await expect(mfaService.disable('cred-1')).rejects.toThrow('Failed to disable MFA');

      at Object.mockRejectedValue (src/services/__tests__/integration/mfa.integration.test.ts:186:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Verificar Necessidade de Setup â€º deve retornar true quando MFA nÃ£o estÃ¡ habilitado

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      200 |       };
      201 |
    > 202 |       mockedHttpClient.get.mockResolvedValue({
          |                            ^
      203 |         data: mockStatus,
      204 |       } as any);
      205 |

      at Object.mockResolvedValue (src/services/__tests__/integration/mfa.integration.test.ts:202:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Verificar Necessidade de Setup â€º deve retornar false quando MFA estÃ¡ habilitado

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      226 |       };
      227 |
    > 228 |       mockedHttpClient.get.mockResolvedValue({
          |                            ^
      229 |         data: mockStatus,
      230 |       } as any);
      231 |

      at Object.mockResolvedValue (src/services/__tests__/integration/mfa.integration.test.ts:228:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Fluxo Completo MFA â€º deve completar fluxo completo: habilitar â†’ verificar â†’ desabilitar

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValueOnce')

      241 |     it('deve completar fluxo completo: habilitar â†’ verificar â†’ desabilitar', async () => {
      242 |       // Arrange - Status inicial: MFA desabilitado
    > 243 |       mockedHttpClient.get.mockResolvedValueOnce({
          |                            ^
      244 |         data: {
      245 |           mfaEnabled: false,
      246 |           mfaType: null,

      at Object.mockResolvedValueOnce (src/services/__tests__/integration/mfa.integration.test.ts:243:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/screens/__tests__/SettingsScreen.test.tsx
  SettingsScreen
    RenderizaÃ§Ã£o Inicial
      âœ• deve renderizar a tela corretamente (9 ms)
      âœ• deve exibir informaÃ§Ãµes do usuÃ¡rio (2 ms)
      âœ• deve exibir informaÃ§Ãµes Keycloak Realm (2 ms)
    Logout
      âœ• deve mostrar confirmaÃ§Ã£o antes de fazer logout (2 ms)
      âœ• deve executar logout quando confirmado (1 ms)
      âœ• nÃ£o deve executar logout quando cancelado (2 ms)
    ConfiguraÃ§Ãµes Gerais
      âœ• deve exibir opÃ§Ã£o de trocar ambiente (1 ms)
      âœ• deve mostrar alerta ao tentar trocar ambiente (1 ms)
      âœ• deve exibir opÃ§Ã£o de limpar dados (1 ms)
      âœ• deve mostrar confirmaÃ§Ã£o antes de limpar dados (2 ms)
    Estado de Loading
      âœ• deve desabilitar botÃµes durante loading (2 ms)

  â— SettingsScreen â€º RenderizaÃ§Ã£o Inicial â€º deve renderizar a tela corretamente

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:75:35)

  â— SettingsScreen â€º RenderizaÃ§Ã£o Inicial â€º deve exibir informaÃ§Ãµes do usuÃ¡rio

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:86:35)

  â— SettingsScreen â€º RenderizaÃ§Ã£o Inicial â€º deve exibir informaÃ§Ãµes Keycloak Realm

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:98:35)

  â— SettingsScreen â€º Logout â€º deve mostrar confirmaÃ§Ã£o antes de fazer logout

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:112:35)

  â— SettingsScreen â€º Logout â€º deve executar logout quando confirmado

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:142:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— SettingsScreen â€º Logout â€º nÃ£o deve executar logout quando cancelado

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:167:35)

  â— SettingsScreen â€º ConfiguraÃ§Ãµes Gerais â€º deve exibir opÃ§Ã£o de trocar ambiente

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:184:35)

  â— SettingsScreen â€º ConfiguraÃ§Ãµes Gerais â€º deve mostrar alerta ao tentar trocar ambiente

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:196:35)

  â— SettingsScreen â€º ConfiguraÃ§Ãµes Gerais â€º deve exibir opÃ§Ã£o de limpar dados

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:218:35)

  â— SettingsScreen â€º ConfiguraÃ§Ãµes Gerais â€º deve mostrar confirmaÃ§Ã£o antes de limpar dados

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:230:35)

  â— SettingsScreen â€º Estado de Loading â€º deve desabilitar botÃµes durante loading

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:258:35)

FAIL src/screens/__tests__/HomeScreen.test.tsx
  HomeScreen
    RenderizaÃ§Ã£o Inicial
      âœ• deve renderizar a tela corretamente (10 ms)
      âœ• deve exibir botÃ£o de teste Keycloak (6 ms)
      âœ• deve exibir botÃ£o de informaÃ§Ãµes do app (2 ms)
    Teste de ConexÃ£o Keycloak
      âœ• deve testar conexÃ£o Keycloak com sucesso (1 ms)
      âœ• deve tratar erro quando Keycloak nÃ£o estÃ¡ autenticado (1 ms)
      âœ• deve tratar erro quando teste Keycloak falha (1 ms)
      âœ• deve mostrar loading durante teste Keycloak (1 ms)
    ExibiÃ§Ã£o de InformaÃ§Ãµes do App
      âœ• deve exibir informaÃ§Ãµes do app ao clicar no botÃ£o (1 ms)
    IntegraÃ§Ã£o com Componentes
      âœ• deve renderizar componentes Realtime (1 ms)
      âœ• deve renderizar componentes Offline
      âœ• deve renderizar componentes Analytics (1 ms)

  â— HomeScreen â€º RenderizaÃ§Ã£o Inicial â€º deve renderizar a tela corretamente

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:107:35)

  â— HomeScreen â€º RenderizaÃ§Ã£o Inicial â€º deve exibir botÃ£o de teste Keycloak

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:118:35)

  â— HomeScreen â€º RenderizaÃ§Ã£o Inicial â€º deve exibir botÃ£o de informaÃ§Ãµes do app

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:129:35)

  â— HomeScreen â€º Teste de ConexÃ£o Keycloak â€º deve testar conexÃ£o Keycloak com sucesso

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:144:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HomeScreen â€º Teste de ConexÃ£o Keycloak â€º deve tratar erro quando Keycloak nÃ£o estÃ¡ autenticado

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:167:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HomeScreen â€º Teste de ConexÃ£o Keycloak â€º deve tratar erro quando teste Keycloak falha

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:191:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HomeScreen â€º Teste de ConexÃ£o Keycloak â€º deve mostrar loading durante teste Keycloak

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:217:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HomeScreen â€º ExibiÃ§Ã£o de InformaÃ§Ãµes do App â€º deve exibir informaÃ§Ãµes do app ao clicar no botÃ£o

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:236:35)

  â— HomeScreen â€º IntegraÃ§Ã£o com Componentes â€º deve renderizar componentes Realtime

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:256:42)

  â— HomeScreen â€º IntegraÃ§Ã£o com Componentes â€º deve renderizar componentes Offline

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:269:13)

  â— HomeScreen â€º IntegraÃ§Ã£o com Componentes â€º deve renderizar componentes Analytics

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:281:13)

PASS src/utils/__tests__/haptic.test.ts
  hapticFeedback
    iOS Platform
      âœ“ deve disparar feedback hÃ¡ptico padrÃ£o (impactLight) no iOS (1 ms)
      âœ“ deve disparar feedback hÃ¡ptico light no iOS (1 ms)
      âœ“ deve disparar feedback hÃ¡ptico medium no iOS
      âœ“ deve disparar feedback hÃ¡ptico heavy no iOS
      âœ“ deve disparar feedback de sucesso no iOS
      âœ“ deve disparar feedback de warning no iOS (1 ms)
      âœ“ deve disparar feedback de erro no iOS
      âœ“ deve disparar feedback de seleÃ§Ã£o no iOS (1 ms)
      âœ“ deve lidar com mÃºltiplas chamadas consecutivas no iOS (1 ms)
      âœ“ deve lidar graciosamente com erros da biblioteca hÃ¡ptica no iOS (5 ms)
    Android Platform
      âœ“ deve disparar vibraÃ§Ã£o no Android (1 ms)
      âœ“ deve ignorar tipo de feedback hÃ¡ptico no Android e usar vibraÃ§Ã£o
      âœ“ deve lidar com mÃºltiplas chamadas consecutivas no Android
      âœ“ deve lidar graciosamente quando Vibration nÃ£o estÃ¡ disponÃ­vel no Android
      âœ“ deve lidar graciosamente com erros de vibraÃ§Ã£o no Android
    Cross-platform Behavior
      âœ“ deve aceitar tipo de feedback customizado sem lanÃ§ar erro (1 ms)
      âœ“ nÃ£o deve disparar feedback em plataformas nÃ£o suportadas
      âœ“ deve lidar com valores undefined graciosamente (1 ms)
      âœ“ deve lidar com valores null graciosamente
      âœ“ deve lidar com string vazia graciosamente
    Export Validation
      âœ“ deve exportar hapticFeedback como named export
      âœ“ deve exportar hapticFeedback como default export
      âœ“ default export e named export devem ser a mesma funÃ§Ã£o

FAIL src/test/mocks/keycloak-mock-examples.test.ts
  Keycloak Mocks - Exemplos de Uso
    CenÃ¡rios BÃ¡sicos
      âœ• deve fazer login com sucesso (usuÃ¡rio padrÃ£o)
      âœ• deve fazer login como admin
      âœ• deve renovar tokens com sucesso
      âœ• deve fazer logout com sucesso
    CenÃ¡rios de Erro
      âœ• deve falhar com erro de rede
      âœ• deve falhar com credenciais invÃ¡lidas
      âœ• deve falhar com timeout
      âœ• deve falhar com erro 500
    SimulaÃ§Ã£o de LatÃªncia
      âœ• deve simular latÃªncia de 500ms
    ValidaÃ§Ã£o de JWT
      âœ• deve gerar ID token JWT vÃ¡lido
      âœ• deve conter claims corretos no ID token (1 ms)
    ExpiraÃ§Ã£o de Tokens
      âœ• deve detectar token expirado (1 ms)
      âœ• deve renovar token expirado (1 ms)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve fazer login com sucesso (usuÃ¡rio padrÃ£o)

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve fazer login com sucesso (usuÃ¡rio padrÃ£o)

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve fazer login como admin

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve fazer login como admin

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve renovar tokens com sucesso

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve renovar tokens com sucesso

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve fazer logout com sucesso

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve fazer logout com sucesso

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com erro de rede

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com erro de rede

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com credenciais invÃ¡lidas

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com credenciais invÃ¡lidas

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com timeout

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com timeout

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com erro 500

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com erro 500

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º SimulaÃ§Ã£o de LatÃªncia â€º deve simular latÃªncia de 500ms

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º SimulaÃ§Ã£o de LatÃªncia â€º deve simular latÃªncia de 500ms

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ValidaÃ§Ã£o de JWT â€º deve gerar ID token JWT vÃ¡lido

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ValidaÃ§Ã£o de JWT â€º deve gerar ID token JWT vÃ¡lido

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ValidaÃ§Ã£o de JWT â€º deve conter claims corretos no ID token

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ValidaÃ§Ã£o de JWT â€º deve conter claims corretos no ID token

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ExpiraÃ§Ã£o de Tokens â€º deve detectar token expirado

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ExpiraÃ§Ã£o de Tokens â€º deve detectar token expirado

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ExpiraÃ§Ã£o de Tokens â€º deve renovar token expirado

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ExpiraÃ§Ã£o de Tokens â€º deve renovar token expirado

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

FAIL src/components/__tests__/FavoriteButton.test.tsx
  FavoriteButton
    RenderizaÃ§Ã£o BÃ¡sica
      âœ• should render favorite button (1 ms)
      âœ• should render unfilled heart icon when not favorite (5 ms)
      âœ• should render filled heart icon when favorite (1 ms)
    Toggle de Favorito
      âœ• should toggle favorite when pressed
      âœ• should call onPress callback when toggled
      âœ• should not toggle when disabled (1 ms)
      âœ• should not toggle when updating
    CustomizaÃ§Ã£o
      âœ• should apply custom size
      âœ• should apply custom style (1 ms)

  â— FavoriteButton â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render favorite button

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render unfilled heart icon when not favorite

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render filled heart icon when favorite

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º Toggle de Favorito â€º should toggle favorite when pressed

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º Toggle de Favorito â€º should call onPress callback when toggled

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º Toggle de Favorito â€º should not toggle when disabled

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º Toggle de Favorito â€º should not toggle when updating

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º CustomizaÃ§Ã£o â€º should apply custom size

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º CustomizaÃ§Ã£o â€º should apply custom style

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

FAIL src/components/__tests__/LoadingScreen.test.tsx
  LoadingScreen
    RenderizaÃ§Ã£o BÃ¡sica
      âœ• should render loading screen (17 ms)
      âœ• should render ActivityIndicator (7 ms)
      âœ• should render loading text
    Estrutura
      âœ• should have correct container structure (1 ms)

  â— LoadingScreen â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render loading screen

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `LoadingScreen`.

      18 |   describe('RenderizaÃ§Ã£o BÃ¡sica', () => {
      19 |     it('should render loading screen', () => {
    > 20 |       render(<LoadingScreen />);
         |             ^
      21 |
      22 |       expect(screen.getByText('Carregando...')).toBeTruthy();
      23 |     });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/LoadingScreen.test.tsx:20:13)

  â— LoadingScreen â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render ActivityIndicator

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `LoadingScreen`.

      24 |
      25 |     it('should render ActivityIndicator', () => {
    > 26 |       render(<LoadingScreen />);
         |             ^
      27 |
      28 |       const indicator = screen.UNSAFE_getByType('ActivityIndicator');
      29 |       expect(indicator).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/LoadingScreen.test.tsx:26:13)

  â— LoadingScreen â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render loading text

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `LoadingScreen`.

      32 |
      33 |     it('should render loading text', () => {
    > 34 |       render(<LoadingScreen />);
         |             ^
      35 |
      36 |       const text = screen.getByText('Carregando...');
      37 |       expect(text).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/LoadingScreen.test.tsx:34:13)

  â— LoadingScreen â€º Estrutura â€º should have correct container structure

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `LoadingScreen`.

      41 |   describe('Estrutura', () => {
      42 |     it('should have correct container structure', () => {
    > 43 |       render(<LoadingScreen />);
         |             ^
      44 |
      45 |       const container = screen.UNSAFE_getByType('View');
      46 |       expect(container).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/LoadingScreen.test.tsx:43:13)

FAIL src/components/__tests__/ErrorMessage.test.tsx
  ErrorMessage
    RenderizaÃ§Ã£o BÃ¡sica
      âœ• should render error message with default title (20 ms)
      âœ• should render custom title (1 ms)
      âœ• should render icon by default
      âœ• should not render icon when showIcon is false (1 ms)
    Variantes
      âœ• should render default variant (1 ms)
      âœ“ should render minimal variant (1 ms)
      âœ• should render card variant (4 ms)
    AÃ§Ã£o de Retry
      âœ• should render retry button when onRetry is provided (1 ms)
      âœ• should call onRetry when retry button is pressed (1 ms)
      âœ• should use custom retry text
      âœ• should not render retry button when onRetry is not provided (1 ms)
    Estilos Customizados
      âœ• should apply custom style prop

  â— ErrorMessage â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render error message with default title

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      19 |   describe('RenderizaÃ§Ã£o BÃ¡sica', () => {
      20 |     it('should render error message with default title', () => {
    > 21 |       render(<ErrorMessage message="Test error message" />);
         |             ^
      22 |
      23 |       expect(screen.getByText('Ops! Algo deu errado')).toBeTruthy();
      24 |       expect(screen.getByText('Test error message')).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:21:13)

  â— ErrorMessage â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render custom title

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      26 |
      27 |     it('should render custom title', () => {
    > 28 |       render(
         |             ^
      29 |         <ErrorMessage message="Test error" title="Custom Error Title" />
      30 |       );
      31 |

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:28:13)

  â— ErrorMessage â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render icon by default

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      35 |
      36 |     it('should render icon by default', () => {
    > 37 |       render(<ErrorMessage message="Test error" />);
         |             ^
      38 |
      39 |       const icon = screen.UNSAFE_getByType('Icon');
      40 |       expect(icon).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:37:13)

  â— ErrorMessage â€º RenderizaÃ§Ã£o BÃ¡sica â€º should not render icon when showIcon is false

    TypeError: _reactNative.screen.queryAllByType is not a function

      45 |       render(<ErrorMessage message="Test error" showIcon={false} />);
      46 |
    > 47 |       const icons = screen.queryAllByType('Icon');
         |                            ^
      48 |       expect(icons.length).toBe(0);
      49 |     });
      50 |   });

      at Object.queryAllByType (src/components/__tests__/ErrorMessage.test.tsx:47:28)

  â— ErrorMessage â€º Variantes â€º should render default variant

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      52 |   describe('Variantes', () => {
      53 |     it('should render default variant', () => {
    > 54 |       render(<ErrorMessage message="Test error" variant="default" />);
         |             ^
      55 |
      56 |       expect(screen.getByText('Ops! Algo deu errado')).toBeTruthy();
      57 |       expect(screen.getByText('Test error')).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:54:13)

  â— ErrorMessage â€º Variantes â€º should render card variant

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      65 |
      66 |     it('should render card variant', () => {
    > 67 |       render(<ErrorMessage message="Test error" variant="card" />);
         |             ^
      68 |
      69 |       expect(screen.getByText('Ops! Algo deu errado')).toBeTruthy();
      70 |       expect(screen.getByText('Test error')).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:67:13)

  â— ErrorMessage â€º AÃ§Ã£o de Retry â€º should render retry button when onRetry is provided

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      76 |       const onRetry = jest.fn();
      77 |
    > 78 |       render(<ErrorMessage message="Test error" onRetry={onRetry} />);
         |             ^
      79 |
      80 |       const retryButton = screen.getByText('Tentar novamente');
      81 |       expect(retryButton).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:78:13)

  â— ErrorMessage â€º AÃ§Ã£o de Retry â€º should call onRetry when retry button is pressed

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      85 |       const onRetry = jest.fn();
      86 |
    > 87 |       render(<ErrorMessage message="Test error" onRetry={onRetry} />);
         |             ^
      88 |
      89 |       const retryButton = screen.getByText('Tentar novamente');
      90 |       fireEvent.press(retryButton);

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:87:13)

  â— ErrorMessage â€º AÃ§Ã£o de Retry â€º should use custom retry text

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

       96 |       const onRetry = jest.fn();
       97 |
    >  98 |       render(
          |             ^
       99 |         <ErrorMessage
      100 |           message="Test error"
      101 |           onRetry={onRetry}

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:98:13)

  â— ErrorMessage â€º AÃ§Ã£o de Retry â€º should not render retry button when onRetry is not provided

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      108 |
      109 |     it('should not render retry button when onRetry is not provided', () => {
    > 110 |       render(<ErrorMessage message="Test error" />);
          |             ^
      111 |
      112 |       expect(screen.queryByText('Tentar novamente')).toBeNull();
      113 |     });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:110:13)

  â— ErrorMessage â€º Estilos Customizados â€º should apply custom style prop

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      118 |       const customStyle = { marginTop: 20 };
      119 |
    > 120 |       render(<ErrorMessage message="Test error" style={customStyle} />);
          |             ^
      121 |
      122 |       const container = screen.UNSAFE_getByType('View');
      123 |       expect(container).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:120:13)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
Summary of all failing tests
FAIL src/store/slices/__tests__/ordersSlice.test.ts
  â— ordersSlice â€º Buscar Pedidos (fetchOrders) â€º deve substituir orders quando page Ã© 1

    expect(received).toEqual(expected) // deep equality

    - Expected  - 3
    + Received  + 3

      Object {
        "currentPage": 1,
    -   "hasNextPage": true,
    -   "totalItems": 50,
    -   "totalPages": 3,
    +   "hasNextPage": false,
    +   "totalItems": 0,
    +   "totalPages": 1,
      }

      197 |       expect(state.orders).toEqual(mockOrders);
      198 |       expect(state.orders).toHaveLength(2);
    > 199 |       expect(state.pagination).toEqual(mockPagination);
          |                                ^
      200 |       expect(state.lastUpdated).not.toBeNull();
      201 |     });
      202 |

      at Object.toEqual (src/store/slices/__tests__/ordersSlice.test.ts:199:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/api.test.ts
  â— ApiClient â€º 1. InicializaÃ§Ã£o e ConfiguraÃ§Ã£o â€º deve criar instÃ¢ncia do Axios com baseURL correto

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"baseURL": "https://api.test.com", "headers": {"Accept": "application/json", "Content-Type": "application/json", "X-Requested-With": "XMLHttpRequest"}, "timeout": 10000}

    Number of calls: 0

      88 |     it('deve criar instÃ¢ncia do Axios com baseURL correto', () => {
      89 |       // Verificar
    > 90 |       expect(mockedAxios.create).toHaveBeenCalledWith({
         |                                  ^
      91 |         baseURL: 'https://api.test.com',
      92 |         timeout: 10000,
      93 |         headers: {

      at Object.toHaveBeenCalledWith (src/services/__tests__/api.test.ts:90:34)

  â— ApiClient â€º 1. InicializaÃ§Ã£o e ConfiguraÃ§Ã£o â€º deve configurar headers padrÃ£o corretamente

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"headers": {"Accept": "application/json", "Content-Type": "application/json", "X-Requested-With": "XMLHttpRequest"}}

    Number of calls: 0

      101 |     it('deve configurar headers padrÃ£o corretamente', () => {
      102 |       // Verificar
    > 103 |       expect(mockedAxios.create).toHaveBeenCalledWith(
          |                                  ^
      104 |         expect.objectContaining({
      105 |           headers: {
      106 |             'Content-Type': 'application/json',

      at Object.toHaveBeenCalledWith (src/services/__tests__/api.test.ts:103:34)

  â— ApiClient â€º 1. InicializaÃ§Ã£o e ConfiguraÃ§Ã£o â€º deve configurar timeout corretamente

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"timeout": 10000}

    Number of calls: 0

      114 |     it('deve configurar timeout corretamente', () => {
      115 |       // Verificar
    > 116 |       expect(mockedAxios.create).toHaveBeenCalledWith(
          |                                  ^
      117 |         expect.objectContaining({
      118 |           timeout: 10000,
      119 |         })

      at Object.toHaveBeenCalledWith (src/services/__tests__/api.test.ts:116:34)

  â— ApiClient â€º 1. InicializaÃ§Ã£o e ConfiguraÃ§Ã£o â€º deve configurar interceptors no construtor

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      123 |     it('deve configurar interceptors no construtor', () => {
      124 |       // Verificar
    > 125 |       expect(mockAxiosInstance.interceptors.request.use).toHaveBeenCalled();
          |                                                          ^
      126 |       expect(mockAxiosInstance.interceptors.response.use).toHaveBeenCalled();
      127 |     });
      128 |   });

      at Object.toHaveBeenCalled (src/services/__tests__/api.test.ts:125:58)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve executar GET request com sucesso

    expect(received).toEqual(expected) // deep equality

    - Expected  -  2
    + Received  + 67

      Object {
        "data": Object {
    -     "id": "123",
    -     "name": "Test Box",
    +     "data": Object {
    +       "category": "tech",
    +       "categoryName": "Tecnologia",
    +       "contents": Array [
    +         Object {
    +           "name": "Item Surpresa 1",
    +           "probability": 30,
    +         },
    +         Object {
    +           "name": "Item Surpresa 2",
    +           "probability": 25,
    +         },
    +         Object {
    +           "name": "Item Surpresa 3",
    +           "probability": 20,
    +         },
    +         Object {
    +           "name": "Item Raro",
    +           "probability": 15,
    +         },
    +         Object {
    +           "name": "Item Super Raro",
    +           "probability": 10,
    +         },
    +       ],
    +       "createdAt": "2025-01-01T10:00:00Z",
    +       "description": "Caixa com produtos de tecnologia surpresa",
    +       "discount": 37,
    +       "featured": true,
    +       "id": "box-123",
    +       "image": "https://example.com/box-tech.jpg",
    +       "images": Array [
    +         "https://example.com/box-tech-1.jpg",
    +         "https://example.com/box-tech-2.jpg",
    +       ],
    +       "name": "Caixa Misteriosa Tech",
    +       "originalPrice": 79.9,
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "rating": 4.5,
    +       "reviewCount": 128,
    +       "sold": 250,
    +       "specifications": Object {
    +         "dimensions": "20x15x10cm",
    +         "maxValue": "150.00",
    +         "minValue": "30.00",
    +         "weight": "500g",
    +       },
    +       "stock": 50,
    +       "tags": Array [
    +         "eletrÃ´nicos",
    +         "gadgets",
    +         "surpresa",
    +       ],
    +       "updatedAt": "2025-01-01T10:00:00Z",
    +       "vendor": Object {
    +         "id": "vendor-123",
    +         "name": "TechStore Brasil",
    +         "rating": 4.7,
    +         "reviewCount": 1250,
    +         "since": "2023-01-01",
    +         "verified": true,
            },
    +       "vendorId": "vendor-123",
    +       "vendorName": "TechStore Brasil",
    +       "verified": true,
    +     },
          "success": true,
    +   },
      }

      143 |
      144 |       // Assert
    > 145 |       expect(result).toEqual(mockResponse.data);
          |                      ^
      146 |       expect(mockAxiosInstance.get).toHaveBeenCalledWith('/boxes/123', undefined);
      147 |     });
      148 |

      at Object.toEqual (src/services/__tests__/api.test.ts:145:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve executar POST request com dados

    expect(received).toEqual(expected) // deep equality

    - Expected  - 6
    + Received  + 3

      Object {
    -   "data": Object {
    -     "id": "456",
    -     "name": "New Box",
    -     "price": 99.99,
    -   },
    -   "success": true,
    +   "data": Object {},
    +   "status": 200,
    +   "statusText": "OK",
      }

      162 |
      163 |       // Assert
    > 164 |       expect(result).toEqual(mockResponse.data);
          |                      ^
      165 |       expect(mockAxiosInstance.post).toHaveBeenCalledWith('/boxes', mockData, undefined);
      166 |     });
      167 |

      at Object.toEqual (src/services/__tests__/api.test.ts:164:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve executar PUT request com dados

    expect(received).toEqual(expected) // deep equality

    - Expected  - 6
    + Received  + 3

      Object {
    -   "data": Object {
    -     "id": "123",
    -     "name": "Updated Box",
    -     "price": 149.99,
    -   },
    -   "success": true,
    +   "data": Object {},
    +   "status": 200,
    +   "statusText": "OK",
      }

      181 |
      182 |       // Assert
    > 183 |       expect(result).toEqual(mockResponse.data);
          |                      ^
      184 |       expect(mockAxiosInstance.put).toHaveBeenCalledWith('/boxes/123', mockData, undefined);
      185 |     });
      186 |

      at Object.toEqual (src/services/__tests__/api.test.ts:183:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve executar PATCH request com dados

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 3

      Object {
    -   "data": Object {
    -     "id": "123",
    -     "price": 129.99,
    -   },
    -   "success": true,
    +   "data": Object {},
    +   "status": 200,
    +   "statusText": "OK",
      }

      200 |
      201 |       // Assert
    > 202 |       expect(result).toEqual(mockResponse.data);
          |                      ^
      203 |       expect(mockAxiosInstance.patch).toHaveBeenCalledWith('/boxes/123', mockData, undefined);
      204 |     });
      205 |

      at Object.toEqual (src/services/__tests__/api.test.ts:202:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve executar DELETE request com sucesso

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 3

      Object {
    -   "message": "Box deleted successfully",
    -   "success": true,
    +   "data": Object {},
    +   "status": 200,
    +   "statusText": "OK",
      }

      218 |
      219 |       // Assert
    > 220 |       expect(result).toEqual(mockResponse.data);
          |                      ^
      221 |       expect(mockAxiosInstance.delete).toHaveBeenCalledWith('/boxes/123', undefined);
      222 |     });
      223 |

      at Object.toEqual (src/services/__tests__/api.test.ts:220:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve retornar response.data de todos os mÃ©todos

    expect(received).toEqual(expected) // deep equality

    - Expected  - 4
    + Received  + 3

      Object {
    -   "data": Object {
    -     "test": "value",
    -   },
    -   "success": true,
    +   "data": Object {},
    +   "status": 200,
    +   "statusText": "OK",
      }

      239 |
      240 |       // Act & Assert
    > 241 |       expect(await apiClient.get('/test')).toEqual(mockResponse.data);
          |                                            ^
      242 |       expect(await apiClient.post('/test', {})).toEqual(mockResponse.data);
      243 |       expect(await apiClient.put('/test', {})).toEqual(mockResponse.data);
      244 |       expect(await apiClient.patch('/test', {})).toEqual(mockResponse.data);

      at Object.toEqual (src/services/__tests__/api.test.ts:241:44)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve passar config customizado para Axios em GET

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/test", {"headers": {"Custom-Header": "value"}, "timeout": 5000}

    Number of calls: 0

      260 |
      261 |       // Assert
    > 262 |       expect(mockAxiosInstance.get).toHaveBeenCalledWith('/test', customConfig);
          |                                     ^
      263 |     });
      264 |
      265 |     it('deve passar config customizado para Axios em POST', async () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/api.test.ts:262:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve passar config customizado para Axios em POST

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/test", {}, {"headers": {"Custom-Header": "value"}}

    Number of calls: 0

      276 |
      277 |       // Assert
    > 278 |       expect(mockAxiosInstance.post).toHaveBeenCalledWith('/test', {}, customConfig);
          |                                      ^
      279 |     });
      280 |
      281 |     it('deve tratar erros em requisiÃ§Ãµes', async () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/api.test.ts:278:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 2. MÃ©todos HTTP â€º deve tratar erros em requisiÃ§Ãµes

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {}, "status": 200, "statusText": "OK"}

      285 |
      286 |       // Act & Assert
    > 287 |       await expect(apiClient.get('/test')).rejects.toThrow();
          |             ^
      288 |     });
      289 |   });
      290 |

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/api.test.ts:287:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 3. Request Interceptor â€º deve adicionar token de autorizaÃ§Ã£o quando token estÃ¡ definido

    TypeError: requestInterceptorOnFulfilled is not a function

      299 |
      300 |       // Act
    > 301 |       const result = await requestInterceptorOnFulfilled(mockConfig);
          |                            ^
      302 |
      303 |       // Assert
      304 |       expect(result.headers.Authorization).toBe('Bearer test-token-123');

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:301:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 3. Request Interceptor â€º nÃ£o deve adicionar Authorization header quando token nÃ£o estÃ¡ definido

    TypeError: requestInterceptorOnFulfilled is not a function

      314 |
      315 |       // Act
    > 316 |       const result = await requestInterceptorOnFulfilled(mockConfig);
          |                            ^
      317 |
      318 |       // Assert
      319 |       expect(result.headers.Authorization).toBeUndefined();

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:316:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 3. Request Interceptor â€º deve logar requisiÃ§Ã£o em modo desenvolvimento

    TypeError: requestInterceptorOnFulfilled is not a function

      337 |
      338 |       // Act
    > 339 |       await requestInterceptorOnFulfilled(mockConfig);
          |             ^
      340 |
      341 |       // Assert
      342 |       expect(logger.debug).toHaveBeenCalledWith('ï¿½ï¿½ API Request:', {

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:339:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 3. Request Interceptor â€º nÃ£o deve logar requisiÃ§Ã£o em modo produÃ§Ã£o

    TypeError: requestInterceptorOnFulfilled is not a function

      364 |
      365 |       // Act
    > 366 |       await requestInterceptorOnFulfilled(mockConfig);
          |             ^
      367 |
      368 |       // Assert
      369 |       expect(logger.debug).not.toHaveBeenCalled();

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:366:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 3. Request Interceptor â€º deve tratar erro no request interceptor

    TypeError: requestInterceptorOnRejected is not a function

      375 |
      376 |       // Act
    > 377 |       const result = requestInterceptorOnRejected(mockError);
          |                      ^
      378 |
      379 |       // Assert
      380 |       expect(logger.error).toHaveBeenCalledWith('âŒ Request Error:', mockError);

      at Object.requestInterceptorOnRejected (src/services/__tests__/api.test.ts:377:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve logar resposta em modo desenvolvimento

    TypeError: responseInterceptorOnFulfilled is not a function

      399 |
      400 |       // Act
    > 401 |       await responseInterceptorOnFulfilled(mockResponse);
          |             ^
      402 |
      403 |       // Assert
      404 |       expect(logger.debug).toHaveBeenCalledWith('âœ… API Response:', {

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/api.test.ts:401:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º nÃ£o deve logar resposta em modo produÃ§Ã£o

    TypeError: responseInterceptorOnFulfilled is not a function

      424 |
      425 |       // Act
    > 426 |       await responseInterceptorOnFulfilled(mockResponse);
          |             ^
      427 |
      428 |       // Assert
      429 |       expect(logger.debug).not.toHaveBeenCalled();

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/api.test.ts:426:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve limpar token de autenticaÃ§Ã£o em erro 401

    TypeError: requestInterceptorOnFulfilled is not a function

      451 |       // Assert - verifica que o token foi limpo
      452 |       const testConfig = { headers: {} };
    > 453 |       await requestInterceptorOnFulfilled(testConfig);
          |             ^
      454 |       expect(testConfig.headers.Authorization).toBeUndefined();
      455 |     });
      456 |

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:453:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve formatar erro com resposta do servidor

    expect(received).toEqual(expected) // deep equality

    - Expected  - 17
    + Received  +  1

    - Object {
    -   "data": Object {
    -     "errors": Object {
    -       "email": Array [
    -         "Email is required",
    -       ],
    -     },
    -     "message": "Validation error",
    -   },
    -   "errors": Object {
    -     "email": Array [
    -       "Email is required",
    -     ],
    -   },
    -   "message": "Validation error",
    -   "status": 422,
    - }
    + [TypeError: responseInterceptorOnRejected is not a function]

      478 |
      479 |       // Assert
    > 480 |       expect(formattedError).toEqual({
          |                              ^
      481 |         status: 422,
      482 |         message: 'Validation error',
      483 |         errors: { email: ['Email is required'] },

      at Object.toEqual (src/services/__tests__/api.test.ts:480:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve formatar erro de rede (sem resposta)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 6
    + Received  + 1

    - Object {
    -   "data": null,
    -   "errors": Object {},
    -   "message": "Network Error",
    -   "status": 0,
    - }
    + [TypeError: responseInterceptorOnRejected is not a function]

      502 |
      503 |       // Assert
    > 504 |       expect(formattedError).toEqual({
          |                              ^
      505 |         status: 0,
      506 |         message: 'Network Error',
      507 |         errors: {},

      at Object.toEqual (src/services/__tests__/api.test.ts:504:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve formatar erro de timeout

    expect(received).toEqual(expected) // deep equality

    - Expected  - 6
    + Received  + 1

    - Object {
    -   "data": null,
    -   "errors": Object {},
    -   "message": "timeout of 10000ms exceeded",
    -   "status": 0,
    - }
    + [TypeError: responseInterceptorOnRejected is not a function]

      527 |
      528 |       // Assert
    > 529 |       expect(formattedError).toEqual({
          |                              ^
      530 |         status: 0,
      531 |         message: 'timeout of 10000ms exceeded',
      532 |         errors: {},

      at Object.toEqual (src/services/__tests__/api.test.ts:529:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve logar erro antes de formatÃ¡-lo

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ API Error:", {"data": {"message": "Internal Server Error"}, "message": "Server error", "status": 500, "url": "/error"}

    Number of calls: 0

      554 |
      555 |       // Assert
    > 556 |       expect(logger.error).toHaveBeenCalledWith('âŒ API Error:', {
          |                            ^
      557 |         status: 500,
      558 |         url: '/error',
      559 |         message: 'Server error',

      at Object.toHaveBeenCalledWith (src/services/__tests__/api.test.ts:556:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 4. Response Interceptor â€º deve usar mensagem padrÃ£o se resposta nÃ£o tiver message

    expect(received).toBe(expected) // Object.is equality

    Expected: "Erro na requisiÃ§Ã£o"
    Received: "responseInterceptorOnRejected is not a function"

      582 |
      583 |       // Assert
    > 584 |       expect(formattedError?.message).toBe('Erro na requisiÃ§Ã£o');
          |                                       ^
      585 |     });
      586 |   });
      587 |

      at Object.toBe (src/services/__tests__/api.test.ts:584:39)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 5. Gerenciamento de Token â€º deve definir token de autenticaÃ§Ã£o

    TypeError: requestInterceptorOnFulfilled is not a function

      593 |       // Assert
      594 |       const testConfig = { headers: {} };
    > 595 |       requestInterceptorOnFulfilled(testConfig);
          |       ^
      596 |       expect(testConfig.headers.Authorization).toBe('Bearer new-token-456');
      597 |     });
      598 |

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:595:7)

  â— ApiClient â€º 5. Gerenciamento de Token â€º deve limpar token de autenticaÃ§Ã£o

    TypeError: requestInterceptorOnFulfilled is not a function

      606 |       // Assert
      607 |       const testConfig = { headers: {} };
    > 608 |       requestInterceptorOnFulfilled(testConfig);
          |       ^
      609 |       expect(testConfig.headers.Authorization).toBeUndefined();
      610 |     });
      611 |

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:608:7)

  â— ApiClient â€º 5. Gerenciamento de Token â€º deve adicionar token a requisiÃ§Ãµes subsequentes

    TypeError: requestInterceptorOnFulfilled is not a function

      619 |
      620 |       // Act
    > 621 |       await requestInterceptorOnFulfilled(testConfig);
          |             ^
      622 |
      623 |       // Assert
      624 |       expect(testConfig.headers.Authorization).toBe('Bearer persistent-token');

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:621:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 5. Gerenciamento de Token â€º nÃ£o deve adicionar token apÃ³s limpeza

    TypeError: requestInterceptorOnFulfilled is not a function

      632 |       // Act
      633 |       const testConfig = { headers: {} };
    > 634 |       await requestInterceptorOnFulfilled(testConfig);
          |             ^
      635 |
      636 |       // Assert
      637 |       expect(testConfig.headers.Authorization).toBeUndefined();

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/api.test.ts:634:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 6. Upload e Download â€º deve fazer upload de arquivo com FormData

    expect(received).toEqual(expected) // deep equality

    - Expected  - 4
    + Received  + 1

      Object {
    -   "data": Object {
    -     "url": "https://cdn.example.com/file.jpg",
    -   },
    -   "success": true,
    +   "data": Object {},
      }

      656 |
      657 |       // Assert
    > 658 |       expect(result).toEqual(mockResponse.data);
          |                      ^
      659 |       expect(mockAxiosInstance.post).toHaveBeenCalledWith(
      660 |         '/upload',
      661 |         formData,

      at Object.toEqual (src/services/__tests__/api.test.ts:658:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 6. Upload e Download â€º deve definir Content-Type multipart/form-data no upload

    TypeError: Cannot read properties of undefined (reading '2')

      678 |
      679 |       // Assert
    > 680 |       const callConfig = mockAxiosInstance.post.mock.calls[0][2];
          |                                                              ^
      681 |       expect(callConfig.headers['Content-Type']).toBe('multipart/form-data');
      682 |     });
      683 |

      at Object.<anonymous> (src/services/__tests__/api.test.ts:680:62)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 6. Upload e Download â€º deve fazer download de arquivo como Blob

    TypeError: apiClient.download is not a function

      689 |
      690 |       // Act
    > 691 |       const result = await apiClient.download('/download/file.pdf');
          |                                      ^
      692 |
      693 |       // Assert
      694 |       expect(result).toBe(mockBlob);

      at Object.download (src/services/__tests__/api.test.ts:691:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 6. Upload e Download â€º deve retornar Blob do download

    TypeError: apiClient.download is not a function

      708 |
      709 |       // Act
    > 710 |       const result = await apiClient.download('/file.pdf');
          |                                      ^
      711 |
      712 |       // Assert
      713 |       expect(result).toBeInstanceOf(Blob);

      at Object.download (src/services/__tests__/api.test.ts:710:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 6. Upload e Download â€º deve mesclar config customizado no upload

    TypeError: Cannot read properties of undefined (reading '2')

      729 |
      730 |       // Assert
    > 731 |       const callConfig = mockAxiosInstance.post.mock.calls[0][2];
          |                                                              ^
      732 |       expect(callConfig.headers['Content-Type']).toBe('multipart/form-data');
      733 |       expect(callConfig.headers['X-Custom']).toBe('value');
      734 |       expect(callConfig.timeout).toBe(30000);

      at Object.<anonymous> (src/services/__tests__/api.test.ts:731:62)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ApiClient â€º 7. UtilitÃ¡rios â€º deve verificar conectividade com sucesso

    TypeError: apiClient.checkConnectivity is not a function

      742 |
      743 |       // Act
    > 744 |       const result = await apiClient.checkConnectivity();
          |                                      ^
      745 |
      746 |       // Assert
      747 |       expect(result).toBe(true);

      at Object.checkConnectivity (src/services/__tests__/api.test.ts:744:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 7. UtilitÃ¡rios â€º deve verificar conectividade com falha

    TypeError: apiClient.checkConnectivity is not a function

      754 |
      755 |       // Act
    > 756 |       const result = await apiClient.checkConnectivity();
          |                                      ^
      757 |
      758 |       // Assert
      759 |       expect(result).toBe(false);

      at Object.checkConnectivity (src/services/__tests__/api.test.ts:756:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ApiClient â€º 7. UtilitÃ¡rios â€º deve retornar instÃ¢ncia do Axios

    TypeError: apiClient.getAxiosInstance is not a function

      762 |     it('deve retornar instÃ¢ncia do Axios', () => {
      763 |       // Act
    > 764 |       const axiosInstance = apiClient.getAxiosInstance();
          |                                       ^
      765 |
      766 |       // Assert
      767 |       expect(axiosInstance).toBe(mockAxiosInstance);

      at Object.getAxiosInstance (src/services/__tests__/api.test.ts:764:39)

  â— ApiClient â€º 7. UtilitÃ¡rios â€º deve cancelar requisiÃ§Ãµes pendentes e logar

    TypeError: apiClient.cancelPendingRequests is not a function

      770 |     it('deve cancelar requisiÃ§Ãµes pendentes e logar', () => {
      771 |       // Act
    > 772 |       apiClient.cancelPendingRequests();
          |                 ^
      773 |
      774 |       // Assert
      775 |       expect(logger.debug).toHaveBeenCalledWith('ï¿½ï¿½ Cancelling pending requests...');

      at Object.cancelPendingRequests (src/services/__tests__/api.test.ts:772:17)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º deve identificar erro de validaÃ§Ã£o (422)

    TypeError: Cannot read properties of undefined (reading 'isValidationError')

      788 |
      789 |       // Act & Assert
    > 790 |       expect(ApiErrorUtils.isValidationError(validationError)).toBe(true);
          |                            ^
      791 |     });
      792 |
      793 |     it('deve identificar erro de autenticaÃ§Ã£o (401)', () => {

      at Object.isValidationError (src/services/__tests__/api.test.ts:790:28)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º deve identificar erro de autenticaÃ§Ã£o (401)

    TypeError: Cannot read properties of undefined (reading 'isAuthError')

      801 |
      802 |       // Act & Assert
    > 803 |       expect(ApiErrorUtils.isAuthError(authError)).toBe(true);
          |                            ^
      804 |     });
      805 |
      806 |     it('deve identificar erro de autorizaÃ§Ã£o (403)', () => {

      at Object.isAuthError (src/services/__tests__/api.test.ts:803:28)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º deve identificar erro de autorizaÃ§Ã£o (403)

    TypeError: Cannot read properties of undefined (reading 'isAuthorizationError')

      814 |
      815 |       // Act & Assert
    > 816 |       expect(ApiErrorUtils.isAuthorizationError(authorizationError)).toBe(true);
          |                            ^
      817 |     });
      818 |
      819 |     it('deve identificar erro de nÃ£o encontrado (404)', () => {

      at Object.isAuthorizationError (src/services/__tests__/api.test.ts:816:28)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º deve identificar erro de nÃ£o encontrado (404)

    TypeError: Cannot read properties of undefined (reading 'isNotFoundError')

      827 |
      828 |       // Act & Assert
    > 829 |       expect(ApiErrorUtils.isNotFoundError(notFoundError)).toBe(true);
          |                            ^
      830 |     });
      831 |
      832 |     it('deve identificar erro de servidor (500+)', () => {

      at Object.isNotFoundError (src/services/__tests__/api.test.ts:829:28)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º deve identificar erro de servidor (500+)

    TypeError: Cannot read properties of undefined (reading 'isServerError')

      846 |
      847 |       // Act & Assert
    > 848 |       expect(ApiErrorUtils.isServerError(serverError500)).toBe(true);
          |                            ^
      849 |       expect(ApiErrorUtils.isServerError(serverError503)).toBe(true);
      850 |     });
      851 |

      at Object.isServerError (src/services/__tests__/api.test.ts:848:28)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º deve identificar erro de rede (status 0)

    TypeError: Cannot read properties of undefined (reading 'isNetworkError')

      860 |
      861 |       // Act & Assert
    > 862 |       expect(ApiErrorUtils.isNetworkError(networkError)).toBe(true);
          |                            ^
      863 |     });
      864 |
      865 |     it('nÃ£o deve identificar falsamente tipos de erro', () => {

      at Object.isNetworkError (src/services/__tests__/api.test.ts:862:28)

  â— ApiClient â€º 8. ApiErrorUtils - Verificadores de Tipo de Erro â€º nÃ£o deve identificar falsamente tipos de erro

    TypeError: Cannot read properties of undefined (reading 'isValidationError')

      873 |
      874 |       // Act & Assert
    > 875 |       expect(ApiErrorUtils.isValidationError(badRequestError)).toBe(false);
          |                            ^
      876 |       expect(ApiErrorUtils.isAuthError(badRequestError)).toBe(false);
      877 |       expect(ApiErrorUtils.isAuthorizationError(badRequestError)).toBe(false);
      878 |       expect(ApiErrorUtils.isNotFoundError(badRequestError)).toBe(false);

      at Object.isValidationError (src/services/__tests__/api.test.ts:875:28)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem amigÃ¡vel para erro de rede

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      893 |
      894 |       // Act
    > 895 |       const message = ApiErrorUtils.getFriendlyMessage(networkError);
          |                                     ^
      896 |
      897 |       // Assert
      898 |       expect(message).toBe('Erro de conexÃ£o. Verifique sua internet.');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:895:37)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem amigÃ¡vel para erro de servidor

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      909 |
      910 |       // Act
    > 911 |       const message = ApiErrorUtils.getFriendlyMessage(serverError);
          |                                     ^
      912 |
      913 |       // Assert
      914 |       expect(message).toBe('Erro interno do servidor. Tente novamente mais tarde.');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:911:37)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem amigÃ¡vel para erro nÃ£o encontrado

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      925 |
      926 |       // Act
    > 927 |       const message = ApiErrorUtils.getFriendlyMessage(notFoundError);
          |                                     ^
      928 |
      929 |       // Assert
      930 |       expect(message).toBe('Recurso nÃ£o encontrado.');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:927:37)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem amigÃ¡vel para erro de autenticaÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      941 |
      942 |       // Act
    > 943 |       const message = ApiErrorUtils.getFriendlyMessage(authError);
          |                                     ^
      944 |
      945 |       // Assert
      946 |       expect(message).toBe('SessÃ£o expirada. FaÃ§a login novamente.');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:943:37)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem amigÃ¡vel para erro de autorizaÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      957 |
      958 |       // Act
    > 959 |       const message = ApiErrorUtils.getFriendlyMessage(authorizationError);
          |                                     ^
      960 |
      961 |       // Assert
      962 |       expect(message).toBe('VocÃª nÃ£o tem permissÃ£o para esta aÃ§Ã£o.');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:959:37)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem do erro para outros casos

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      973 |
      974 |       // Act
    > 975 |       const message = ApiErrorUtils.getFriendlyMessage(customError);
          |                                     ^
      976 |
      977 |       // Assert
      978 |       expect(message).toBe('Custom error message');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:975:37)

  â— ApiClient â€º 9. ApiErrorUtils - Mensagens AmigÃ¡veis â€º deve retornar mensagem padrÃ£o quando erro nÃ£o tem mensagem

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      989 |
      990 |       // Act
    > 991 |       const message = ApiErrorUtils.getFriendlyMessage(errorWithoutMessage);
          |                                     ^
      992 |
      993 |       // Assert
      994 |       expect(message).toBe('Erro desconhecido.');

      at Object.getFriendlyMessage (src/services/__tests__/api.test.ts:991:37)

  â— ApiClient â€º 10. ApiErrorUtils - Erros de ValidaÃ§Ã£o Formatados â€º deve formatar erros de validaÃ§Ã£o corretamente

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      1010 |
      1011 |       // Act
    > 1012 |       const formattedErrors = ApiErrorUtils.getValidationErrors(validationError);
           |                                             ^
      1013 |
      1014 |       // Assert
      1015 |       expect(formattedErrors).toEqual({

      at Object.getValidationErrors (src/services/__tests__/api.test.ts:1012:45)

  â— ApiClient â€º 10. ApiErrorUtils - Erros de ValidaÃ§Ã£o Formatados â€º deve retornar primeira mensagem de array de erros

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      1031 |
      1032 |       // Act
    > 1033 |       const formattedErrors = ApiErrorUtils.getValidationErrors(validationError);
           |                                             ^
      1034 |
      1035 |       // Assert
      1036 |       expect(formattedErrors.name).toBe('Name is required');

      at Object.getValidationErrors (src/services/__tests__/api.test.ts:1033:45)

  â— ApiClient â€º 10. ApiErrorUtils - Erros de ValidaÃ§Ã£o Formatados â€º deve retornar objeto vazio para erro nÃ£o-validaÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      1049 |
      1050 |       // Act
    > 1051 |       const formattedErrors = ApiErrorUtils.getValidationErrors(notValidationError);
           |                                             ^
      1052 |
      1053 |       // Assert
      1054 |       expect(formattedErrors).toEqual({});

      at Object.getValidationErrors (src/services/__tests__/api.test.ts:1051:45)

  â— ApiClient â€º 10. ApiErrorUtils - Erros de ValidaÃ§Ã£o Formatados â€º deve lidar com erros vazios

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      1065 |
      1066 |       // Act
    > 1067 |       const formattedErrors = ApiErrorUtils.getValidationErrors(validationError);
           |                                             ^
      1068 |
      1069 |       // Assert
      1070 |       expect(formattedErrors).toEqual({});

      at Object.getValidationErrors (src/services/__tests__/api.test.ts:1067:45)

  â— ApiClient â€º 10. ApiErrorUtils - Erros de ValidaÃ§Ã£o Formatados â€º deve lidar com mensagens de erro que nÃ£o sÃ£o arrays

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      1084 |
      1085 |       // Act
    > 1086 |       const formattedErrors = ApiErrorUtils.getValidationErrors(validationError);
           |                                             ^
      1087 |
      1088 |       // Assert
      1089 |       expect(formattedErrors.field1).toBe('Array message');

      at Object.getValidationErrors (src/services/__tests__/api.test.ts:1086:45)

FAIL src/store/slices/__tests__/authSlice.test.ts
  â— authSlice â€º Verificar Estado de AutenticaÃ§Ã£o â€º deve restaurar usuÃ¡rio quando tokens vÃ¡lidos existem

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      511 |       (keycloakService.getAccessToken as jest.Mock).mockResolvedValue('valid-token');
      512 |       (keycloakService.getUserInfo as jest.Mock).mockResolvedValue(mockUserInfo);
    > 513 |       (keycloakService.getTokens as jest.Mock).mockResolvedValue(mockTokens);
          |                                                ^
      514 |       (mfaService.getStatus as jest.Mock).mockResolvedValue({ mfaEnabled: false });
      515 |
      516 |       const store = createTestStore();

      at Object.mockResolvedValue (src/store/slices/__tests__/authSlice.test.ts:513:48)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— authSlice â€º Verificar Estado de AutenticaÃ§Ã£o â€º deve retornar null quando tokens nÃ£o existem

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      556 |       (keycloakService.getAccessToken as jest.Mock).mockResolvedValue('valid-token');
      557 |       (keycloakService.getUserInfo as jest.Mock).mockResolvedValue(mockUserInfo);
    > 558 |       (keycloakService.getTokens as jest.Mock).mockResolvedValue(null);
          |                                                ^
      559 |
      560 |       const store = createTestStore();
      561 |       await store.dispatch(checkAuthState());

      at Object.mockResolvedValue (src/store/slices/__tests__/authSlice.test.ts:558:48)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— authSlice â€º Verificar Estado de AutenticaÃ§Ã£o â€º deve definir needsMfaSetup baseado no status MFA

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      570 |       (keycloakService.getAccessToken as jest.Mock).mockResolvedValue('valid-token');
      571 |       (keycloakService.getUserInfo as jest.Mock).mockResolvedValue(mockUserInfo);
    > 572 |       (keycloakService.getTokens as jest.Mock).mockResolvedValue(mockTokens);
          |                                                ^
      573 |       (mfaService.getStatus as jest.Mock).mockResolvedValue({ mfaEnabled: true });
      574 |
      575 |       const store = createTestStore();

      at Object.mockResolvedValue (src/store/slices/__tests__/authSlice.test.ts:572:48)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/__tests__/integration/cart.integration.test.ts
  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Gerenciamento bÃ¡sico do carrinho â€º deve obter carrinho atual

    expect(received).toMatchObject(expected)

    - Expected  -  5
    + Received  + 13

      Object {
        "id": "cart-123",
    -   "items": ArrayContaining [
    -     ObjectContaining {
    -       "mystery_box_id": "box-electronics-001",
    -       "quantity": 2,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
          },
        ],
    -   "total": 364.97,
    +   "total": 59.9,
      }

      116 |
      117 |       // Assert
    > 118 |       expect(response).toMatchObject({
          |                        ^
      119 |         id: 'cart-123',
      120 |         items: expect.arrayContaining([
      121 |           expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:118:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Gerenciamento bÃ¡sico do carrinho â€º deve adicionar item ao carrinho

    expect(received).toMatchObject(expected)

    - Expected  -  4
    + Received  + 24

      Object {
    +   "cart": Object {
    +     "createdAt": "2025-01-01T10:00:00Z",
    +     "discount": 0,
          "id": "cart-123",
    -   "items": ArrayContaining [
    -     ObjectContaining {
    -       "mystery_box_id": "box-electronics-001",
    -       "quantity": 2,
    +     "itemCount": 1,
    +     "items": Array [
    +       Object {
    +         "boxId": "box-456",
    +         "boxImage": "https://example.com/box.jpg",
    +         "boxName": "Caixa Misteriosa Tech",
    +         "id": "item-123",
    +         "platform": "magalu",
    +         "price": 49.9,
    +         "quantity": 1,
    +         "subtotal": 49.9,
    +         "vendorId": "vendor-789",
    +         "vendorName": "TechStore Brasil",
            },
          ],
    +     "shipping": 10,
    +     "subtotal": 49.9,
    +     "total": 59.9,
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "userId": "user-123",
    +   },
    +   "message": "Item adicionado ao carrinho",
    +   "success": true,
      }

      145 |
      146 |       // Assert
    > 147 |       expect(response).toMatchObject({
          |                        ^
      148 |         id: 'cart-123',
      149 |         items: expect.arrayContaining([
      150 |           expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:147:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Gerenciamento bÃ¡sico do carrinho â€º deve falhar ao adicionar item fora de estoque

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Item adicionado ao carrinho", "success": true}

      168 |
      169 |       // Act & Assert
    > 170 |       await expect(cartService.addToCart(boxId, quantity)).rejects.toMatchObject({
          |             ^
      171 |         status: 400,
      172 |         message: 'Produto fora de estoque',
      173 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:170:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Gerenciamento bÃ¡sico do carrinho â€º deve atualizar quantidade de item no carrinho

    TypeError: Cannot read properties of undefined (reading 'find')

      195 |
      196 |       // Assert
    > 197 |       expect(response.items.find(item => item.id === itemId)).toMatchObject({
          |                             ^
      198 |         quantity: newQuantity,
      199 |         total: testCart.items[0].price * newQuantity,
      200 |       });

      at Object.find (src/services/__tests__/integration/cart.integration.test.ts:197:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Gerenciamento bÃ¡sico do carrinho â€º deve remover item do carrinho

    TypeError: Cannot read properties of undefined (reading 'find')

      217 |
      218 |       // Assert
    > 219 |       expect(response.items.find(item => item.id === itemId)).toBeUndefined();
          |                             ^
      220 |       expect(response.total).toBeLessThan(testCart.total);
      221 |     });
      222 |

      at Object.find (src/services/__tests__/integration/cart.integration.test.ts:219:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Gerenciamento bÃ¡sico do carrinho â€º deve tratar erro ao atualizar item inexistente

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 3, "subtotal": 149.7, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 149.7, "total": 159.7, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Quantidade atualizada", "success": true}

      247 |
      248 |       // Act & Assert
    > 249 |       await expect(cartService.updateCartItem(itemId, quantity)).rejects.toMatchObject({
          |             ^
      250 |         status: 404,
      251 |         message: 'Item nÃ£o encontrado no carrinho',
      252 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:249:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Sistema de cupons â€º deve aplicar cupom de desconto vÃ¡lido

    expect(received).toMatchObject(expected)

    - Expected  - 3
    + Received  + 2

      Object {
    -   "coupon_code": "WELCOME10",
    -   "discount": 34.99,
    -   "total": 329.98,
    +   "discount": 0,
    +   "total": 59.9,
      }

      272 |
      273 |       // Assert
    > 274 |       expect(response).toMatchObject({
          |                        ^
      275 |         coupon_code: couponCode,
      276 |         discount: 34.99,
      277 |         total: testCart.total - 34.99,

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:274:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Sistema de cupons â€º deve falhar ao aplicar cupom invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}

      290 |
      291 |       // Act & Assert
    > 292 |       await expect(cartService.applyCoupon(couponCode)).rejects.toMatchObject({
          |             ^
      293 |         status: 400,
      294 |         message: 'Cupom invÃ¡lido ou expirado',
      295 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:292:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Sistema de cupons â€º deve validar cupom antes de aplicar

    expect(received).toMatchObject(expected)

    - Expected  -  6
    + Received  + 22

      Object {
    -   "discount_amount": 34.99,
    -   "promotion": ObjectContaining {
    -     "code": "WELCOME10",
    -     "type": "percentage",
    -     "value": 10,
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
          },
    -   "valid": true,
    +   ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      313 |
      314 |       // Assert
    > 315 |       expect(response).toMatchObject({
          |                        ^
      316 |         valid: true,
      317 |         promotion: expect.objectContaining({
      318 |           code: couponCode,

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:315:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Sistema de cupons â€º deve remover cupom aplicado

    expect(received).toMatchObject(expected)

    - Expected  -  2
    + Received  + 13

      Object {
    -   "coupon_code": null,
    +   "cart": Object {
    +     "createdAt": "2025-01-01T10:00:00Z",
          "discount": 0,
    -   "total": 364.97,
    +     "id": "cart-789",
    +     "itemCount": 0,
    +     "items": Array [],
    +     "shipping": 0,
    +     "subtotal": 0,
    +     "total": 0,
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "userId": "user-123",
    +   },
    +   "message": "Item removido do carrinho",
    +   "success": true,
      }

      340 |
      341 |       // Assert
    > 342 |       expect(response).toMatchObject({
          |                        ^
      343 |         coupon_code: null,
      344 |         discount: 0,
      345 |         total: testCart.subtotal + testCart.shipping,

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:342:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Sistema de cupons â€º deve falhar validaÃ§Ã£o de cupom com valor mÃ­nimo nÃ£o atingido

    expect(received).toMatchObject(expected)

    - Expected  -  2
    + Received  + 23

      Object {
    -   "message": "Valor mÃ­nimo de R$ 500,00 nÃ£o atingido",
    -   "valid": false,
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
    +     },
    +   ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      362 |
      363 |       // Assert
    > 364 |       expect(response).toMatchObject({
          |                        ^
      365 |         valid: false,
      366 |         message: 'Valor mÃ­nimo de R$ 500,00 nÃ£o atingido',
      367 |       });

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:364:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CÃ¡lculo de frete â€º deve calcular frete por endereÃ§o

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      399 |
      400 |       // Assert
    > 401 |       expect(response.options).toHaveLength(2);
          |                                ^
      402 |       expect(response.options[0]).toMatchObject({
      403 |         id: 'correios-pac',
      404 |         name: 'PAC',

      at Object.toHaveLength (src/services/__tests__/integration/cart.integration.test.ts:401:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CÃ¡lculo de frete â€º deve calcular frete por CEP

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      430 |
      431 |       // Assert
    > 432 |       expect(response.options).toHaveLength(1);
          |                                ^
      433 |       expect(response.options[0]).toMatchObject({
      434 |         id: 'correios-pac',
      435 |         name: 'PAC',

      at Object.toHaveLength (src/services/__tests__/integration/cart.integration.test.ts:432:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CÃ¡lculo de frete â€º deve falhar cÃ¡lculo de frete com CEP invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}

      450 |
      451 |       // Act & Assert
    > 452 |       await expect(cartService.calculateShippingByZip(zipCode)).rejects.toMatchObject({
          |             ^
      453 |         status: 400,
      454 |         message: 'CEP invÃ¡lido ou nÃ£o atendido',
      455 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:452:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CÃ¡lculo de frete â€º deve estimar tempo de entrega

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 23

      Object {
    -   "estimated_date": "2025-01-14T00:00:00Z",
    -   "max_days": 7,
    -   "min_days": 3,
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
    +     },
    +   ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      472 |
      473 |       // Assert
    > 474 |       expect(response).toMatchObject({
          |                        ^
      475 |         min_days: 3,
      476 |         max_days: 7,
      477 |         estimated_date: '2025-01-14T00:00:00Z',

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:474:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processo de checkout â€º deve finalizar pedido com sucesso

    expect(received).toMatchObject(expected)

    - Expected  -  4
    + Received  + 43

      Object {
    +   "data": Object {
    +     "createdAt": "2025-01-01T10:00:00Z",
    +     "discount": 0,
    +     "estimatedDelivery": "2025-01-15T00:00:00Z",
          "id": "order-123",
    -   "order_number": "ORD-2025-001",
    -   "payment_status": "pending",
    -   "status": "pending",
    -   "total": 329.98,
    +     "items": Array [
    +       Object {
    +         "boxId": "box-456",
    +         "boxImage": "https://example.com/box.jpg",
    +         "boxName": "Caixa Misteriosa Tech",
    +         "id": "order-item-123",
    +         "platform": "magalu",
    +         "price": 49.9,
    +         "quantity": 1,
    +         "status": "processing",
    +         "subtotal": 49.9,
    +         "vendorId": "vendor-789",
    +         "vendorName": "TechStore Brasil",
    +       },
    +     ],
    +     "orderNumber": "ORD-2025-001",
    +     "paymentMethod": "credit_card",
    +     "paymentStatus": "paid",
    +     "shipping": 10,
    +     "shippingAddress": Object {
    +       "city": "SÃ£o Paulo",
    +       "complement": "Apto 45",
    +       "country": "Brasil",
    +       "id": "address-123",
    +       "neighborhood": "Centro",
    +       "number": "123",
    +       "state": "SP",
    +       "street": "Rua Exemplo",
    +       "zipCode": "01000-000",
    +     },
    +     "status": "processing",
    +     "subtotal": 49.9,
    +     "total": 59.9,
    +     "trackingCode": "BR123456789",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "userId": "user-123",
    +   },
    +   "message": "Pedido criado com sucesso",
    +   "success": true,
      }

      501 |
      502 |       // Assert
    > 503 |       expect(response).toMatchObject({
          |                        ^
      504 |         id: 'order-123',
      505 |         order_number: 'ORD-2025-001',
      506 |         status: 'pending',

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:503:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processo de checkout â€º deve obter resumo do pedido antes da finalizaÃ§Ã£o

    expect(received).toMatchObject(expected)

    - Expected  -  6
    + Received  + 15

      Object {
    -   "discount": 34.99,
    -   "items": ArrayContaining [
    -     ObjectContaining {
    -       "mystery_box_id": "box-electronics-001",
    +   "discount": 0,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
          },
        ],
    -   "subtotal": 349.97,
    -   "total": 329.98,
    +   "subtotal": 49.9,
    +   "total": 59.9,
      }

      535 |
      536 |       // Assert
    > 537 |       expect(response).toMatchObject({
          |                        ^
      538 |         items: expect.arrayContaining([
      539 |           expect.objectContaining({
      540 |             mystery_box_id: 'box-electronics-001',

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:537:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processo de checkout â€º deve falhar checkout com endereÃ§o invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "estimatedDelivery": "2025-01-15T00:00:00Z", "id": "order-123", "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "order-item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "status": "processing", "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "orderNumber": "ORD-2025-001", "paymentMethod": "credit_card", "paymentStatus": "paid", "shipping": 10, "shippingAddress": {"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "id": "address-123", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "zipCode": "01000-000"}, "status": "processing", "subtotal": 49.9, "total": 59.9, "trackingCode": "BR123456789", "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Pedido criado com sucesso", "success": true}

      562 |
      563 |       // Act & Assert
    > 564 |       await expect(cartService.checkout(checkoutData)).rejects.toMatchObject({
          |             ^
      565 |         status: 400,
      566 |         message: 'EndereÃ§o de entrega invÃ¡lido',
      567 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:564:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processo de checkout â€º deve verificar disponibilidade dos itens antes do checkout

    expect(received).toMatchObject(expected)

    - Expected  -  6
    + Received  + 21

      Object {
    -   "available": false,
    -   "unavailable_items": ArrayContaining [
    -     ObjectContaining {
    -       "available_quantity": 1,
    -       "item_id": "cart-item-001",
    -       "requested_quantity": 2,
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
          },
        ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      589 |
      590 |       // Assert
    > 591 |       expect(response).toMatchObject({
          |                        ^
      592 |         available: false,
      593 |         unavailable_items: expect.arrayContaining([
      594 |           expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:591:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve processar pagamento com cartÃ£o de crÃ©dito

    expect(received).toMatchObject(expected)

    - Expected  - 3
    + Received  + 1

      Object {
    -   "message": "Pagamento processado com sucesso",
    -   "payment_id": "payment-123",
    -   "status": "success",
    +   "message": "Pedido criado com sucesso",
      }

      631 |
      632 |       // Assert
    > 633 |       expect(response).toMatchObject({
          |                        ^
      634 |         status: 'success',
      635 |         payment_id: 'payment-123',
      636 |         message: 'Pagamento processado com sucesso',

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:633:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve processar pagamento PIX

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 44

      Object {
    -   "payment_id": "payment-pix-123",
    -   "pix_qr_code": StringContaining "data:image/png;base64",
    -   "status": "pending",
    +   "data": Object {
    +     "createdAt": "2025-01-01T10:00:00Z",
    +     "discount": 0,
    +     "estimatedDelivery": "2025-01-15T00:00:00Z",
    +     "id": "order-123",
    +     "items": Array [
    +       Object {
    +         "boxId": "box-456",
    +         "boxImage": "https://example.com/box.jpg",
    +         "boxName": "Caixa Misteriosa Tech",
    +         "id": "order-item-123",
    +         "platform": "magalu",
    +         "price": 49.9,
    +         "quantity": 1,
    +         "status": "processing",
    +         "subtotal": 49.9,
    +         "vendorId": "vendor-789",
    +         "vendorName": "TechStore Brasil",
    +       },
    +     ],
    +     "orderNumber": "ORD-2025-001",
    +     "paymentMethod": "credit_card",
    +     "paymentStatus": "paid",
    +     "shipping": 10,
    +     "shippingAddress": Object {
    +       "city": "SÃ£o Paulo",
    +       "complement": "Apto 45",
    +       "country": "Brasil",
    +       "id": "address-123",
    +       "neighborhood": "Centro",
    +       "number": "123",
    +       "state": "SP",
    +       "street": "Rua Exemplo",
    +       "zipCode": "01000-000",
    +     },
    +     "status": "processing",
    +     "subtotal": 49.9,
    +     "total": 59.9,
    +     "trackingCode": "BR123456789",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "userId": "user-123",
    +   },
    +   "message": "Pedido criado com sucesso",
    +   "success": true,
      }

      659 |
      660 |       // Assert
    > 661 |       expect(response).toMatchObject({
          |                        ^
      662 |         status: 'pending',
      663 |         payment_id: 'payment-pix-123',
      664 |         pix_qr_code: expect.stringContaining('data:image/png;base64'),

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:661:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve processar pagamento boleto

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 44

      Object {
    -   "boleto_url": "https://pagamento.com/boleto/123.pdf",
    -   "payment_id": "payment-boleto-123",
    -   "status": "pending",
    +   "data": Object {
    +     "createdAt": "2025-01-01T10:00:00Z",
    +     "discount": 0,
    +     "estimatedDelivery": "2025-01-15T00:00:00Z",
    +     "id": "order-123",
    +     "items": Array [
    +       Object {
    +         "boxId": "box-456",
    +         "boxImage": "https://example.com/box.jpg",
    +         "boxName": "Caixa Misteriosa Tech",
    +         "id": "order-item-123",
    +         "platform": "magalu",
    +         "price": 49.9,
    +         "quantity": 1,
    +         "status": "processing",
    +         "subtotal": 49.9,
    +         "vendorId": "vendor-789",
    +         "vendorName": "TechStore Brasil",
    +       },
    +     ],
    +     "orderNumber": "ORD-2025-001",
    +     "paymentMethod": "credit_card",
    +     "paymentStatus": "paid",
    +     "shipping": 10,
    +     "shippingAddress": Object {
    +       "city": "SÃ£o Paulo",
    +       "complement": "Apto 45",
    +       "country": "Brasil",
    +       "id": "address-123",
    +       "neighborhood": "Centro",
    +       "number": "123",
    +       "state": "SP",
    +       "street": "Rua Exemplo",
    +       "zipCode": "01000-000",
    +     },
    +     "status": "processing",
    +     "subtotal": 49.9,
    +     "total": 59.9,
    +     "trackingCode": "BR123456789",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "userId": "user-123",
    +   },
    +   "message": "Pedido criado com sucesso",
    +   "success": true,
      }

      687 |
      688 |       // Assert
    > 689 |       expect(response).toMatchObject({
          |                        ^
      690 |         status: 'pending',
      691 |         payment_id: 'payment-boleto-123',
      692 |         boleto_url: 'https://pagamento.com/boleto/123.pdf',

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:689:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve verificar _status do pagamento

    expect(received).toMatchObject(expected)

    - Expected  -   3
    + Received  + 138

      Object {
    -   "payment_id": "payment-123",
    -   "status": "paid",
    -   "updated_at": "2025-01-07T13:00:00Z",
    +   "data": Array [
    +     Object {
    +       "createdAt": "2025-01-01T10:00:00Z",
    +       "discount": 0,
    +       "estimatedDelivery": "2025-01-15T00:00:00Z",
    +       "id": "order-123",
    +       "items": Array [
    +         Object {
    +           "boxId": "box-456",
    +           "boxImage": "https://example.com/box.jpg",
    +           "boxName": "Caixa Misteriosa Tech",
    +           "id": "order-item-123",
    +           "platform": "magalu",
    +           "price": 49.9,
    +           "quantity": 1,
    +           "status": "processing",
    +           "subtotal": 49.9,
    +           "vendorId": "vendor-789",
    +           "vendorName": "TechStore Brasil",
    +         },
    +       ],
    +       "orderNumber": "ORD-2025-001",
    +       "paymentMethod": "credit_card",
    +       "paymentStatus": "paid",
    +       "shipping": 10,
    +       "shippingAddress": Object {
    +         "city": "SÃ£o Paulo",
    +         "complement": "Apto 45",
    +         "country": "Brasil",
    +         "id": "address-123",
    +         "neighborhood": "Centro",
    +         "number": "123",
    +         "state": "SP",
    +         "street": "Rua Exemplo",
    +         "zipCode": "01000-000",
    +       },
    +       "status": "processing",
    +       "subtotal": 49.9,
    +       "total": 59.9,
    +       "trackingCode": "BR123456789",
    +       "updatedAt": "2025-01-01T10:00:00Z",
    +       "userId": "user-123",
    +     },
    +     Object {
    +       "createdAt": "2025-01-01T10:00:00Z",
    +       "deliveredAt": "2025-01-10T14:30:00Z",
    +       "discount": 0,
    +       "estimatedDelivery": "2025-01-15T00:00:00Z",
    +       "id": "order-456",
    +       "items": Array [
    +         Object {
    +           "boxId": "box-456",
    +           "boxImage": "https://example.com/box.jpg",
    +           "boxName": "Caixa Misteriosa Tech",
    +           "id": "order-item-123",
    +           "platform": "magalu",
    +           "price": 49.9,
    +           "quantity": 1,
    +           "status": "processing",
    +           "subtotal": 49.9,
    +           "vendorId": "vendor-789",
    +           "vendorName": "TechStore Brasil",
    +         },
    +       ],
    +       "orderNumber": "ORD-2025-002",
    +       "paymentMethod": "credit_card",
    +       "paymentStatus": "paid",
    +       "shipping": 10,
    +       "shippingAddress": Object {
    +         "city": "SÃ£o Paulo",
    +         "complement": "Apto 45",
    +         "country": "Brasil",
    +         "id": "address-123",
    +         "neighborhood": "Centro",
    +         "number": "123",
    +         "state": "SP",
    +         "street": "Rua Exemplo",
    +         "zipCode": "01000-000",
    +       },
    +       "status": "delivered",
    +       "subtotal": 49.9,
    +       "total": 59.9,
    +       "trackingCode": "BR123456789",
    +       "updatedAt": "2025-01-01T10:00:00Z",
    +       "userId": "user-123",
    +     },
    +     Object {
    +       "cancellationReason": "Solicitado pelo cliente",
    +       "cancelledAt": "2025-01-02T09:00:00Z",
    +       "createdAt": "2025-01-01T10:00:00Z",
    +       "discount": 0,
    +       "estimatedDelivery": "2025-01-15T00:00:00Z",
    +       "id": "order-789",
    +       "items": Array [
    +         Object {
    +           "boxId": "box-456",
    +           "boxImage": "https://example.com/box.jpg",
    +           "boxName": "Caixa Misteriosa Tech",
    +           "id": "order-item-123",
    +           "platform": "magalu",
    +           "price": 49.9,
    +           "quantity": 1,
    +           "status": "processing",
    +           "subtotal": 49.9,
    +           "vendorId": "vendor-789",
    +           "vendorName": "TechStore Brasil",
    +         },
    +       ],
    +       "orderNumber": "ORD-2025-003",
    +       "paymentMethod": "credit_card",
    +       "paymentStatus": "refunded",
    +       "shipping": 10,
    +       "shippingAddress": Object {
    +         "city": "SÃ£o Paulo",
    +         "complement": "Apto 45",
    +         "country": "Brasil",
    +         "id": "address-123",
    +         "neighborhood": "Centro",
    +         "number": "123",
    +         "state": "SP",
    +         "street": "Rua Exemplo",
    +         "zipCode": "01000-000",
    +       },
    +       "status": "cancelled",
    +       "subtotal": 49.9,
    +       "total": 59.9,
    +       "trackingCode": "BR123456789",
    +       "updatedAt": "2025-01-01T10:00:00Z",
    +       "userId": "user-123",
    +     },
    +   ],
    +   "pagination": Object {
    +     "limit": 20,
    +     "page": 1,
    +     "total": 3,
    +     "totalPages": 1,
    +   },
    +   "success": true,
      }

      710 |
      711 |       // Assert
    > 712 |       expect(response).toMatchObject({
          |                        ^
      713 |         status: 'paid',
      714 |         payment_id: 'payment-123',
      715 |         updated_at: '2025-01-07T13:00:00Z',

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:712:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve obter mÃ©todos de pagamento disponÃ­veis

    expect(received).toMatchObject(expected)

    - Expected  - 10
    + Received  + 23

      Object {
    -   "credit_card": ObjectContaining {
    -     "brands": ArrayContaining [
    -       "visa",
    -       "mastercard",
    -     ],
    -     "enabled": true,
    -     "max_installments": 12,
    +   "data": Array [
    +     Object {
    +       "cardBrand": "visa",
    +       "cardExpMonth": 12,
    +       "cardExpYear": 2026,
    +       "cardLast4": "4242",
    +       "cardholderName": "JOAO SILVA",
    +       "createdAt": "2024-01-01T10:00:00Z",
    +       "id": "pm-123",
    +       "isDefault": true,
    +       "type": "credit_card",
          },
    -   "pix": ObjectContaining {
    -     "discount_percentage": 5,
    -     "enabled": true,
    +     Object {
    +       "cardBrand": "mastercard",
    +       "cardExpMonth": 6,
    +       "cardExpYear": 2025,
    +       "cardLast4": "8888",
    +       "cardholderName": "JOAO SILVA",
    +       "createdAt": "2024-06-01T10:00:00Z",
    +       "id": "pm-456",
    +       "isDefault": false,
    +       "type": "debit_card",
          },
    +   ],
    +   "success": true,
      }

      743 |
      744 |       // Assert
    > 745 |       expect(response).toMatchObject({
          |                        ^
      746 |         credit_card: expect.objectContaining({
      747 |           enabled: true,
      748 |           brands: expect.arrayContaining(['visa', 'mastercard']),

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:745:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve calcular parcelas para pagamento

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"amount": 5990, "installments": 1, "interestRate": 0, "totalAmount": 5990}, {"amount": 2995, "installments": 2, "interestRate": 0, "totalAmount": 5990}, {"amount": 1997, "installments": 3, "interestRate": 0, "totalAmount": 5990}, {"amount": 1573, "installments": 4, "interestRate": 5, "totalAmount": 6292}, {"amount": 1282, "installments": 5, "interestRate": 7, "totalAmount": 6410}, {"amount": 1087, "installments": 6, "interestRate": 9, "totalAmount": 6522}], "success": true}

      772 |
      773 |       // Assert
    > 774 |       expect(response).toHaveLength(3);
          |                        ^
      775 |       expect(response[0]).toMatchObject({
      776 |         installments: 1,
      777 |         amount_per_installment: 329.98,

      at Object.toHaveLength (src/services/__tests__/integration/cart.integration.test.ts:774:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Processamento de pagamento â€º deve falhar pagamento com cartÃ£o invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "estimatedDelivery": "2025-01-15T00:00:00Z", "id": "order-123", "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "order-item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "status": "processing", "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "orderNumber": "ORD-2025-001", "paymentMethod": "credit_card", "paymentStatus": "paid", "shipping": 10, "shippingAddress": {"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "id": "address-123", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "zipCode": "01000-000"}, "status": "processing", "subtotal": 49.9, "total": 59.9, "trackingCode": "BR123456789", "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Pedido criado com sucesso", "success": true}

      806 |
      807 |       // Act & Assert
    > 808 |       await expect(cartService.processPayment(orderId, paymentData)).rejects.toMatchObject({
          |             ^
      809 |         status: 400,
      810 |         message: 'CartÃ£o invÃ¡lido',
      811 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:808:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Funcionalidades auxiliares â€º deve salvar carrinho para mais tarde

    expect(received).toMatchObject(expected)

    - Expected  -  1
    + Received  + 23

      Object {
    -   "saved_at": "2025-01-07T12:00:00Z",
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
    +     },
    +   ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      827 |
      828 |       // Assert
    > 829 |       expect(response).toMatchObject({
          |                        ^
      830 |         saved_at: '2025-01-07T12:00:00Z',
      831 |       });
      832 |     });

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:829:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Funcionalidades auxiliares â€º deve restaurar carrinho salvo

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 12

      Object {
        "id": "cart-123",
    -   "items": ArrayContaining [
    -     ObjectContaining {
    -       "mystery_box_id": "box-electronics-001",
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
          },
        ],
      }

      841 |
      842 |       // Assert
    > 843 |       expect(response).toMatchObject({
          |                        ^
      844 |         id: 'cart-123',
      845 |         items: expect.arrayContaining([
      846 |           expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:843:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Funcionalidades auxiliares â€º deve verificar se hÃ¡ carrinho salvo

    expect(received).toMatchObject(expected)

    - Expected  -  2
    + Received  + 23

      Object {
    -   "has_saved_cart": true,
    -   "saved_at": "2025-01-07T12:00:00Z",
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
    +     },
    +   ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      865 |
      866 |       // Assert
    > 867 |       expect(response).toMatchObject({
          |                        ^
      868 |         has_saved_cart: true,
      869 |         saved_at: '2025-01-07T12:00:00Z',
      870 |       });

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:867:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Funcionalidades auxiliares â€º deve compartilhar carrinho

    expect(received).toMatchObject(expected)

    - Expected  -  2
    + Received  + 23

      Object {
    -   "expires_at": "2025-01-14T12:00:00Z",
    -   "share_url": "https://crowbar.com/cart/share/abc123",
    +   "createdAt": "2025-01-01T10:00:00Z",
    +   "discount": 0,
    +   "id": "cart-123",
    +   "itemCount": 1,
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
    +     },
    +   ],
    +   "shipping": 10,
    +   "subtotal": 49.9,
    +   "total": 59.9,
    +   "updatedAt": "2025-01-01T10:00:00Z",
    +   "userId": "user-123",
      }

      885 |
      886 |       // Assert
    > 887 |       expect(response).toMatchObject({
          |                        ^
      888 |         share_url: 'https://crowbar.com/cart/share/abc123',
      889 |         expires_at: '2025-01-14T12:00:00Z',
      890 |       });

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:887:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Funcionalidades auxiliares â€º deve importar carrinho compartilhado

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 12

      Object {
        "id": "cart-123",
    -   "items": ArrayContaining [
    -     ObjectContaining {
    -       "mystery_box_id": "box-electronics-001",
    +   "items": Array [
    +     Object {
    +       "boxId": "box-456",
    +       "boxImage": "https://example.com/box.jpg",
    +       "boxName": "Caixa Misteriosa Tech",
    +       "id": "item-123",
    +       "platform": "magalu",
    +       "price": 49.9,
    +       "quantity": 1,
    +       "subtotal": 49.9,
    +       "vendorId": "vendor-789",
    +       "vendorName": "TechStore Brasil",
          },
        ],
      }

      901 |
      902 |       // Assert
    > 903 |       expect(response).toMatchObject({
          |                        ^
      904 |         id: 'cart-123',
      905 |         items: expect.arrayContaining([
      906 |           expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/cart.integration.test.ts:903:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º Funcionalidades auxiliares â€º deve falhar ao importar carrinho com token invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}

      922 |
      923 |       // Act & Assert
    > 924 |       await expect(cartService.importSharedCart(shareToken)).rejects.toMatchObject({
          |             ^
      925 |         status: 400,
      926 |         message: 'Token de compartilhamento invÃ¡lido ou expirado',
      927 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:924:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CenÃ¡rios de erro â€º deve tratar erro de rede durante adiÃ§Ã£o ao carrinho

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Item adicionado ao carrinho", "success": true}

      936 |
      937 |       // Act & Assert
    > 938 |       await expect(cartService.addToCart(boxId, 1)).rejects.toMatchObject({
          |             ^
      939 |         status: 0,
      940 |         message: expect.stringContaining('Erro de conexÃ£o'),
      941 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:938:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CenÃ¡rios de erro â€º deve tratar timeout durante checkout

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "estimatedDelivery": "2025-01-15T00:00:00Z", "id": "order-123", "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "order-item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "status": "processing", "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "orderNumber": "ORD-2025-001", "paymentMethod": "credit_card", "paymentStatus": "paid", "shipping": 10, "shippingAddress": {"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "id": "address-123", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "zipCode": "01000-000"}, "status": "processing", "subtotal": 49.9, "total": 59.9, "trackingCode": "BR123456789", "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Pedido criado com sucesso", "success": true}

      953 |
      954 |       // Act & Assert
    > 955 |       await expect(cartService.checkout(checkoutData)).rejects.toMatchObject({
          |             ^
      956 |         status: 0,
      957 |         message: expect.stringContaining('timeout'),
      958 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:955:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Carrinho â€º CenÃ¡rios de erro â€º deve tratar erro 500 durante processamento de pagamento

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "estimatedDelivery": "2025-01-15T00:00:00Z", "id": "order-123", "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "order-item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "status": "processing", "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "orderNumber": "ORD-2025-001", "paymentMethod": "credit_card", "paymentStatus": "paid", "shipping": 10, "shippingAddress": {"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "id": "address-123", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "zipCode": "01000-000"}, "status": "processing", "subtotal": 49.9, "total": 59.9, "trackingCode": "BR123456789", "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Pedido criado com sucesso", "success": true}

      981 |
      982 |       // Act & Assert
    > 983 |       await expect(cartService.processPayment(orderId, paymentData)).rejects.toMatchObject({
          |             ^
      984 |         status: 500,
      985 |         message: 'Erro interno do servidor',
      986 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/cart.integration.test.ts:983:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/__tests__/integration/user.integration.test.ts
  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de perfil â€º deve obter perfil do usuÃ¡rio atual

    expect(received).toMatchObject(expected)

    - Expected  -  4
    + Received  + 27

      Object {
    -   "email": "test@crowbar.com",
    -   "id": "user-test-123",
    -   "name": "UsuÃ¡rio Teste",
    -   "phone": "(11) 99999-9999",
    +   "data": Object {
    +     "avatar": "https://example.com/avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva",
    +     "phone": "+5511987654321",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
    +     },
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "verified": true,
    +   },
    +   "success": true,
      }

      180 |
      181 |       // Assert
    > 182 |       expect(response).toMatchObject({
          |                        ^
      183 |         id: 'user-test-123',
      184 |         email: 'test@crowbar.com',
      185 |         name: 'UsuÃ¡rio Teste',

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:182:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de perfil â€º deve atualizar perfil do usuÃ¡rio

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 27

      Object {
    -   "birth_date": "1990-05-15",
    -   "gender": "male",
    +   "data": Object {
    +     "avatar": "https://example.com/new-avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
          "name": "JoÃ£o Silva Santos",
    -   "phone": "(11) 98765-4321",
    +     "phone": "+5511999887766",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
    +     },
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-06T15:00:00Z",
    +     "verified": true,
    +   },
    +   "message": "Perfil atualizado com sucesso",
    +   "success": true,
      }

      210 |
      211 |       // Assert
    > 212 |       expect(response).toMatchObject({
          |                        ^
      213 |         name: 'JoÃ£o Silva Santos',
      214 |         phone: '(11) 98765-4321',
      215 |         birth_date: '1990-05-15',

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:212:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de perfil â€º deve atualizar avatar do usuÃ¡rio

    expect(received).toMatchObject(expected)

    - Expected  - 3
    + Received  + 1

    - Object {
    -   "avatar_url": "https://storage.com/avatars/user-123-new.jpg",
    - }
    + Object {}

      234 |
      235 |       // Assert
    > 236 |       expect(response).toMatchObject({
          |                        ^
      237 |         avatar_url: 'https://storage.com/avatars/user-123-new.jpg',
      238 |       });
      239 |     });

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:236:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de perfil â€º deve falhar ao atualizar com dados invÃ¡lidos

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/new-avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva Santos", "phone": "+5511999887766", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-06T15:00:00Z", "verified": true}, "message": "Perfil atualizado com sucesso", "success": true}

      258 |
      259 |       // Act & Assert
    > 260 |       await expect(userService.updateProfile(invalidData)).rejects.toMatchObject({
          |             ^
      261 |         status: 422,
      262 |         message: 'Dados invÃ¡lidos',
      263 |         errors: {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:260:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de endereÃ§os â€º deve obter lista de endereÃ§os do usuÃ¡rio

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "createdAt": "2024-01-01T10:00:00Z", "id": "address-123", "isDefault": true, "label": "Casa", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "updatedAt": "2024-01-01T10:00:00Z", "userId": "user-123", "zipCode": "01000-000"}, {"city": "SÃ£o Paulo", "complement": "Sala 501", "country": "Brasil", "createdAt": "2024-01-15T10:00:00Z", "id": "address-456", "isDefault": false, "label": "Trabalho", "neighborhood": "Bela Vista", "number": "1000", "state": "SP", "street": "Avenida Paulista", "updatedAt": "2024-01-15T10:00:00Z", "userId": "user-123", "zipCode": "01310-100"}], "success": true}

      280 |
      281 |       // Assert
    > 282 |       expect(response).toHaveLength(2);
          |                        ^
      283 |       expect(response[0]).toMatchObject({
      284 |         id: 'addr-001',
      285 |         street: 'Rua das Flores',

      at Object.toHaveLength (src/services/__tests__/integration/user.integration.test.ts:282:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de endereÃ§os â€º deve adicionar novo endereÃ§o

    expect(received).toMatchObject(expected)

    - Expected  -  4
    + Received  + 18

      Object {
    -   "id": "addr-003",
    -   "number": "456",
    -   "street": "Rua Nova",
    -   "zip_code": "04567-890",
    +   "data": Object {
    +     "city": "SÃ£o Paulo",
    +     "complement": "Apto 45",
    +     "country": "Brasil",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "id": "address-123",
    +     "isDefault": true,
    +     "label": "Casa",
    +     "neighborhood": "Centro",
    +     "number": "123",
    +     "state": "SP",
    +     "street": "Rua Exemplo",
    +     "updatedAt": "2024-01-01T10:00:00Z",
    +     "userId": "user-123",
    +     "zipCode": "01000-000",
    +   },
    +   "message": "EndereÃ§o criado com sucesso",
    +   "success": true,
      }

      317 |
      318 |       // Assert
    > 319 |       expect(response).toMatchObject({
          |                        ^
      320 |         id: 'addr-003',
      321 |         street: 'Rua Nova',
      322 |         number: '456',

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:319:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de endereÃ§os â€º deve atualizar endereÃ§o existente

    expect(received).toMatchObject(expected)

    - Expected  -  3
    + Received  + 28

      Object {
    -   "complement": "Apto 46",
    -   "id": "addr-001",
    -   "neighborhood": "Centro HistÃ³rico",
    +   "data": Object {
    +     "avatar": "https://example.com/new-avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva Santos",
    +     "phone": "+5511999887766",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
    +     },
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-06T15:00:00Z",
    +     "verified": true,
    +   },
    +   "message": "Perfil atualizado com sucesso",
    +   "success": true,
      }

      346 |
      347 |       // Assert
    > 348 |       expect(response).toMatchObject({
          |                        ^
      349 |         id: addressId,
      350 |         complement: 'Apto 46',
      351 |         neighborhood: 'Centro HistÃ³rico',

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:348:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de endereÃ§os â€º deve falhar ao remover endereÃ§o padrÃ£o Ãºnico

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: undefined

      394 |
      395 |       // Act & Assert
    > 396 |       await expect(userService.deleteAddress(addressId)).rejects.toMatchObject({
          |             ^
      397 |         status: 400,
      398 |         message: 'NÃ£o Ã© possÃ­vel remover o Ãºnico endereÃ§o padrÃ£o',
      399 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:396:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º PreferÃªncias do usuÃ¡rio â€º deve obter preferÃªncias do usuÃ¡rio

    expect(received).toMatchObject(expected)

    - Expected  - 11
    + Received  + 25

      Object {
    -   "box_preferences": ObjectContaining {
    -     "preferred_categories": Array [
    -       "electronics",
    -       "gaming",
    -     ],
    -   },
    +   "data": Object {
    +     "avatar": "https://example.com/avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva",
    +     "phone": "+5511987654321",
    +     "preferences": Object {
            "language": "pt-BR",
    -   "notifications": ObjectContaining {
    -     "email": true,
    -     "push": true,
    -     "sms": false,
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
          },
    -   "theme": "light",
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "verified": true,
    +   },
    +   "success": true,
      }

      411 |
      412 |       // Assert
    > 413 |       expect(response).toMatchObject({
          |                        ^
      414 |         theme: 'light',
      415 |         language: 'pt-BR',
      416 |         notifications: expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:413:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º PreferÃªncias do usuÃ¡rio â€º deve atualizar preferÃªncias do usuÃ¡rio

    expect(received).toMatchObject(expected)

    - Expected  - 14
    + Received  + 26

      Object {
    -   "box_preferences": ObjectContaining {
    -     "exclude_categories": Array [
    -       "fashion",
    -       "sports",
    -     ],
    -     "preferred_categories": Array [
    -       "electronics",
    -       "books",
    -     ],
    +   "data": Object {
    +     "avatar": "https://example.com/new-avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva Santos",
    +     "phone": "+5511999887766",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
          },
    -   "notifications": ObjectContaining {
    -     "email": false,
    -     "marketing": true,
    -     "sms": true,
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-06T15:00:00Z",
    +     "verified": true,
        },
    -   "theme": "dark",
    +   "message": "Perfil atualizado com sucesso",
    +   "success": true,
      }

      454 |
      455 |       // Assert
    > 456 |       expect(response).toMatchObject({
          |                        ^
      457 |         theme: 'dark',
      458 |         notifications: expect.objectContaining({
      459 |           email: false,

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:456:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º EstatÃ­sticas do usuÃ¡rio â€º deve obter estatÃ­sticas do usuÃ¡rio

    expect(received).toMatchObject(expected)

    - Expected  - 12
    + Received  + 25

      Object {
    -   "achievements": ArrayContaining [
    -     ObjectContaining {
    -       "id": "first_box",
    -       "name": "Primeira Caixa",
    +   "data": Object {
    +     "avatar": "https://example.com/avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva",
    +     "phone": "+5511987654321",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
          },
    -   ],
    -   "boxes_by_category": ObjectContaining {
    -     "electronics": 10,
    -     "gaming": 8,
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "verified": true,
        },
    -   "boxes_opened": 25,
    -   "favorite_boxes": 8,
    -   "reviews_written": 12,
    -   "total_spent": 1250.75,
    +   "success": true,
      }

      500 |
      501 |       // Assert
    > 502 |       expect(response).toMatchObject({
          |                        ^
      503 |         boxes_opened: 25,
      504 |         total_spent: 1250.75,
      505 |         favorite_boxes: 8,

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:502:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º EstatÃ­sticas do usuÃ¡rio â€º deve obter histÃ³rico de atividades

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      544 |
      545 |       // Assert
    > 546 |       expect(response.data).toHaveLength(2);
          |                             ^
      547 |       expect(response.data[0]).toMatchObject({
      548 |         id: 'activity-001',
      549 |         type: 'box_opened',

      at Object.toHaveLength (src/services/__tests__/integration/user.integration.test.ts:546:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de favoritos â€º deve obter lista de favoritos

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      563 |
      564 |       // Assert
    > 565 |       expect(response.data).toHaveLength(2);
          |                             ^
      566 |       expect(response.data[0]).toMatchObject({
      567 |         id: 'fav-001',
      568 |         mystery_box_id: 'box-electronics-001',

      at Object.toHaveLength (src/services/__tests__/integration/user.integration.test.ts:565:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de favoritos â€º deve adicionar caixa aos favoritos

    expect(received).toMatchObject(expected)

    - Expected  - 7
    + Received  + 1

    - Object {
    -   "id": "fav-003",
    -   "mystery_box": ObjectContaining {
    -     "name": "Nova Caixa Favorita",
    -   },
    -   "mystery_box_id": "box-new-favorite",
    - }
    + Object {}

      598 |
      599 |       // Assert
    > 600 |       expect(response).toMatchObject({
          |                        ^
      601 |         id: 'fav-003',
      602 |         mystery_box_id: boxId,
      603 |         mystery_box: expect.objectContaining({

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:600:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de favoritos â€º deve verificar se caixa estÃ¡ nos favoritos

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      634 |
      635 |       // Assert
    > 636 |       expect(response).toBe(true);
          |                        ^
      637 |     });
      638 |
      639 |     it('deve retornar false para caixa nÃ£o favoritada', async () => {

      at Object.toBe (src/services/__tests__/integration/user.integration.test.ts:636:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de favoritos â€º deve retornar false para caixa nÃ£o favoritada

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      649 |
      650 |       // Assert
    > 651 |       expect(response).toBe(false);
          |                        ^
      652 |     });
      653 |
      654 |     it('deve falhar ao adicionar caixa jÃ¡ favoritada', async () => {

      at Object.toBe (src/services/__tests__/integration/user.integration.test.ts:651:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de favoritos â€º deve falhar ao adicionar caixa jÃ¡ favoritada

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      663 |
      664 |       // Act & Assert
    > 665 |       await expect(userService.addToFavorites(boxId)).rejects.toMatchObject({
          |             ^
      666 |         status: 409,
      667 |         message: 'Caixa jÃ¡ estÃ¡ nos favoritos',
      668 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:665:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de notificaÃ§Ãµes â€º deve obter lista de notificaÃ§Ãµes

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      680 |
      681 |       // Assert
    > 682 |       expect(response.data).toHaveLength(2);
          |                             ^
      683 |       expect(response.data[0]).toMatchObject({
      684 |         id: 'notif-001',
      685 |         type: 'order_shipped',

      at Object.toHaveLength (src/services/__tests__/integration/user.integration.test.ts:682:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Gerenciamento de notificaÃ§Ãµes â€º deve obter contagem de notificaÃ§Ãµes nÃ£o lidas

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: undefined

      743 |
      744 |       // Assert
    > 745 |       expect(response).toBe(5);
          |                        ^
      746 |     });
      747 |   });
      748 |

      at Object.toBe (src/services/__tests__/integration/user.integration.test.ts:745:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Funcionalidades auxiliares â€º deve falhar ao alterar senha com senha atual incorreta

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: undefined

      783 |
      784 |       // Act & Assert
    > 785 |       await expect(userService.changePassword(passwordData)).rejects.toMatchObject({
          |             ^
      786 |         status: 400,
      787 |         message: 'Senha atual incorreta',
      788 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:785:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Funcionalidades auxiliares â€º deve verificar disponibilidade de email

    expect(received).toMatchObject(expected)

    - Expected  -  1
    + Received  + 27

      Object {
    -   "available": true,
    +   "data": Object {
    +     "avatar": "https://example.com/avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva",
    +     "phone": "+5511987654321",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
    +     },
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "verified": true,
    +   },
    +   "success": true,
      }

      801 |
      802 |       // Assert
    > 803 |       expect(response).toMatchObject({
          |                        ^
      804 |         available: true,
      805 |       });
      806 |     });

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:803:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º Funcionalidades auxiliares â€º deve exportar dados do usuÃ¡rio

    expect(received).toMatchObject(expected)

    - Expected  - 4
    + Received  + 1

    - Object {
    -   "download_url": "https://storage.com/exports/user-123-data.zip",
    -   "expires_at": "2025-01-14T00:00:00Z",
    - }
    + Object {}

      879 |
      880 |       // Assert
    > 881 |       expect(response).toMatchObject({
          |                        ^
      882 |         download_url: 'https://storage.com/exports/user-123-data.zip',
      883 |         expires_at: '2025-01-14T00:00:00Z',
      884 |       });

      at Object.toMatchObject (src/services/__tests__/integration/user.integration.test.ts:881:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º CenÃ¡rios de erro â€º deve tratar erro de rede durante busca de perfil

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      892 |
      893 |       // Act & Assert
    > 894 |       await expect(userService.getProfile()).rejects.toMatchObject({
          |             ^
      895 |         status: 0,
      896 |         message: expect.stringContaining('Erro de conexÃ£o'),
      897 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:894:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º CenÃ¡rios de erro â€º deve tratar timeout durante atualizaÃ§Ã£o de perfil

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/new-avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva Santos", "phone": "+5511999887766", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-06T15:00:00Z", "verified": true}, "message": "Perfil atualizado com sucesso", "success": true}

      904 |
      905 |       // Act & Assert
    > 906 |       await expect(userService.updateProfile(updateData)).rejects.toMatchObject({
          |             ^
      907 |         status: 0,
      908 |         message: expect.stringContaining('timeout'),
      909 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:906:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º CenÃ¡rios de erro â€º deve tratar erro 500 durante busca de estatÃ­sticas

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      919 |
      920 |       // Act & Assert
    > 921 |       await expect(userService.getStats()).rejects.toMatchObject({
          |             ^
      922 |         status: 500,
      923 |         message: 'Erro interno do servidor',
      924 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:921:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º CenÃ¡rios de erro â€º deve tratar erro 403 ao tentar acessar dados de outro usuÃ¡rio

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      934 |
      935 |       // Act & Assert
    > 936 |       await expect(userService.getProfile()).rejects.toMatchObject({
          |             ^
      937 |         status: 403,
      938 |         message: 'Acesso negado',
      939 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/user.integration.test.ts:936:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de UsuÃ¡rio â€º CenÃ¡rios de erro â€º deve tratar erro isFavorite graciosamente

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      953 |
      954 |       // Assert
    > 955 |       expect(response).toBe(false); // Deve retornar false em caso de erro
          |                        ^
      956 |     });
      957 |   });
      958 | });

      at Object.toBe (src/services/__tests__/integration/user.integration.test.ts:955:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/keycloakService.test.ts
  â— KeycloakAuthService â€º Fluxo de AutorizaÃ§Ã£o OAuth2 â€º deve registrar log de sucesso apÃ³s login bem-sucedido

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ï¿½ï¿½ Iniciando login Keycloak..."

    Number of calls: 0

      195 |
      196 |       // Assert
    > 197 |       expect(console.log).toHaveBeenCalledWith('ï¿½ï¿½ Iniciando login Keycloak...');
          |                           ^
      198 |       expect(console.log).toHaveBeenCalledWith('âœ… Login Keycloak bem-sucedido');
      199 |     });
      200 |   });

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:197:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º ObtenÃ§Ã£o de Token de Acesso â€º deve renovar token quando estiver prestes a expirar (< 1 minuto)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ï¿½ï¿½ Access token expirado, renovando..."

    Number of calls: 0

      258 |       expect(token).toBe(newTokens.accessToken);
      259 |       expect(mockedRefresh).toHaveBeenCalledTimes(1);
    > 260 |       expect(console.log).toHaveBeenCalledWith('ï¿½ï¿½ Access token expirado, renovando...');
          |                           ^
      261 |     });
      262 |
      263 |     it('deve retornar null quando nÃ£o houver tokens salvos', async () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:260:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º ObtenÃ§Ã£o de Token de Acesso â€º deve retornar null e registrar erro quando Keychain falhar

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ Erro ao obter tokens:", Any<Error>

    Number of calls: 0

      302 |       // Assert
      303 |       expect(token).toBeNull();
    > 304 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      305 |         'âŒ Erro ao obter tokens:',
      306 |         expect.any(Error)
      307 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:304:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º RenovaÃ§Ã£o de Tokens â€º deve retornar null quando nÃ£o houver refresh token disponÃ­vel

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âš ï¸  Nenhum refresh token disponÃ­vel"

    Number of calls: 0

      462 |       expect(result).toBeNull();
      463 |       expect(mockedRefresh).not.toHaveBeenCalled();
    > 464 |       expect(console.warn).toHaveBeenCalledWith('âš ï¸  Nenhum refresh token disponÃ­vel');
          |                            ^
      465 |     });
      466 |
      467 |     it('deve limpar tokens e retornar null quando renovaÃ§Ã£o falhar (seguranÃ§a)', async () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:464:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º RenovaÃ§Ã£o de Tokens â€º deve limpar tokens e retornar null quando renovaÃ§Ã£o falhar (seguranÃ§a)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ Erro ao renovar tokens:", Any<Error>

    Number of calls: 0

      483 |         service: 'keycloak_tokens',
      484 |       });
    > 485 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      486 |         'âŒ Erro ao renovar tokens:',
      487 |         expect.any(Error)
      488 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:485:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º RenovaÃ§Ã£o de Tokens â€º deve registrar log de sucesso apÃ³s renovaÃ§Ã£o bem-sucedida

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âœ… Tokens renovados com sucesso"

    Number of calls: 0

      504 |
      505 |       // Assert
    > 506 |       expect(console.log).toHaveBeenCalledWith('âœ… Tokens renovados com sucesso');
          |                           ^
      507 |     });
      508 |   });
      509 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:506:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º Logout e RevogaÃ§Ã£o â€º deve revogar token e limpar Keychain durante logout

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âœ… Logout realizado"

    Number of calls: 0

      537 |         service: 'keycloak_tokens',
      538 |       });
    > 539 |       expect(console.log).toHaveBeenCalledWith('âœ… Logout realizado');
          |                           ^
      540 |     });
      541 |
      542 |     it('deve limpar Keychain mesmo quando nÃ£o houver tokens', async () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:539:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º Logout e RevogaÃ§Ã£o â€º deve continuar logout mesmo quando revogaÃ§Ã£o falhar

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âš ï¸  Erro ao revogar token:", Any<Error>

    Number of calls: 0

      569 |
      570 |       // Assert
    > 571 |       expect(console.warn).toHaveBeenCalledWith(
          |                            ^
      572 |         'âš ï¸  Erro ao revogar token:',
      573 |         expect.any(Error)
      574 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:571:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º ExtraÃ§Ã£o de InformaÃ§Ãµes do UsuÃ¡rio â€º deve retornar null e registrar erro quando JWT estiver malformado

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ Erro ao obter informaÃ§Ãµes do usuÃ¡rio:", Anything

    Number of calls: 0

      745 |       // Assert
      746 |       expect(result).toBeNull();
    > 747 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      748 |         'âŒ Erro ao obter informaÃ§Ãµes do usuÃ¡rio:',
      749 |         expect.anything()
      750 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:747:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º ExtraÃ§Ã£o de InformaÃ§Ãµes do UsuÃ¡rio â€º deve tratar erro de decodificaÃ§Ã£o graciosamente

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      765 |       // Assert
      766 |       expect(result).toBeNull();
    > 767 |       expect(console.error).toHaveBeenCalled();
          |                             ^
      768 |     });
      769 |   });
      770 |

      at Object.toHaveBeenCalled (src/services/__tests__/keycloakService.test.ts:767:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— KeycloakAuthService â€º IntegraÃ§Ã£o com Keychain â€º deve tratar erro do Keychain graciosamente

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ Erro ao obter tokens:", Any<Error>

    Number of calls: 0

      831 |       // Assert
      832 |       expect(token).toBeNull();
    > 833 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      834 |         'âŒ Erro ao obter tokens:',
      835 |         expect.any(Error)
      836 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/keycloakService.test.ts:833:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/analyticsService.test.ts
  â— AnalyticsService â€º logEvent â€º deve registrar evento com sucesso

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Analytics Event:", "test_event", ObjectContaining {"param1": "value1"}

    Number of calls: 0

      108 |
      109 |       // Verificar que evento foi registrado
    > 110 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      111 |         'Analytics Event:',
      112 |         'test_event',
      113 |         expect.objectContaining({ param1: 'value1' })

      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:110:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º logEvent â€º deve sanitizar parÃ¢metros do evento

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Analytics Event:", "test_event", ObjectContaining {"invalid_param": "should be sanitized", "longString": StringMatching /^a{100}$/, "nested": "{\"object\":\"should be stringified\"}", "nullValue": "null", "valid_param": "value"}

    Number of calls: 0

      129 |
      130 |       // Verificar sanitizaÃ§Ã£o
    > 131 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      132 |         'Analytics Event:',
      133 |         'test_event',
      134 |         expect.objectContaining({

      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:131:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º logEvent â€º deve adicionar evento pendente em caso de erro

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Error logging event:", Any<Error>

    Number of calls: 0

      173 |         addPendingEvent({ name: 'test_event', parameters: { test: true } })
      174 |       );
    > 175 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      176 |         'Error logging event:',
      177 |         expect.any(Error)
      178 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:175:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º setUserProperties â€º deve definir propriedades do usuÃ¡rio

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Analytics User Properties:", {"plan": "premium", "registration_date": "2025-01-01"}

    Number of calls: 0

      194 |         JSON.stringify(properties)
      195 |       );
    > 196 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      197 |         'Analytics User Properties:',
      198 |         properties
      199 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:196:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º setUserId â€º deve definir ID do usuÃ¡rio

    Storage error

      201 |
      202 |     it('deve tratar erro ao definir propriedades', async () => {
    > 203 |       const mockError = new Error('Storage error');
          |                         ^
      204 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      205 |
      206 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:203:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º logScreenView â€º deve registrar visualizaÃ§Ã£o de tela

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º logScreenView â€º deve usar screen_name como screen_class se nÃ£o fornecido

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º trackPurchase â€º deve rastrear compra com sucesso

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º trackError â€º deve rastrear erro corretamente

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "app_error", ObjectContaining {"error_context": {"action": "button_click", "screen": "HomeScreen"}, "error_message": "Test error", "error_stack": Any<String>}
    Received: "error_occurred", {"context": {"action": "button_click", "screen": "HomeScreen"}, "error_message": "Test error", "error_type": "Error", "stack_trace": "Error: Test error

      340 |       jest.spyOn(analyticsService, 'logEvent');
      341 |
    > 342 |       const error = new Error('Test error');
          |                     ^
      343 |       const context = { screen: 'HomeScreen', action: 'button_click' };
      344 |
      345 |       await analyticsService.trackError(error, context);

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:342:21)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      Number of calls: 1
      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:348:41)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º trackApiCall â€º deve rastrear chamada de API

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"payload": {"duration": 250, "endpoint": "/api/users", "statusCode": 200}, "type": "analytics/recordApiResponseTime"}
    Received
           1
              Object {
                "payload": Object {
            -     "duration": 250,
                  "endpoint": "/api/users",
            -     "statusCode": 200,
            +     "responseTime": 1767027176451,
                },
                "type": "analytics/recordApiResponseTime",
              },
           2
              Object {
                "payload": Object {
            -     "duration": 250,
            +     "name": "api_call",
            +     "parameters": Object {
                    "endpoint": "/api/users",
            -     "statusCode": 200,
            +       "method": "GET",
            +       "response_time": 1767027176451,
                  },
            -   "type": "analytics/recordApiResponseTime",
            +   },
            +   "type": "analytics/addPendingEvent",
              },

    Number of calls: 2

      386 |
      387 |       // Verificar dispatch
    > 388 |       expect(mockDispatch).toHaveBeenCalledWith(
          |                            ^
      389 |         recordApiResponseTime({
      390 |           endpoint: apiData.endpoint,
      391 |           duration: apiData.responseTime,

      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:388:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º trackApiCall â€º deve rastrear erro de API

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "api_error", ObjectContaining {"endpoint": "/api/users", "method": "POST", "response_time": 500, "status_code": 500}
    Received: "api_call", {"endpoint": "/api/users", "method": "POST", "response_time": 1767027176204}

    Number of calls: 1

      406 |
      407 |       // Verificar log de erro
    > 408 |       expect(analyticsService.logEvent).toHaveBeenCalledWith(
          |                                         ^
      409 |         'api_error',
      410 |         expect.objectContaining({
      411 |           endpoint: '/api/users',

      at Object.toHaveBeenCalledWith (src/services/__tests__/analyticsService.test.ts:408:41)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— AnalyticsService â€º Performance tracking â€º deve iniciar mediÃ§Ã£o de performance

    TypeError: _analyticsService.analyticsService.startPerformanceMeasure is not a function

      420 |   describe('Performance tracking', () => {
      421 |     it('deve iniciar mediÃ§Ã£o de performance', () => {
    > 422 |       const startTime = analyticsService.startPerformanceMeasure('test_operation');
          |                                          ^
      423 |       
      424 |       expect(startTime).toBeGreaterThan(0);
      425 |       expect((analyticsService as any).performanceMeasures.get('test_operation')).toBe(startTime);

      at Object.startPerformanceMeasure (src/services/__tests__/analyticsService.test.ts:422:42)

  â— AnalyticsService â€º Performance tracking â€º deve finalizar mediÃ§Ã£o de performance

    TypeError: _analyticsService.analyticsService.startPerformanceMeasure is not a function

      430 |       
      431 |       // Iniciar mediÃ§Ã£o
    > 432 |       analyticsService.startPerformanceMeasure('test_operation');
          |                        ^
      433 |       
      434 |       // Simular delay
      435 |       await new Promise(resolve => setTimeout(resolve, 100));

      at Object.startPerformanceMeasure (src/services/__tests__/analyticsService.test.ts:432:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Performance tracking â€º deve retornar -1 se mediÃ§Ã£o nÃ£o existir

    TypeError: _analyticsService.analyticsService.endPerformanceMeasure is not a function

      449 |
      450 |     it('deve retornar -1 se mediÃ§Ã£o nÃ£o existir', async () => {
    > 451 |       const duration = await analyticsService.endPerformanceMeasure('non_existent');
          |                                               ^
      452 |       expect(duration).toBe(-1);
      453 |     });
      454 |   });

      at Object.endPerformanceMeasure (src/services/__tests__/analyticsService.test.ts:451:47)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Campaign tracking â€º deve rastrear origem de campanha

    TypeError: _analyticsService.analyticsService.trackCampaign is not a function

      465 |       };
      466 |
    > 467 |       await analyticsService.trackCampaign(
          |                              ^
      468 |         campaignData.source,
      469 |         campaignData.medium,
      470 |         campaignData.campaign

      at Object.trackCampaign (src/services/__tests__/analyticsService.test.ts:467:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º E-commerce Events â€º deve rastrear visualizaÃ§Ã£o de item

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º E-commerce Events â€º deve rastrear adiÃ§Ã£o ao carrinho

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º E-commerce Events â€º deve rastrear inÃ­cio do checkout

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Mystery Box Events â€º deve rastrear visualizaÃ§Ã£o de caixa

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Mystery Box Events â€º deve rastrear abertura de caixa

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Mystery Box Events â€º deve rastrear compartilhamento de caixa

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Engagement Events â€º deve rastrear submissÃ£o de review

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Engagement Events â€º deve rastrear compartilhamento social

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Performance Events â€º deve rastrear latÃªncia da API

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Performance Events â€º deve rastrear tempo de carregamento de tela

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Performance Events â€º deve marcar tela como lenta se > 3000ms

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Privacy and LGPD â€º deve definir consentimento de analytics

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Privacy and LGPD â€º deve verificar consentimento de analytics

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º Privacy and LGPD â€º deve deletar dados do usuÃ¡rio (LGPD)

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º User Properties and Audiences â€º deve definir segmento do usuÃ¡rio

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º User Properties and Audiences â€º deve calcular nÃ­vel de engajamento - alto

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º User Properties and Audiences â€º deve calcular nÃ­vel de engajamento - mÃ©dio

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— AnalyticsService â€º Crowbar Custom Events â€º User Properties and Audiences â€º deve calcular nÃ­vel de engajamento - baixo

    Storage error

      233 |
      234 |     it('deve tratar erro ao definir ID', async () => {
    > 235 |       const mockError = new Error('Storage error');
          |                         ^
      236 |       (AsyncStorage.setItem as jest.Mock).mockRejectedValue(mockError);
      237 |
      238 |       await expect(

      at Object.<anonymous> (src/services/__tests__/analyticsService.test.ts:235:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/__tests__/integration/orders.integration.test.ts
  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Listagem e busca de pedidos â€º deve obter lista de pedidos do usuÃ¡rio

    ReferenceError: response is not defined

      147 |
      148 |       // Assert
    > 149 |       expect(response.data).toHaveLength(2);
          |              ^
      150 |       expect(response.data[0]).toMatchObject({
      151 |         id: 'order-123',
      152 |         order_number: 'ORD-2025-001',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:149:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Listagem e busca de pedidos â€º deve obter pedidos com filtros aplicados

    ReferenceError: response is not defined

      173 |
      174 |       // Assert
    > 175 |       expect(response.data).toHaveLength(1);
          |              ^
      176 |       expect(response.data[0]._status).toBe('shipped');
      177 |       expect(response.data[0].payment_status).toBe('paid');
      178 |     });

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:175:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Listagem e busca de pedidos â€º deve obter pedidos com paginaÃ§Ã£o

    ReferenceError: response is not defined

      190 |
      191 |       // Assert
    > 192 |       expect(response.data).toHaveLength(1);
          |              ^
      193 |       expect(response.meta.current_page).toBe(page);
      194 |       expect(response.meta.per_page).toBe(perPage);
      195 |     });

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:192:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Listagem e busca de pedidos â€º deve obter detalhes de um pedido especÃ­fico

    ReferenceError: response is not defined

      205 |
      206 |       // Assert
    > 207 |       expect(response).toMatchObject({
          |              ^
      208 |         id: orderId,
      209 |         order_number: 'ORD-2025-001',
      210 |         status: 'pending',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:207:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Listagem e busca de pedidos â€º deve falhar ao buscar pedido inexistente

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      228 |
      229 |       // Act & Assert
    > 230 |       await expect(orderService.getOrderById(orderId)).rejects.toMatchObject({
          |             ^
      231 |         status: 404,
      232 |         message: 'Pedido nÃ£o encontrado',
      233 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:230:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Listagem e busca de pedidos â€º deve obter estatÃ­sticas de pedidos

    ReferenceError: response is not defined

      260 |
      261 |       // Assert
    > 262 |       expect(response).toMatchObject({
          |              ^
      263 |         total_orders: 15,
      264 |         total_spent: 2499.85,
      265 |         orders_by_status: expect.objectContaining({

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:262:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Cancelamento de pedidos â€º deve cancelar pedido com sucesso

    ReferenceError: response is not defined

      290 |
      291 |       // Assert
    > 292 |       expect(response).toMatchObject({
          |              ^
      293 |         id: orderId,
      294 |         status: 'cancelled',
      295 |         cancellation_reason: reason,

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:292:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Cancelamento de pedidos â€º deve falhar ao cancelar pedido jÃ¡ enviado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      310 |
      311 |       // Act & Assert
    > 312 |       await expect(orderService.cancelOrder(orderId, reason)).rejects.toMatchObject({
          |             ^
      313 |         status: 400,
      314 |         message: 'Pedido jÃ¡ foi enviado e nÃ£o pode ser cancelado',
      315 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:312:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Cancelamento de pedidos â€º deve falhar ao cancelar pedido sem permissÃ£o

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      328 |
      329 |       // Act & Assert
    > 330 |       await expect(orderService.cancelOrder(orderId, reason)).rejects.toMatchObject({
          |             ^
      331 |         status: 403,
      332 |         message: 'VocÃª nÃ£o tem permissÃ£o para cancelar este pedido',
      333 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:330:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Rastreamento e _status â€º deve obter informaÃ§Ãµes de rastreamento

    ReferenceError: response is not defined

      346 |
      347 |       // Assert
    > 348 |       expect(response).toMatchObject({
          |              ^
      349 |         tracking_code: 'BR123456789',
      350 |         carrier: 'Correios',
      351 |         status: 'in_transit',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:348:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Rastreamento e _status â€º deve obter histÃ³rico de _status

    ReferenceError: response is not defined

      369 |
      370 |       // Assert
    > 371 |       expect(response).toHaveLength(3);
          |              ^
      372 |       expect(response[0]).toMatchObject({
      373 |         status: 'pending',
      374 |         description: 'Pedido aguardando pagamento',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:371:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Rastreamento e _status â€º deve obter _status de entrega

    ReferenceError: response is not defined

      398 |
      399 |       // Assert
    > 400 |       expect(response).toMatchObject({
          |              ^
      401 |         status: 'out_for_delivery',
      402 |         estimated_delivery: '2025-01-10T16:00:00Z',
      403 |         delivery_attempts: 0,

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:400:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Rastreamento e _status â€º deve confirmar recebimento da entrega

    ReferenceError: response is not defined

      421 |
      422 |       // Assert
    > 423 |       expect(response).toMatchObject({
          |              ^
      424 |         id: orderId,
      425 |         status: 'delivered',
      426 |         delivered_at: '2025-01-10T16:30:00Z',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:423:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Rastreamento e _status â€º deve falhar ao confirmar entrega de pedido nÃ£o enviado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      439 |
      440 |       // Act & Assert
    > 441 |       await expect(orderService.confirmDelivery(orderId)).rejects.toMatchObject({
          |             ^
      442 |         status: 400,
      443 |         message: 'Pedido ainda nÃ£o foi enviado',
      444 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:441:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º AvaliaÃ§Ã£o e feedback â€º deve avaliar pedido com sucesso

    ReferenceError: response is not defined

      467 |
      468 |       // Assert
    > 469 |       expect(response).toMatchObject({
          |              ^
      470 |         id: orderId,
      471 |         rating,
      472 |         review,

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:469:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º AvaliaÃ§Ã£o e feedback â€º deve falhar ao avaliar pedido nÃ£o entregue

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      487 |
      488 |       // Act & Assert
    > 489 |       await expect(orderService.rateOrder(orderId, rating)).rejects.toMatchObject({
          |             ^
      490 |         status: 400,
      491 |         message: 'Pedido deve estar entregue para ser avaliado',
      492 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:489:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º AvaliaÃ§Ã£o e feedback â€º deve falhar ao avaliar com rating invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      505 |
      506 |       // Act & Assert
    > 507 |       await expect(orderService.rateOrder(orderId, rating)).rejects.toMatchObject({
          |             ^
      508 |         status: 422,
      509 |         message: 'Dados invÃ¡lidos',
      510 |         errors: { rating: ['Rating deve ser entre 1 e 5'] },

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:507:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Funcionalidades auxiliares â€º deve recomprar pedido anterior

    ReferenceError: response is not defined

      531 |
      532 |       // Assert
    > 533 |       expect(response).toMatchObject({
          |              ^
      534 |         cart_id: 'cart-456',
      535 |         items_added: 1,
      536 |         items_unavailable: 0,

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:533:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Funcionalidades auxiliares â€º deve gerar nota fiscal do pedido

    ReferenceError: response is not defined

      554 |
      555 |       // Assert
    > 556 |       expect(response).toMatchObject({
          |              ^
      557 |         invoice_url: 'https://storage.com/invoices/invoice-124.pdf',
      558 |         invoice_number: 'NF-2025-001',
      559 |         generated_at: '2025-01-10T20:00:00Z',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:556:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Funcionalidades auxiliares â€º deve baixar comprovante do pedido

    ReferenceError: response is not defined

      579 |
      580 |       // Assert
    > 581 |       expect(response).toBe('blob:http://localhost/receipt.pdf');
          |              ^
      582 |       expect(URL.createObjectURL).toHaveBeenCalledWith(expect.any(Blob));
      583 |     });
      584 |

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:581:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Funcionalidades auxiliares â€º deve reportar problema com pedido

    ReferenceError: response is not defined

      606 |
      607 |       // Assert
    > 608 |       expect(response).toMatchObject({
          |              ^
      609 |         issue_id: 'issue-001',
      610 |         status: 'open',
      611 |         message: 'Problema reportado com sucesso',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:608:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Funcionalidades auxiliares â€º deve atualizar endereÃ§o de entrega

    ReferenceError: response is not defined

      632 |
      633 |       // Assert
    > 634 |       expect(response).toMatchObject({
          |              ^
      635 |         id: orderId,
      636 |         shipping_address: expect.objectContaining({
      637 |           id: addressId,

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:634:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º Funcionalidades auxiliares â€º deve reagendar entrega

    ReferenceError: response is not defined

      656 |
      657 |       // Assert
    > 658 |       expect(response).toMatchObject({
          |              ^
      659 |         id: orderId,
      660 |         delivery_date: newDate,
      661 |       });

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:658:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º SolicitaÃ§Ã£o de devoluÃ§Ã£o â€º deve solicitar devoluÃ§Ã£o com sucesso

    ReferenceError: response is not defined

      694 |
      695 |       // Assert
    > 696 |       expect(response).toMatchObject({
          |              ^
      697 |         return_id: 'return-001',
      698 |         status: 'pending',
      699 |         return_code: 'RET-2025-001',

      at Object.response (src/services/__tests__/integration/orders.integration.test.ts:696:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º SolicitaÃ§Ã£o de devoluÃ§Ã£o â€º deve falhar ao solicitar devoluÃ§Ã£o apÃ³s prazo

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      724 |
      725 |       // Act & Assert
    > 726 |       await expect(orderService.requestReturn(orderId, returnData)).rejects.toMatchObject({
          |             ^
      727 |         status: 400,
      728 |         message: 'Prazo para devoluÃ§Ã£o expirado',
      729 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:726:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º CenÃ¡rios de erro â€º deve tratar erro de rede durante busca de pedidos

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      737 |
      738 |       // Act & Assert
    > 739 |       await expect(orderService.getOrders()).rejects.toMatchObject({
          |             ^
      740 |         status: 0,
      741 |         message: expect.stringContaining('Erro de conexÃ£o'),
      742 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:739:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º CenÃ¡rios de erro â€º deve tratar timeout durante cancelamento

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      749 |
      750 |       // Act & Assert
    > 751 |       await expect(orderService.cancelOrder(orderId)).rejects.toMatchObject({
          |             ^
      752 |         status: 0,
      753 |         message: expect.stringContaining('timeout'),
      754 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:751:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º CenÃ¡rios de erro â€º deve tratar erro 500 durante rastreamento

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      765 |
      766 |       // Act & Assert
    > 767 |       await expect(orderService.trackOrder(orderId)).rejects.toMatchObject({
          |             ^
      768 |         status: 500,
      769 |         message: 'Erro interno do servidor',
      770 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:767:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Pedidos â€º CenÃ¡rios de erro â€º deve tratar erro 403 ao tentar acessar pedido de outro usuÃ¡rio

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      781 |
      782 |       // Act & Assert
    > 783 |       await expect(orderService.getOrderById(orderId)).rejects.toMatchObject({
          |             ^
      784 |         status: 403,
      785 |         message: 'Acesso negado',
      786 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/orders.integration.test.ts:783:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/test/performance/animationPerformance.test.tsx
  â— Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     â€¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     â€¢ If you need a custom transformation specify a "transform" option in your config.
     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/react-native@0.80.1_@babel+core@7.28.5_@react-native-community+cli@20.0.2_typescript@5._f6e2dde6378c211fab3d29d577bf68a4/node_modules/react-native/index.js:28
    import typeof * as ReactNativePublicAPI from './index.js.flow';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

       8 | // Mock React Native modules
       9 | jest.mock('react-native', () => ({
    > 10 |   ...jest.requireActual('react-native'),
         |           ^
      11 |   InteractionManager: {
      12 |     runAfterInteractions: (callback: () => void) => {
      13 |       setTimeout(callback, 0);

      at Runtime.createScriptFromCode (node_modules/.pnpm/node_modules/jest-runtime/build/index.js:1505:14)
      at requireActual (src/test/performance/animationPerformance.test.tsx:10:11)
      at Object.require (src/test/performance/animationPerformance.test.tsx:2:1)

FAIL src/screens/Checkout/__tests__/CheckoutScreen.test.tsx
  â— CheckoutScreen â€º RenderizaÃ§Ã£o Inicial â€º deve renderizar o componente corretamente

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º RenderizaÃ§Ã£o Inicial â€º deve mostrar loading ao carregar dados

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º RenderizaÃ§Ã£o Inicial â€º deve carregar endereÃ§os e mÃ©todos de pagamento

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º RenderizaÃ§Ã£o Inicial â€º deve auto-selecionar endereÃ§o padrÃ£o

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º RenderizaÃ§Ã£o Inicial â€º deve auto-selecionar mÃ©todo de pagamento padrÃ£o

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Estado de Erro â€º deve mostrar erro ao falhar carregamento de dados

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Estado de Erro â€º deve permitir retry apÃ³s erro

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Carrinho Vazio â€º deve mostrar mensagem de carrinho vazio

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Carrinho Vazio â€º deve navegar para loja ao clicar em "Ir Ã s compras"

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Indicador de Etapas â€º deve renderizar indicador com 3 etapas

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Indicador de Etapas â€º deve iniciar na etapa 1 (EndereÃ§o)

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º NavegaÃ§Ã£o entre Etapas â€º deve permitir avanÃ§ar para etapa 2 apÃ³s selecionar endereÃ§o

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º NavegaÃ§Ã£o entre Etapas â€º deve bloquear avanÃ§o se etapa nÃ£o for vÃ¡lida

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º NavegaÃ§Ã£o entre Etapas â€º deve permitir voltar para etapa anterior

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º NavegaÃ§Ã£o entre Etapas â€º nÃ£o deve mostrar botÃ£o voltar na etapa 1

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 1 - EndereÃ§o â€º deve renderizar lista de endereÃ§os

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 1 - EndereÃ§o â€º deve validar se endereÃ§o estÃ¡ selecionado antes de avanÃ§ar

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 2 - Frete â€º deve renderizar opÃ§Ãµes de frete

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 2 - Frete â€º deve mostrar preÃ§o das opÃ§Ãµes de frete

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 2 - Frete â€º deve mostrar dias de entrega estimados

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 2 - Frete â€º deve mostrar mensagem quando nÃ£o hÃ¡ opÃ§Ãµes de frete

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 3 - Pagamento â€º deve renderizar mÃ©todos de pagamento

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Etapa 3 - Pagamento â€º deve mostrar botÃ£o Finalizar Pedido na etapa 3

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Processamento de Pedido â€º deve processar pedido com sucesso

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Processamento de Pedido â€º deve mostrar loading durante processamento

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Processamento de Pedido â€º deve tratar erro no processamento do pedido

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º Processamento de Pedido â€º deve enviar dados corretos ao criar pedido

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º FormataÃ§Ã£o e CÃ¡lculos â€º deve formatar preÃ§os em reais corretamente

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º FormataÃ§Ã£o e CÃ¡lculos â€º deve calcular total com frete incluÃ­do

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º FormataÃ§Ã£o e CÃ¡lculos â€º deve mostrar frete grÃ¡tis quando preÃ§o Ã© zero

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

  â— CheckoutScreen â€º NavegaÃ§Ã£o â€º deve navegar de volta ao clicar no botÃ£o voltar do header

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      143 |     // Mock default dos serviÃ§os
      144 |     (userService.getAddresses as jest.Mock).mockResolvedValue(mockAddresses);
    > 145 |     (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                  ^
      146 |     (cartService.createOrder as jest.Mock).mockResolvedValue(mockOrder);
      147 |   });
      148 |

      at Object.mockResolvedValue (src/screens/Checkout/__tests__/CheckoutScreen.test.tsx:145:50)

FAIL src/test/accessibility/animationAccessibility.test.tsx
  â— Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     â€¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     â€¢ If you need a custom transformation specify a "transform" option in your config.
     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/react-native@0.80.1_@babel+core@7.28.5_@react-native-community+cli@20.0.2_typescript@5._f6e2dde6378c211fab3d29d577bf68a4/node_modules/react-native/index.js:28
    import typeof * as ReactNativePublicAPI from './index.js.flow';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

       7 | // Mock React Native modules
       8 | jest.mock('react-native', () => ({
    >  9 |   ...jest.requireActual('react-native'),
         |           ^
      10 |   AccessibilityInfo: {
      11 |     isScreenReaderEnabled: jest.fn(() => Promise.resolve(true)),
      12 |     announceForAccessibility: jest.fn(),

      at Runtime.createScriptFromCode (node_modules/.pnpm/node_modules/jest-runtime/build/index.js:1505:14)
      at requireActual (src/test/accessibility/animationAccessibility.test.tsx:9:11)
      at Object.require (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/helpers/accessibility.ts:2:1)
      at Object.require (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/matchers/to-be-busy.ts:5:1)
      at Object.require (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/matchers/extend-expect.ts:1:1)
      at Object.require (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/index.ts:2:1)
      at Object.require (src/test/accessibility/animationAccessibility.test.tsx:2:1)

FAIL src/services/__tests__/integration/boxes.integration.test.ts
  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Listagem de caixas â€º deve obter lista de caixas com sucesso

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}

      108 |
      109 |       // Assert
    > 110 |       expect(response.data).toHaveLength(2);
          |                             ^
      111 |       expect(response.data[0]).toMatchObject({
      112 |         id: 'box-electronics-001',
      113 |         name: 'Caixa EletrÃ´nicos Premium',

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:110:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Listagem de caixas â€º deve obter caixas com filtros aplicados

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "success": true}

      140 |
      141 |       // Assert
    > 142 |       expect(response.data).toHaveLength(1);
          |                             ^
      143 |       expect(response.data[0].category_id).toBe('cat-electronics');
      144 |     });
      145 |

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:142:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Listagem de caixas â€º deve obter caixas em destaque

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "success": true}

      155 |
      156 |       // Assert
    > 157 |       expect(response).toHaveLength(1);
          |                        ^
      158 |       expect(response[0].is_featured).toBe(true);
      159 |     });
      160 |

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:157:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Listagem de caixas â€º deve obter caixas populares

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      170 |
      171 |       // Assert
    > 172 |       expect(response).toHaveLength(2);
          |                        ^
      173 |       expect(response[0].reviews_count).toBeGreaterThanOrEqual(response[1].reviews_count);
      174 |     });
      175 |

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:172:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Listagem de caixas â€º deve obter caixas _recÃ©m-lanÃ§adas

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      185 |
      186 |       // Assert
    > 187 |       expect(response).toHaveLength(1);
          |                        ^
      188 |       expect(response[0].is_new).toBe(true);
      189 |     });
      190 |

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:187:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Listagem de caixas â€º deve tratar erro ao obter lista de caixas

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      197 |       });
      198 |
    > 199 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      200 |         status: 500,
      201 |         message: 'Erro interno do servidor',
      202 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/boxes.integration.test.ts:199:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Detalhes da caixa â€º deve obter detalhes de uma caixa especÃ­fica

    expect(received).toMatchObject(expected)

    - Expected  -  5
    + Received  + 67

      Object {
    -   "category": Object {
    -     "name": "EletrÃ´nicos",
    +   "data": Object {
    +     "category": "tech",
    +     "categoryName": "Tecnologia",
    +     "contents": Array [
    +       Object {
    +         "name": "Item Surpresa 1",
    +         "probability": 30,
    +       },
    +       Object {
    +         "name": "Item Surpresa 2",
    +         "probability": 25,
            },
    -   "id": "box-electronics-001",
    -   "name": "Caixa EletrÃ´nicos Premium",
    -   "price": 99.99,
    +       Object {
    +         "name": "Item Surpresa 3",
    +         "probability": 20,
    +       },
    +       Object {
    +         "name": "Item Raro",
    +         "probability": 15,
    +       },
    +       Object {
    +         "name": "Item Super Raro",
    +         "probability": 10,
    +       },
    +     ],
    +     "createdAt": "2025-01-01T10:00:00Z",
    +     "description": "Caixa com produtos de tecnologia surpresa",
    +     "discount": 37,
    +     "featured": true,
    +     "id": "box-123",
    +     "image": "https://example.com/box-tech.jpg",
    +     "images": Array [
    +       "https://example.com/box-tech-1.jpg",
    +       "https://example.com/box-tech-2.jpg",
    +     ],
    +     "name": "Caixa Misteriosa Tech",
    +     "originalPrice": 79.9,
    +     "platform": "magalu",
    +     "price": 49.9,
    +     "rating": 4.5,
    +     "reviewCount": 128,
    +     "sold": 250,
    +     "specifications": Object {
    +       "dimensions": "20x15x10cm",
    +       "maxValue": "150.00",
    +       "minValue": "30.00",
    +       "weight": "500g",
    +     },
    +     "stock": 50,
    +     "tags": Array [
    +       "eletrÃ´nicos",
    +       "gadgets",
    +       "surpresa",
    +     ],
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "vendor": Object {
    +       "id": "vendor-123",
    +       "name": "TechStore Brasil",
    +       "rating": 4.7,
    +       "reviewCount": 1250,
    +       "since": "2023-01-01",
    +       "verified": true,
    +     },
    +     "vendorId": "vendor-123",
    +     "vendorName": "TechStore Brasil",
    +     "verified": true,
    +   },
    +   "success": true,
      }

      216 |
      217 |       // Assert
    > 218 |       expect(response).toMatchObject({
          |                        ^
      219 |         id: boxId,
      220 |         name: 'Caixa EletrÃ´nicos Premium',
      221 |         price: 99.99,

      at Object.toMatchObject (src/services/__tests__/integration/boxes.integration.test.ts:218:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Detalhes da caixa â€º deve falhar ao obter caixa inexistente

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"category": "tech", "categoryName": "Tecnologia", "contents": [{"name": "Item Surpresa 1", "probability": 30}, {"name": "Item Surpresa 2", "probability": 25}, {"name": "Item Surpresa 3", "probability": 20}, {"name": "Item Raro", "probability": 15}, {"name": "Item Super Raro", "probability": 10}], "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "specifications": {"dimensions": "20x15x10cm", "maxValue": "150.00", "minValue": "30.00", "weight": "500g"}, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendor": {"id": "vendor-123", "name": "TechStore Brasil", "rating": 4.7, "reviewCount": 1250, "since": "2023-01-01", "verified": true}, "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, "success": true}

      234 |
      235 |       // Act & Assert
    > 236 |       await expect(boxService.getBoxById(boxId)).rejects.toMatchObject({
          |             ^
      237 |         status: 404,
      238 |         message: 'Caixa nÃ£o encontrada',
      239 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/boxes.integration.test.ts:236:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Detalhes da caixa â€º deve obter estatÃ­sticas de uma caixa

    expect(received).toBe(expected) // Object.is equality

    Expected: 150
    Received: undefined

      265 |
      266 |       // Assert
    > 267 |       expect(response.total_sold).toBe(150);
          |                                   ^
      268 |       expect(response.average_rating).toBe(4.5);
      269 |       expect(response.recent_openings).toHaveLength(1);
      270 |     });

      at Object.toBe (src/services/__tests__/integration/boxes.integration.test.ts:267:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Detalhes da caixa â€º deve verificar disponibilidade de estoque

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      287 |
      288 |       // Assert
    > 289 |       expect(response.available).toBe(true);
          |                                  ^
      290 |       expect(response.stock).toBe(47);
      291 |       expect(response.max_per_user).toBe(5);
      292 |     });

      at Object.toBe (src/services/__tests__/integration/boxes.integration.test.ts:289:34)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Detalhes da caixa â€º deve obter caixas relacionadas

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      304 |
      305 |       // Assert
    > 306 |       expect(response).toHaveLength(1);
          |                        ^
      307 |       expect(response[0].id).toBe('box-gaming-002');
      308 |     });
      309 |   });

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:306:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Busca de caixas â€º deve realizar busca com sucesso

    expect(received).toBe(expected) // Object.is equality

    Expected: "eletrÃ´nicos"
    Received: undefined

      332 |
      333 |       // Assert
    > 334 |       expect(response.query).toBe(query);
          |                              ^
      335 |       expect(response.results).toHaveLength(1);
      336 |       expect(response.results[0].name).toContain('EletrÃ´nicos');
      337 |       expect(response.suggestions).toContain('eletrÃ´nicos premium');

      at Object.toBe (src/services/__tests__/integration/boxes.integration.test.ts:334:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Busca de caixas â€º deve realizar busca com filtros avanÃ§ados

    expect(received).toBe(expected) // Object.is equality

    Expected: "premium"
    Received: undefined

      368 |
      369 |       // Assert
    > 370 |       expect(response.query).toBe(query);
          |                              ^
      371 |       expect(response.results).toHaveLength(1);
      372 |       expect(response.total).toBe(1);
      373 |     });

      at Object.toBe (src/services/__tests__/integration/boxes.integration.test.ts:370:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Busca de caixas â€º deve obter sugestÃµes de busca

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      385 |
      386 |       // Assert
    > 387 |       expect(response).toHaveLength(3);
          |                        ^
      388 |       expect(response[0]).toBe('eletrÃ´nicos');
      389 |       expect(response).toContain('eletrÃ´nicos premium');
      390 |     });

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:387:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Busca de caixas â€º deve retornar resultado vazio para busca sem matches

    expect(received).toBe(expected) // Object.is equality

    Expected: "inexistente"
    Received: undefined

      412 |
      413 |       // Assert
    > 414 |       expect(response.query).toBe(query);
          |                              ^
      415 |       expect(response.results).toHaveLength(0);
      416 |       expect(response.total).toBe(0);
      417 |       expect(response.suggestions).toHaveLength(3);

      at Object.toBe (src/services/__tests__/integration/boxes.integration.test.ts:414:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Categorias â€º deve obter lista de categorias

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {}

      429 |
      430 |       // Assert
    > 431 |       expect(response).toHaveLength(3);
          |                        ^
      432 |       expect(response[0]).toMatchObject({
      433 |         id: 'cat-electronics',
      434 |         name: 'EletrÃ´nicos',

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:431:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Categorias â€º deve obter categoria por ID

    expect(received).toMatchObject(expected)

    - Expected  - 5
    + Received  + 1

    - Object {
    -   "id": "cat-electronics",
    -   "name": "EletrÃ´nicos",
    -   "slug": "electronics",
    - }
    + Object {}

      448 |
      449 |       // Assert
    > 450 |       expect(response).toMatchObject({
          |                        ^
      451 |         id: categoryId,
      452 |         name: 'EletrÃ´nicos',
      453 |         slug: 'electronics',

      at Object.toMatchObject (src/services/__tests__/integration/boxes.integration.test.ts:450:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Categorias â€º deve obter caixas de uma categoria especÃ­fica

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      467 |
      468 |       // Assert
    > 469 |       expect(response.data).toHaveLength(1);
          |                             ^
      470 |       expect(response.data[0].category_id).toBe(categoryId);
      471 |     });
      472 |   });

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:469:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Reviews â€º deve obter reviews de uma caixa

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      484 |
      485 |       // Assert
    > 486 |       expect(response.data).toHaveLength(1);
          |                             ^
      487 |       expect(response.data[0]).toMatchObject({
      488 |         id: 'review-001',
      489 |         rating: 5,

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:486:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Reviews â€º deve adicionar review para uma caixa

    expect(received).toMatchObject(expected)

    - Expected  -  4
    + Received  + 22

      Object {
    -   "comment": "Boa caixa, mas poderia ter mais itens.",
    -   "id": "review-002",
    -   "mystery_box_id": "box-electronics-001",
    -   "rating": 4,
    +   "data": Object {
    +     "boxId": "box-456",
    +     "comment": "Adorei os produtos que vieram na caixa. Superou minhas expectativas!",
    +     "createdAt": "2025-01-05T14:30:00Z",
    +     "helpful": 15,
    +     "id": "review-123",
    +     "images": Array [
    +       "https://example.com/review-1.jpg",
    +       "https://example.com/review-2.jpg",
    +     ],
    +     "rating": 5,
    +     "response": null,
    +     "title": "Excelente caixa!",
    +     "unhelpful": 2,
    +     "updatedAt": "2025-01-05T14:30:00Z",
    +     "userAvatar": "https://example.com/avatar.jpg",
    +     "userId": "user-123",
    +     "userName": "JoÃ£o Silva",
    +     "verified": true,
    +   },
    +   "message": "AvaliaÃ§Ã£o criada com sucesso",
    +   "success": true,
      }

      523 |
      524 |       // Assert
    > 525 |       expect(response).toMatchObject({
          |                        ^
      526 |         id: 'review-002',
      527 |         rating: 4,
      528 |         comment: 'Boa caixa, mas poderia ter mais itens.',

      at Object.toMatchObject (src/services/__tests__/integration/boxes.integration.test.ts:525:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Funcionalidades auxiliares â€º deve obter tags populares

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {}

      564 |
      565 |       // Assert
    > 566 |       expect(response).toHaveLength(3);
          |                        ^
      567 |       expect(response[0]).toMatchObject({
      568 |         tag: 'eletrÃ´nicos',
      569 |         count: 25,

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:566:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Funcionalidades auxiliares â€º deve obter filtros disponÃ­veis

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      587 |
      588 |       // Assert
    > 589 |       expect(response.categories).toHaveLength(3);
          |                                   ^
      590 |       expect(response.rarities).toContain('legendary');
      591 |       expect(response.price_range.min).toBe(19.99);
      592 |       expect(response.tags).toContain('eletrÃ´nicos');

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:589:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º Funcionalidades auxiliares â€º deve obter histÃ³rico de preÃ§os

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}], "filters": {"categories": ["tech"], "platforms": ["magalu"], "priceRange": {"max": 49.9, "min": 49.9}}, "pagination": {"limit": 20, "page": 1, "total": 1, "totalPages": 1}, "success": true}

      609 |
      610 |       // Assert
    > 611 |       expect(response).toHaveLength(3);
          |                        ^
      612 |       expect(response[0]).toMatchObject({
      613 |         date: '2025-01-01',
      614 |         price: 89.99,

      at Object.toHaveLength (src/services/__tests__/integration/boxes.integration.test.ts:611:24)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º CenÃ¡rios de erro â€º deve tratar erro de rede durante busca

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      645 |
      646 |       // Act & Assert
    > 647 |       await expect(boxService.searchBoxes(query)).rejects.toMatchObject({
          |             ^
      648 |         status: 0,
      649 |         message: expect.stringContaining('Erro de conexÃ£o'),
      650 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/boxes.integration.test.ts:647:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º CenÃ¡rios de erro â€º deve tratar timeout durante carregamento de detalhes

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"category": "tech", "categoryName": "Tecnologia", "contents": [{"name": "Item Surpresa 1", "probability": 30}, {"name": "Item Surpresa 2", "probability": 25}, {"name": "Item Surpresa 3", "probability": 20}, {"name": "Item Raro", "probability": 15}, {"name": "Item Super Raro", "probability": 10}], "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "specifications": {"dimensions": "20x15x10cm", "maxValue": "150.00", "minValue": "30.00", "weight": "500g"}, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendor": {"id": "vendor-123", "name": "TechStore Brasil", "rating": 4.7, "reviewCount": 1250, "since": "2023-01-01", "verified": true}, "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, "success": true}

      657 |
      658 |       // Act & Assert
    > 659 |       await expect(boxService.getBoxById(boxId)).rejects.toMatchObject({
          |             ^
      660 |         status: 0,
      661 |         message: expect.stringContaining('timeout'),
      662 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/boxes.integration.test.ts:659:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º CenÃ¡rios de erro â€º deve tratar erro 500 durante listagem

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      672 |
      673 |       // Act & Assert
    > 674 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      675 |         status: 500,
      676 |         message: 'Erro interno do servidor',
      677 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/boxes.integration.test.ts:674:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - OperaÃ§Ãµes de Boxes â€º CenÃ¡rios de erro â€º deve tratar erro de validaÃ§Ã£o ao adicionar review

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"boxId": "box-456", "comment": "Adorei os produtos que vieram na caixa. Superou minhas expectativas!", "createdAt": "2025-01-05T14:30:00Z", "helpful": 15, "id": "review-123", "images": ["https://example.com/review-1.jpg", "https://example.com/review-2.jpg"], "rating": 5, "response": null, "title": "Excelente caixa!", "unhelpful": 2, "updatedAt": "2025-01-05T14:30:00Z", "userAvatar": "https://example.com/avatar.jpg", "userId": "user-123", "userName": "JoÃ£o Silva", "verified": true}, "message": "AvaliaÃ§Ã£o criada com sucesso", "success": true}

      696 |
      697 |       // Act & Assert
    > 698 |       await expect(boxService.addBoxReview(boxId, invalidReview)).rejects.toMatchObject({
          |             ^
      699 |         status: 422,
      700 |         message: 'Dados invÃ¡lidos',
      701 |         errors: {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/boxes.integration.test.ts:698:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/__tests__/integration/interceptors.integration.test.ts
  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Request Interceptor - AutenticaÃ§Ã£o â€º deve adicionar token de autenticaÃ§Ã£o automaticamente

    expect(received).toBe(expected) // Object.is equality

    Expected: "Bearer test-token-123"
    Received: ""

      53 |
      54 |       // Assert
    > 55 |       expect(capturedAuthHeader).toBe(`Bearer ${token}`);
         |                                  ^
      56 |     });
      57 |
      58 |     it('deve fazer request sem token quando nÃ£o autenticado', async () => {

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:55:34)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Request Interceptor - AutenticaÃ§Ã£o â€º deve incluir headers padrÃ£o em todas as requisiÃ§Ãµes

    expect(received).toBe(expected) // Object.is equality

    Expected: "application/json"
    Received: undefined

       97 |
       98 |       // Assert
    >  99 |       expect(capturedHeaders['Content-Type']).toBe('application/json');
          |                                               ^
      100 |       expect(capturedHeaders.Accept).toBe('application/json');
      101 |     });
      102 |

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:99:47)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Request Interceptor - AutenticaÃ§Ã£o â€º deve preservar headers customizados

    expect(received).toBe(expected) // Object.is equality

    Expected: "multipart/form-data"
    Received: undefined

      121 |
      122 |       // Assert
    > 123 |       expect(capturedHeaders['Content-Type']).toBe('multipart/form-data');
          |                                               ^
      124 |     });
      125 |
      126 |     it('deve adicionar timestamp ou ID de request para tracking', async () => {

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:123:47)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Request Interceptor - AutenticaÃ§Ã£o â€º deve adicionar timestamp ou ID de request para tracking

    expect(received).toMatch(expected)

    Matcher error: received value must be a string

    Received has value: undefined

      144 |
      145 |       // Assert
    > 146 |       expect(capturedHeaders['X-Request-ID']).toMatch(/^req-\d+$/);
          |                                               ^
      147 |     });
      148 |   });
      149 |

      at Object.toMatch (src/services/__tests__/integration/interceptors.integration.test.ts:146:47)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Response Interceptor - Tratamento de Erros â€º deve limpar token automaticamente em erro 401

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      161 |
      162 |       // Act & Assert
    > 163 |       await expect(userService.getProfile()).rejects.toMatchObject({
          |             ^
      164 |         status: 401,
      165 |         message: 'Token expirado',
      166 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:163:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Response Interceptor - Tratamento de Erros â€º deve manter token em outros tipos de erro

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"category": "tech", "categoryName": "Tecnologia", "contents": [{"name": "Item Surpresa 1", "probability": 30}, {"name": "Item Surpresa 2", "probability": 25}, {"name": "Item Surpresa 3", "probability": 20}, {"name": "Item Raro", "probability": 15}, {"name": "Item Super Raro", "probability": 10}], "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "specifications": {"dimensions": "20x15x10cm", "maxValue": "150.00", "minValue": "30.00", "weight": "500g"}, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendor": {"id": "vendor-123", "name": "TechStore Brasil", "rating": 4.7, "reviewCount": 1250, "since": "2023-01-01", "verified": true}, "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, "success": true}

      182 |
      183 |       // Act & Assert
    > 184 |       await expect(boxService.getBoxById('nonexistent')).rejects.toMatchObject({
          |             ^
      185 |         status: 404,
      186 |         message: 'Caixa nÃ£o encontrada',
      187 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:184:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Response Interceptor - Tratamento de Erros â€º deve formatar erros de forma consistente

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/new-avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva Santos", "phone": "+5511999887766", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-06T15:00:00Z", "verified": true}, "message": "Perfil atualizado com sucesso", "success": true}

      210 |
      211 |       // Act & Assert
    > 212 |       await expect(userService.updateProfile({
          |             ^
      213 |         name: '',
      214 |         email: 'invalid-email',
      215 |       })).rejects.toMatchObject({

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:212:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Response Interceptor - Tratamento de Erros â€º deve tratar erro sem response de forma consistente

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      228 |
      229 |       // Act & Assert
    > 230 |       await expect(userService.getProfile()).rejects.toMatchObject({
          |             ^
      231 |         status: 0,
      232 |         message: expect.stringContaining('Erro de conexÃ£o'),
      233 |         errors: {},

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:230:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Response Interceptor - Tratamento de Erros â€º deve passar responses bem-sucedidos sem modificaÃ§Ã£o

    ReferenceError: response is not defined

      245 |
      246 |       // Assert
    > 247 |       expect(response).toEqual(testData.user);
          |              ^
      248 |     });
      249 |   });
      250 |

      at Object.response (src/services/__tests__/integration/interceptors.integration.test.ts:247:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Logging â€º deve logar requests em modo desenvolvimento

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "ï¿½ï¿½ API Request:", ObjectContaining {"method": "GET", "url": "/user/profile"}

    Number of calls: 0

      264 |
      265 |       // Assert
    > 266 |       expect(consoleSpy).toHaveBeenCalledWith(
          |                          ^
      267 |         expect.stringContaining('ï¿½ï¿½ API Request:'),
      268 |         expect.objectContaining({
      269 |           method: 'GET',

      at Object.toHaveBeenCalledWith (src/services/__tests__/integration/interceptors.integration.test.ts:266:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Logging â€º deve logar responses em modo desenvolvimento

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "âœ… API Response:", ObjectContaining {"status": 200, "url": "/user/profile"}

    Number of calls: 0

      291 |
      292 |       // Assert
    > 293 |       expect(consoleSpy).toHaveBeenCalledWith(
          |                          ^
      294 |         expect.stringContaining('âœ… API Response:'),
      295 |         expect.objectContaining({
      296 |           status: 200,

      at Object.toHaveBeenCalledWith (src/services/__tests__/integration/interceptors.integration.test.ts:293:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Logging â€º deve logar erros em modo desenvolvimento

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      318 |
      319 |       // Act & Assert
    > 320 |       await expect(userService.getProfile()).rejects.toThrow();
          |             ^
      321 |
      322 |       expect(consoleSpy).toHaveBeenCalledWith(
      323 |         expect.stringContaining('âŒ API Error:'),

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:320:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Performance â€º deve adicionar delay configurÃ¡vel para simular latÃªncia

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 100
    Received:    0

      371 |
      372 |       // Assert
    > 373 |       expect(endTime - startTime).toBeGreaterThanOrEqual(delay);
          |                                   ^
      374 |     });
      375 |
      376 |     it('deve contar requisiÃ§Ãµes corretamente', async () => {

      at Object.toBeGreaterThanOrEqual (src/services/__tests__/integration/interceptors.integration.test.ts:373:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Performance â€º deve contar requisiÃ§Ãµes corretamente

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 0

      387 |
      388 |       // Assert
    > 389 |       expect(getRequestCount()).toBe(2);
          |                                 ^
      390 |     });
      391 |
      392 |     it('deve contar erros tambÃ©m', async () => {

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:389:33)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Performance â€º deve contar erros tambÃ©m

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 0

      409 |
      410 |       // Assert
    > 411 |       expect(getRequestCount()).toBe(1);
          |                                 ^
      412 |     });
      413 |   });
      414 |

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:411:33)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Retry â€º deve implementar retry automÃ¡tico para erros de rede

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      436 |
      437 |       // Act & Assert
    > 438 |       await expect(userService.getProfile()).rejects.toThrow();
          |             ^
      439 |       expect(attemptCount).toBe(3); // Tentativa inicial + 2 retries
      440 |     });
      441 |

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:438:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Retry â€º nÃ£o deve fazer retry para erros HTTP

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      466 |
      467 |       // Act & Assert
    > 468 |       await expect(userService.getProfile()).rejects.toThrow();
          |             ^
      469 |       expect(attemptCount).toBe(1); // Apenas uma tentativa
      470 |     });
      471 |   });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/interceptors.integration.test.ts:468:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Cache â€º deve implementar cache simples para GET requests

    expect(received).toEqual(expected) // deep equality

    - Expected  -  7
    + Received  + 27

      Object {
    -   "avatar_url": "https://test.com/avatar.jpg",
    -   "created_at": "2025-01-01T00:00:00Z",
    -   "email": "test@crowbar.com",
    -   "id": "user-test-123",
    -   "name": "UsuÃ¡rio Teste",
    -   "phone": "(11) 99999-9999",
    -   "updated_at": "2025-01-01T00:00:00Z",
    +   "data": Object {
    +     "avatar": "https://example.com/avatar.jpg",
    +     "birthDate": "1990-01-15",
    +     "cpf": "123.456.789-00",
    +     "createdAt": "2024-01-01T10:00:00Z",
    +     "email": "usuario@exemplo.com",
    +     "id": "user-123",
    +     "name": "JoÃ£o Silva",
    +     "phone": "+5511987654321",
    +     "preferences": Object {
    +       "language": "pt-BR",
    +       "newsletter": true,
    +       "notifications": true,
    +       "theme": "light",
    +     },
    +     "role": "customer",
    +     "stats": Object {
    +       "favoriteBoxesCount": 8,
    +       "ordersCount": 10,
    +       "reviewsCount": 5,
    +       "totalSpent": 499.9,
    +     },
    +     "uid": "keycloak-user-123",
    +     "updatedAt": "2025-01-01T10:00:00Z",
    +     "verified": true,
    +   },
    +   "success": true,
      }

      511 |
      512 |       // Assert
    > 513 |       expect(result1).toEqual(testData.user);
          |                       ^
      514 |       expect(result2).toEqual(testData.user);
      515 |       expect(cache._size).toBe(1);
      516 |       expect(cache.has('get:/user/profile')).toBe(true);

      at Object.toEqual (src/services/__tests__/integration/interceptors.integration.test.ts:513:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de Cache â€º nÃ£o deve fazer cache para POST requests

    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: undefined

      554 |
      555 |       // Assert
    > 556 |       expect(cache._size).toBe(0); // Nenhum cache para POST
          |                           ^
      557 |     });
      558 |   });
      559 |

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:556:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de TransformaÃ§Ã£o de Dados â€º deve transformar datas string em objetos Date

    expect(received).toBeInstanceOf(expected)

    Expected constructor: Date

    Received value has no prototype
    Received value: undefined

      602 |
      603 |       // Assert
    > 604 |       expect(_result.created_at).toBeInstanceOf(Date);
          |                                  ^
      605 |       expect(_result.updated_at).toBeInstanceOf(Date);
      606 |     });
      607 |   });

      at Object.toBeInstanceOf (src/services/__tests__/integration/interceptors.integration.test.ts:604:34)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Interceptor de ValidaÃ§Ã£o de Response â€º deve validar estrutura de response da API

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "âš ï¸ Response nÃ£o segue padrÃ£o esperado:", {"user": {"avatar_url": "https://test.com/avatar.jpg", "created_at": "2025-01-01T00:00:00Z", "email": "test@crowbar.com", "id": "user-test-123", "name": "UsuÃ¡rio Teste", "phone": "(11) 99999-9999", "updated_at": "2025-01-01T00:00:00Z"}}

    Number of calls: 0

      632 |
      633 |       // Assert
    > 634 |       expect(consoleSpy).toHaveBeenCalledWith(
          |                          ^
      635 |         expect.stringContaining('âš ï¸ Response nÃ£o segue padrÃ£o esperado:'),
      636 |         malformedResponse
      637 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/integration/interceptors.integration.test.ts:634:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Comportamento integrado dos interceptors â€º deve executar mÃºltiplos interceptors em ordem

    expect(received).toEqual(expected) // deep equality

    - Expected  - 6
    + Received  + 1

    - Array [
    -   "request-2",
    -   "request-1",
    -   "response-1",
    -   "response-2",
    - ]
    + Array []

      678 |
      679 |       // Assert
    > 680 |       expect(executionOrder).toEqual(['request-2', 'request-1', 'response-1', 'response-2']);
          |                              ^
      681 |     });
      682 |
      683 |     it('deve permitir interceptors assÃ­ncronos', async () => {

      at Object.toEqual (src/services/__tests__/integration/interceptors.integration.test.ts:680:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - Interceptors â€º Comportamento integrado dos interceptors â€º deve permitir interceptors assÃ­ncronos

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      700 |
      701 |       // Assert
    > 702 |       expect(asyncOperationCompleted).toBe(true);
          |                                       ^
      703 |     });
      704 |   });
      705 | });

      at Object.toBe (src/services/__tests__/integration/interceptors.integration.test.ts:702:39)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/integration/networkErrors.integration.test.ts
  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de conectividade â€º deve tratar erro de rede durante busca de caixas

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      38 |
      39 |       // Act & Assert
    > 40 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
         |             ^
      41 |         status: 0,
      42 |         message: expect.stringContaining('Erro de conexÃ£o'),
      43 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:40:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de conectividade â€º deve tratar erro de rede durante login

    ReferenceError: apiClient is not defined

      49 |
      50 |       // Act & Assert
    > 51 |       await expect(apiClient.post('/auth/login', {
         |                    ^
      52 |         email: 'test@test.com',
      53 |         password: 'password123',
      54 |       })).rejects.toMatchObject({

      at Object.apiClient (src/services/__tests__/integration/networkErrors.integration.test.ts:51:20)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de conectividade â€º deve tratar erro de rede durante adiÃ§Ã£o ao carrinho

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Item adicionado ao carrinho", "success": true}

      63 |
      64 |       // Act & Assert
    > 65 |       await expect(cartService.addToCart('box-123', 1)).rejects.toMatchObject({
         |             ^
      66 |         status: 0,
      67 |         message: expect.stringContaining('Erro de conexÃ£o'),
      68 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:65:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de conectividade â€º deve tratar erro de rede durante busca de perfil

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      74 |
      75 |       // Act & Assert
    > 76 |       await expect(userService.getProfile()).rejects.toMatchObject({
         |             ^
      77 |         status: 0,
      78 |         message: expect.stringContaining('Erro de conexÃ£o'),
      79 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:76:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de conectividade â€º deve tratar erro de rede durante busca de pedidos

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      85 |
      86 |       // Act & Assert
    > 87 |       await expect(orderService.getOrders()).rejects.toMatchObject({
         |             ^
      88 |         status: 0,
      89 |         message: expect.stringContaining('Erro de conexÃ£o'),
      90 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:87:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de timeout â€º deve tratar timeout durante busca de caixas

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

       98 |
       99 |       // Act & Assert
    > 100 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      101 |         status: 0,
      102 |         message: expect.stringContaining('timeout'),
      103 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:100:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de timeout â€º deve tratar timeout durante checkout

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "estimatedDelivery": "2025-01-15T00:00:00Z", "id": "order-123", "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "order-item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "status": "processing", "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "orderNumber": "ORD-2025-001", "paymentMethod": "credit_card", "paymentStatus": "paid", "shipping": 10, "shippingAddress": {"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "id": "address-123", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "zipCode": "01000-000"}, "status": "processing", "subtotal": 49.9, "total": 59.9, "trackingCode": "BR123456789", "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Pedido criado com sucesso", "success": true}

      109 |
      110 |       // Act & Assert
    > 111 |       await expect(cartService.checkout({
          |             ^
      112 |         shipping_address_id: 'addr-123',
      113 |         shipping_option_id: 'shipping-123',
      114 |         payment_method: 'credit_card',

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:111:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de timeout â€º deve tratar timeout durante busca de detalhes do pedido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      124 |
      125 |       // Act & Assert
    > 126 |       await expect(orderService.getOrderById('order-123')).rejects.toMatchObject({
          |             ^
      127 |         status: 0,
      128 |         message: expect.stringContaining('timeout'),
      129 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:126:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros de timeout â€º deve tratar timeout durante atualizaÃ§Ã£o de perfil

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/new-avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva Santos", "phone": "+5511999887766", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-06T15:00:00Z", "verified": true}, "message": "Perfil atualizado com sucesso", "success": true}

      135 |
      136 |       // Act & Assert
    > 137 |       await expect(userService.updateProfile({
          |             ^
      138 |         name: 'JoÃ£o Silva',
      139 |       })).rejects.toMatchObject({
      140 |         status: 0,

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:137:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 404 - Not Found â€º deve tratar erro 404 para caixa nÃ£o encontrada

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"category": "tech", "categoryName": "Tecnologia", "contents": [{"name": "Item Surpresa 1", "probability": 30}, {"name": "Item Surpresa 2", "probability": 25}, {"name": "Item Surpresa 3", "probability": 20}, {"name": "Item Raro", "probability": 15}, {"name": "Item Super Raro", "probability": 10}], "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "specifications": {"dimensions": "20x15x10cm", "maxValue": "150.00", "minValue": "30.00", "weight": "500g"}, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendor": {"id": "vendor-123", "name": "TechStore Brasil", "rating": 4.7, "reviewCount": 1250, "since": "2023-01-01", "verified": true}, "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, "success": true}

      154 |
      155 |       // Act & Assert
    > 156 |       await expect(boxService.getBoxById('nonexistent-box')).rejects.toMatchObject({
          |             ^
      157 |         status: 404,
      158 |         message: 'Caixa nÃ£o encontrada',
      159 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:156:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 404 - Not Found â€º deve tratar erro 404 para pedido nÃ£o encontrado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      169 |
      170 |       // Act & Assert
    > 171 |       await expect(orderService.getOrderById('nonexistent-order')).rejects.toMatchObject({
          |             ^
      172 |         status: 404,
      173 |         message: 'Pedido nÃ£o encontrado',
      174 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:171:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 404 - Not Found â€º deve tratar erro 404 para item de carrinho nÃ£o encontrado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 3, "subtotal": 149.7, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 149.7, "total": 159.7, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Quantidade atualizada", "success": true}

      184 |
      185 |       // Act & Assert
    > 186 |       await expect(cartService.updateCartItem('nonexistent-item', 2)).rejects.toMatchObject({
          |             ^
      187 |         status: 404,
      188 |         message: 'Item nÃ£o encontrado no carrinho',
      189 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:186:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 404 - Not Found â€º deve tratar erro 404 para endpoint nÃ£o existente

    ReferenceError: apiClient is not defined

      199 |
      200 |       // Act & Assert
    > 201 |       await expect(apiClient.get('/nonexistent-endpoint')).rejects.toMatchObject({
          |                    ^
      202 |         status: 404,
      203 |         message: 'Endpoint nÃ£o encontrado',
      204 |       });

      at Object.apiClient (src/services/__tests__/integration/networkErrors.integration.test.ts:201:20)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 500 - Internal Server Error â€º deve tratar erro 500 durante busca de caixas

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      216 |
      217 |       // Act & Assert
    > 218 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      219 |         status: 500,
      220 |         message: 'Erro interno do servidor',
      221 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:218:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 500 - Internal Server Error â€º deve tratar erro 500 durante processamento de pagamento

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "estimatedDelivery": "2025-01-15T00:00:00Z", "id": "order-123", "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "order-item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "status": "processing", "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "orderNumber": "ORD-2025-001", "paymentMethod": "credit_card", "paymentStatus": "paid", "shipping": 10, "shippingAddress": {"city": "SÃ£o Paulo", "complement": "Apto 45", "country": "Brasil", "id": "address-123", "neighborhood": "Centro", "number": "123", "state": "SP", "street": "Rua Exemplo", "zipCode": "01000-000"}, "status": "processing", "subtotal": 49.9, "total": 59.9, "trackingCode": "BR123456789", "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Pedido criado com sucesso", "success": true}

      231 |
      232 |       // Act & Assert
    > 233 |       await expect(cartService.processPayment('order-123', {
          |             ^
      234 |         method: 'credit_card',
      235 |         card_data: {
      236 |           number: '4111111111111111',

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:233:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 500 - Internal Server Error â€º deve tratar erro 500 durante busca de estatÃ­sticas

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      256 |
      257 |       // Act & Assert
    > 258 |       await expect(userService.getStats()).rejects.toMatchObject({
          |             ^
      259 |         status: 500,
      260 |         message: 'Erro interno do servidor',
      261 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:258:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 500 - Internal Server Error â€º deve tratar erro 500 durante cancelamento de pedido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      271 |
      272 |       // Act & Assert
    > 273 |       await expect(orderService.cancelOrder('order-123', 'Cancelamento')).rejects.toMatchObject({
          |             ^
      274 |         status: 500,
      275 |         message: 'Erro interno do servidor',
      276 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:273:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 401 - Unauthorized â€º deve tratar erro 401 para token expirado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva", "phone": "+5511987654321", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-01T10:00:00Z", "verified": true}, "success": true}

      288 |
      289 |       // Act & Assert
    > 290 |       await expect(userService.getProfile()).rejects.toMatchObject({
          |             ^
      291 |         status: 401,
      292 |         message: 'Token expirado ou invÃ¡lido',
      293 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:290:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 401 - Unauthorized â€º deve tratar erro 401 durante busca de pedidos

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      303 |
      304 |       // Act & Assert
    > 305 |       await expect(orderService.getOrders()).rejects.toMatchObject({
          |             ^
      306 |         status: 401,
      307 |         message: 'AutenticaÃ§Ã£o necessÃ¡ria',
      308 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:305:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 401 - Unauthorized â€º deve tratar erro 401 durante adiÃ§Ã£o ao carrinho

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Item adicionado ao carrinho", "success": true}

      318 |
      319 |       // Act & Assert
    > 320 |       await expect(cartService.addToCart('box-123', 1)).rejects.toMatchObject({
          |             ^
      321 |         status: 401,
      322 |         message: 'SessÃ£o expirada',
      323 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:320:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 403 - Forbidden â€º deve tratar erro 403 para acesso negado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      335 |
      336 |       // Act & Assert
    > 337 |       await expect(orderService.getOrderById('order-other-user')).rejects.toMatchObject({
          |             ^
      338 |         status: 403,
      339 |         message: 'Acesso negado',
      340 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:337:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 403 - Forbidden â€º deve tratar erro 403 para cancelamento nÃ£o autorizado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      350 |
      351 |       // Act & Assert
    > 352 |       await expect(orderService.cancelOrder('order-123')).rejects.toMatchObject({
          |             ^
      353 |         status: 403,
      354 |         message: 'VocÃª nÃ£o tem permissÃ£o para cancelar este pedido',
      355 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:352:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 422 - Unprocessable Entity â€º deve tratar erro 422 para dados invÃ¡lidos no perfil

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"avatar": "https://example.com/new-avatar.jpg", "birthDate": "1990-01-15", "cpf": "123.456.789-00", "createdAt": "2024-01-01T10:00:00Z", "email": "usuario@exemplo.com", "id": "user-123", "name": "JoÃ£o Silva Santos", "phone": "+5511999887766", "preferences": {"language": "pt-BR", "newsletter": true, "notifications": true, "theme": "light"}, "role": "customer", "stats": {"favoriteBoxesCount": 8, "ordersCount": 10, "reviewsCount": 5, "totalSpent": 499.9}, "uid": "keycloak-user-123", "updatedAt": "2025-01-06T15:00:00Z", "verified": true}, "message": "Perfil atualizado com sucesso", "success": true}

      371 |
      372 |       // Act & Assert
    > 373 |       await expect(userService.updateProfile({
          |             ^
      374 |         name: '',
      375 |         phone: '123',
      376 |         email: 'invalid@email',

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:373:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 422 - Unprocessable Entity â€º deve tratar erro 422 para cupom invÃ¡lido

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}

      397 |
      398 |       // Act & Assert
    > 399 |       await expect(cartService.applyCoupon('INVALID_COUPON')).rejects.toMatchObject({
          |             ^
      400 |         status: 422,
      401 |         message: 'Cupom invÃ¡lido',
      402 |         errors: {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:399:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 422 - Unprocessable Entity â€º deve tratar erro 422 para avaliaÃ§Ã£o invÃ¡lida

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      418 |
      419 |       // Act & Assert
    > 420 |       await expect(orderService.rateOrder('order-123', 6, 'Bad')).rejects.toMatchObject({
          |             ^
      421 |         status: 422,
      422 |         message: 'Dados invÃ¡lidos',
      423 |         errors: {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:420:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 409 - Conflict â€º deve tratar erro 409 para email jÃ¡ em uso

    ReferenceError: apiClient is not defined

      441 |
      442 |       // Act & Assert
    > 443 |       await expect(apiClient.post('/auth/register', {
          |                    ^
      444 |         name: 'JoÃ£o Silva',
      445 |         email: 'existing@email.com',
      446 |         password: 'password123',

      at Object.apiClient (src/services/__tests__/integration/networkErrors.integration.test.ts:443:20)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 409 - Conflict â€º deve tratar erro 409 para item jÃ¡ favoritado

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      462 |
      463 |       // Act & Assert
    > 464 |       await expect(userService.addToFavorites('box-123')).rejects.toMatchObject({
          |             ^
      465 |         status: 409,
      466 |         message: 'Caixa jÃ¡ estÃ¡ nos favoritos',
      467 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:464:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 400 - Bad Request â€º deve tratar erro 400 para produto fora de estoque

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"cart": {"createdAt": "2025-01-01T10:00:00Z", "discount": 0, "id": "cart-123", "itemCount": 1, "items": [{"boxId": "box-456", "boxImage": "https://example.com/box.jpg", "boxName": "Caixa Misteriosa Tech", "id": "item-123", "platform": "magalu", "price": 49.9, "quantity": 1, "subtotal": 49.9, "vendorId": "vendor-789", "vendorName": "TechStore Brasil"}], "shipping": 10, "subtotal": 49.9, "total": 59.9, "updatedAt": "2025-01-01T10:00:00Z", "userId": "user-123"}, "message": "Item adicionado ao carrinho", "success": true}

      481 |
      482 |       // Act & Assert
    > 483 |       await expect(cartService.addToCart('box-out-of-stock', 1)).rejects.toMatchObject({
          |             ^
      484 |         status: 400,
      485 |         message: 'Produto fora de estoque',
      486 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:483:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º Erros HTTP 400 - Bad Request â€º deve tratar erro 400 para operaÃ§Ã£o invÃ¡lida

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {}

      498 |
      499 |       // Act & Assert
    > 500 |       await expect(orderService.cancelOrder('order-shipped')).rejects.toMatchObject({
          |             ^
      501 |         status: 400,
      502 |         message: 'Pedido jÃ¡ foi enviado e nÃ£o pode ser cancelado',
      503 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:500:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º CenÃ¡rios de recuperaÃ§Ã£o de erro â€º deve falhar silenciosamente em verificaÃ§Ã£o de favorito

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      518 |
      519 |       // Assert
    > 520 |       expect(_result).toBe(false); // Deve retornar false em caso de erro
          |                       ^
      521 |     });
      522 |
      523 |     it('deve tratar mÃºltiplos erros em sequÃªncia', async () => {

      at Object.toBe (src/services/__tests__/integration/networkErrors.integration.test.ts:520:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º CenÃ¡rios de recuperaÃ§Ã£o de erro â€º deve tratar mÃºltiplos erros em sequÃªncia

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      536 |
      537 |       // Act & Assert
    > 538 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      539 |         status: 500,
      540 |         message: 'Erro interno do servidor',
      541 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:538:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º UtilitÃ¡rios de erro â€º deve identificar corretamente tipos de erro

    TypeError: Cannot read properties of undefined (reading 'isNetworkError')

      559 |
      560 |       // Act & Assert
    > 561 |       expect(ApiErrorUtils.isNetworkError(networkError)).toBe(true);
          |                            ^
      562 |       expect(ApiErrorUtils.isValidationError(validationError)).toBe(true);
      563 |       expect(ApiErrorUtils.isAuthError(authError)).toBe(true);
      564 |       expect(ApiErrorUtils.isAuthorizationError(authorizationError)).toBe(true);

      at Object.isNetworkError (src/services/__tests__/integration/networkErrors.integration.test.ts:561:28)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º UtilitÃ¡rios de erro â€º deve retornar mensagens amigÃ¡veis para diferentes tipos de erro

    TypeError: Cannot read properties of undefined (reading 'getFriendlyMessage')

      576 |
      577 |       // Act & Assert
    > 578 |       expect(ApiErrorUtils.getFriendlyMessage(networkError)).toBe('Erro de conexÃ£o. Verifique sua internet.');
          |                            ^
      579 |       expect(ApiErrorUtils.getFriendlyMessage(serverError)).toBe('Erro interno do servidor. Tente novamente mais tarde.');
      580 |       expect(ApiErrorUtils.getFriendlyMessage(notFoundError)).toBe('Recurso nÃ£o encontrado.');
      581 |       expect(ApiErrorUtils.getFriendlyMessage(authError)).toBe('SessÃ£o expirada. FaÃ§a login novamente.');

      at Object.getFriendlyMessage (src/services/__tests__/integration/networkErrors.integration.test.ts:578:28)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º UtilitÃ¡rios de erro â€º deve formatar erros de validaÃ§Ã£o corretamente

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      597 |
      598 |       // Act
    > 599 |       const formattedErrors = ApiErrorUtils.getValidationErrors(validationError);
          |                                             ^
      600 |
      601 |       // Assert
      602 |       expect(formattedErrors).toEqual({

      at Object.getValidationErrors (src/services/__tests__/integration/networkErrors.integration.test.ts:599:45)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º UtilitÃ¡rios de erro â€º deve retornar objeto vazio para erros nÃ£o-validaÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'getValidationErrors')

      612 |
      613 |       // Act
    > 614 |       const formattedErrors = ApiErrorUtils.getValidationErrors(serverError);
          |                                             ^
      615 |
      616 |       // Assert
      617 |       expect(formattedErrors).toEqual({});

      at Object.getValidationErrors (src/services/__tests__/integration/networkErrors.integration.test.ts:614:45)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º CenÃ¡rios de estresse e edge cases â€º deve tratar erro sem mensagem

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      629 |
      630 |       // Act & Assert
    > 631 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      632 |         status: 500,
      633 |         message: expect.any(String),
      634 |       });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:631:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º CenÃ¡rios de estresse e edge cases â€º deve tratar resposta malformada

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      640 |
      641 |       // Act & Assert
    > 642 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      643 |         status: 500,
      644 |       });
      645 |     });

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:642:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - CenÃ¡rios de Erro de Rede â€º CenÃ¡rios de estresse e edge cases â€º deve tratar erro com dados extras

    expect(received).rejects.toMatchObject()

    Received promise resolved instead of rejected
    Resolved to value: {"data": {"data": [{"category": "tech", "categoryName": "Tecnologia", "createdAt": "2025-01-01T10:00:00Z", "description": "Caixa com produtos de tecnologia surpresa", "discount": 37, "featured": true, "id": "box-123", "image": "https://example.com/box-tech.jpg", "images": ["https://example.com/box-tech-1.jpg", "https://example.com/box-tech-2.jpg"], "name": "Caixa Misteriosa Tech", "originalPrice": 79.9, "platform": "magalu", "price": 49.9, "rating": 4.5, "reviewCount": 128, "sold": 250, "stock": 50, "tags": ["eletrÃ´nicos", "gadgets", "surpresa"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-123", "vendorName": "TechStore Brasil", "verified": true}, {"category": "electronics", "categoryName": "EletrÃ´nicos", "createdAt": "2025-01-01T10:00:00Z", "description": "EletrÃ´nicos de alta qualidade em caixa misteriosa", "discount": 33, "featured": true, "id": "box-456", "image": "https://example.com/box-electronics.jpg", "images": ["https://example.com/box-electronics-1.jpg", "https://example.com/box-electronics-2.jpg"], "name": "Caixa Surpresa EletrÃ´nicos Premium", "originalPrice": 149.9, "platform": "amazon", "price": 99.9, "rating": 4.8, "reviewCount": 89, "sold": 180, "stock": 30, "tags": ["eletrÃ´nicos", "premium", "qualidade"], "updatedAt": "2025-01-01T10:00:00Z", "vendorId": "vendor-456", "vendorName": "EletrÃ´nicos Premium", "verified": true}], "pagination": {"limit": 20, "page": 1, "total": 2, "totalPages": 1}, "success": true}}

      658 |
      659 |       // Act & Assert
    > 660 |       await expect(boxService.getBoxes()).rejects.toMatchObject({
          |             ^
      661 |         status: 400,
      662 |         message: 'Erro com dados extras',
      663 |         data: expect.objectContaining({

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/networkErrors.integration.test.ts:660:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/__tests__/useAuthListener.test.ts
  â— useAuthListener - Keycloak â€º TransiÃ§Ãµes de Estado â€º deve lidar com mÃºltiplos logins (troca de usuÃ¡rio)

    expect(received).toBe(expected) // Object.is equality

    Expected: "user2"
    Received: undefined

      327 |
      328 |       state = store.getState();
    > 329 |       expect(state.auth.user?.uid).toBe('user2');
          |                                    ^
      330 |       expect(state.auth.user?.email).toBe('user2@example.com');
      331 |     });
      332 |   });

      at Object.toBe (src/hooks/__tests__/useAuthListener.test.ts:329:36)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/mfaService.test.ts
  â— MFAService â€º getStatus() â€º deve obter status MFA com sucesso quando autenticado

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      113 |
      114 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 115 |       mockHttpClient.get.mockResolvedValue({ data: mockStatus } as any);
          |                          ^
      116 |
      117 |       // Act
      118 |       const result = await mfaService.getStatus();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:115:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º getStatus() â€º deve receber status MFA completo com mfaEnabled, mfaType e credentials

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      154 |
      155 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 156 |       mockHttpClient.get.mockResolvedValue({ data: mockStatus } as any);
          |                          ^
      157 |
      158 |       // Act
      159 |       const result = await mfaService.getStatus();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:156:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º getStatus() â€º deve lanÃ§ar erro quando usuÃ¡rio nÃ£o estÃ¡ autenticado

    expect(received).not.toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

      173 |       // Act & Assert
      174 |       await expect(mfaService.getStatus()).rejects.toThrow('User not authenticated');
    > 175 |       expect(mockHttpClient.get).not.toHaveBeenCalled();
          |                                      ^
      176 |     });
      177 |
      178 |     it('deve tratar erro HTTP 404 corretamente', async () => {

      at Object.toHaveBeenCalled (src/services/__tests__/mfaService.test.ts:175:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— MFAService â€º getStatus() â€º deve tratar erro HTTP 404 corretamente

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      187 |
      188 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 189 |       mockHttpClient.get.mockRejectedValue(mockError);
          |                          ^
      190 |
      191 |       // Act & Assert
      192 |       await expect(mfaService.getStatus()).rejects.toEqual(mockError);

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:189:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º getStatus() â€º deve tratar erro HTTP 500 corretamente

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      205 |
      206 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 207 |       mockHttpClient.get.mockRejectedValue(mockError);
          |                          ^
      208 |
      209 |       // Act & Assert
      210 |       await expect(mfaService.getStatus()).rejects.toEqual(mockError);

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:207:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º getStatus() â€º deve tratar erro de rede graciosamente

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      218 |
      219 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 220 |       mockHttpClient.get.mockRejectedValue(networkError);
          |                          ^
      221 |
      222 |       // Act & Assert
      223 |       await expect(mfaService.getStatus()).rejects.toThrow('Network request failed');

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:220:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º enable() â€º deve habilitar MFA com sucesso e receber instruÃ§Ãµes da prÃ³xima aÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      237 |
      238 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 239 |       mockHttpClient.post.mockResolvedValue({ data: mockResponse } as any);
          |                           ^
      240 |
      241 |       // Act
      242 |       const result = await mfaService.enable();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:239:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º enable() â€º deve enviar requisiÃ§Ã£o POST para o endpoint correto

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      255 |
      256 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 257 |       mockHttpClient.post.mockResolvedValue({ data: mockResponse } as any);
          |                           ^
      258 |
      259 |       // Act
      260 |       await mfaService.enable();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:257:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º enable() â€º deve verificar cabeÃ§alho Authorization com Bearer token

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      278 |
      279 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 280 |       mockHttpClient.post.mockResolvedValue({ data: mockResponse } as any);
          |                           ^
      281 |
      282 |       // Act
      283 |       await mfaService.enable();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:280:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º enable() â€º deve lanÃ§ar erro quando usuÃ¡rio nÃ£o estÃ¡ autenticado

    expect(received).not.toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

      294 |       // Act & Assert
      295 |       await expect(mfaService.enable()).rejects.toThrow('User not authenticated');
    > 296 |       expect(mockHttpClient.post).not.toHaveBeenCalled();
          |                                       ^
      297 |     });
      298 |
      299 |     it('deve tratar erros HTTP durante habilitaÃ§Ã£o', async () => {

      at Object.toHaveBeenCalled (src/services/__tests__/mfaService.test.ts:296:39)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— MFAService â€º enable() â€º deve tratar erros HTTP durante habilitaÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      308 |
      309 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 310 |       mockHttpClient.post.mockRejectedValue(mockError);
          |                           ^
      311 |
      312 |       // Act & Assert
      313 |       await expect(mfaService.enable()).rejects.toEqual(mockError);

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:310:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º disable() â€º deve desabilitar MFA com sucesso usando credentialId

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      328 |
      329 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 330 |       mockHttpClient.delete.mockResolvedValue({ data: mockResponse } as any);
          |                             ^
      331 |
      332 |       // Act
      333 |       const result = await mfaService.disable(credentialId);

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:330:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º disable() â€º deve enviar credentialId nos dados da requisiÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      346 |
      347 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 348 |       mockHttpClient.delete.mockResolvedValue({ data: mockResponse } as any);
          |                             ^
      349 |
      350 |       // Act
      351 |       await mfaService.disable(credentialId);

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:348:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º disable() â€º deve verificar requisiÃ§Ã£o DELETE com dados corretos

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      370 |
      371 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 372 |       mockHttpClient.delete.mockResolvedValue({ data: mockResponse } as any);
          |                             ^
      373 |
      374 |       // Act
      375 |       await mfaService.disable(credentialId);

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:372:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º disable() â€º deve lanÃ§ar erro quando usuÃ¡rio nÃ£o estÃ¡ autenticado

    expect(received).not.toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

      389 |       // Act & Assert
      390 |       await expect(mfaService.disable(credentialId)).rejects.toThrow('User not authenticated');
    > 391 |       expect(mockHttpClient.delete).not.toHaveBeenCalled();
          |                                         ^
      392 |     });
      393 |
      394 |     it('deve tratar erros HTTP durante desabilitaÃ§Ã£o', async () => {

      at Object.toHaveBeenCalled (src/services/__tests__/mfaService.test.ts:391:41)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— MFAService â€º disable() â€º deve tratar erros HTTP durante desabilitaÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      404 |
      405 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 406 |       mockHttpClient.delete.mockRejectedValue(mockError);
          |                             ^
      407 |
      408 |       // Act & Assert
      409 |       await expect(mfaService.disable(credentialId)).rejects.toEqual(mockError);

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:406:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º needsSetup() â€º deve retornar true quando MFA nÃ£o estÃ¡ habilitado (necessita setup)

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      423 |
      424 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 425 |       mockHttpClient.get.mockResolvedValue({ data: mockStatus } as any);
          |                          ^
      426 |
      427 |       // Act
      428 |       const result = await mfaService.needsSetup();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:425:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º needsSetup() â€º deve retornar false quando MFA jÃ¡ estÃ¡ habilitado

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      439 |
      440 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 441 |       mockHttpClient.get.mockResolvedValue({ data: mockStatus } as any);
          |                          ^
      442 |
      443 |       // Act
      444 |       const result = await mfaService.needsSetup();

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:441:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º needsSetup() â€º deve retornar false em caso de erro (degradaÃ§Ã£o graciosa)

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      454 |
      455 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 456 |       mockHttpClient.get.mockRejectedValue(mockError);
          |                          ^
      457 |
      458 |       // Act
      459 |       const result = await mfaService.needsSetup();

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:456:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º needsSetup() â€º deve tratar erros de autenticaÃ§Ã£o graciosamente

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      473 |       // Assert
      474 |       expect(result).toBe(false);
    > 475 |       expect(console.error).toHaveBeenCalled();
          |                             ^
      476 |     });
      477 |   });
      478 |

      at Object.toHaveBeenCalled (src/services/__tests__/mfaService.test.ts:475:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— MFAService â€º SeguranÃ§a - VerificaÃ§Ãµes de Token â€º deve passar credentialId de forma segura na requisiÃ§Ã£o

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      506 |
      507 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 508 |       mockHttpClient.delete.mockResolvedValue({ data: mockResponse } as any);
          |                             ^
      509 |
      510 |       // Act
      511 |       await mfaService.disable(sensitiveCredentialId);

      at Object.mockResolvedValue (src/services/__tests__/mfaService.test.ts:508:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— MFAService â€º SeguranÃ§a - VerificaÃ§Ãµes de Token â€º nÃ£o deve vazar dados sensÃ­veis em mensagens de erro

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      528 |
      529 |       mockKeycloakService.getAccessToken.mockResolvedValue(mockToken);
    > 530 |       mockHttpClient.get.mockRejectedValue(mockError);
          |                          ^
      531 |
      532 |       // Act
      533 |       try {

      at Object.mockRejectedValue (src/services/__tests__/mfaService.test.ts:530:26)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/test/integration/boxOpening.integration.test.tsx
  â— Box Opening Integration Tests â€º Complete Box Opening Flow â€º completes full box opening flow successfully

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Complete Box Opening Flow â€º tracks detailed animation events

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Complete Box Opening Flow â€º handles real-time updates during opening

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Error Handling â€º handles network errors gracefully

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Error Handling â€º handles API timeout errors

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Error Handling â€º handles insufficient funds error

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Error Handling â€º handles box unavailable error

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Error Handling â€º retries failed request successfully

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º State Management Integration â€º properly manages loading states

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º State Management Integration â€º updates user profile after successful opening

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º State Management Integration â€º persists box opening history

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Performance Considerations â€º should not cause memory leaks during animation

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

  â— Box Opening Integration Tests â€º Performance Considerations â€º should handle rapid state changes

    TypeError: Cannot read properties of undefined (reading 'reducer')

      28 |     store = configureStore({
      29 |       reducer: {
    > 30 |         boxOpening: boxOpeningSlice.reducer,
         |                                     ^
      31 |         auth: authSlice.reducer,
      32 |         analytics: analyticsSlice.reducer,
      33 |       },

      at Object.reducer (src/test/integration/boxOpening.integration.test.tsx:30:37)

FAIL src/services/__tests__/httpClient.test.ts
  â— HttpClient â€º Initialization & Configuration â€º deve criar instÃ¢ncia do HttpClient com baseURL correta

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"baseURL": "https://api.test.com", "headers": {"Accept": "application/json", "Content-Type": "application/json"}, "timeout": 30000}

    Number of calls: 0

      80 |     it('deve criar instÃ¢ncia do HttpClient com baseURL correta', () => {
      81 |       // Verificar
    > 82 |       expect(mockedAxios.create).toHaveBeenCalledWith({
         |                                  ^
      83 |         baseURL: 'https://api.test.com',
      84 |         timeout: 30000,
      85 |         headers: {

      at Object.toHaveBeenCalledWith (src/services/__tests__/httpClient.test.ts:82:34)

  â— HttpClient â€º Initialization & Configuration â€º deve configurar headers padrÃ£o (Content-Type e Accept)

    TypeError: Cannot read properties of undefined (reading '0')

      91 |
      92 |     it('deve configurar headers padrÃ£o (Content-Type e Accept)', () => {
    > 93 |       const createCall = (mockedAxios.create as jest.Mock).mock.calls[0][0];
         |                                                                         ^
      94 |       expect(createCall.headers['Content-Type']).toBe('application/json');
      95 |       expect(createCall.headers['Accept']).toBe('application/json');
      96 |     });

      at Object.<anonymous> (src/services/__tests__/httpClient.test.ts:93:73)

  â— HttpClient â€º Initialization & Configuration â€º deve configurar timeout correto

    TypeError: Cannot read properties of undefined (reading '0')

       97 |
       98 |     it('deve configurar timeout correto', () => {
    >  99 |       const createCall = (mockedAxios.create as jest.Mock).mock.calls[0][0];
          |                                                                         ^
      100 |       expect(createCall.timeout).toBe(30000);
      101 |     });
      102 |

      at Object.<anonymous> (src/services/__tests__/httpClient.test.ts:99:73)

  â— HttpClient â€º Initialization & Configuration â€º deve configurar interceptors de request e response

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      102 |
      103 |     it('deve configurar interceptors de request e response', () => {
    > 104 |       expect(mockAxiosInstance.interceptors.request.use).toHaveBeenCalled();
          |                                                          ^
      105 |       expect(mockAxiosInstance.interceptors.response.use).toHaveBeenCalled();
      106 |     });
      107 |   });

      at Object.toHaveBeenCalled (src/services/__tests__/httpClient.test.ts:104:58)

  â— HttpClient â€º HTTP Methods â€º deve executar requisiÃ§Ã£o GET com sucesso

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/users/123", undefined

    Number of calls: 0

      121 |       const result = await httpClient.get('/users/123');
      122 |
    > 123 |       expect(mockAxiosInstance.get).toHaveBeenCalledWith('/users/123', undefined);
          |                                     ^
      124 |       expect(result).toEqual(mockResponse);
      125 |       expect(result.data).toEqual({ id: '123', name: 'Test' });
      126 |     });

      at Object.toHaveBeenCalledWith (src/services/__tests__/httpClient.test.ts:123:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— HttpClient â€º HTTP Methods â€º deve executar requisiÃ§Ã£o POST com dados

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/users", {"email": "test@test.com", "name": "New User"}, undefined

    Number of calls: 0

      140 |       const result = await httpClient.post('/users', postData);
      141 |
    > 142 |       expect(mockAxiosInstance.post).toHaveBeenCalledWith('/users', postData, undefined);
          |                                      ^
      143 |       expect(result).toEqual(mockResponse);
      144 |     });
      145 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/httpClient.test.ts:142:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— HttpClient â€º HTTP Methods â€º deve executar requisiÃ§Ã£o PUT com dados

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/users/123", {"name": "Updated User"}, undefined

    Number of calls: 0

      158 |       const result = await httpClient.put('/users/123', putData);
      159 |
    > 160 |       expect(mockAxiosInstance.put).toHaveBeenCalledWith('/users/123', putData, undefined);
          |                                     ^
      161 |       expect(result).toEqual(mockResponse);
      162 |     });
      163 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/httpClient.test.ts:160:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— HttpClient â€º HTTP Methods â€º deve executar requisiÃ§Ã£o PATCH com dados

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/users/123", {"name": "Patched User"}, undefined

    Number of calls: 0

      176 |       const result = await httpClient.patch('/users/123', patchData);
      177 |
    > 178 |       expect(mockAxiosInstance.patch).toHaveBeenCalledWith('/users/123', patchData, undefined);
          |                                       ^
      179 |       expect(result).toEqual(mockResponse);
      180 |     });
      181 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/httpClient.test.ts:178:39)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— HttpClient â€º HTTP Methods â€º deve executar requisiÃ§Ã£o DELETE com sucesso

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/users/123", undefined

    Number of calls: 0

      193 |       const result = await httpClient.delete('/users/123');
      194 |
    > 195 |       expect(mockAxiosInstance.delete).toHaveBeenCalledWith('/users/123', undefined);
          |                                        ^
      196 |       expect(result).toEqual(mockResponse);
      197 |     });
      198 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/httpClient.test.ts:195:40)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— HttpClient â€º HTTP Methods â€º deve retornar AxiosResponse completo (nÃ£o apenas .data)

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: undefined

      211 |
      212 |       // Verificar que retorna objeto completo com status, headers, etc
    > 213 |       expect(result.status).toBe(200);
          |                             ^
      214 |       expect(result.statusText).toBe('OK');
      215 |       expect(result.headers).toBeDefined();
      216 |       expect(result.data).toEqual({ id: '123' });

      at Object.toBe (src/services/__tests__/httpClient.test.ts:213:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— HttpClient â€º Request Interceptor â€º deve adicionar header Authorization quando token estiver definido

    TypeError: requestInterceptorOnFulfilled is not a function

      230 |
      231 |       // Executar interceptor
    > 232 |       const result = requestInterceptorOnFulfilled(config);
          |                      ^
      233 |
      234 |       // Verificar que token foi adicionado
      235 |       expect(result.headers.Authorization).toBe('Bearer test-token-123');

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:232:22)

  â— HttpClient â€º Request Interceptor â€º nÃ£o deve adicionar header Authorization quando token nÃ£o estiver definido

    TypeError: requestInterceptorOnFulfilled is not a function

      245 |       };
      246 |
    > 247 |       const result = requestInterceptorOnFulfilled(config);
          |                      ^
      248 |
      249 |       expect(result.headers.Authorization).toBeUndefined();
      250 |     });

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:247:22)

  â— HttpClient â€º Request Interceptor â€º deve adicionar metadata.startTime para rastreamento de performance

    TypeError: requestInterceptorOnFulfilled is not a function

      259 |       };
      260 |
    > 261 |       const result = requestInterceptorOnFulfilled(config);
          |                      ^
      262 |
      263 |       expect(result.metadata).toBeDefined();
      264 |       expect(result.metadata.startTime).toBe(mockDate);

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:261:22)

  â— HttpClient â€º Request Interceptor â€º deve rejeitar promise em caso de erro no interceptor

    TypeError: requestInterceptorOnRejected is not a function

      268 |       const error = new Error('Request failed');
      269 |
    > 270 |       await expect(requestInterceptorOnRejected(error)).rejects.toThrow('Request failed');
          |                    ^
      271 |     });
      272 |   });
      273 |

      at Object.requestInterceptorOnRejected (src/services/__tests__/httpClient.test.ts:270:20)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HttpClient â€º Response Interceptor - Success â€º deve rastrear latÃªncia da API com analyticsService

    TypeError: responseInterceptorOnFulfilled is not a function

      292 |       };
      293 |
    > 294 |       const result = responseInterceptorOnFulfilled(mockResponse);
          |                      ^
      295 |
      296 |       expect(analyticsService.trackApiLatency).toHaveBeenCalledWith(
      297 |         '/test',

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:294:22)

  â— HttpClient â€º Response Interceptor - Success â€º deve rastrear chamada da API com analyticsService

    TypeError: responseInterceptorOnFulfilled is not a function

      317 |       };
      318 |
    > 319 |       responseInterceptorOnFulfilled(response);
          |       ^
      320 |
      321 |       expect(analyticsService.trackApiCall).toHaveBeenCalledWith(
      322 |         '/users',

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:319:7)

  â— HttpClient â€º Response Interceptor - Success â€º deve calcular tempo de resposta corretamente

    TypeError: responseInterceptorOnFulfilled is not a function

      341 |       };
      342 |
    > 343 |       responseInterceptorOnFulfilled(response);
          |       ^
      344 |
      345 |       // Tempo de resposta = 2500 - 1000 = 1500ms
      346 |       expect(analyticsService.trackApiLatency).toHaveBeenCalledWith(

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:343:7)

  â— HttpClient â€º Response Interceptor - Success â€º deve extrair endpoint e method corretamente do config

    TypeError: responseInterceptorOnFulfilled is not a function

      365 |       };
      366 |
    > 367 |       responseInterceptorOnFulfilled(response);
          |       ^
      368 |
      369 |       expect(analyticsService.trackApiLatency).toHaveBeenCalledWith(
      370 |         '/api/v1/boxes',

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:367:7)

  â— HttpClient â€º Response Interceptor - Success â€º deve retornar response inalterado

    TypeError: responseInterceptorOnFulfilled is not a function

      390 |       };
      391 |
    > 392 |       const result = responseInterceptorOnFulfilled(mockResponse);
          |                      ^
      393 |
      394 |       expect(result).toEqual(mockResponse);
      395 |       expect(result.data).toEqual({ id: '123', name: 'Test' });

      at Object.responseInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:392:22)

  â— HttpClient â€º Response Interceptor - Error â€º deve rastrear latÃªncia da API mesmo em caso de erro

    TypeError: Cannot read properties of undefined (reading 'trackApiLatency')

      421 |       }
      422 |
    > 423 |       expect(analyticsService.trackApiLatency).toHaveBeenCalled();
          |                               ^
      424 |     });
      425 |
      426 |     it('deve rastrear erro com analyticsService', async () => {

      at Object.trackApiLatency (src/services/__tests__/httpClient.test.ts:423:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HttpClient â€º Response Interceptor - Error â€º deve rastrear erro com analyticsService

    TypeError: Cannot read properties of undefined (reading 'trackError')

      443 |       }
      444 |
    > 445 |       expect(analyticsService.trackError).toHaveBeenCalledWith(
          |                               ^
      446 |         expect.any(Error),
      447 |         'http_client'
      448 |       );

      at Object.trackError (src/services/__tests__/httpClient.test.ts:445:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HttpClient â€º Response Interceptor - Error â€º deve limpar token em caso de erro 401

    TypeError: requestInterceptorOnFulfilled is not a function

      475 |       // mas podemos verificar atravÃ©s de uma nova request
      476 |       const config: any = { headers: {} };
    > 477 |       const result = requestInterceptorOnFulfilled(config);
          |                      ^
      478 |       expect(result.headers.Authorization).toBeUndefined();
      479 |     });
      480 |

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:477:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HttpClient â€º Response Interceptor - Error â€º deve lidar com erro sem config

    TypeError: responseInterceptorOnRejected is not a function

      487 |       };
      488 |
    > 489 |       await expect(responseInterceptorOnRejected(error)).rejects.toEqual(error);
          |                    ^
      490 |
      491 |       // NÃ£o deve chamar trackApiLatency quando nÃ£o hÃ¡ config
      492 |       expect(analyticsService.trackApiLatency).not.toHaveBeenCalled();

      at Object.responseInterceptorOnRejected (src/services/__tests__/httpClient.test.ts:489:20)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HttpClient â€º Response Interceptor - Error â€º deve rejeitar promise com erro

    TypeError: responseInterceptorOnRejected is not a function

      506 |       };
      507 |
    > 508 |       await expect(responseInterceptorOnRejected(error)).rejects.toEqual(error);
          |                    ^
      509 |     });
      510 |   });
      511 |

      at Object.responseInterceptorOnRejected (src/services/__tests__/httpClient.test.ts:508:20)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HttpClient â€º Token Management â€º deve definir token de autenticaÃ§Ã£o

    TypeError: requestInterceptorOnFulfilled is not a function

      515 |
      516 |       const config: any = { headers: {} };
    > 517 |       const result = requestInterceptorOnFulfilled(config);
          |                      ^
      518 |
      519 |       expect(result.headers.Authorization).toBe('Bearer new-token-456');
      520 |     });

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:517:22)

  â— HttpClient â€º Token Management â€º deve limpar token quando definido como null

    TypeError: requestInterceptorOnFulfilled is not a function

      525 |
      526 |       const config: any = { headers: {} };
    > 527 |       const result = requestInterceptorOnFulfilled(config);
          |                      ^
      528 |
      529 |       expect(result.headers.Authorization).toBeUndefined();
      530 |     });

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:527:22)

  â— HttpClient â€º Token Management â€º deve adicionar token Ã s requisiÃ§Ãµes subsequentes

    TypeError: requestInterceptorOnFulfilled is not a function

      535 |       // Primeira requisiÃ§Ã£o
      536 |       const config1: any = { headers: {} };
    > 537 |       const result1 = requestInterceptorOnFulfilled(config1);
          |                       ^
      538 |       expect(result1.headers.Authorization).toBe('Bearer persistent-token');
      539 |
      540 |       // Segunda requisiÃ§Ã£o

      at Object.requestInterceptorOnFulfilled (src/services/__tests__/httpClient.test.ts:537:23)

FAIL src/test/e2e/shopping.e2e.test.tsx
  â— Shopping Flow E2E Tests â€º Box Browsing and Search â€º should browse and search for boxes

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:52:66)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Box Browsing and Search â€º should filter boxes by category

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:84:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Box Browsing and Search â€º should view box details

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:113:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Cart Management â€º should add box to cart

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:157:66)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Cart Management â€º should update cart item quantity

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:182:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Cart Management â€º should remove item from cart

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:200:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Cart Management â€º should apply coupon to cart

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:231:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Checkout Process â€º should complete full checkout process

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      280 |       };
      281 |
    > 282 |       mockedOrderService.createOrder.mockResolvedValue(mockOrder);
          |                                      ^
      283 |
      284 |       const { getByTestId, _queryByTestId } = renderWithProviders(<MockMainApp />);
      285 |

      at Object.mockResolvedValue (src/test/e2e/shopping.e2e.test.tsx:282:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Checkout Process â€º should handle shipping calculation

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:312:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Checkout Process â€º should handle payment method selection

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:334:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Checkout Process â€º should handle checkout validation errors

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      354 |
      355 |     it('should handle checkout validation errors', async () => {
    > 356 |       mockedOrderService.createOrder.mockRejectedValue({
          |                                      ^
      357 |         response: {
      358 |           status: 422,
      359 |           data: {

      at Object.mockRejectedValue (src/test/e2e/shopping.e2e.test.tsx:356:38)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Box Opening Experience â€º should complete box opening flow

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      392 |       };
      393 |
    > 394 |       mockedBoxService.openBox.mockResolvedValue(mockOpeningResult);
          |                                ^
      395 |
      396 |       const { getByTestId, _queryByTestId } = renderWithProviders(<MockMainApp />);
      397 |

      at Object.mockResolvedValue (src/test/e2e/shopping.e2e.test.tsx:394:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Box Opening Experience â€º should handle insufficient balance for box opening

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      414 |
      415 |     it('should handle insufficient balance for box opening', async () => {
    > 416 |       mockedBoxService.openBox.mockRejectedValue({
          |                                ^
      417 |         response: {
      418 |           status: 400,
      419 |           data: {

      at Object.mockRejectedValue (src/test/e2e/shopping.e2e.test.tsx:416:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Error Handling â€º should handle network errors gracefully

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:445:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Shopping Flow E2E Tests â€º Error Handling â€º should handle API errors with proper messages

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 |  */
      53 | export const renderWithProviders = (component: React.ReactElement, options = {}) => {
    > 54 |   return render(component, {
         |                ^
      55 |     wrapper: TestWrapper,
      56 |     ...options,
      57 |   });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateContextProvider (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10904:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11374:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderWithProviders (src/test/e2e/setup.tsx:54:16)
      at Object.<anonymous> (src/test/e2e/shopping.e2e.test.tsx:470:50)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/__tests__/integration/auth.integration.test.ts
  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Login de usuÃ¡rio - Keycloak OAuth2 â€º deve fazer login com sucesso usando OAuth2 flow

    expect(received).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      80 |
      81 |       // Assert
    > 82 |       expect(mockedAuthorize).toHaveBeenCalled();
         |                               ^
      83 |       expect(result.accessToken).toBe('mock-keycloak-access-token');
      84 |       expect(result.refreshToken).toBe('mock-keycloak-refresh-token');
      85 |       expect(result.tokenType).toBe('Bearer');

      at Object.toHaveBeenCalled (src/services/__tests__/integration/auth.integration.test.ts:82:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Login de usuÃ¡rio - Keycloak OAuth2 â€º deve falhar com credenciais invÃ¡lidas no OAuth2

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.801Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      92 |
      93 |       // Act & Assert
    > 94 |       await expect(mockedKeycloakService.login()).rejects.toThrow('Invalid credentials');
         |             ^
      95 |     });
      96 |
      97 |     it('deve falhar quando usuÃ¡rio cancela autorizaÃ§Ã£o OAuth2', async () => {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:94:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Login de usuÃ¡rio - Keycloak OAuth2 â€º deve falhar quando usuÃ¡rio cancela autorizaÃ§Ã£o OAuth2

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.803Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      102 |
      103 |       // Act & Assert
    > 104 |       await expect(mockedKeycloakService.login()).rejects.toThrow('User cancelled');
          |             ^
      105 |     });
      106 |
      107 |     it('deve tratar erro de rede durante login OAuth2', async () => {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:104:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Login de usuÃ¡rio - Keycloak OAuth2 â€º deve tratar erro de rede durante login OAuth2

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.804Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      111 |
      112 |       // Act & Assert
    > 113 |       await expect(mockedKeycloakService.login()).rejects.toThrow('Network request failed');
          |             ^
      114 |     });
      115 |
      116 |     it('deve tratar timeout durante login OAuth2', async () => {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:113:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Login de usuÃ¡rio - Keycloak OAuth2 â€º deve tratar timeout durante login OAuth2

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.806Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      120 |
      121 |       // Act & Assert
    > 122 |       await expect(mockedKeycloakService.login()).rejects.toThrow('timeout');
          |             ^
      123 |     });
      124 |   });
      125 |

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:122:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Logout de usuÃ¡rio - Keycloak OAuth2 â€º deve fazer logout com sucesso e revogar tokens

    expect(received).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      197 |       // Assert
      198 |       expect(mockedKeycloakService.logout).toHaveBeenCalled();
    > 199 |       expect(mockedRevoke).toHaveBeenCalled();
          |                            ^
      200 |     });
      201 |
      202 |     it('deve tratar erro durante logout', async () => {

      at Object.toHaveBeenCalled (src/services/__tests__/integration/auth.integration.test.ts:199:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º Gerenciamento de tokens - Keycloak OAuth2 â€º deve renovar token com sucesso usando refresh token

    expect(received).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      228 |
      229 |       // Assert
    > 230 |       expect(mockedRefresh).toHaveBeenCalled();
          |                             ^
      231 |       expect(result.accessToken).toBe('new-refreshed-access-token');
      232 |       expect(result.tokenType).toBe('Bearer');
      233 |     });

      at Object.toHaveBeenCalled (src/services/__tests__/integration/auth.integration.test.ts:230:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º CenÃ¡rios de erro de rede - Keycloak OAuth2 â€º deve tratar erro de conexÃ£o durante autenticaÃ§Ã£o OAuth2

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.827Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      360 |
      361 |       // Act & Assert
    > 362 |       await expect(mockedKeycloakService.login()).rejects.toThrow('Network request failed');
          |             ^
      363 |     });
      364 |
      365 |     it('deve tratar timeout durante autenticaÃ§Ã£o OAuth2', async () => {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:362:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º CenÃ¡rios de erro de rede - Keycloak OAuth2 â€º deve tratar timeout durante autenticaÃ§Ã£o OAuth2

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.829Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      369 |
      370 |       // Act & Assert
    > 371 |       await expect(mockedKeycloakService.login()).rejects.toThrow('timeout');
          |             ^
      372 |     });
      373 |
      374 |     it('deve tratar erro 500 do servidor Keycloak', async () => {

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:371:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - AutenticaÃ§Ã£o Keycloak â€º CenÃ¡rios de erro de rede - Keycloak OAuth2 â€º deve tratar erro 500 do servidor Keycloak

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"accessToken": "mock-access-token", "accessTokenExpirationDate": "2025-12-29T17:53:00.830Z", "idToken": "mock-id-token.eyJzdWIiOiJ1c2VyLTEyMyIsImVtYWlsIjoidGVzdEBjcm93YmFyLmNvbSJ9.signature", "refreshToken": "mock-refresh-token", "scopes": ["openid", "profile", "email"], "tokenType": "Bearer"}

      378 |
      379 |       // Act & Assert
    > 380 |       await expect(mockedKeycloakService.login()).rejects.toThrow('Server error');
          |             ^
      381 |     });
      382 |   });
      383 |

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at Object.expect (src/services/__tests__/integration/auth.integration.test.ts:380:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/__tests__/notificationService.test.ts
  â— NotificationService â€º initialize â€º deve retornar denied quando permissÃµes sÃ£o negadas

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
    -   "permissionStatus": "denied",
    +   "permissionStatus": "granted",
        "token": null,
      }

      111 |
      112 |       // Verificar
    > 113 |       expect(result).toEqual({
          |                      ^
      114 |         token: null,
      115 |         permissionStatus: 'denied',
      116 |       });

      at Object.toEqual (src/services/__tests__/notificationService.test.ts:113:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— NotificationService â€º initialize â€º deve tratar erros na inicializaÃ§Ã£o

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
    -   "permissionStatus": "denied",
    +   "permissionStatus": "granted",
        "token": null,
      }

      127 |
      128 |       // Verificar
    > 129 |       expect(result).toEqual({
          |                      ^
      130 |         token: null,
      131 |         permissionStatus: 'denied',
      132 |       });

      at Object.toEqual (src/services/__tests__/notificationService.test.ts:129:22)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/reviewService.test.ts
  â— ReviewService â€º reportReview â€º deve reportar review com sucesso

    expect(received).toEqual(expected) // deep equality

    Expected: {"message": "Report submitted successfully", "reportId": "report-123", "success": true}
    Received: undefined

      387 |
      388 |       // Verificar
    > 389 |       expect(_result).toEqual(mockResponse);
          |                       ^
      390 |       expect(httpClient.post).toHaveBeenCalledWith('/reviews/review-123/report', reportData);
      391 |     });
      392 |

      at Object.toEqual (src/services/__tests__/reviewService.test.ts:389:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ReviewService â€º reportReview â€º deve reportar sem descriÃ§Ã£o

    expect(received).toEqual(expected) // deep equality

    Expected: {"reportId": "report-124", "success": true}
    Received: undefined

      403 |
      404 |       // Verificar
    > 405 |       expect(_result).toEqual(mockResponse);
          |                       ^
      406 |       expect(httpClient.post).toHaveBeenCalledWith('/reviews/review-123/report', {
      407 |         reason: 'spam',
      408 |         description: undefined,

      at Object.toEqual (src/services/__tests__/reviewService.test.ts:405:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ReviewService â€º getTopReviews â€º deve buscar top reviews de uma caixa

    TypeError: _reviewService.reviewService.getTopReviews is not a function

      431 |
      432 |       // Executar
    > 433 |       const _result = await reviewService.getTopReviews('box-123', 5);
          |                                           ^
      434 |
      435 |       // Verificar
      436 |       expect(_result).toEqual(mockTopReviews);

      at Object.getTopReviews (src/services/__tests__/reviewService.test.ts:433:43)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ReviewService â€º getTopReviews â€º deve usar limite padrÃ£o de 10

    TypeError: _reviewService.reviewService.getTopReviews is not a function

      446 |       (httpClient.get as jest.Mock).mockResolvedValue({ data: [] });
      447 |
    > 448 |       await reviewService.getTopReviews('box-123');
          |                           ^
      449 |
      450 |       expect(httpClient.get).toHaveBeenCalledWith('/reviews/top', {
      451 |         params: {

      at Object.getTopReviews (src/services/__tests__/reviewService.test.ts:448:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— ReviewService â€º getUserReviews â€º deve buscar todas as reviews de um usuÃ¡rio

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

    - "/reviews/user/user-123",
    + "/reviews/user/all",
      Object {
        "params": Object {
    -     "page": 1,
    -     "per_page": 20,
    +     "page": "user-123",
    +     "per_page": 1,
        },
      },

    Number of calls: 1

      486 |       // Verificar
      487 |       expect(_result).toEqual(mockResponse);
    > 488 |       expect(httpClient.get).toHaveBeenCalledWith('/reviews/user/user-123', {
          |                              ^
      489 |         params: {
      490 |           page: 1,
      491 |           per_page: 20,

      at Object.toHaveBeenCalledWith (src/services/__tests__/reviewService.test.ts:488:30)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ReviewService â€º canUserReview â€º deve verificar se usuÃ¡rio pode avaliar caixa

    expect(received).toEqual(expected) // deep equality

    Expected: {"canReview": true, "reason": null}
    Received: true

      508 |
      509 |       // Verificar
    > 510 |       expect(_result).toEqual(mockResponse);
          |                       ^
      511 |       expect(httpClient.get).toHaveBeenCalledWith('/reviews/can-review/box-123');
      512 |     });
      513 |

      at Object.toEqual (src/services/__tests__/reviewService.test.ts:510:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— ReviewService â€º canUserReview â€º deve retornar motivo quando nÃ£o pode avaliar

    expect(received).toEqual(expected) // deep equality

    Expected: {"canReview": false, "reason": "User must purchase box before reviewing"}
    Received: false

      521 |
      522 |       const _result = await reviewService.canUserReview('box-123');
    > 523 |       expect(_result).toEqual(mockResponse);
          |                       ^
      524 |     });
      525 |   });
      526 | });

      at Object.toEqual (src/services/__tests__/reviewService.test.ts:523:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/gotifyService.test.ts
  â— GotifyService â€º connect() â€º should connect to Gotify WebSocket with token

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "gotify", ObjectContaining {"path": "/stream", "query": {"token": "test-token-123"}, "transports": ["websocket"]}
    Received: "http://10.0.2.2:8888", {"path": "/stream", "query": {"token": "test-token-123"}, "reconnection": true, "reconnectionAttempts": Infinity, "reconnectionDelay": 1000, "reconnectionDelayMax": 5000, "transports": ["websocket"]}

    Number of calls: 1

      112 |       gotifyService.connect(token);
      113 |
    > 114 |       expect(io).toHaveBeenCalledWith(
          |                  ^
      115 |         expect.stringContaining('gotify'),
      116 |         expect.objectContaining({
      117 |           path: '/stream',

      at Object.toHaveBeenCalledWith (src/services/__tests__/gotifyService.test.ts:114:18)

FAIL src/animations/__tests__/animations.test.ts
  â— Test suite failed to run

    TypeError: _reactNativeReanimated.Easing.in is not a function

      57 | // Easings personalizados
      58 | export const EASINGS = {
    > 59 |   easeIn: Easing.in(Easing.ease),
         |                    ^
      60 |   easeOut: Easing.out(Easing.ease),
      61 |   easeInOut: Easing.inOut(Easing.ease),
      62 |   easeInQuad: Easing.in(Easing.quad),

      at Object.<anonymous> (src/animations/constants.ts:59:20)
      at Object.require (src/animations/animations.ts:15:1)
      at Object.require (src/animations/__tests__/animations.test.ts:1:1)

FAIL src/services/__tests__/websocketService.test.ts
  â— WebSocketService â€º connect â€º deve conectar ao servidor WebSocket

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ï¿½ï¿½ Connecting to WebSocket server..."

    Number of calls: 0

      57 |
      58 |       expect((websocketService as any).authToken).toBe('auth-token-123');
    > 59 |       expect(console.log).toHaveBeenCalledWith('ï¿½ï¿½ Connecting to WebSocket server...');
         |                           ^
      60 |     });
      61 |
      62 |     it('deve conectar sem token de autenticaÃ§Ã£o', () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:59:27)

  â— WebSocketService â€º connect â€º nÃ£o deve reconectar se jÃ¡ estiver conectado

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ï¿½ï¿½ WebSocket already connected"

    Number of calls: 0

      78 |
      79 |       expect(mockIo).not.toHaveBeenCalled();
    > 80 |       expect(console.log).toHaveBeenCalledWith('ï¿½ï¿½ WebSocket already connected');
         |                           ^
      81 |     });
      82 |
      83 |     it('deve configurar event listeners ao conectar', () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:80:27)

  â— WebSocketService â€º disconnect â€º deve desconectar do servidor WebSocket

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ï¿½ï¿½ Disconnecting from WebSocket server..."

    Number of calls: 0

      103 |       expect((websocketService as any).isConnected).toBe(false);
      104 |       expect((websocketService as any).reconnectAttempts).toBe(0);
    > 105 |       expect(console.log).toHaveBeenCalledWith('ï¿½ï¿½ Disconnecting from WebSocket server...');
          |                           ^
      106 |     });
      107 |
      108 |     it('nÃ£o deve fazer nada se nÃ£o estiver conectado', () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:105:27)

  â— WebSocketService â€º Event Handlers â€º deve tratar evento de conexÃ£o

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âœ… WebSocket connected"

    Number of calls: 0

      131 |       expect((websocketService as any).reconnectAttempts).toBe(0);
      132 |       expect(listener).toHaveBeenCalledWith({ connected: true });
    > 133 |       expect(console.log).toHaveBeenCalledWith('âœ… WebSocket connected');
          |                           ^
      134 |     });
      135 |
      136 |     it('deve tratar evento de desconexÃ£o', () => {

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:133:27)

  â— WebSocketService â€º Event Handlers â€º deve tratar evento de desconexÃ£o

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ WebSocket disconnected:", "transport close"

    Number of calls: 0

      149 |         reason: 'transport close' 
      150 |       });
    > 151 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      152 |         'âŒ WebSocket disconnected:', 
      153 |         'transport close'
      154 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:151:27)

  â— WebSocketService â€º Event Handlers â€º deve tratar erro de conexÃ£o

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ WebSocket connection error:", [Error: Connection failed]

    Number of calls: 0

      179 |
      180 |       expect(listener).toHaveBeenCalledWith({ error: 'Connection failed' });
    > 181 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      182 |         'âŒ WebSocket connection error:', 
      183 |         error
      184 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:181:29)

  â— WebSocketService â€º Event Handlers â€º deve tratar evento box_opened

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ï¿½ï¿½ Box opened event received:", {"box_id": "box-123", "items": [{"id": "item-1", "name": "Item 1"}], "opened_at": "2025-12-29T16:53:01.607Z", "user_id": "user-456"}

    Number of calls: 0

      203 |
      204 |       expect(listener).toHaveBeenCalledWith(eventData);
    > 205 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      206 |         'ï¿½ï¿½ Box opened event received:', 
      207 |         eventData
      208 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:205:27)

  â— WebSocketService â€º Event Handlers â€º deve tratar evento stock_update

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ï¿½ï¿½ Stock update received:", {"box_id": "box-123", "stock": 50}

    Number of calls: 0

      225 |
      226 |       expect(listener).toHaveBeenCalledWith(eventData);
    > 227 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      228 |         'ï¿½ï¿½ Stock update received:', 
      229 |         eventData
      230 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:227:27)

  â— WebSocketService â€º Event Listeners Management â€º deve adicionar listener de evento

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: undefined

      241 |
      242 |       const listeners = (websocketService as any).eventListeners.get('test_event');
    > 243 |       expect(listeners?._size).toBe(2);
          |                                ^
      244 |       expect(listeners?.has(listener1)).toBe(true);
      245 |       expect(listeners?.has(listener2)).toBe(true);
      246 |     });

      at Object.toBe (src/services/__tests__/websocketService.test.ts:243:32)

  â— WebSocketService â€º Message Emission â€º deve emitir mensagem quando conectado

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      286 |       const _result = websocketService.emit('test_event', { data: 'test' });
      287 |
    > 288 |       expect(_result).toBe(true);
          |                       ^
      289 |       expect(mockSocket.emit).toHaveBeenCalledWith('test_event', { data: 'test' });
      290 |     });
      291 |

      at Object.toBe (src/services/__tests__/websocketService.test.ts:288:23)

  â— WebSocketService â€º Message Emission â€º nÃ£o deve emitir mensagem quando desconectado

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      295 |       const _result = websocketService.emit('test_event', { data: 'test' });
      296 |
    > 297 |       expect(_result).toBe(false);
          |                       ^
      298 |       expect(mockSocket.emit).not.toHaveBeenCalled();
      299 |       expect(console.log).toHaveBeenCalledWith(
      300 |         'âš ï¸ Cannot emit test_event - WebSocket not connected'

      at Object.toBe (src/services/__tests__/websocketService.test.ts:297:23)

  â— WebSocketService â€º Room Management â€º deve entrar em uma sala

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "join_room", {"room": "room-123"}

    Number of calls: 0

      312 |       websocketService.joinRoom('room-123');
      313 |
    > 314 |       expect(mockSocket.emit).toHaveBeenCalledWith('join_room', { room: 'room-123' });
          |                               ^
      315 |       expect(console.log).toHaveBeenCalledWith('ï¿½ï¿½ Joining room: room-123');
      316 |     });
      317 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:314:31)

  â— WebSocketService â€º Room Management â€º deve sair de uma sala

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "leave_room", {"room": "room-123"}

    Number of calls: 0

      319 |       websocketService.leaveRoom('room-123');
      320 |
    > 321 |       expect(mockSocket.emit).toHaveBeenCalledWith('leave_room', { room: 'room-123' });
          |                               ^
      322 |       expect(console.log).toHaveBeenCalledWith('ï¿½ï¿½ Leaving room: room-123');
      323 |     });
      324 |

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:321:31)

  â— WebSocketService â€º Reconnection Logic â€º deve incrementar tentativas de reconexÃ£o

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ï¿½ï¿½ Attempting to reconnect... (1/5)"

    Number of calls: 0

      359 |       
      360 |       expect((websocketService as any).reconnectAttempts).toBe(1);
    > 361 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      362 |         'ï¿½ï¿½ Attempting to reconnect... (1/5)'
      363 |       );
      364 |     });

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:361:27)

  â— WebSocketService â€º Reconnection Logic â€º deve parar de tentar reconectar apÃ³s limite mÃ¡ximo

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "âŒ Max reconnection attempts reached. Giving up."

    Number of calls: 0

      369 |       (websocketService as any).attemptReconnect();
      370 |       
    > 371 |       expect(console.log).toHaveBeenCalledWith(
          |                           ^
      372 |         'âŒ Max reconnection attempts reached. Giving up.'
      373 |       );
      374 |       expect(mockSocket.connect).not.toHaveBeenCalled();

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:371:27)

  â— WebSocketService â€º Reconnection Logic â€º deve aumentar delay entre tentativas de reconexÃ£o

    expect(received).toHaveBeenCalledWith(...expected)

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function setTimeout]

      378 |       // Primeira tentativa - delay de 1s
      379 |       (websocketService as any).attemptReconnect();
    > 380 |       expect(setTimeout).toHaveBeenCalledWith(expect.any(Function), 1000);
          |                          ^
      381 |
      382 |       // Segunda tentativa - delay de 2s
      383 |       jest.advanceTimersByTime(1000);

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:380:26)

  â— WebSocketService â€º Connection Status â€º deve retornar _status de conexÃ£o corretamente

    TypeError: _websocketService.websocketService.isConnected is not a function

      394 |   describe('Connection Status', () => {
      395 |     it('deve retornar _status de conexÃ£o corretamente', () => {
    > 396 |       expect(websocketService.isConnected()).toBe(false);
          |                               ^
      397 |
      398 |       websocketService.connect();
      399 |       (websocketService as any).isConnected = true;

      at Object.isConnected (src/services/__tests__/websocketService.test.ts:396:31)

  â— WebSocketService â€º Connection Status â€º deve retornar informaÃ§Ãµes de conexÃ£o

    TypeError: _websocketService.websocketService.getConnectionInfo is not a function

      406 |       (websocketService as any).isConnected = true;
      407 |
    > 408 |       const info = websocketService.getConnectionInfo();
          |                                     ^
      409 |
      410 |       expect(info).toEqual({
      411 |         connected: true,

      at Object.getConnectionInfo (src/services/__tests__/websocketService.test.ts:408:37)

  â— WebSocketService â€º Error Handling â€º deve tratar erro ao emitir para listeners

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Error emitting to listener:", Any<Error>

    Number of calls: 0

      428 |       }).not.toThrow();
      429 |
    > 430 |       expect(console.error).toHaveBeenCalledWith(
          |                             ^
      431 |         'Error emitting to listener:',
      432 |         expect.any(Error)
      433 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:430:29)

  â— WebSocketService â€º Authentication Update â€º deve atualizar token de autenticaÃ§Ã£o e reconectar

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      442 |
      443 |       expect((websocketService as any).authToken).toBe('new-token');
    > 444 |       expect(mockSocket.disconnect).toHaveBeenCalled();
          |                                     ^
      445 |       expect(mockIo).toHaveBeenCalledTimes(2); // ConexÃ£o inicial + reconexÃ£o
      446 |     });
      447 |   });

      at Object.toHaveBeenCalled (src/services/__tests__/websocketService.test.ts:444:37)

FAIL src/test/e2e/auth.e2e.test.tsx
  â— Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     â€¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     â€¢ If you need a custom transformation specify a "transform" option in your config.
     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/@react-navigation+native-stack@7.6.2_@react-navigation+native@7.1.19_react-native@0.80._eb7fa789b24d214e6afc881de3e985a1/node_modules/@react-navigation/native-stack/lib/module/index.js:6
    export { createNativeStackNavigator } from "./navigators/createNativeStackNavigator.js";
    ^^^^^^

    SyntaxError: Unexpected token 'export'

      1 | import React from 'react';
    > 2 | import { createNativeStackNavigator } from '@react-navigation/native-stack';
        | ^
      3 |
      4 | // Screens
      5 | import LoginScreen from '../screens/Auth/LoginScreen';

      at Runtime.createScriptFromCode (node_modules/.pnpm/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.require (src/navigation/AuthNavigator.tsx:2:1)
      at Object.require (src/test/e2e/auth.e2e.test.tsx:10:1)

FAIL src/__tests__/performance/gamification.performance.test.ts
  â— Test suite failed to run

    Cannot find module '../assets/animations/fire_opening.png' from 'src/services/animationManager.ts'

    Require stack:
      src/services/animationManager.ts
      src/__tests__/performance/gamification.performance.test.ts

      57 |       spriteSheets: {
      58 |         opening: {
    > 59 |           source: require('../assets/animations/fire_opening.png'),
         |                   ^
      60 |           frameWidth: 200,
      61 |           frameHeight: 200,
      62 |           totalFrames: 60,

      at Resolver._throwModNotFoundError (node_modules/.pnpm/node_modules/jest-resolve/build/resolver.js:427:11)
      at new require (src/services/animationManager.ts:59:19)
      at Function.getInstance (src/services/animationManager.ts:200:35)
      at Object.getInstance (src/services/animationManager.ts:496:50)
      at Object.require (src/__tests__/performance/gamification.performance.test.ts:9:1)

FAIL src/store/slices/__tests__/favoritesSlice.test.ts
  â— favoritesSlice â€º Reducers SÃ­ncronos â€º deve adicionar favorito local

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      143 |     // Adicionar favorito local (otimistic update)
      144 |     addFavoriteLocal: (state, action: PayloadAction<string>) => {
    > 145 |       state.favoriteIds.add(action.payload);
          |             ^
      146 |     },
      147 |     
      148 |     // Remover favorito local (otimistic update)

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:145:13)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at Object.<anonymous> (src/store/slices/__tests__/favoritesSlice.test.ts:164:37)

  â— favoritesSlice â€º Reducers SÃ­ncronos â€º deve remover favorito local

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      148 |     // Remover favorito local (otimistic update)
      149 |     removeFavoriteLocal: (state, action: PayloadAction<string>) => {
    > 150 |       state.favoriteIds.delete(action.payload);
          |             ^
      151 |       state.favorites = state.favorites.filter(box => box.id !== action.payload);
      152 |     },
      153 |     

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:150:13)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at Object.<anonymous> (src/store/slices/__tests__/favoritesSlice.test.ts:185:37)

  â— favoritesSlice â€º addToFavorites â€º deve adicionar aos favoritos com sucesso

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      192 |       .addCase(addToFavorites.fulfilled, (state, action) => {
      193 |         state.isUpdating = false;
    > 194 |         state.favoriteIds.add(action.payload);
          |               ^
      195 |       })
      196 |       .addCase(addToFavorites.rejected, (state, action) => {
      197 |         state.isUpdating = false;

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:194:15)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at combination (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/combineReducers.ts:120:31)
      at Object.dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/createStore.ts:214:22)
      at dispatch (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/autoBatchEnhancer.ts:112:22)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/serializableStateInvariantMiddleware.ts:169:22
      at node_modules/.pnpm/redux-thunk@3.1.0_redux@5.0.1/node_modules/redux-thunk/dist/cjs/redux-thunk.cjs:32:12
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/immutableStateInvariantMiddleware.ts:174:34
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/actionCreatorInvariantMiddleware.ts:29:12
      at dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/applyMiddleware.ts:52:38)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createAsyncThunk.ts:397:13

  â— favoritesSlice â€º addToFavorites â€º deve reverter atualizaÃ§Ã£o otimista em caso de erro

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      143 |     // Adicionar favorito local (otimistic update)
      144 |     addFavoriteLocal: (state, action: PayloadAction<string>) => {
    > 145 |       state.favoriteIds.add(action.payload);
          |             ^
      146 |     },
      147 |     
      148 |     // Remover favorito local (otimistic update)

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:145:13)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at combination (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/combineReducers.ts:120:31)
      at Object.dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/createStore.ts:214:22)
      at dispatch (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/autoBatchEnhancer.ts:112:22)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/serializableStateInvariantMiddleware.ts:169:22
      at node_modules/.pnpm/redux-thunk@3.1.0_redux@5.0.1/node_modules/redux-thunk/dist/cjs/redux-thunk.cjs:32:12
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/immutableStateInvariantMiddleware.ts:174:34
      at Object.dispatch (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/actionCreatorInvariantMiddleware.ts:29:12)
      at Object.dispatch (src/store/slices/__tests__/favoritesSlice.test.ts:301:13)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— favoritesSlice â€º removeFromFavorites â€º deve remover dos favoritos com sucesso

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      209 |       .addCase(removeFromFavorites.fulfilled, (state, action) => {
      210 |         state.isUpdating = false;
    > 211 |         state.favoriteIds.delete(action.payload);
          |               ^
      212 |         state.favorites = state.favorites.filter(box => box.id !== action.payload);
      213 |       })
      214 |       .addCase(removeFromFavorites.rejected, (state, action) => {

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:211:15)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at combination (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/combineReducers.ts:120:31)
      at Object.dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/createStore.ts:214:22)
      at dispatch (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/autoBatchEnhancer.ts:112:22)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/serializableStateInvariantMiddleware.ts:169:22
      at node_modules/.pnpm/redux-thunk@3.1.0_redux@5.0.1/node_modules/redux-thunk/dist/cjs/redux-thunk.cjs:32:12
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/immutableStateInvariantMiddleware.ts:174:34
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/actionCreatorInvariantMiddleware.ts:29:12
      at dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/applyMiddleware.ts:52:38)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createAsyncThunk.ts:397:13

  â— favoritesSlice â€º checkIsFavorite â€º deve verificar se Ã© favorito e atualizar estado

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      223 |       .addCase(checkIsFavorite.fulfilled, (state, action) => {
      224 |         if (action.payload.isFavorite) {
    > 225 |           state.favoriteIds.add(action.payload.boxId);
          |                 ^
      226 |         } else {
      227 |           state.favoriteIds.delete(action.payload.boxId);
      228 |         }

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:225:17)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at combination (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/combineReducers.ts:120:31)
      at Object.dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/createStore.ts:214:22)
      at dispatch (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/autoBatchEnhancer.ts:112:22)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/serializableStateInvariantMiddleware.ts:169:22
      at node_modules/.pnpm/redux-thunk@3.1.0_redux@5.0.1/node_modules/redux-thunk/dist/cjs/redux-thunk.cjs:32:12
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/immutableStateInvariantMiddleware.ts:174:34
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/actionCreatorInvariantMiddleware.ts:29:12
      at dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/applyMiddleware.ts:52:38)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createAsyncThunk.ts:397:13

  â— favoritesSlice â€º checkIsFavorite â€º deve remover do estado se nÃ£o for favorito

    [Immer] The plugin for 'MapSet' has not been loaded into Immer. To enable the plugin, import and call `enableMapSet()` when initializing your application.

      225 |           state.favoriteIds.add(action.payload.boxId);
      226 |         } else {
    > 227 |           state.favoriteIds.delete(action.payload.boxId);
          |                 ^
      228 |         }
      229 |       });
      230 |

      at die (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/errors.ts:43:9)
      at getPlugin (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/utils/plugins.ts:42:3)
      at createProxy (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:230:5)
      at Object.get (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/proxy.ts:119:40)
      at favoriteIds (src/store/slices/favoritesSlice.ts:227:17)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:179:20
      at Immer2.produce (node_modules/.pnpm/immer@10.2.0/node_modules/immer/src/core/immerClass.ts:101:14)
      at createNextState (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:178:18)
          at Array.reduce (<anonymous>)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createReducer.ts:151:25)
      at reducer (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createSlice.ts:439:14)
      at combination (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/combineReducers.ts:120:31)
      at Object.dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/createStore.ts:214:22)
      at dispatch (node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/autoBatchEnhancer.ts:112:22)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/serializableStateInvariantMiddleware.ts:169:22
      at node_modules/.pnpm/redux-thunk@3.1.0_redux@5.0.1/node_modules/redux-thunk/dist/cjs/redux-thunk.cjs:32:12
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/immutableStateInvariantMiddleware.ts:174:34
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/actionCreatorInvariantMiddleware.ts:29:12
      at dispatch (node_modules/.pnpm/redux@5.0.1/node_modules/redux/src/applyMiddleware.ts:52:38)
      at node_modules/.pnpm/@reduxjs+toolkit@2.9.2_react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1__react@18.2.0/node_modules/@reduxjs/toolkit/src/createAsyncThunk.ts:397:13

FAIL src/test/integration/cart.integration.test.ts
  â— Cart Integration Tests â€º Cart Operations â€º should fetch empty cart initially

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Operations â€º should fetch empty cart initially

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Operations â€º should add item to cart successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Operations â€º should add item to cart successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Operations â€º should update cart item quantity

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Operations â€º should update cart item quantity

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Operations â€º should remove item from cart

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Operations â€º should remove item from cart

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Operations â€º should clear entire cart

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Operations â€º should clear entire cart

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Coupon Management â€º should apply valid coupon

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Coupon Management â€º should apply valid coupon

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Coupon Management â€º should handle invalid coupon

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Coupon Management â€º should handle invalid coupon

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Coupon Management â€º should remove applied coupon

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Coupon Management â€º should remove applied coupon

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Calculations â€º should calculate cart totals correctly

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Calculations â€º should calculate cart totals correctly

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Calculations â€º should handle multiple items correctly

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Calculations â€º should handle multiple items correctly

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Error Handling â€º should handle adding out-of-stock item

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Error Handling â€º should handle adding out-of-stock item

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Error Handling â€º should handle updating non-existent cart item

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Error Handling â€º should handle updating non-existent cart item

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Error Handling â€º should handle removing non-existent cart item

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Error Handling â€º should handle removing non-existent cart item

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Cart Integration Tests â€º Cart Persistence â€º should persist cart across sessions

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:32:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Cart Integration Tests â€º Cart Persistence â€º should persist cart across sessions

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)


  â— Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'request')

      103 |   
      104 |   // Clear HTTP client interceptors
    > 105 |   httpClient.interceptors.request.clear();
          |                           ^
      106 |   httpClient.interceptors.response.clear();
      107 | };
      108 |

      at request (src/test/integration/setup.ts:105:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:100:36)
      at Object.<anonymous> (src/test/integration/cart.integration.test.ts:36:33)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/screens/Settings/__tests__/MFASetupScreen.test.tsx
  â— MFASetupScreen â€º RenderizaÃ§Ã£o Inicial â€º should render loading state initially

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º RenderizaÃ§Ã£o Inicial â€º should render MFA disabled state

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º RenderizaÃ§Ã£o Inicial â€º should render MFA enabled state

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Carregamento de Status â€º should load MFA status on mount

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Carregamento de Status â€º should handle error when loading status fails

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Habilitar MFA â€º should enable MFA when button is pressed

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Habilitar MFA â€º should show loading state when enabling MFA

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Habilitar MFA â€º should handle error when enabling MFA fails

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Desabilitar MFA â€º should show disable button when MFA is enabled

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Desabilitar MFA â€º should disable MFA when button is pressed

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º Desabilitar MFA â€º should not disable if no credentials available

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º InstruÃ§Ãµes e InformaÃ§Ãµes â€º should display MFA instructions

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

  â— MFASetupScreen â€º InstruÃ§Ãµes e InformaÃ§Ãµes â€º should display security notice

    TypeError: Cannot read properties of undefined (reading 'reducer')

      43 |   return configureStore({
      44 |     reducer: {
    > 45 |       auth: authSlice.reducer,
         |                       ^
      46 |     },
      47 |     preloadedState: {
      48 |       auth: {

      at reducer (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:45:23)
      at Object.createMockStore (src/screens/Settings/__tests__/MFASetupScreen.test.tsx:78:17)

FAIL src/hooks/__tests__/useOffline.test.ts
  â— useOffline â€º Hook Principal â€º deve sincronizar dados

    TypeError: Cannot read properties of undefined (reading 'length')

      92 |     // Flags Ãºteis
      93 |     isSyncing: syncStatus === 'syncing',
    > 94 |     hasPendingActions: pendingActions.length > 0,
         |                                       ^
      95 |     lastSyncError: syncStatus === 'error',
      96 |   };
      97 | };

      at length (src/hooks/useOffline.ts:94:39)
      at _renderHook2.wrapper (src/hooks/__tests__/useOffline.test.ts:77:53)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at updateFunctionComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9483:20)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11326:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performSyncWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15433:20)
      at flushSyncCallbacks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:2597:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at recursivelyFlushAsyncActWork (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2633:9)
      at node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2545:15

  â— useOffline â€º Hook Principal â€º deve adicionar aÃ§Ã£o offline

    TypeError: Cannot read properties of undefined (reading 'length')

      92 |     // Flags Ãºteis
      93 |     isSyncing: syncStatus === 'syncing',
    > 94 |     hasPendingActions: pendingActions.length > 0,
         |                                       ^
      95 |     lastSyncError: syncStatus === 'error',
      96 |   };
      97 | };

      at length (src/hooks/useOffline.ts:94:39)
      at _renderHook3.wrapper (src/hooks/__tests__/useOffline.test.ts:90:53)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at updateFunctionComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9483:20)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11326:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performSyncWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15433:20)
      at flushSyncCallbacks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:2597:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at recursivelyFlushAsyncActWork (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2633:9)
      at node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2545:15

  â— useOffline â€º Hook Principal â€º deve verificar se estÃ¡ no modo offline

    TypeError: Cannot read properties of undefined (reading 'current')

      103 |       const { _result } = renderHook(() => useOffline(), { wrapper });
      104 |
    > 105 |       expect(_result.current.isOfflineMode()).toBe(true);
          |                      ^
      106 |     });
      107 |
      108 |     it('deve limpar cache', async () => {

      at Object.current (src/hooks/__tests__/useOffline.test.ts:105:22)

  â— useOffline â€º Hook Principal â€º deve identificar flags de estado

    TypeError: Cannot read properties of undefined (reading 'current')

      126 |       });
      127 |
    > 128 |       expect(_result.current.isSyncing).toBe(true);
          |                      ^
      129 |       expect(_result.current.hasPendingActions).toBe(true);
      130 |       expect(_result.current.lastSyncError).toBe(false);
      131 |     });

      at Object.current (src/hooks/__tests__/useOffline.test.ts:128:22)

  â— useOffline â€º useOfflineCache â€º deve buscar dados com cache

    ReferenceError: priority is not defined

      153 |       }
      154 |     },
    > 155 |     [priority, strategy]
          |      ^
      156 |   );
      157 |
      158 |   // Auto fetch on mount

      at priority (src/hooks/useOffline.ts:155:6)
      at _renderHook7.wrapper (src/hooks/__tests__/useOffline.test.ts:142:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:141:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— useOffline â€º useOfflineCache â€º deve atualizar cache manualmente

    ReferenceError: priority is not defined

      153 |       }
      154 |     },
    > 155 |     [priority, strategy]
          |      ^
      156 |   );
      157 |
      158 |   // Auto fetch on mount

      at priority (src/hooks/useOffline.ts:155:6)
      at _renderHook8.wrapper (src/hooks/__tests__/useOffline.test.ts:164:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:163:36)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— useOffline â€º useOfflineCache â€º deve tratar erro na busca

    ReferenceError: priority is not defined

      153 |       }
      154 |     },
    > 155 |     [priority, strategy]
          |      ^
      156 |   );
      157 |
      158 |   // Auto fetch on mount

      at priority (src/hooks/useOffline.ts:155:6)
      at _renderHook9.wrapper (src/hooks/__tests__/useOffline.test.ts:189:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:188:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— useOffline â€º useOfflineCache â€º deve refazer busca quando voltar online

    ReferenceError: priority is not defined

      153 |       }
      154 |     },
    > 155 |     [priority, strategy]
          |      ^
      156 |   );
      157 |
      158 |   // Auto fetch on mount

      at priority (src/hooks/useOffline.ts:155:6)
      at _renderHook0.wrapper (src/hooks/__tests__/useOffline.test.ts:209:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:208:55)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— useOffline â€º useOfflineImage â€º deve cachear imagem com sucesso

    ReferenceError: priority is not defined

      210 |
      211 |     cacheImage();
    > 212 |   }, [url, priority]);
          |            ^
      213 |
      214 |   return {
      215 |     uri: cachedUrl || url,

      at priority (src/hooks/useOffline.ts:212:12)
      at _renderHook1.wrapper (src/hooks/__tests__/useOffline.test.ts:242:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:241:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— useOffline â€º useOfflineImage â€º deve usar URL original em caso de erro

    ReferenceError: priority is not defined

      210 |
      211 |     cacheImage();
    > 212 |   }, [url, priority]);
          |            ^
      213 |
      214 |   return {
      215 |     uri: cachedUrl || url,

      at priority (src/hooks/useOffline.ts:212:12)
      at _renderHook10.wrapper (src/hooks/__tests__/useOffline.test.ts:262:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:261:37)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— useOffline â€º useOfflineImage â€º deve retornar null para URL null

    ReferenceError: priority is not defined

      210 |
      211 |     cacheImage();
    > 212 |   }, [url, priority]);
          |            ^
      213 |
      214 |   return {
      215 |     uri: cachedUrl || url,

      at priority (src/hooks/useOffline.ts:212:12)
      at _renderHook11.wrapper (src/hooks/__tests__/useOffline.test.ts:276:24)
      at hookToRender (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:46:26)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at renderHook (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-hook.tsx:55:58)
      at Object.<anonymous> (src/hooks/__tests__/useOffline.test.ts:275:37)

  â— useOffline â€º useOfflineAction â€º deve tratar erro na execuÃ§Ã£o

    ReferenceError: _result is not defined

      376 |
      377 |       expect(mockOnError).toHaveBeenCalledWith(mockError);
    > 378 |       expect(_result.current.error).toEqual(mockError);
          |              ^
      379 |     });
      380 |   });
      381 | });

      at Object._result (src/hooks/__tests__/useOffline.test.ts:378:14)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/store/slices/__tests__/userSlice.test.ts
  â— userSlice â€º addUserAddress â€º deve adicionar endereÃ§o com sucesso

    TypeError: (0 , _userSlice.addUserAddress) is not a function

      274 |       (userService.addAddress as jest.Mock).mockResolvedValue(newAddress);
      275 |
    > 276 |       await store.dispatch(addUserAddress({
          |                                          ^
      277 |         street: 'Rua Teste',
      278 |         number: '123',
      279 |         city: 'SÃ£o Paulo',

      at Object.<anonymous> (src/store/slices/__tests__/userSlice.test.ts:276:42)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— userSlice â€º fetchUserPaymentMethods â€º deve buscar mÃ©todos de pagamento com sucesso

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      299 |       ];
      300 |
    > 301 |       (userService.getPaymentMethods as jest.Mock).mockResolvedValue(mockPaymentMethods);
          |                                                    ^
      302 |
      303 |       await store.dispatch(fetchUserPaymentMethods());
      304 |

      at Object.mockResolvedValue (src/store/slices/__tests__/userSlice.test.ts:301:52)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— userSlice â€º fetchUserStatistics â€º deve buscar estatÃ­sticas do usuÃ¡rio com sucesso

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      326 |       };
      327 |
    > 328 |       (userService.getStatistics as jest.Mock).mockResolvedValue(mockStatistics);
          |                                                ^
      329 |
      330 |       await store.dispatch(fetchUserStatistics());
      331 |

      at Object.mockResolvedValue (src/store/slices/__tests__/userSlice.test.ts:328:48)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— userSlice â€º Selectors â€º selectUserIsLoading deve retornar estado de loading

    TypeError: (0 , _userSlice.selectUserIsLoading) is not a function

      379 |
      380 |     it('selectUserIsLoading deve retornar estado de loading', () => {
    > 381 |       expect(selectUserIsLoading(mockState)).toBe(false);
          |                                 ^
      382 |     });
      383 |
      384 |     it('selectUserIsUpdating deve retornar estado de updating', () => {

      at Object.<anonymous> (src/store/slices/__tests__/userSlice.test.ts:381:33)

  â— userSlice â€º Selectors â€º selectUserIsUpdating deve retornar estado de updating

    TypeError: (0 , _userSlice.selectUserIsUpdating) is not a function

      383 |
      384 |     it('selectUserIsUpdating deve retornar estado de updating', () => {
    > 385 |       expect(selectUserIsUpdating(mockState)).toBe(false);
          |                                  ^
      386 |     });
      387 |
      388 |     it('selectUserError deve retornar erro', () => {

      at Object.<anonymous> (src/store/slices/__tests__/userSlice.test.ts:385:34)

FAIL src/test/integration/boxes.integration.test.ts
  â— Boxes Integration Tests â€º Fetch Boxes â€º should fetch boxes list successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should fetch boxes list successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should handle pagination correctly

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should handle pagination correctly

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should apply filters correctly

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should apply filters correctly

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should handle API errors gracefully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Fetch Boxes â€º should handle API errors gracefully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Fetch Box by ID â€º should fetch box details successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Fetch Box by ID â€º should fetch box details successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Fetch Box by ID â€º should handle non-existent box ID

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Fetch Box by ID â€º should handle non-existent box ID

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Search Boxes â€º should search boxes successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Search Boxes â€º should search boxes successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Search Boxes â€º should handle empty search query

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Search Boxes â€º should handle empty search query

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Search Boxes â€º should handle search with no results

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Search Boxes â€º should handle search with no results

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Box Categories â€º should fetch categories successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Box Categories â€º should fetch categories successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Box Categories â€º should fetch boxes by category

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Box Categories â€º should fetch boxes by category

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Featured and Popular Boxes â€º should fetch featured boxes

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Featured and Popular Boxes â€º should fetch featured boxes

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Featured and Popular Boxes â€º should fetch popular boxes

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Featured and Popular Boxes â€º should fetch popular boxes

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Box Reviews â€º should fetch box reviews

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Box Reviews â€º should fetch box reviews

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Box Reviews â€º should add a review to a box

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Box Reviews â€º should add a review to a box

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Error Handling â€º should handle network timeouts

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Error Handling â€º should handle network timeouts

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Boxes Integration Tests â€º Error Handling â€º should handle malformed responses

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:22:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Boxes Integration Tests â€º Error Handling â€º should handle malformed responses

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)


  â— Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'request')

      103 |   
      104 |   // Clear HTTP client interceptors
    > 105 |   httpClient.interceptors.request.clear();
          |                           ^
      106 |   httpClient.interceptors.response.clear();
      107 | };
      108 |

      at request (src/test/integration/setup.ts:105:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:100:36)
      at Object.<anonymous> (src/test/integration/boxes.integration.test.ts:26:33)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/__tests__/integration/gotify.integration.test.ts
  â— Testes de IntegraÃ§Ã£o - Gotify Notifications â€º ConexÃ£o WebSocket â€º deve conectar ao Gotify WebSocket com token

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "gotify", ObjectContaining {"path": "/stream", "query": {"token": "test-gotify-token"}, "transports": ["websocket"]}
    Received: "http://10.0.2.2:8888", {"path": "/stream", "query": {"token": "test-gotify-token"}, "reconnection": true, "reconnectionAttempts": Infinity, "reconnectionDelay": 1000, "reconnectionDelayMax": 5000, "transports": ["websocket"]}

    Number of calls: 1

      101 |
      102 |       // Assert
    > 103 |       expect(mockedIo).toHaveBeenCalledWith(
          |                        ^
      104 |         expect.stringContaining('gotify'),
      105 |         expect.objectContaining({
      106 |           path: '/stream',

      at Object.toHaveBeenCalledWith (src/services/__tests__/integration/gotify.integration.test.ts:103:24)

FAIL src/services/__tests__/offlineService.test.ts
  â— OfflineService â€º Cache de Dados â€º deve usar fetcher quando cache nÃ£o existe

    expect(received).toEqual(expected) // deep equality

    Expected: {"id": 1, "name": "Test Box"}
    Received: null

       98 |
       99 |       expect(fetcher).toHaveBeenCalled();
    > 100 |       expect(_result).toEqual(testData);
          |                       ^
      101 |     });
      102 |
      103 |     it('deve respeitar estratÃ©gias de cache', async () => {

      at Object.toEqual (src/services/__tests__/offlineService.test.ts:100:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— OfflineService â€º Cache de Imagens â€º deve retornar URL original em caso de erro

    expect(received).toBe(expected) // Object.is equality

    Expected: "https://example.com/invalid-image.jpg"
    Received: "file:///cache/crowbar_images/p7eii5.jpg"

      262 |       const cachedUrl = await offlineService.cacheImage(imageUrl);
      263 |       
    > 264 |       expect(cachedUrl).toBe(imageUrl);
          |                         ^
      265 |     });
      266 |   });
      267 |

      at Object.toBe (src/services/__tests__/offlineService.test.ts:264:25)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— OfflineService â€º Limpeza de Cache â€º deve limpar cache antigo baseado no tamanho

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      291 |
      292 |       // Verificar se caches de baixa prioridade foram removidos
    > 293 |       expect(mockAsyncStorage.removeItem).toHaveBeenCalled();
          |                                           ^
      294 |     });
      295 |   });
      296 |

      at Object.toHaveBeenCalled (src/services/__tests__/offlineService.test.ts:293:43)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/components/__tests__/BoxOpeningAnimation.test.tsx
  â— BoxOpeningAnimation â€º Initial Render â€º applies correct rarity colors

    Unable to find an element with testID: box-rarity

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mCOMMON[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      102 |         );
      103 |         
    > 104 |         const rarityText = getByTestId('box-rarity');
          |                            ^
      105 |         expect(rarityText.props.style.color).toBe(expectedColor);
      106 |       });
      107 |     });

      at getByTestId (src/components/__tests__/BoxOpeningAnimation.test.tsx:104:28)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/components/__tests__/BoxOpeningAnimation.test.tsx:98:19)

  â— BoxOpeningAnimation â€º Animation States â€º shows loading indicator when opening

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `BoxOpeningAnimation`.

      110 |   describe('Animation States', () => {
      111 |     it('shows loading indicator when opening', () => {
    > 112 |       const { getByText, getByTestId } = render(
          |                                                ^
      113 |         <BoxOpeningAnimation 
      114 |           {...defaultProps} 
      115 |           animationState="opening" 

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/BoxOpeningAnimation.test.tsx:112:48)

  â— BoxOpeningAnimation â€º Animation States â€º renders particles when opening

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `BoxOpeningAnimation`.

      133 |
      134 |     it('renders particles when opening', () => {
    > 135 |       const { getByTestId } = render(
          |                                     ^
      136 |         <BoxOpeningAnimation 
      137 |           {...defaultProps} 
      138 |           animationState="opening" 

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/BoxOpeningAnimation.test.tsx:135:37)

  â— BoxOpeningAnimation â€º Animation States â€º renders glow effect when opening

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `BoxOpeningAnimation`.

      144 |
      145 |     it('renders glow effect when opening', () => {
    > 146 |       const { getByTestId } = render(
          |                                     ^
      147 |         <BoxOpeningAnimation 
      148 |           {...defaultProps} 
      149 |           animationState="opening" 

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/BoxOpeningAnimation.test.tsx:146:37)

  â— BoxOpeningAnimation â€º Animation States â€º hides open button during opening states

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `BoxOpeningAnimation`.

      155 |
      156 |     it('hides open button during opening states', () => {
    > 157 |       const { queryByText } = render(
          |                                     ^
      158 |         <BoxOpeningAnimation 
      159 |           {...defaultProps} 
      160 |           animationState="opening" 

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/BoxOpeningAnimation.test.tsx:157:37)

  â— BoxOpeningAnimation â€º User Interactions â€º disables button when canOpen is false

    Unable to find an element with testID: open-box-button

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mEPIC[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      188 |       );
      189 |       
    > 190 |       const button = getByTestId('open-box-button');
          |                      ^
      191 |       expect(button.props.disabled).toBe(true);
      192 |     });
      193 |

      at Object.getByTestId (src/components/__tests__/BoxOpeningAnimation.test.tsx:190:22)

  â— BoxOpeningAnimation â€º User Interactions â€º prevents multiple rapid taps

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 3

      220 |       
      221 |       // Should only register first press
    > 222 |       expect(mockOnPress).toHaveBeenCalledTimes(1);
          |                           ^
      223 |     });
      224 |   });
      225 |

      at Object.toHaveBeenCalledTimes (src/components/__tests__/BoxOpeningAnimation.test.tsx:222:27)

  â— BoxOpeningAnimation â€º Edge Cases â€º handles missing images gracefully

    Unable to find an element with testID: box-image

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mEPIC[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      234 |       );
      235 |       
    > 236 |       const image = getByTestId('box-image');
          |                     ^
      237 |       expect(image.props.source.uri).toContain('data:image/svg+xml');
      238 |     });
      239 |

      at Object.getByTestId (src/components/__tests__/BoxOpeningAnimation.test.tsx:236:21)

  â— BoxOpeningAnimation â€º Edge Cases â€º handles null images array gracefully

    Unable to find an element with testID: box-image

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mEPIC[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      247 |       );
      248 |       
    > 249 |       const image = getByTestId('box-image');
          |                     ^
      250 |       expect(image.props.source.uri).toContain('data:image/svg+xml');
      251 |     });
      252 |

      at Object.getByTestId (src/components/__tests__/BoxOpeningAnimation.test.tsx:249:21)

  â— BoxOpeningAnimation â€º Accessibility â€º provides meaningful accessibility labels

    Unable to find an element with accessibility label: /Epic Mystery Box/

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mEPIC[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      343 |       );
      344 |
    > 345 |       expect(getByLabelText(/Epic Mystery Box/)).toBeTruthy();
          |              ^
      346 |       expect(getByLabelText(/79,99/)).toBeTruthy();
      347 |       expect(getByLabelText(/epic/i)).toBeTruthy();
      348 |     });

      at Object.getByLabelText (src/components/__tests__/BoxOpeningAnimation.test.tsx:345:14)

  â— BoxOpeningAnimation â€º Accessibility â€º supports screen reader navigation

    Unable to find an element with testID: box-name

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mEPIC[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      354 |
      355 |       const elements = [
    > 356 |         getByTestId('box-name'),
          |         ^
      357 |         getByTestId('box-price'),
      358 |         getByTestId('box-rarity'),
      359 |         getByTestId('open-box-button'),

      at Object.getByTestId (src/components/__tests__/BoxOpeningAnimation.test.tsx:356:9)

  â— BoxOpeningAnimation â€º Accessibility â€º provides button action hints

    Unable to find an element with testID: open-box-button

    [36m<View>[39m
      [36m<View>[39m
        [36m<View>[39m
          [36m<Image />[39m
          [36m<View />[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mEpic Mystery Box[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mR$Â 79,99[0m
          [36m</Text>[39m
          [36m<Text>[39m
            [0mEPIC[0m
          [36m</Text>[39m
        [36m</View>[39m
        [36m<View>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mABRIR CAIXA[0m
            [36m</Text>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</View>[39m

      370 |       );
      371 |
    > 372 |       const button = getByTestId('open-box-button');
          |                      ^
      373 |       expect(button.props.accessibilityHint).toContain('Toque para abrir a caixa');
      374 |     });
      375 |   });

      at Object.getByTestId (src/components/__tests__/BoxOpeningAnimation.test.tsx:372:22)

FAIL src/services/__tests__/boxService.test.ts
  â— BoxService â€º getBoxById â€º should fetch box by id successfully

    expect(received).toEqual(expected) // deep equality

    - Expected  - 3
    + Received  + 0

      Object {
    -   "data": Object {
        "category": "test",
        "description": "Test description",
        "id": "1",
        "image_url": "test.jpg",
        "name": "Test Box",
        "possible_items": Array [],
        "price": 10.99,
        "rarity": "common",
        "reviews": Array [],
        "stock": 10,
    -   },
    -   "success": true,
      }

      123 |
      124 |       expect(mockedApiClient.get).toHaveBeenCalledWith('/boxes/1');
    > 125 |       expect(_result).toEqual(mockResponse);
          |                       ^
      126 |       expect(_result.data).toEqual(mockBox);
      127 |     });
      128 |

      at Object.toEqual (src/services/__tests__/boxService.test.ts:125:23)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/realtimeService.test.ts
  â— RealtimeService â€º message handling â€º should handle order _status update message

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"type": StringContaining "addNotification"}
    Received
           1: {"payload": "connecting", "type": "realtime/setConnectionStatus"}
           2: {"payload": "connected", "type": "realtime/setConnectionStatus"}
           3: {"payload": {"orderId": "order1", "status": "shipped", "tracking": {"number": "TR123456"}}, "type": "realtime/updateOrderStatus"}

    Number of calls: 3

      174 |
      175 |       // Should also add notification
    > 176 |       expect(mockedStore.dispatch).toHaveBeenCalledWith(
          |                                    ^
      177 |         expect.objectContaining({
      178 |           type: expect.stringContaining('addNotification'),
      179 |         })

      at Object.toHaveBeenCalledWith (src/services/__tests__/realtimeService.test.ts:176:36)

  â— RealtimeService â€º message handling â€º should handle pong message

    expect(jest.fn()).not.toHaveBeenCalled()

    Expected number of calls: 0
    Received number of calls: 2

    1: {"payload": "connecting", "type": "realtime/setConnectionStatus"}
    2: {"payload": "connected", "type": "realtime/setConnectionStatus"}

      280 |
      281 |       // Should not dispatch any actions for pong
    > 282 |       expect(mockedStore.dispatch).not.toHaveBeenCalled();
          |                                        ^
      283 |     });
      284 |
      285 |     it('should handle invalid JSON message', () => {

      at Object.toHaveBeenCalled (src/services/__tests__/realtimeService.test.ts:282:40)

  â— RealtimeService â€º message handling â€º should handle invalid JSON message

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Error handling WebSocket message:", Any<Error>

    Number of calls: 0

      292 |       }
      293 |
    > 294 |       expect(consoleSpy).toHaveBeenCalledWith(
          |                          ^
      295 |         'Error handling WebSocket message:',
      296 |         expect.any(Error)
      297 |       );

      at Object.toHaveBeenCalledWith (src/services/__tests__/realtimeService.test.ts:294:26)

  â— RealtimeService â€º subscriptions â€º should not subscribe to same box twice

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      327 |       await realtimeService.subscribeToBox('box1');
      328 |
    > 329 |       expect(mockWebSocket.send).toHaveBeenCalledTimes(1);
          |                                  ^
      330 |     });
      331 |
      332 |     it('should subscribe to order updates', async () => {

      at Object.toHaveBeenCalledTimes (src/services/__tests__/realtimeService.test.ts:329:34)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— RealtimeService â€º connection state â€º should return correct connection state

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      367 |   describe('connection state', () => {
      368 |     it('should return correct connection state', () => {
    > 369 |       expect(realtimeService.isConnected()).toBe(false);
          |                                             ^
      370 |
      371 |       // Mock connected state
      372 |       mockWebSocket.readyState = WebSocket.OPEN;

      at Object.toBe (src/services/__tests__/realtimeService.test.ts:369:45)

FAIL src/components/__tests__/NotificationCard.test.tsx
  â— NotificationCard â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render notification title and message

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render unread notification with badge

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render read notification without badge

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º FormataÃ§Ã£o de Data â€º should format date as minutes ago for recent notifications

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º FormataÃ§Ã£o de Data â€º should format date as hours ago

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º FormataÃ§Ã£o de Data â€º should format date as "Ontem" for yesterday

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º FormataÃ§Ã£o de Data â€º should format date as days ago for older notifications

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º Ãcones e Cores por Tipo â€º should show package icon for order notifications

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º Ãcones e Cores por Tipo â€º should show tag icon for promotion notifications

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º Ãcones e Cores por Tipo â€º should show gift icon for box_opening notifications

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º Ãcones e Cores por Tipo â€º should show star icon for review notifications

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º Ãcones e Cores por Tipo â€º should show default bell icon for unknown type

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º AÃ§Ãµes â€º should mark notification as read when mark as read is pressed

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º AÃ§Ãµes â€º should delete notification when delete is pressed

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

  â— NotificationCard â€º Estilos Customizados â€º should apply custom style prop

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       notifications: notificationsSlice.reducer,
         |                                         ^
      38 |     },
      39 |     preloadedState: {
      40 |       notifications: {

      at reducer (src/components/__tests__/NotificationCard.test.tsx:37:41)
      at Object.createMockStore (src/components/__tests__/NotificationCard.test.tsx:66:17)

FAIL src/test/integration/auth.integration.test.ts
  â— Authentication Integration Tests â€º User Registration â€º should register a new user successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Registration â€º should register a new user successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º User Registration â€º should handle registration with existing email

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Registration â€º should handle registration with existing email

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º User Registration â€º should handle registration with invalid data

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Registration â€º should handle registration with invalid data

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º User Login â€º should login with valid credentials

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Login â€º should login with valid credentials

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º User Login â€º should handle login with invalid credentials

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Login â€º should handle login with invalid credentials

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º User Login â€º should handle login with non-existent user

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Login â€º should handle login with non-existent user

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º User Logout â€º should logout successfully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º User Logout â€º should logout successfully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º Token Persistence â€º should persist token across app restarts

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º Token Persistence â€º should persist token across app restarts

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º Authentication State Management â€º should handle concurrent login attempts

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º Authentication State Management â€º should handle concurrent login attempts

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º Authentication State Management â€º should handle network errors gracefully

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º Authentication State Management â€º should handle network errors gracefully

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º Session Management â€º should handle token expiration

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º Session Management â€º should handle token expiration

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  â— Authentication Integration Tests â€º Session Management â€º should refresh token when needed

    TypeError: Cannot set properties of undefined (setting 'baseURL')

      59 | export const setupIntegrationTest = async () => {
      60 |   // Configure HTTP client for testing
    > 61 |   httpClient.defaults.baseURL = TEST_CONFIG.API_BASE_URL;
         |                              ^
      62 |   httpClient.defaults.timeout = TEST_CONFIG.TIMEOUT;
      63 |   
      64 |   // Clear any existing auth state

      at src/test/integration/setup.ts:61:30
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:59:34)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:21:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Authentication Integration Tests â€º Session Management â€º should refresh token when needed

    TypeError: Cannot read properties of undefined (reading 'headers')

      172 |     // Ignore logout errors in tests
      173 |   } finally {
    > 174 |     delete httpClient.defaults.headers.common.Authorization;
          |                                ^
      175 |   }
      176 | };
      177 |

      at headers (src/test/integration/setup.ts:174:32)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)


  â— Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'request')

      103 |   
      104 |   // Clear HTTP client interceptors
    > 105 |   httpClient.interceptors.request.clear();
          |                           ^
      106 |   httpClient.interceptors.response.clear();
      107 | };
      108 |

      at request (src/test/integration/setup.ts:105:27)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test/integration/setup.ts:100:36)
      at Object.<anonymous> (src/test/integration/auth.integration.test.ts:25:33)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/__tests__/integration/mfa.integration.test.ts
  â— Testes de IntegraÃ§Ã£o - MFA â€º Obter Status MFA â€º deve obter status MFA do backend

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      55 |       };
      56 |
    > 57 |       mockedHttpClient.get.mockResolvedValue({
         |                            ^
      58 |         data: mockStatus,
      59 |       } as any);
      60 |

      at Object.mockResolvedValue (src/services/__tests__/integration/mfa.integration.test.ts:57:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Obter Status MFA â€º deve retornar status quando MFA estÃ¡ habilitado

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      91 |       };
      92 |
    > 93 |       mockedHttpClient.get.mockResolvedValue({
         |                            ^
      94 |         data: mockStatus,
      95 |       } as any);
      96 |

      at Object.mockResolvedValue (src/services/__tests__/integration/mfa.integration.test.ts:93:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Habilitar MFA â€º deve habilitar MFA com sucesso

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      121 |       };
      122 |
    > 123 |       mockedHttpClient.post.mockResolvedValue({
          |                             ^
      124 |         data: mockResponse,
      125 |       } as any);
      126 |

      at Object.mockResolvedValue (src/services/__tests__/integration/mfa.integration.test.ts:123:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Habilitar MFA â€º deve lanÃ§ar erro quando habilitar MFA falha

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      145 |     it('deve lanÃ§ar erro quando habilitar MFA falha', async () => {
      146 |       // Arrange
    > 147 |       mockedHttpClient.post.mockRejectedValue(new Error('Failed to enable MFA'));
          |                             ^
      148 |
      149 |       // Act & Assert
      150 |       await expect(mfaService.enable()).rejects.toThrow('Failed to enable MFA');

      at Object.mockRejectedValue (src/services/__tests__/integration/mfa.integration.test.ts:147:29)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Desabilitar MFA â€º deve desabilitar MFA com sucesso

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      160 |       };
      161 |
    > 162 |       mockedHttpClient.delete.mockResolvedValue({
          |                               ^
      163 |         data: mockResponse,
      164 |       } as any);
      165 |

      at Object.mockResolvedValue (src/services/__tests__/integration/mfa.integration.test.ts:162:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Desabilitar MFA â€º deve lanÃ§ar erro quando desabilitar MFA falha

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

      184 |     it('deve lanÃ§ar erro quando desabilitar MFA falha', async () => {
      185 |       // Arrange
    > 186 |       mockedHttpClient.delete.mockRejectedValue(new Error('Failed to disable MFA'));
          |                               ^
      187 |
      188 |       // Act & Assert
      189 |       await expect(mfaService.disable('cred-1')).rejects.toThrow('Failed to disable MFA');

      at Object.mockRejectedValue (src/services/__tests__/integration/mfa.integration.test.ts:186:31)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Verificar Necessidade de Setup â€º deve retornar true quando MFA nÃ£o estÃ¡ habilitado

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      200 |       };
      201 |
    > 202 |       mockedHttpClient.get.mockResolvedValue({
          |                            ^
      203 |         data: mockStatus,
      204 |       } as any);
      205 |

      at Object.mockResolvedValue (src/services/__tests__/integration/mfa.integration.test.ts:202:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Verificar Necessidade de Setup â€º deve retornar false quando MFA estÃ¡ habilitado

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      226 |       };
      227 |
    > 228 |       mockedHttpClient.get.mockResolvedValue({
          |                            ^
      229 |         data: mockStatus,
      230 |       } as any);
      231 |

      at Object.mockResolvedValue (src/services/__tests__/integration/mfa.integration.test.ts:228:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— Testes de IntegraÃ§Ã£o - MFA â€º Fluxo Completo MFA â€º deve completar fluxo completo: habilitar â†’ verificar â†’ desabilitar

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValueOnce')

      241 |     it('deve completar fluxo completo: habilitar â†’ verificar â†’ desabilitar', async () => {
      242 |       // Arrange - Status inicial: MFA desabilitado
    > 243 |       mockedHttpClient.get.mockResolvedValueOnce({
          |                            ^
      244 |         data: {
      245 |           mfaEnabled: false,
      246 |           mfaType: null,

      at Object.mockResolvedValueOnce (src/services/__tests__/integration/mfa.integration.test.ts:243:28)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/screens/__tests__/SettingsScreen.test.tsx
  â— SettingsScreen â€º RenderizaÃ§Ã£o Inicial â€º deve renderizar a tela corretamente

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:75:35)

  â— SettingsScreen â€º RenderizaÃ§Ã£o Inicial â€º deve exibir informaÃ§Ãµes do usuÃ¡rio

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:86:35)

  â— SettingsScreen â€º RenderizaÃ§Ã£o Inicial â€º deve exibir informaÃ§Ãµes Keycloak Realm

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:98:35)

  â— SettingsScreen â€º Logout â€º deve mostrar confirmaÃ§Ã£o antes de fazer logout

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:112:35)

  â— SettingsScreen â€º Logout â€º deve executar logout quando confirmado

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:142:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— SettingsScreen â€º Logout â€º nÃ£o deve executar logout quando cancelado

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:167:35)

  â— SettingsScreen â€º ConfiguraÃ§Ãµes Gerais â€º deve exibir opÃ§Ã£o de trocar ambiente

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:184:35)

  â— SettingsScreen â€º ConfiguraÃ§Ãµes Gerais â€º deve mostrar alerta ao tentar trocar ambiente

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:196:35)

  â— SettingsScreen â€º ConfiguraÃ§Ãµes Gerais â€º deve exibir opÃ§Ã£o de limpar dados

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:218:35)

  â— SettingsScreen â€º ConfiguraÃ§Ãµes Gerais â€º deve mostrar confirmaÃ§Ã£o antes de limpar dados

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:230:35)

  â— SettingsScreen â€º Estado de Loading â€º deve desabilitar botÃµes durante loading

    TypeError: Cannot read properties of undefined (reading 'Item')

      112 |           <Card.Content>
      113 |             <Title>Ambiente</Title>
    > 114 |             <List.Item
          |                   ^
      115 |               title="Ambiente Atual"
      116 |               description={env.NODE_ENV}
      117 |               left={props => <List.Icon {...props} icon="earth" />}

      at Item (src/screens/SettingsScreen.tsx:114:19)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/SettingsScreen.test.tsx:258:35)

FAIL src/screens/__tests__/HomeScreen.test.tsx
  â— HomeScreen â€º RenderizaÃ§Ã£o Inicial â€º deve renderizar a tela corretamente

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:107:35)

  â— HomeScreen â€º RenderizaÃ§Ã£o Inicial â€º deve exibir botÃ£o de teste Keycloak

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:118:35)

  â— HomeScreen â€º RenderizaÃ§Ã£o Inicial â€º deve exibir botÃ£o de informaÃ§Ãµes do app

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:129:35)

  â— HomeScreen â€º Teste de ConexÃ£o Keycloak â€º deve testar conexÃ£o Keycloak com sucesso

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:144:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HomeScreen â€º Teste de ConexÃ£o Keycloak â€º deve tratar erro quando Keycloak nÃ£o estÃ¡ autenticado

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:167:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HomeScreen â€º Teste de ConexÃ£o Keycloak â€º deve tratar erro quando teste Keycloak falha

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:191:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HomeScreen â€º Teste de ConexÃ£o Keycloak â€º deve mostrar loading durante teste Keycloak

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:217:35)
      at asyncGeneratorStep (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  â— HomeScreen â€º ExibiÃ§Ã£o de InformaÃ§Ãµes do App â€º deve exibir informaÃ§Ãµes do app ao clicar no botÃ£o

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:236:35)

  â— HomeScreen â€º IntegraÃ§Ã£o com Componentes â€º deve renderizar componentes Realtime

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:256:42)

  â— HomeScreen â€º IntegraÃ§Ã£o com Componentes â€º deve renderizar componentes Offline

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:269:13)

  â— HomeScreen â€º IntegraÃ§Ã£o com Componentes â€º deve renderizar componentes Analytics

    TypeError: Cannot read properties of undefined (reading 'notifications')

      362 |
      363 | // Selectors
    > 364 | export const selectNotifications = (state: { notifications: NotificationsState }) => state.notifications.notifications;
          |                                                                                                          ^
      365 | export const selectUnreadCount = (state: { notifications: NotificationsState }) => state.notifications.unreadCount;
      366 | export const selectNotificationSettings = (state: { notifications: NotificationsState }) => state.notifications.settings;
      367 | export const selectNotificationsLoading = (state: { notifications: NotificationsState }) => state.notifications.isLoading;

      at notifications (src/store/slices/notificationsSlice.ts:364:106)
      at selectNotifications (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
      at memoizedSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
      at node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
      at mountSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6816:20)
      at Object.useSyncExternalStore (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7701:14)
      at useSyncExternalStore (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:1676:21)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (node_modules/.pnpm/use-sync-external-store@1.6.0_react@18.2.0/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
      at useSelector2 (node_modules/.pnpm/react-redux@9.2.0_@types+react@18.3.26_react@18.2.0_redux@5.0.1/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
      at useNotifications (src/hooks/useNotifications.ts:43:36)
      at useLiveNotifications (src/hooks/useLiveNotifications.ts:46:40)
      at HomeScreen (src/screens/HomeScreen.tsx:45:62)
      at renderWithHooks (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6351:18)
      at mountIndeterminateComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9855:13)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11312:16)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/HomeScreen.test.tsx:281:13)

FAIL src/test/mocks/keycloak-mock-examples.test.ts
  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve fazer login com sucesso (usuÃ¡rio padrÃ£o)

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve fazer login com sucesso (usuÃ¡rio padrÃ£o)

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve fazer login como admin

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve fazer login como admin

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve renovar tokens com sucesso

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve renovar tokens com sucesso

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve fazer logout com sucesso

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios BÃ¡sicos â€º deve fazer logout com sucesso

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com erro de rede

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com erro de rede

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com credenciais invÃ¡lidas

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com credenciais invÃ¡lidas

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com timeout

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com timeout

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com erro 500

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º CenÃ¡rios de Erro â€º deve falhar com erro 500

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º SimulaÃ§Ã£o de LatÃªncia â€º deve simular latÃªncia de 500ms

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º SimulaÃ§Ã£o de LatÃªncia â€º deve simular latÃªncia de 500ms

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ValidaÃ§Ã£o de JWT â€º deve gerar ID token JWT vÃ¡lido

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ValidaÃ§Ã£o de JWT â€º deve gerar ID token JWT vÃ¡lido

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ValidaÃ§Ã£o de JWT â€º deve conter claims corretos no ID token

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ValidaÃ§Ã£o de JWT â€º deve conter claims corretos no ID token

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ExpiraÃ§Ã£o de Tokens â€º deve detectar token expirado

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ExpiraÃ§Ã£o de Tokens â€º deve detectar token expirado

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ExpiraÃ§Ã£o de Tokens â€º deve renovar token expirado

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:43:14)

  â— Keycloak Mocks - Exemplos de Uso â€º ExpiraÃ§Ã£o de Tokens â€º deve renovar token expirado

    TypeError: Cannot read properties of undefined (reading 'reset')

      326 |  */
      327 | export const resetMock = () => {
    > 328 |   __mockHelpers.reset();
          |                 ^
      329 | };
      330 |
      331 | // ==================== DADOS DE TESTE REUTILIZÃVEIS ====================

      at reset (__mocks__/keycloakTestHelpers.ts:328:17)
      at Object.<anonymous> (src/test/mocks/keycloak-mock-examples.test.ts:47:14)

FAIL src/components/__tests__/FavoriteButton.test.tsx
  â— FavoriteButton â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render favorite button

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render unfilled heart icon when not favorite

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render filled heart icon when favorite

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º Toggle de Favorito â€º should toggle favorite when pressed

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º Toggle de Favorito â€º should call onPress callback when toggled

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º Toggle de Favorito â€º should not toggle when disabled

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º Toggle de Favorito â€º should not toggle when updating

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º CustomizaÃ§Ã£o â€º should apply custom size

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

  â— FavoriteButton â€º CustomizaÃ§Ã£o â€º should apply custom style

    TypeError: Cannot read properties of undefined (reading 'reducer')

      35 |   return configureStore({
      36 |     reducer: {
    > 37 |       favorites: favoritesSlice.reducer,
         |                                 ^
      38 |     },
      39 |     preloadedState: {
      40 |       favorites: {

      at reducer (src/components/__tests__/FavoriteButton.test.tsx:37:33)
      at Object.createMockStore (src/components/__tests__/FavoriteButton.test.tsx:55:17)

FAIL src/components/__tests__/LoadingScreen.test.tsx
  â— LoadingScreen â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render loading screen

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `LoadingScreen`.

      18 |   describe('RenderizaÃ§Ã£o BÃ¡sica', () => {
      19 |     it('should render loading screen', () => {
    > 20 |       render(<LoadingScreen />);
         |             ^
      21 |
      22 |       expect(screen.getByText('Carregando...')).toBeTruthy();
      23 |     });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/LoadingScreen.test.tsx:20:13)

  â— LoadingScreen â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render ActivityIndicator

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `LoadingScreen`.

      24 |
      25 |     it('should render ActivityIndicator', () => {
    > 26 |       render(<LoadingScreen />);
         |             ^
      27 |
      28 |       const indicator = screen.UNSAFE_getByType('ActivityIndicator');
      29 |       expect(indicator).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/LoadingScreen.test.tsx:26:13)

  â— LoadingScreen â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render loading text

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `LoadingScreen`.

      32 |
      33 |     it('should render loading text', () => {
    > 34 |       render(<LoadingScreen />);
         |             ^
      35 |
      36 |       const text = screen.getByText('Carregando...');
      37 |       expect(text).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/LoadingScreen.test.tsx:34:13)

  â— LoadingScreen â€º Estrutura â€º should have correct container structure

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `LoadingScreen`.

      41 |   describe('Estrutura', () => {
      42 |     it('should have correct container structure', () => {
    > 43 |       render(<LoadingScreen />);
         |             ^
      44 |
      45 |       const container = screen.UNSAFE_getByType('View');
      46 |       expect(container).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at createChild (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5202:28)
      at reconcileChildrenArray (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5492:25)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5884:16)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/LoadingScreen.test.tsx:43:13)

FAIL src/components/__tests__/ErrorMessage.test.tsx
  â— ErrorMessage â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render error message with default title

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      19 |   describe('RenderizaÃ§Ã£o BÃ¡sica', () => {
      20 |     it('should render error message with default title', () => {
    > 21 |       render(<ErrorMessage message="Test error message" />);
         |             ^
      22 |
      23 |       expect(screen.getByText('Ops! Algo deu errado')).toBeTruthy();
      24 |       expect(screen.getByText('Test error message')).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:21:13)

  â— ErrorMessage â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render custom title

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      26 |
      27 |     it('should render custom title', () => {
    > 28 |       render(
         |             ^
      29 |         <ErrorMessage message="Test error" title="Custom Error Title" />
      30 |       );
      31 |

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:28:13)

  â— ErrorMessage â€º RenderizaÃ§Ã£o BÃ¡sica â€º should render icon by default

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      35 |
      36 |     it('should render icon by default', () => {
    > 37 |       render(<ErrorMessage message="Test error" />);
         |             ^
      38 |
      39 |       const icon = screen.UNSAFE_getByType('Icon');
      40 |       expect(icon).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:37:13)

  â— ErrorMessage â€º RenderizaÃ§Ã£o BÃ¡sica â€º should not render icon when showIcon is false

    TypeError: _reactNative.screen.queryAllByType is not a function

      45 |       render(<ErrorMessage message="Test error" showIcon={false} />);
      46 |
    > 47 |       const icons = screen.queryAllByType('Icon');
         |                            ^
      48 |       expect(icons.length).toBe(0);
      49 |     });
      50 |   });

      at Object.queryAllByType (src/components/__tests__/ErrorMessage.test.tsx:47:28)

  â— ErrorMessage â€º Variantes â€º should render default variant

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      52 |   describe('Variantes', () => {
      53 |     it('should render default variant', () => {
    > 54 |       render(<ErrorMessage message="Test error" variant="default" />);
         |             ^
      55 |
      56 |       expect(screen.getByText('Ops! Algo deu errado')).toBeTruthy();
      57 |       expect(screen.getByText('Test error')).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:54:13)

  â— ErrorMessage â€º Variantes â€º should render card variant

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      65 |
      66 |     it('should render card variant', () => {
    > 67 |       render(<ErrorMessage message="Test error" variant="card" />);
         |             ^
      68 |
      69 |       expect(screen.getByText('Ops! Algo deu errado')).toBeTruthy();
      70 |       expect(screen.getByText('Test error')).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:67:13)

  â— ErrorMessage â€º AÃ§Ã£o de Retry â€º should render retry button when onRetry is provided

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      76 |       const onRetry = jest.fn();
      77 |
    > 78 |       render(<ErrorMessage message="Test error" onRetry={onRetry} />);
         |             ^
      79 |
      80 |       const retryButton = screen.getByText('Tentar novamente');
      81 |       expect(retryButton).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:78:13)

  â— ErrorMessage â€º AÃ§Ã£o de Retry â€º should call onRetry when retry button is pressed

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      85 |       const onRetry = jest.fn();
      86 |
    > 87 |       render(<ErrorMessage message="Test error" onRetry={onRetry} />);
         |             ^
      88 |
      89 |       const retryButton = screen.getByText('Tentar novamente');
      90 |       fireEvent.press(retryButton);

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:87:13)

  â— ErrorMessage â€º AÃ§Ã£o de Retry â€º should use custom retry text

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

       96 |       const onRetry = jest.fn();
       97 |
    >  98 |       render(
          |             ^
       99 |         <ErrorMessage
      100 |           message="Test error"
      101 |           onRetry={onRetry}

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:98:13)

  â— ErrorMessage â€º AÃ§Ã£o de Retry â€º should not render retry button when onRetry is not provided

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      108 |
      109 |     it('should not render retry button when onRetry is not provided', () => {
    > 110 |       render(<ErrorMessage message="Test error" />);
          |             ^
      111 |
      112 |       expect(screen.queryByText('Tentar novamente')).toBeNull();
      113 |     });

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:110:13)

  â— ErrorMessage â€º Estilos Customizados â€º should apply custom style prop

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `ErrorMessage`.

      118 |       const customStyle = { marginTop: 20 };
      119 |
    > 120 |       render(<ErrorMessage message="Test error" style={customStyle} />);
          |             ^
      121 |
      122 |       const container = screen.UNSAFE_getByType('View');
      123 |       expect(container).toBeTruthy();

      at createFiberFromTypeAndProps (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17518:17)
      at createFiberFromElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:17544:15)
      at reconcileSingleElement (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5813:23)
      at reconcileChildFibers (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5871:35)
      at reconcileChildren (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9096:28)
      at updateHostComponent (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9713:3)
      at beginWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11343:14)
      at performUnitOfWork (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15811:12)
      at workLoopSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15745:5)
      at renderRootSync (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15717:7)
      at recoverFromConcurrentError (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15187:20)
      at performConcurrentWorkOnRoot (node_modules/.pnpm/react-test-renderer@18.2.0_react@18.2.0/node_modules/react-test-renderer/cjs/react-test-renderer.development.js:15087:22)
      at flushActQueue (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js:2582:11)
      at actImplementation (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/.pnpm/@testing-library+react-native@13.3.3_jest@29.7.0_@types+node@24.9.2__react-native@0.80._d338f19384c6f6ab03192447511849f8/node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ErrorMessage.test.tsx:120:13)


TypeError: Cannot read properties of undefined (reading 'isSet')
    at SummaryReporter._getTestSummary (/mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/node_modules/@jest/reporters/build/index.js:1560:33)
    at SummaryReporter.onRunComplete (/mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/node_modules/@jest/reporters/build/index.js:1506:104)
    at ReporterDispatcher.onRunComplete (/mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/jest@29.7.0_@types+node@24.9.2/node_modules/@jest/core/build/ReporterDispatcher.js:71:24)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TestScheduler.scheduleTests (/mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/jest@29.7.0_@types+node@24.9.2/node_modules/@jest/core/build/TestScheduler.js:306:5)
    at async runJest (/mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/jest@29.7.0_@types+node@24.9.2/node_modules/@jest/core/build/runJest.js:367:19)
    at async _run10000 (/mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/jest@29.7.0_@types+node@24.9.2/node_modules/@jest/core/build/cli/index.js:343:7)
    at async runCLI (/mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/jest@29.7.0_@types+node@24.9.2/node_modules/@jest/core/build/cli/index.js:198:3)
    at async Object.run (/mnt/overpower/apps/dev/agl/crowbar/crowbar-mobile/node_modules/.pnpm/jest@29.7.0_@types+node@24.9.2/node_modules/jest-cli/build/run.js:130:37)
